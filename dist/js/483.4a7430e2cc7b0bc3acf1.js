/*! For license information please see 483.4a7430e2cc7b0bc3acf1.js.LICENSE.txt */
(self.webpackChunkprism=self.webpackChunkprism||[]).push([[483],{8:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6773);t.debounce=function(e,t=0,r={}){"object"!=typeof r&&(r={});const{leading:i=!1,trailing:a=!0,maxWait:s}=r,o=Array(2);let l;i&&(o[0]="leading"),a&&(o[1]="trailing");let u=null;const c=n.debounce(function(...t){l=e.apply(this,t),u=null},t,{edges:o}),d=function(...t){return null!=s&&(null===u&&(u=Date.now()),Date.now()-u>=s)?(l=e.apply(this,t),u=Date.now(),c.cancel(),c.schedule(),l):(c.apply(this,t),l)};return d.cancel=c.cancel,d.flush=()=>(c.flush(),l),d}},25:(e,t,r)=>{e.exports=r(1334).last},58:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9181);t.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&n.isLength(e.length)}},184:(e,t,r)=>{e.exports=r(4259).sortBy},305:(e,t,r)=>{e.exports=r(4200).get},316:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8509),i=r(58),a=r(4905),s=r(6761);t.isIterateeCall=function(e,t,r){return!!a.isObject(r)&&!!("number"==typeof t&&i.isArrayLike(r)&&n.isIndex(t)&&t<r.length||"string"==typeof t&&t in r)&&s.eq(r[t],e)}},523:(e,t,r)=>{"use strict";r.d(t,{q:()=>n});var n=(e,t,r,n)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(i="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=n?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===i});var i}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},645:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},717:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8273);t.isMatch=function(e,t){return n.isMatchWith(e,t,()=>{})}},732:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var n=e=>e.options.tooltipPayloadSearcher},830:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(3929);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=(e,t,r)=>e+(t-e)*r,l=e=>{var{from:t,to:r}=e;return t!==r},u=(e,t,r)=>{var i=(0,n.s8)((t,r)=>{if(l(r)){var[n,i]=e(r.from,r.to,r.velocity);return a(a({},r),{},{from:n,velocity:i})}return r},t);return r<1?(0,n.s8)((e,t)=>l(t)?a(a({},t),{},{velocity:o(t.velocity,i[e].velocity,r),from:o(t.from,i[e].from,r)}):t,t):u(e,i,r-1)};const c=(e,t,r,i,s,c)=>{var d=(0,n.mP)(e,t);return!0===r.isStepper?function(e,t,r,i,s,o){var c,d=i.reduce((r,n)=>a(a({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),h=null,f=i=>{c||(c=i);var p=(i-c)/r.dt;d=u(r,d,p),s(a(a(a({},e),t),(0,n.s8)((e,t)=>t.from,d))),c=i,Object.values(d).filter(l).length&&(h=o.setTimeout(f))};return()=>(h=o.setTimeout(f),()=>{h()})}(e,t,r,d,s,c):function(e,t,r,i,s,l,u){var c,d=null,h=s.reduce((r,n)=>a(a({},r),{},{[n]:[e[n],t[n]]}),{}),f=s=>{c||(c=s);var p=(s-c)/i,g=(0,n.s8)((e,t)=>o(...t,r(p)),h);if(l(a(a(a({},e),t),g)),p<1)d=u.setTimeout(f);else{var m=(0,n.s8)((e,t)=>o(...t,r(1)),h);l(a(a(a({},e),t),m))}};return()=>(d=u.setTimeout(f),()=>{d()})}(e,t,r,i,d,s,c)}},961:(e,t,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(6221)},993:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(7074),i=r(6012),a=r(2049),s=r(9184),o=r(6761);function l(e,t,r,n,i,a,s){const o=s(e,t,r,n,i,a);if(void 0!==o)return o;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return u(e,t,a,s)}return u(e,t,a,s)}function u(e,t,r,c){if(Object.is(e,t))return!0;let d=a.getTag(e),h=a.getTag(t);if(d===s.argumentsTag&&(d=s.objectTag),h===s.argumentsTag&&(h=s.objectTag),d!==h)return!1;switch(d){case s.stringTag:return e.toString()===t.toString();case s.numberTag:{const r=e.valueOf(),n=t.valueOf();return o.eq(r,n)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(e.valueOf(),t.valueOf());case s.regexpTag:return e.source===t.source&&e.flags===t.flags;case s.functionTag:return e===t}const f=(r=r??new Map).get(e),p=r.get(t);if(null!=f&&null!=p)return f===t;r.set(e,t),r.set(t,e);try{switch(d){case s.mapTag:if(e.size!==t.size)return!1;for(const[n,i]of e.entries())if(!t.has(n)||!l(i,t.get(n),n,e,t,r,c))return!1;return!0;case s.setTag:{if(e.size!==t.size)return!1;const n=Array.from(e.values()),i=Array.from(t.values());for(let a=0;a<n.length;a++){const s=n[a],o=i.findIndex(n=>l(s,n,void 0,e,t,r,c));if(-1===o)return!1;i.splice(o,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:if("undefined"!=typeof Buffer&&Buffer.isBuffer(e)!==Buffer.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!l(e[n],t[n],n,e,t,r,c))return!1;return!0;case s.arrayBufferTag:return e.byteLength===t.byteLength&&u(new Uint8Array(e),new Uint8Array(t),r,c);case s.dataViewTag:return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&u(new Uint8Array(e),new Uint8Array(t),r,c);case s.errorTag:return e.name===t.name&&e.message===t.message;case s.objectTag:{if(!(u(e.constructor,t.constructor,r,c)||n.isPlainObject(e)&&n.isPlainObject(t)))return!1;const a=[...Object.keys(e),...i.getSymbols(e)],s=[...Object.keys(t),...i.getSymbols(t)];if(a.length!==s.length)return!1;for(let n=0;n<a.length;n++){const i=a[n],s=e[i];if(!Object.hasOwn(t,i))return!1;if(!l(s,t[i],i,e,t,r,c))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}t.isEqualWith=function(e,t,r){return l(e,t,void 0,void 0,void 0,void 0,r)}},1056:(e,t,r)=>{"use strict";r.d(t,{yl:()=>l});var n=1e-4,i=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],a=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),s=(e,t)=>r=>{var n=i(e,t);return a(n,r)},o=function(){for(var e,t,r,o,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];if(1===u.length)switch(u[0]){case"linear":[e,r,t,o]=[0,0,1,1];break;case"ease":[e,r,t,o]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,o]=[.42,0,1,1];break;case"ease-out":[e,r,t,o]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,o]=[0,0,.58,1];break;default:var d=u[0].split("(");"cubic-bezier"===d[0]&&4===d[1].split(")")[0].split(",").length&&([e,r,t,o]=d[1].split(")")[0].split(",").map(e=>parseFloat(e)))}else 4===u.length&&([e,r,t,o]=u);var h,f,p=s(e,t),g=s(r,o),m=(h=e,f=t,e=>{var t=[...i(h,f).map((e,t)=>e*t).slice(1),0];return a(t,e)}),y=e=>e>1?1:e<0?0:e,v=e=>{for(var t=e>1?1:e,r=t,i=0;i<8;++i){var a=p(r)-t,s=m(r);if(Math.abs(a-t)<n||s<n)return g(r);r=y(r-a/s)}return g(r)};return v.isStepper=!1,v},l=e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return o(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:i=17}=e,a=(e,a,s)=>{var o=s+(-(e-a)*t-s*r)*i/1e3,l=s*i/1e3+e;return Math.abs(l-a)<n&&Math.abs(o)<n?[a,0]:[l,o]};return a.isStepper=!0,a.dt=i,a}();default:if("cubic-bezier"===e.split("(")[0])return o(e)}return"function"==typeof e?e:null}},1081:(e,t,r)=>{e.exports=r(2810).uniqBy},1096:(e,t,r)=>{"use strict";r.d(t,{m:()=>Ce});var n=r(6540),i=r(961),a=r(184),s=r.n(a),o=r(4164),l=r(9744);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(null,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return Array.isArray(e)&&(0,l.vh)(e[0])&&(0,l.vh)(e[1])?e.join(" ~ "):e}var p=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:i={},labelStyle:a={},payload:c,formatter:h,itemSorter:p,wrapperClassName:g,labelClassName:m,label:y,labelFormatter:v,accessibilityLayer:b=!1}=e,E=d({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),S=d({margin:0},a),T=!(0,l.uy)(y),w=T?y:"",A=(0,o.$)("recharts-default-tooltip",g),k=(0,o.$)("recharts-tooltip-label",m);T&&v&&null!=c&&(w=v(y,c));var x=b?{role:"status","aria-live":"assertive"}:{};return n.createElement("div",u({className:A,style:E},x),n.createElement("p",{className:k,style:S},n.isValidElement(w)?w:"".concat(w)),(()=>{if(c&&c.length){var e=(p?s()(c,p):c).map((e,r)=>{if("none"===e.type)return null;var a=e.formatter||h||f,{value:s,name:o}=e,u=s,p=o;if(a){var g=a(s,o,e,r,c);if(Array.isArray(g))[u,p]=g;else{if(null==g)return null;u=g}}var m=d({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i);return n.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(r),style:m},(0,l.vh)(p)?n.createElement("span",{className:"recharts-tooltip-item-name"},p):null,(0,l.vh)(p)?n.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,n.createElement("span",{className:"recharts-tooltip-item-value"},u),n.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return n.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},g="recharts-tooltip-wrapper",m={visibility:"hidden"};function y(e){var{coordinate:t,translateX:r,translateY:n}=e;return(0,o.$)(g,{["".concat(g,"-right")]:(0,l.Et)(r)&&t&&(0,l.Et)(t.x)&&r>=t.x,["".concat(g,"-left")]:(0,l.Et)(r)&&t&&(0,l.Et)(t.x)&&r<t.x,["".concat(g,"-bottom")]:(0,l.Et)(n)&&t&&(0,l.Et)(t.y)&&n>=t.y,["".concat(g,"-top")]:(0,l.Et)(n)&&t&&(0,l.Et)(t.y)&&n<t.y})}function v(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:u,viewBoxDimension:c}=e;if(a&&(0,l.Et)(a[n]))return a[n];var d=r[n]-o-(i>0?i:0),h=r[n]+i;if(t[n])return s[n]?d:h;var f=u[n];return null==f?0:s[n]?d<f?Math.max(h,f):Math.max(d,f):null==c?0:h+o>f+c?Math.max(d,f):Math.max(h,f)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class T extends n.PureComponent{constructor(){super(...arguments),S(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),S(this,"handleKeyDown",e=>{var t,r,n,i;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(i=this.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==n?n:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:l,offset:u,position:c,reverseDirection:d,useTranslate3d:h,viewBox:f,wrapperStyle:p,lastBoundingBox:g,innerRef:b,hasPortalFromProps:S}=this.props,{cssClasses:T,cssProperties:w}=function(e){var t,r,n,{allowEscapeViewBox:i,coordinate:a,offsetTopLeft:s,position:o,reverseDirection:l,tooltipBox:u,useTranslate3d:c,viewBox:d}=e;return t=u.height>0&&u.width>0&&a?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=v({allowEscapeViewBox:i,coordinate:a,key:"x",offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:u.width,viewBox:d,viewBoxDimension:d.width}),translateY:n=v({allowEscapeViewBox:i,coordinate:a,key:"y",offsetTopLeft:s,position:o,reverseDirection:l,tooltipDimension:u.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):m,{cssProperties:t,cssClasses:y({translateX:r,translateY:n,coordinate:a})}}({allowEscapeViewBox:t,coordinate:s,offsetTopLeft:u,position:c,reverseDirection:d,tooltipBox:{height:g.height,width:g.width},useTranslate3d:h,viewBox:f}),A=S?{}:E(E({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),k=E(E({},A),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},p);return n.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:k,ref:b},a)}}var w=r(9938),A=r(9799),k=r(9287),x=r(2945),L=r(6583),P=r(9705),R=r(4501),_=["x","y","top","left","width","height","className"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(null,arguments)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=(e,t,r,n,i,a)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),M=e=>{var{x:t=0,y:r=0,top:i=0,left:a=0,width:s=0,height:u=0,className:c}=e,d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){C(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:t,y:r,top:i,left:a,width:s,height:u},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,_));return(0,l.Et)(t)&&(0,l.Et)(r)&&(0,l.Et)(s)&&(0,l.Et)(u)&&(0,l.Et)(i)&&(0,l.Et)(a)?n.createElement("path",O({},(0,R.J9)(d,!0),{className:(0,o.$)("recharts-cross",c),d:D(t,r,s,u,i,a)})):null},N=r(7404),F=r(7541),U=r.n(F),B=r(1056),$=r(830),j=r(3929),z=r(3014),G=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H.apply(null,arguments)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){W(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function W(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Y extends n.PureComponent{constructor(e,t){super(e,t),W(this,"mounted",!1),W(this,"manager",void 0),W(this,"stopJSAnimation",null),W(this,"unSubscribe",null);var{isActive:r,attributeName:n,from:i,to:a,children:s,duration:o,animationManager:l}=this.props;if(this.manager=l,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||o<=0)return this.state={style:{}},void("function"==typeof s&&(this.state={style:a}));if(i){if("function"==typeof s)return void(this.state={style:i});this.state={style:n?{[n]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:t}=this.props;this.mounted=!0,e&&t&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:t,canBegin:r,attributeName:n,shouldReAnimate:i,to:a,from:s}=this.props,{style:o}=this.state;if(r)if(t){if(!(U()(e.to,a)&&e.canBegin&&e.isActive)){var l=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=l||i?s:e.to;if(this.state&&o){var c={style:n?{[n]:u}:u};(n&&o[n]!==u||!n&&o!==u)&&this.setState(c)}this.runAnimation(V(V({},this.props),{},{from:u,begin:0}))}}else{var d={style:n?{[n]:a}:a};this.state&&o&&(n&&o[n]!==a||!n&&o!==a)&&this.setState(d)}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:t,to:r,duration:n,easing:i,begin:a,onAnimationEnd:s,onAnimationStart:o}=e,l=(0,$.A)(t,r,(0,B.yl)(i),n,this.changeStyle,this.manager.getTimeoutController());this.manager.start([o,a,()=>{this.stopJSAnimation=l()},n,s])}runAnimation(e){var{begin:t,duration:r,attributeName:n,to:i,easing:a,onAnimationStart:s,onAnimationEnd:o,children:l}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),"function"!=typeof a&&"function"!=typeof l&&"spring"!==a){var u=n?{[n]:i}:i,c=(0,j.dl)(Object.keys(u),r,a);this.manager.start([s,t,V(V({},u),{},{transition:c}),r,o])}else this.runJSAnimation(e)}render(){var e=this.props,{children:t,begin:r,duration:i,attributeName:a,easing:s,isActive:o,from:l,to:u,canBegin:c,onAnimationEnd:d,shouldReAnimate:h,onAnimationReStart:f,animationManager:p}=e,g=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,G),m=n.Children.count(t),y=this.state.style;if("function"==typeof t)return t(y);if(!o||0===m||i<=0)return t;var v=e=>{var{style:t={},className:r}=e.props;return(0,n.cloneElement)(e,V(V({},g),{},{style:V(V({},t),y),className:r}))};return 1===m?v(n.Children.only(t)):n.createElement("div",null,n.Children.map(t,e=>v(e)))}}function q(e){var t,r=(0,z.L)(null!==(t=e.attributeName)&&void 0!==t?t:Object.keys(e.to).join(","),e.animationManager);return n.createElement(Y,H({},e,{animationManager:r}))}function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X.apply(null,arguments)}W(Y,"displayName","Animate"),W(Y,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var Q=(e,t,r,n,i)=>{var a,s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,u=n>=0&&r>=0||n<0&&r<0?1:0;if(s>0&&i instanceof Array){for(var c=[0,0,0,0],d=0;d<4;d++)c[d]=i[d]>s?s:i[d];a="M".concat(e,",").concat(t+o*c[0]),c[0]>0&&(a+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(u,",").concat(e+l*c[0],",").concat(t)),a+="L ".concat(e+r-l*c[1],",").concat(t),c[1]>0&&(a+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(u,",\n        ").concat(e+r,",").concat(t+o*c[1])),a+="L ".concat(e+r,",").concat(t+n-o*c[2]),c[2]>0&&(a+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(u,",\n        ").concat(e+r-l*c[2],",").concat(t+n)),a+="L ".concat(e+l*c[3],",").concat(t+n),c[3]>0&&(a+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(u,",\n        ").concat(e,",").concat(t+n-o*c[3])),a+="Z"}else if(s>0&&i===+i&&i>0){var h=Math.min(s,i);a="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(u,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(u,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(u,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(u,",").concat(e,",").concat(t+n-o*h," Z")}else a="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return a},Z={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},J=e=>{var t=(0,N.e)(e,Z),r=(0,n.useRef)(null),[i,a]=(0,n.useState)(-1);(0,n.useEffect)(()=>{if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&a(e)}catch(e){}},[]);var{x:s,y:l,width:u,height:c,radius:d,className:h}=t,{animationEasing:f,animationDuration:p,animationBegin:g,isAnimationActive:m,isUpdateAnimationActive:y}=t;if(s!==+s||l!==+l||u!==+u||c!==+c||0===u||0===c)return null;var v=(0,o.$)("recharts-rectangle",h);return y?n.createElement(q,{canBegin:i>0,from:{width:u,height:c,x:s,y:l},to:{width:u,height:c,x:s,y:l},duration:p,animationEasing:f,isActive:y},e=>{var{width:a,height:s,x:o,y:l}=e;return n.createElement(q,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:m,easing:f},n.createElement("path",X({},(0,R.J9)(t,!0),{className:v,d:Q(o,l,a,s,d),ref:r})))}):n.createElement("path",X({},(0,R.J9)(t,!0),{className:v,d:Q(s,l,u,c,d)}))},ee=r(4040);function te(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e;return{points:[(0,ee.IZ)(t,r,n,i),(0,ee.IZ)(t,r,n,a)],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},re.apply(null,arguments)}var ne=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:l}=e,u=o*(s?1:-1)+n,c=Math.asin(o/u)/ee.Kg,d=l?i:i+a*c,h=l?i-a*c:i;return{center:(0,ee.IZ)(t,r,u,d),circleTangency:(0,ee.IZ)(t,r,n,d),lineTangency:(0,ee.IZ)(t,r,u*Math.cos(c*ee.Kg),h),theta:c}},ie=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=e,o=((e,t)=>(0,l.sA)(t-e)*Math.min(Math.abs(t-e),359.999))(a,s),u=a+o,c=(0,ee.IZ)(t,r,i,a),d=(0,ee.IZ)(t,r,i,u),h="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(a>u),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(n>0){var f=(0,ee.IZ)(t,r,n,a),p=(0,ee.IZ)(t,r,n,u);h+="L ".concat(p.x,",").concat(p.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(a<=u),",\n            ").concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},ae={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},se=e=>{var t=(0,N.e)(e,ae),{cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:u,forceCornerRadius:c,cornerIsExternal:d,startAngle:h,endAngle:f,className:p}=t;if(s<a||h===f)return null;var g,m=(0,o.$)("recharts-sector",p),y=s-a,v=(0,l.F4)(u,y,0,!0);return g=v>0&&Math.abs(h-f)<360?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:u,endAngle:c}=e,d=(0,l.sA)(c-u),{circleTangency:h,lineTangency:f,theta:p}=ne({cx:t,cy:r,radius:i,angle:u,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:g,lineTangency:m,theta:y}=ne({cx:t,cy:r,radius:i,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:o}),v=o?Math.abs(u-c):Math.abs(u-c)-p-y;if(v<0)return s?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*a,",0\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*-a,",0\n      "):ie({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:u,endAngle:c});var b="M ".concat(f.x,",").concat(f.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,"\n  ");if(n>0){var{circleTangency:E,lineTangency:S,theta:T}=ne({cx:t,cy:r,radius:n,angle:u,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:w,lineTangency:A,theta:k}=ne({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),x=o?Math.abs(u-c):Math.abs(u-c)-T-k;if(x<0&&0===a)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(A.x,",").concat(A.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(x>180),",").concat(+(d>0),",").concat(E.x,",").concat(E.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b})({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(v,y/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:h,endAngle:f}):ie({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:h,endAngle:f}),n.createElement("path",re({},(0,R.J9)(t,!0),{className:m,d:g}))};function oe(e,t,r){var n,i,a,s;if("horizontal"===e)a=n=t.x,i=r.top,s=r.top+r.height;else if("vertical"===e)s=i=t.y,n=r.left,a=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return te(t);var{cx:o,cy:l,innerRadius:u,outerRadius:c,angle:d}=t,h=(0,ee.IZ)(o,l,u,d),f=(0,ee.IZ)(o,l,c,d);n=h.x,i=h.y,a=f.x,s=f.y}return[{x:n,y:i},{x:a,y:s}]}var le=r(9082),ue=r(6470),ce=r(3032),de=r(7617);function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach(function(t){pe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pe(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge=()=>{var e=(0,le.G)(de.D),t=(0,le.G)(ce.R4),r=(0,le.G)(ce.fl);return(0,ue.Hj)(fe(fe({},e),{},{scale:r}),t)},me=r(7997);function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ye.apply(null,arguments)}function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach(function(t){Ee(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ee(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Se(e){var t,r,{coordinate:i,payload:a,index:s,offset:l,tooltipAxisBandSize:u,layout:c,cursor:d,tooltipEventType:h,chartName:f}=e,p=i,g=a,m=s;if(!d||!p||"ScatterChart"!==f&&"axis"!==h)return null;if("ScatterChart"===f)t=p,r=M;else if("BarChart"===f)t=function(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-i,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(c,p,l,u),r=J;else if("radial"===c){var{cx:y,cy:v,radius:b,startAngle:E,endAngle:S}=te(p);t={cx:y,cy:v,startAngle:E,endAngle:S,innerRadius:b,outerRadius:b},r=se}else t={points:oe(c,p,l)},r=P.I;var T="object"==typeof d&&"className"in d?d.className:void 0,w=be(be(be(be({stroke:"#ccc",pointerEvents:"none"},l),t),(0,R.J9)(d,!1)),{},{payload:g,payloadIndex:m,className:(0,o.$)("recharts-tooltip-cursor",T)});return(0,n.isValidElement)(d)?(0,n.cloneElement)(d,w):(0,n.createElement)(r,w)}function Te(e){var t=ge(),r=(0,k.W7)(),i=(0,k.WX)(),a=(0,me.fW)();return n.createElement(Se,ye({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:i,tooltipAxisBandSize:t,chartName:a}))}var we=r(4354),Ae=r(4531),ke=r(4274),xe=r(5978);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach(function(t){Re(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Re(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e){return e.dataKey}var Oe=[],Ie={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!w.m.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Ce(e){var t=(0,N.e)(e,Ie),{active:r,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:l,filterNull:u,isAnimationActive:c,offset:d,payloadUniqBy:h,position:f,reverseDirection:g,useTranslate3d:m,wrapperStyle:y,cursor:v,shared:b,trigger:E,defaultIndex:S,portal:w,axisId:P}=t,R=(0,le.j)(),_="number"==typeof S?String(S):S;(0,n.useEffect)(()=>{R((0,Ae.UF)({shared:b,trigger:E,axisId:P,active:r,defaultIndex:_}))},[R,b,E,P,r,_]);var O=(0,k.sk)(),I=(0,x.$)(),C=(0,xe.Td)(b),{activeIndex:D,isActive:M}=(0,le.G)(e=>(0,me.yn)(e,C,E,_)),F=(0,le.G)(e=>(0,me.u9)(e,C,E,_)),U=(0,le.G)(e=>(0,me.BZ)(e,C,E,_)),B=(0,le.G)(e=>(0,me.dS)(e,C,E,_)),$=F,j=(0,we.X)(),z=null!=r?r:M,[G,H]=(0,L.V)([$,z]),K="axis"===C?U:void 0;(0,ke.m7)(C,E,B,K,D,z);var V=null!=w?w:j;if(null==V)return null;var W=null!=$?$:Oe;z||(W=Oe),u&&W.length&&(W=(0,A.s)($.filter(e=>null!=e.value&&(!0!==e.hide||t.includeHidden)),h,_e));var Y=W.length>0,q=n.createElement(T,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:c,active:z,coordinate:B,hasPayload:Y,offset:d,position:f,reverseDirection:g,useTranslate3d:m,viewBox:O,wrapperStyle:y,lastBoundingBox:G,innerRef:H,hasPortalFromProps:Boolean(w)},function(e,t){return n.isValidElement(e)?n.cloneElement(e,t):"function"==typeof e?n.createElement(e,t):n.createElement(p,t)}(l,Pe(Pe({},t),{},{payload:W,label:K,active:z,coordinate:B,accessibilityLayer:I})));return n.createElement(n.Fragment,null,(0,i.createPortal)(q,V),z&&n.createElement(Te,{cursor:v,tooltipEventType:C,coordinate:B,payload:$,index:D}))}},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1174:(e,t,r)=>{"use strict";r.d(t,{E:()=>P});var n=r(6540),i=r(4164),a=r(9744),s=r(9938),o=r(4501),l=r(2747),u=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,c=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,d=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,h=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,f={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},p=Object.keys(f),g="NaN";class m{static parse(e){var t,[,r,n]=null!==(t=h.exec(e))&&void 0!==t?t:[];return new m(parseFloat(r),null!=n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,(0,a.M8)(e)&&(this.unit=""),""===t||d.test(t)||(this.num=NaN,this.unit=""),p.includes(t)&&(this.num=function(e,t){return e*f[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new m(NaN,""):new m(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new m(NaN,""):new m(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new m(NaN,""):new m(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new m(NaN,""):new m(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return(0,a.M8)(this.num)}}function y(e){if(e.includes(g))return g;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=null!==(r=u.exec(t))&&void 0!==r?r:[],s=m.parse(null!=n?n:""),o=m.parse(null!=a?a:""),l="*"===i?s.multiply(o):s.divide(o);if(l.isNaN())return g;t=t.replace(u,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,f,p]=null!==(d=c.exec(t))&&void 0!==d?d:[],y=m.parse(null!=h?h:""),v=m.parse(null!=p?p:""),b="+"===f?y.add(v):y.subtract(v);if(b.isNaN())return g;t=t.replace(c,b.toString())}return t}var v=/\(([^()]*)\)/;function b(e){var t=function(e){try{return function(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=v.exec(r));){var[,n]=t;r=r.replace(v,y(n))}return r}(t),y(t)}(e)}catch(e){return g}}(e.slice(5,-1));return t===g?"":t}var E=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],S=["dx","dy","angle","className","breakAll"];function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T.apply(null,arguments)}function w(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var A=/[ \f\n\r\t\v\u2028\u2029]+/,k=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];return(0,a.uy)(t)||(i=r?t.toString().split(""):t.toString().split(A)),{wordsWithComputedWidth:i.map(e=>({word:e,width:(0,l.Pu)(e,n).width})),spaceWidth:r?0:(0,l.Pu)(" ",n).width}}catch(e){return null}},x=e=>[{words:(0,a.uy)(e)?[]:e.toString().split(A)}],L="#808080",P=(0,n.forwardRef)((e,t)=>{var{x:r=0,y:l=0,lineHeight:u="1em",capHeight:c="0.71em",scaleToFit:d=!1,textAnchor:h="start",verticalAnchor:f="end",fill:p=L}=e,g=w(e,E),m=(0,n.useMemo)(()=>(e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:o,maxLines:l}=e;if((t||r)&&!s.m.isSsr){var u=k({breakAll:o,children:n,style:i});if(!u)return x(n);var{wordsWithComputedWidth:c,spaceWidth:d}=u;return((e,t,r,n,i)=>{var{maxLines:s,children:o,style:l,breakAll:u}=e,c=(0,a.Et)(s),d=o,h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{var{word:a,width:s}=t,o=e[e.length-1];if(o&&(null==n||i||o.width+s+r<Number(n)))o.words.push(a),o.width+=s+r;else{var l={words:[a],width:s};e.push(l)}return e},[])},f=h(t),p=e=>e.reduce((e,t)=>e.width>t.width?e:t);if(!c||i)return f;if(!(f.length>s||p(f).width>Number(n)))return f;for(var g,m=e=>{var t=d.slice(0,e),r=k({breakAll:u,style:l,children:t+"…"}).wordsWithComputedWidth,i=h(r);return[i.length>s||p(i).width>Number(n),i]},y=0,v=d.length-1,b=0;y<=v&&b<=d.length-1;){var E=Math.floor((y+v)/2),S=E-1,[T,w]=m(S),[A]=m(E);if(T||A||(y=E+1),T&&A&&(v=E-1),!T&&A){g=w;break}b++}return g||f})({breakAll:o,children:n,maxLines:l,style:i},c,d,t,r)}return x(n)})({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),{dx:y,dy:v,angle:A,className:P,breakAll:R}=g,_=w(g,S);if(!(0,a.vh)(r)||!(0,a.vh)(l))return null;var O,I=r+((0,a.Et)(y)?y:0),C=l+((0,a.Et)(v)?v:0);switch(f){case"start":O=b("calc(".concat(c,")"));break;case"middle":O=b("calc(".concat((m.length-1)/2," * -").concat(u," + (").concat(c," / 2))"));break;default:O=b("calc(".concat(m.length-1," * -").concat(u,")"))}var D=[];if(d){var M=m[0].width,{width:N}=g;D.push("scale(".concat((0,a.Et)(N)?N/M:1,")"))}return A&&D.push("rotate(".concat(A,", ").concat(I,", ").concat(C,")")),D.length&&(_.transform=D.join(" ")),n.createElement("text",T({},(0,o.J9)(_,!0),{ref:t,x:I,y:C,className:(0,i.$)("recharts-text",P),textAnchor:h,fill:p.includes("url")?L:p}),m.map((e,t)=>{var r=e.words.join(R?"":" ");return n.createElement("tspan",{x:I,dy:0===t?O:u,key:"".concat(r,"-").concat(t)},r)}))});P.displayName="Text"},1247:(e,t,r)=>{"use strict";var n=r(9982),i=r(6540),a=r(961);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope");var L=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var P=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var R=Symbol.iterator;function _(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case m:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case w:return"Suspense";case A:return"SuspenseList";case L:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case g:return"Portal";case S:return(e.displayName||"Context")+".Provider";case E:return(e._context.displayName||"Context")+".Consumer";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return I(e(t))}catch(e){}}return null}var C=Array.isArray,D=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},F=[],U=-1;function B(e){return{current:e}}function $(e){0>U||(e.current=F[U],F[U]=null,U--)}function j(e,t){U++,F[U]=e.current,e.current=t}var z=B(null),G=B(null),H=B(null),K=B(null);function V(e,t){switch(j(H,t),j(G,e),j(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ad(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(z),j(z,e)}function W(){$(z),$(G),$(H)}function Y(e){null!==e.memoizedState&&j(K,e);var t=z.current,r=ad(t,e.type);t!==r&&(j(G,e),j(z,r))}function q(e){G.current===e&&($(z),$(G)),K.current===e&&($(K),Yd._currentValue=N)}var X=Object.prototype.hasOwnProperty,Q=n.unstable_scheduleCallback,Z=n.unstable_cancelCallback,J=n.unstable_shouldYield,ee=n.unstable_requestPaint,te=n.unstable_now,re=n.unstable_getCurrentPriorityLevel,ne=n.unstable_ImmediatePriority,ie=n.unstable_UserBlockingPriority,ae=n.unstable_NormalPriority,se=n.unstable_LowPriority,oe=n.unstable_IdlePriority,le=n.log,ue=n.unstable_setDisableYieldValue,ce=null,de=null;function he(e){if("function"==typeof le&&ue(e),de&&"function"==typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(e){}}var fe=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2,me=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var i=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&n;return 0!==o?0!==(n=o&~a)?i=ve(n):0!==(s&=o)?i=ve(s):r||0!==(r=o&~e)&&(i=ve(r)):0!==(o=n&~a)?i=ve(o):0!==s?i=ve(s):r||0!==(r=n&~e)&&(i=ve(r)),0===i?0:0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(r=t&-t)||32===a&&4194048&r)?t:i}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Se(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=me;return!(4194048&(me<<=1))&&(me=256),e}function we(){var e=ye;return!(62914560&(ye<<=1))&&(ye=4194304),e}function Ae(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xe(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-fe(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194090&r}function Le(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-fe(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}function Pe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Re(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function _e(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var Oe=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Oe,Ce="__reactProps$"+Oe,De="__reactContainer$"+Oe,Me="__reactEvents$"+Oe,Ne="__reactListeners$"+Oe,Fe="__reactHandles$"+Oe,Ue="__reactResources$"+Oe,Be="__reactMarker$"+Oe;function $e(e){delete e[Ie],delete e[Ce],delete e[Me],delete e[Ne],delete e[Fe]}function je(e){var t=e[Ie];if(t)return t;for(var r=e.parentNode;r;){if(t=r[De]||r[Ie]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=bd(e);null!==e;){if(r=e[Ie])return r;e=bd(e)}return t}r=(e=r).parentNode}return null}function ze(e){if(e=e[Ie]||e[De]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ge(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function He(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Be]=!0}var Ve=new Set,We={};function Ye(e,t){qe(e,t),qe(e+"Capture",t)}function qe(e,t){for(We[e]=t,e=0;e<t.length;e++)Ve.add(t[e])}var Xe,Qe,Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Je={},et={};function tt(e,t,r){if(i=t,X.call(et,i)||!X.call(Je,i)&&(Ze.test(i)?et[i]=!0:(Je[i]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var i}function rt(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function nt(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function it(e){if(void 0===Xe)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Qe=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Qe}var at=!1;function st(e,t){if(!e||at)return"";at=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(e){var n=e}Reflect.construct(e,[],r)}else{try{r.call()}catch(e){n=e}e.call(r.prototype)}}else{try{throw Error()}catch(e){n=e}(r=e())&&"function"==typeof r.catch&&r.catch(function(){})}}catch(e){if(e&&n&&"string"==typeof e.stack)return[e.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=n.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split("\n"),u=o.split("\n");for(i=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(n===l.length||i===u.length)for(n=l.length-1,i=u.length-1;1<=n&&0<=i&&l[n]!==u[i];)i--;for(;1<=n&&0<=i;n--,i--)if(l[n]!==u[i]){if(1!==n||1!==i)do{if(n--,0>--i||l[n]!==u[i]){var c="\n"+l[n].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=n&&0<=i);break}}}finally{at=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?it(r):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ct(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function ft(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mt(e,t,r,n,i,a,s,o){e.name="",null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?vt(e,s,ut(t)):null!=r?vt(e,s,ut(r)):null!=n&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+ut(o):e.removeAttribute("name")}function yt(e,t,r,n,i,a,s,o){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=r){if(("submit"===a||"reset"===a)&&null==t)return;r=null!=r?""+ut(r):"",t=null!=t?""+ut(t):r,o||t===e.value||(e.value=t),e.defaultValue=t}n="function"!=typeof(n=null!=n?n:i)&&"symbol"!=typeof n&&!!n,e.checked=o?e.checked:!!n,e.defaultChecked=!!n,null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.name=s)}function vt(e,t,r){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function bt(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ut(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Et(e,t,r){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+ut(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(s(92));if(C(n)){if(1<n.length)throw Error(s(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=ut(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function Tt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var wt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function At(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"==typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!=typeof r||0===r||wt.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function kt(e,t,r){if(null!=t&&"object"!=typeof t)throw Error(s(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&r[i]!==n&&At(e,i,n)}else for(var a in t)t.hasOwnProperty(a)&&At(e,a,t[a])}function xt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var _t=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Ct=null;function Dt(e){var t=ze(e);if(t&&(e=t.stateNode)){var r=e[Ce]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=n[Ce]||null;if(!i)throw Error(s(90));mt(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&ht(n)}break e;case"textarea":Et(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&bt(e,!!r.multiple,t,!1)}}}var Mt=!1;function Nt(e,t,r){if(Mt)return e(t,r);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==It||null!==Ct)&&(ju(),It&&(t=It,e=Ct,Ct=It=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Ft(e,t){var r=e.stateNode;if(null===r)return null;var n=r[Ce]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(s(231,t,typeof r));return r}var Ut=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Bt=!1;if(Ut)try{var $t={};Object.defineProperty($t,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch(e){Bt=!1}var jt=null,zt=null,Gt=null;function Ht(){if(Gt)return Gt;var e,t,r=zt,n=r.length,i="value"in jt?jt.value:jt.textContent,a=i.length;for(e=0;e<n&&r[e]===i[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===i[a-t];t++);return Gt=i.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Vt(){return!0}function Wt(){return!1}function Yt(e){function t(t,r,n,i,a){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Vt:Wt,this.isPropagationStopped=Wt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Vt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Vt)},persist:function(){},isPersistent:Vt}),t}var qt,Xt,Qt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jt=Yt(Zt),er=h({},Zt,{view:0,detail:0}),tr=Yt(er),rr=h({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qt&&(Qt&&"mousemove"===e.type?(qt=e.screenX-Qt.screenX,Xt=e.screenY-Qt.screenY):Xt=qt=0,Qt=e),qt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),nr=Yt(rr),ir=Yt(h({},rr,{dataTransfer:0})),ar=Yt(h({},er,{relatedTarget:0})),sr=Yt(h({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),or=Yt(h({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),lr=Yt(h({},Zt,{data:0})),ur={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dr[e])&&!!t[e]}function fr(){return hr}var pr=Yt(h({},er,{key:function(e){if(e.key){var t=ur[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fr,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gr=Yt(h({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),mr=Yt(h({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fr})),yr=Yt(h({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vr=Yt(h({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),br=Yt(h({},Zt,{newState:0,oldState:0})),Er=[9,13,27,32],Sr=Ut&&"CompositionEvent"in window,Tr=null;Ut&&"documentMode"in document&&(Tr=document.documentMode);var wr=Ut&&"TextEvent"in window&&!Tr,Ar=Ut&&(!Sr||Tr&&8<Tr&&11>=Tr),kr=String.fromCharCode(32),xr=!1;function Lr(e,t){switch(e){case"keyup":return-1!==Er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Rr=!1,_r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!_r[e.type]:"textarea"===t}function Ir(e,t,r,n){It?Ct?Ct.push(n):Ct=[n]:It=n,0<(t=Hc(t,"onChange")).length&&(r=new Jt("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Cr=null,Dr=null;function Mr(e){Nc(e,0)}function Nr(e){if(ht(Ge(e)))return e}function Fr(e,t){if("change"===e)return t}var Ur=!1;if(Ut){var Br;if(Ut){var $r="oninput"in document;if(!$r){var jr=document.createElement("div");jr.setAttribute("oninput","return;"),$r="function"==typeof jr.oninput}Br=$r}else Br=!1;Ur=Br&&(!document.documentMode||9<document.documentMode)}function zr(){Cr&&(Cr.detachEvent("onpropertychange",Gr),Dr=Cr=null)}function Gr(e){if("value"===e.propertyName&&Nr(Dr)){var t=[];Ir(t,Dr,e,Ot(e)),Nt(Mr,t)}}function Hr(e,t,r){"focusin"===e?(zr(),Dr=r,(Cr=t).attachEvent("onpropertychange",Gr)):"focusout"===e&&zr()}function Kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Nr(Dr)}function Vr(e,t){if("click"===e)return Nr(t)}function Wr(e,t){if("input"===e||"change"===e)return Nr(t)}var Yr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function qr(e,t){if(Yr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!X.call(t,i)||!Yr(e[i],t[i]))return!1}return!0}function Xr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qr(e,t){var r,n=Xr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xr(n)}}function Zr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Jr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=ft((e=t.contentWindow).document)}return t}function en(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tn=Ut&&"documentMode"in document&&11>=document.documentMode,rn=null,nn=null,an=null,sn=!1;function on(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;sn||null==rn||rn!==ft(n)||(n="selectionStart"in(n=rn)&&en(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},an&&qr(an,n)||(an=n,0<(n=Hc(nn,"onSelect")).length&&(t=new Jt("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=rn)))}function ln(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var un={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},cn={},dn={};function hn(e){if(cn[e])return cn[e];if(!un[e])return e;var t,r=un[e];for(t in r)if(r.hasOwnProperty(t)&&t in dn)return cn[e]=r[t];return e}Ut&&(dn=document.createElement("div").style,"AnimationEvent"in window||(delete un.animationend.animation,delete un.animationiteration.animation,delete un.animationstart.animation),"TransitionEvent"in window||delete un.transitionend.transition);var fn=hn("animationend"),pn=hn("animationiteration"),gn=hn("animationstart"),mn=hn("transitionrun"),yn=hn("transitionstart"),vn=hn("transitioncancel"),bn=hn("transitionend"),En=new Map,Sn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(e,t){En.set(e,t),Ye(t,[e])}Sn.push("scrollEnd");var wn=new WeakMap;function An(e,t){if("object"==typeof e&&null!==e){var r=wn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:lt(t)},wn.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var kn=[],xn=0,Ln=0;function Pn(){for(var e=xn,t=Ln=xn=0;t<e;){var r=kn[t];kn[t++]=null;var n=kn[t];kn[t++]=null;var i=kn[t];kn[t++]=null;var a=kn[t];if(kn[t++]=null,null!==n&&null!==i){var s=n.pending;null===s?i.next=i:(i.next=s.next,s.next=i),n.pending=i}0!==a&&In(r,i,a)}}function Rn(e,t,r,n){kn[xn++]=e,kn[xn++]=t,kn[xn++]=r,kn[xn++]=n,Ln|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function _n(e,t,r,n){return Rn(e,t,r,n),Cn(e)}function On(e,t){return Rn(e,null,null,t),Cn(e)}function In(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var i=!1,a=e.return;null!==a;)a.childLanes|=r,null!==(n=a.alternate)&&(n.childLanes|=r),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,i&&null!==t&&(i=31-fe(r),null===(n=(e=a.hiddenUpdates)[i])?e[i]=[t]:n.push(t),t.lane=536870912|r),a):null}function Cn(e){if(50<Iu)throw Iu=0,Cu=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dn={};function Mn(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(e,t,r,n){return new Mn(e,t,r,n)}function Fn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Un(e,t){var r=e.alternate;return null===r?((r=Nn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Bn(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $n(e,t,r,n,i,a){var o=0;if(n=e,"function"==typeof e)Fn(e)&&(o=1);else if("string"==typeof e)o=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,r,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case L:return(e=Nn(31,r,t,i)).elementType=L,e.lanes=a,e;case m:return jn(r.children,i,a,t);case y:o=8,i|=24;break;case v:return(e=Nn(12,r,t,2|i)).elementType=v,e.lanes=a,e;case w:return(e=Nn(13,r,t,i)).elementType=w,e.lanes=a,e;case A:return(e=Nn(19,r,t,i)).elementType=A,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:case S:o=10;break e;case E:o=9;break e;case T:o=11;break e;case k:o=14;break e;case x:o=16,n=null;break e}o=29,r=Error(s(130,null===e?"null":typeof e,"")),n=null}return(t=Nn(o,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function jn(e,t,r,n){return(e=Nn(7,e,n,t)).lanes=r,e}function zn(e,t,r){return(e=Nn(6,e,null,t)).lanes=r,e}function Gn(e,t,r){return(t=Nn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hn=[],Kn=0,Vn=null,Wn=0,Yn=[],qn=0,Xn=null,Qn=1,Zn="";function Jn(e,t){Hn[Kn++]=Wn,Hn[Kn++]=Vn,Vn=e,Wn=t}function ei(e,t,r){Yn[qn++]=Qn,Yn[qn++]=Zn,Yn[qn++]=Xn,Xn=e;var n=Qn;e=Zn;var i=32-fe(n)-1;n&=~(1<<i),r+=1;var a=32-fe(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Qn=1<<32-fe(t)+i|r<<i|n,Zn=a+e}else Qn=1<<a|r<<i|n,Zn=e}function ti(e){null!==e.return&&(Jn(e,1),ei(e,1,0))}function ri(e){for(;e===Vn;)Vn=Hn[--Kn],Hn[Kn]=null,Wn=Hn[--Kn],Hn[Kn]=null;for(;e===Xn;)Xn=Yn[--qn],Yn[qn]=null,Zn=Yn[--qn],Yn[qn]=null,Qn=Yn[--qn],Yn[qn]=null}var ni=null,ii=null,ai=!1,si=null,oi=!1,li=Error(s(519));function ui(e){throw gi(An(Error(s(418,"")),e)),li}function ci(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Ie]=e,t[Ce]=n,r){case"dialog":Fc("cancel",t),Fc("close",t);break;case"iframe":case"object":case"embed":Fc("load",t);break;case"video":case"audio":for(r=0;r<Dc.length;r++)Fc(Dc[r],t);break;case"source":Fc("error",t);break;case"img":case"image":case"link":Fc("error",t),Fc("load",t);break;case"details":Fc("toggle",t);break;case"input":Fc("invalid",t),yt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),dt(t);break;case"select":Fc("invalid",t);break;case"textarea":Fc("invalid",t),St(t,n.value,n.defaultValue,n.children),dt(t)}"string"!=typeof(r=n.children)&&"number"!=typeof r&&"bigint"!=typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||Xc(t.textContent,r)?(null!=n.popover&&(Fc("beforetoggle",t),Fc("toggle",t)),null!=n.onScroll&&Fc("scroll",t),null!=n.onScrollEnd&&Fc("scrollend",t),null!=n.onClick&&(t.onclick=Qc),t=!0):t=!1,t||ui(e)}function di(e){for(ni=e.return;ni;)switch(ni.tag){case 5:case 13:return void(oi=!1);case 27:case 3:return void(oi=!0);default:ni=ni.return}}function hi(e){if(e!==ni)return!1;if(!ai)return di(e),ai=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||sd(e.type,e.memoizedProps)),t=!t),t&&ii&&ui(e),di(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){ii=yd(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}ii=null}}else 27===r?(r=ii,fd(e.type)?(e=vd,vd=null,ii=e):ii=r):ii=ni?yd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ni=null,ai=!1}function pi(){var e=si;return null!==e&&(null===bu?bu=e:bu.push.apply(bu,e),si=null),e}function gi(e){null===si?si=[e]:si.push(e)}var mi=B(null),yi=null,vi=null;function bi(e,t,r){j(mi,t._currentValue),t._currentValue=r}function Ei(e){e._currentValue=mi.current,$(mi)}function Si(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ti(e,t,r,n){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),Si(a.return,r,e),n||(o=null);break e}a=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(a=o.alternate)&&(a.lanes|=r),Si(o,r,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function wi(e,t,r,n){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(524288&i.flags)a=!0;else if(262144&i.flags)break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=i.type;Yr(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===K.current){if(null===(o=i.alternate))throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}i=i.return}null!==e&&Ti(t,e,r,n),t.flags|=262144}function Ai(e){for(e=e.firstContext;null!==e;){if(!Yr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ki(e){yi=e,vi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function xi(e){return Pi(yi,e)}function Li(e,t){return null===yi&&ki(e),Pi(e,t)}function Pi(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===vi){if(null===e)throw Error(s(308));vi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vi=vi.next=t;return r}var Ri="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},_i=n.unstable_scheduleCallback,Oi=n.unstable_NormalPriority,Ii={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ci(){return{controller:new Ri,data:new Map,refCount:0}}function Di(e){e.refCount--,0===e.refCount&&_i(Oi,function(){e.controller.abort()})}var Mi=null,Ni=0,Fi=0,Ui=null;function Bi(){if(0===--Ni&&null!==Mi){null!==Ui&&(Ui.status="fulfilled");var e=Mi;Mi=null,Fi=0,Ui=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var $i=D.S;D.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Mi){var r=Mi=[];Ni=0,Fi=Rc(),Ui={status:"pending",value:void 0,then:function(e){r.push(e)}}}Ni++,t.then(Bi,Bi)}(0,t),null!==$i&&$i(e,t)};var ji=B(null);function zi(){var e=ji.current;return null!==e?e:nu.pooledCache}function Gi(e,t){j(ji,null===t?ji.current:t.pool)}function Hi(){var e=zi();return null===e?null:{parent:Ii._currentValue,pool:e}}var Ki=Error(s(460)),Vi=Error(s(474)),Wi=Error(s(542)),Yi={then:function(){}};function qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function Qi(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Xi,Xi),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e;default:if("string"==typeof t.status)t.then(Xi,Xi);else{if(null!==(e=nu)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ea(e=t.reason),e}throw Zi=t,Ki}}var Zi=null;function Ji(){if(null===Zi)throw Error(s(459));var e=Zi;return Zi=null,e}function ea(e){if(e===Ki||e===Wi)throw Error(s(483))}var ta=!1;function ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function na(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function aa(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&ru){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=Cn(e),In(e,null,r),t}return Rn(e,n,t,r),Cn(e)}function sa(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Le(e,r)}}function oa(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var s={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===a?i=a=s:a=a.next=s,r=r.next}while(null!==r);null===a?i=a=t:a=a.next=t}else i=a=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var la=!1;function ua(){if(la&&null!==Ui)throw Ui}function ca(e,t,r,n){la=!1;var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===s?a=u:s.next=u,s=l;var c=e.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(s=0,c=u=l=null,o=a;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(au&f)===f:(n&f)===f){0!==f&&f===Fi&&(la=!0),null!==c&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,m=o;f=t;var y=r;switch(m.tag){case 1:if("function"==typeof(g=m.payload)){d=g.call(y,d,f);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(f="function"==typeof(g=m.payload)?g.call(y,d,f):g))break e;d=h({},d,f);break e;case 2:ta=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,s|=f;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===a&&(i.shared.lanes=0),fu|=s,e.lanes=s,e.memoizedState=d}}function da(e,t){if("function"!=typeof e)throw Error(s(191,e));e.call(t)}function ha(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)da(r[e],t)}var fa=B(null),pa=B(0);function ga(e,t){j(pa,e=du),j(fa,t),du=e|t.baseLanes}function ma(){j(pa,du),j(fa,fa.current)}function ya(){du=pa.current,$(fa),$(pa)}var va=0,ba=null,Ea=null,Sa=null,Ta=!1,wa=!1,Aa=!1,ka=0,xa=0,La=null,Pa=0;function Ra(){throw Error(s(321))}function _a(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Yr(e[r],t[r]))return!1;return!0}function Oa(e,t,r,n,i,a){return va=a,ba=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?Ks:Vs,Aa=!1,a=r(n,i),Aa=!1,wa&&(a=Ca(t,r,n,i)),Ia(e),a}function Ia(e){D.H=Hs;var t=null!==Ea&&null!==Ea.next;if(va=0,Sa=Ea=ba=null,Ta=!1,xa=0,La=null,t)throw Error(s(300));null===e||Lo||null!==(e=e.dependencies)&&Ai(e)&&(Lo=!0)}function Ca(e,t,r,n){ba=e;var i=0;do{if(wa&&(La=null),xa=0,wa=!1,25<=i)throw Error(s(301));if(i+=1,Sa=Ea=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}D.H=Ws,a=t(r,n)}while(wa);return a}function Da(){var e=D.H,t=e.useState()[0];return t="function"==typeof t.then?$a(t):t,e=e.useState()[0],(null!==Ea?Ea.memoizedState:null)!==e&&(ba.flags|=1024),t}function Ma(){var e=0!==ka;return ka=0,e}function Na(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Fa(e){if(Ta){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ta=!1}va=0,Sa=Ea=ba=null,wa=!1,xa=ka=0,La=null}function Ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Sa?ba.memoizedState=Sa=e:Sa=Sa.next=e,Sa}function Ba(){if(null===Ea){var e=ba.alternate;e=null!==e?e.memoizedState:null}else e=Ea.next;var t=null===Sa?ba.memoizedState:Sa.next;if(null!==t)Sa=t,Ea=e;else{if(null===e){if(null===ba.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Ea=e).memoizedState,baseState:Ea.baseState,baseQueue:Ea.baseQueue,queue:Ea.queue,next:null},null===Sa?ba.memoizedState=Sa=e:Sa=Sa.next=e}return Sa}function $a(e){var t=xa;return xa+=1,null===La&&(La=[]),e=Qi(La,e,t),t=ba,null===(null===Sa?t.memoizedState:Sa.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?Ks:Vs),e}function ja(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return $a(e);if(e.$$typeof===S)return xi(e)}throw Error(s(438,String(e)))}function za(e){var t=null,r=ba.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=ba.alternate;null!==n&&null!==(n=n.updateQueue)&&null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},ba.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=P;return t.index++,r}function Ga(e,t){return"function"==typeof t?t(e):t}function Ha(e){return Ka(Ba(),Ea,e)}function Ka(e,t,r){var n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=r;var i=e.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,n.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=o=null,u=null,c=t=i.next,d=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(au&h)===h:(va&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Fi&&(d=!0);else{if((va&f)===f){c=c.next,f===Fi&&(d=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,o=a):u=u.next=h,ba.lanes|=f,fu|=f}h=c.action,Aa&&r(a,h),a=c.hasEagerState?c.eagerState:r(a,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,o=a):u=u.next=f,ba.lanes|=h,fu|=h;c=c.next}while(null!==c&&c!==t);if(null===u?o=a:u.next=l,!Yr(a,e.memoizedState)&&(Lo=!0,d&&null!==(r=Ui)))throw r;e.memoizedState=a,e.baseState=o,e.baseQueue=u,n.lastRenderedState=a}return null===i&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Va(e){var t=Ba(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);Yr(a,t.memoizedState)||(Lo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Wa(e,t,r){var n=ba,i=Ba(),a=ai;if(a){if(void 0===r)throw Error(s(407));r=r()}else r=t();var o=!Yr((Ea||i).memoizedState,r);if(o&&(i.memoizedState=r,Lo=!0),i=i.queue,ms(2048,8,Xa.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==Sa&&1&Sa.memoizedState.tag){if(n.flags|=2048,fs(9,{destroy:void 0,resource:void 0},qa.bind(null,n,i,r,t),null),null===nu)throw Error(s(349));a||124&va||Ya(n,t,r)}return r}function Ya(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ba.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ba.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function qa(e,t,r,n){t.value=r,t.getSnapshot=n,Qa(t)&&Za(e)}function Xa(e,t,r){return r(function(){Qa(t)&&Za(e)})}function Qa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Yr(e,r)}catch(e){return!0}}function Za(e){var t=On(e,2);null!==t&&Nu(t,0,2)}function Ja(e){var t=Ua();if("function"==typeof e){var r=e;if(e=r(),Aa){he(!0);try{r()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:e},t}function es(e,t,r,n){return e.baseState=r,Ka(e,Ea,"function"==typeof n?n:Ga)}function ts(e,t,r,n,i){if(js(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==D.T?r(!0):a.isTransition=!1,n(a),null===(r=t.pending)?(a.next=t.pending=a,rs(t,a)):(a.next=r.next,t.pending=r.next=a)}}function rs(e,t){var r=t.action,n=t.payload,i=e.state;if(t.isTransition){var a=D.T,s={};D.T=s;try{var o=r(i,n),l=D.S;null!==l&&l(s,o),ns(e,t,o)}catch(r){as(e,t,r)}finally{D.T=a}}else try{ns(e,t,a=r(i,n))}catch(r){as(e,t,r)}}function ns(e,t,r){null!==r&&"object"==typeof r&&"function"==typeof r.then?r.then(function(r){is(e,t,r)},function(r){return as(e,t,r)}):is(e,t,r)}function is(e,t,r){t.status="fulfilled",t.value=r,ss(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,rs(e,r)))}function as(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,ss(t),t=t.next}while(t!==n)}e.action=null}function ss(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function os(e,t){return t}function ls(e,t){if(ai){var r=nu.formState;if(null!==r){e:{var n=ba;if(ai){if(ii){t:{for(var i=ii,a=oi;8!==i.nodeType;){if(!a){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(a=i.data)||"F"===a?i:null}if(i){ii=yd(i.nextSibling),n="F!"===i.data;break e}}ui(n)}n=!1}n&&(t=r[0])}}return(r=Ua()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},r.queue=n,r=Us.bind(null,ba,n),n.dispatch=r,n=Ja(!1),a=$s.bind(null,ba,!1,n.queue),i={state:t,dispatch:null,action:e,pending:null},(n=Ua()).queue=i,r=ts.bind(null,ba,i,a,r),i.dispatch=r,n.memoizedState=e,[t,r,!1]}function us(e){return cs(Ba(),Ea,e)}function cs(e,t,r){if(t=Ka(e,t,os)[0],e=Ha(Ga)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var n=$a(t)}catch(e){if(e===Ki)throw Wi;throw e}else n=t;var i=(t=Ba()).queue,a=i.dispatch;return r!==t.memoizedState&&(ba.flags|=2048,fs(9,{destroy:void 0,resource:void 0},ds.bind(null,i,r),null)),[n,a,e]}function ds(e,t){e.action=t}function hs(e){var t=Ba(),r=Ea;if(null!==r)return cs(t,r,e);Ba(),t=t.memoizedState;var n=(r=Ba()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function fs(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=ba.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ba.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function ps(){return Ba().memoizedState}function gs(e,t,r,n){var i=Ua();n=void 0===n?null:n,ba.flags|=e,i.memoizedState=fs(1|t,{destroy:void 0,resource:void 0},r,n)}function ms(e,t,r,n){var i=Ba();n=void 0===n?null:n;var a=i.memoizedState.inst;null!==Ea&&null!==n&&_a(n,Ea.memoizedState.deps)?i.memoizedState=fs(t,a,r,n):(ba.flags|=e,i.memoizedState=fs(1|t,a,r,n))}function ys(e,t){gs(8390656,8,e,t)}function vs(e,t){ms(2048,8,e,t)}function bs(e,t){return ms(4,2,e,t)}function Es(e,t){return ms(4,4,e,t)}function Ss(e,t){if("function"==typeof t){e=e();var r=t(e);return function(){"function"==typeof r?r():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ts(e,t,r){r=null!=r?r.concat([e]):null,ms(4,4,Ss.bind(null,t,e),r)}function ws(){}function As(e,t){var r=Ba();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&_a(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ks(e,t){var r=Ba();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&_a(t,n[1]))return n[0];if(n=e(),Aa){he(!0);try{e()}finally{he(!1)}}return r.memoizedState=[n,t],n}function xs(e,t,r){return void 0===r||1073741824&va?e.memoizedState=t:(e.memoizedState=r,e=Mu(),ba.lanes|=e,fu|=e,r)}function Ls(e,t,r,n){return Yr(r,t)?r:null!==fa.current?(e=xs(e,r,n),Yr(e,t)||(Lo=!0),e):42&va?(e=Mu(),ba.lanes|=e,fu|=e,t):(Lo=!0,e.memoizedState=r)}function Ps(e,t,r,n,i){var a=M.p;M.p=0!==a&&8>a?a:8;var s,o,l,u=D.T,c={};D.T=c,$s(e,!1,t,r);try{var d=i(),h=D.S;null!==h&&h(c,d),null!==d&&"object"==typeof d&&"function"==typeof d.then?Bs(e,t,(s=n,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then(function(){l.status="fulfilled",l.value=s;for(var e=0;e<o.length;e++)(0,o[e])(s)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),Du()):Bs(e,t,n,Du())}catch(r){Bs(e,t,{then:function(){},status:"rejected",reason:r},Du())}finally{M.p=a,D.T=u}}function Rs(){}function _s(e,t,r,n){if(5!==e.tag)throw Error(s(476));var i=Os(e).queue;Ps(e,i,t,N,null===r?Rs:function(){return Is(e),r(n)})}function Os(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:N},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Is(e){Bs(e,Os(e).next.queue,{},Du())}function Cs(){return xi(Yd)}function Ds(){return Ba().memoizedState}function Ms(){return Ba().memoizedState}function Ns(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Du(),n=aa(t,e=ia(r),r);return null!==n&&(Nu(n,0,r),sa(n,t,r)),t={cache:Ci()},void(e.payload=t)}t=t.return}}function Fs(e,t,r){var n=Du();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},js(e)?zs(t,r):null!==(r=_n(e,t,r,n))&&(Nu(r,0,n),Gs(r,t,n))}function Us(e,t,r){Bs(e,t,r,Du())}function Bs(e,t,r,n){var i={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(js(e))zs(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,Yr(o,s))return Rn(e,t,i,0),null===nu&&Pn(),!1}catch(e){}if(null!==(r=_n(e,t,i,n)))return Nu(r,0,n),Gs(r,t,n),!0}return!1}function $s(e,t,r,n){if(n={lane:2,revertLane:Rc(),action:n,hasEagerState:!1,eagerState:null,next:null},js(e)){if(t)throw Error(s(479))}else null!==(t=_n(e,r,n,2))&&Nu(t,0,2)}function js(e){var t=e.alternate;return e===ba||null!==t&&t===ba}function zs(e,t){wa=Ta=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Gs(e,t,r){if(4194048&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Le(e,r)}}var Hs={readContext:xi,use:ja,useCallback:Ra,useContext:Ra,useEffect:Ra,useImperativeHandle:Ra,useLayoutEffect:Ra,useInsertionEffect:Ra,useMemo:Ra,useReducer:Ra,useRef:Ra,useState:Ra,useDebugValue:Ra,useDeferredValue:Ra,useTransition:Ra,useSyncExternalStore:Ra,useId:Ra,useHostTransitionStatus:Ra,useFormState:Ra,useActionState:Ra,useOptimistic:Ra,useMemoCache:Ra,useCacheRefresh:Ra},Ks={readContext:xi,use:ja,useCallback:function(e,t){return Ua().memoizedState=[e,void 0===t?null:t],e},useContext:xi,useEffect:ys,useImperativeHandle:function(e,t,r){r=null!=r?r.concat([e]):null,gs(4194308,4,Ss.bind(null,t,e),r)},useLayoutEffect:function(e,t){return gs(4194308,4,e,t)},useInsertionEffect:function(e,t){gs(4,2,e,t)},useMemo:function(e,t){var r=Ua();t=void 0===t?null:t;var n=e();if(Aa){he(!0);try{e()}finally{he(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=Ua();if(void 0!==r){var i=r(t);if(Aa){he(!0);try{r(t)}finally{he(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Fs.bind(null,ba,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Ua().memoizedState=e},useState:function(e){var t=(e=Ja(e)).queue,r=Us.bind(null,ba,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:ws,useDeferredValue:function(e,t){return xs(Ua(),e,t)},useTransition:function(){var e=Ja(!1);return e=Ps.bind(null,ba,e.queue,!0,!1),Ua().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=ba,i=Ua();if(ai){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===nu)throw Error(s(349));124&au||Ya(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,ys(Xa.bind(null,n,a,e),[e]),n.flags|=2048,fs(9,{destroy:void 0,resource:void 0},qa.bind(null,n,a,r,t),null),r},useId:function(){var e=Ua(),t=nu.identifierPrefix;if(ai){var r=Zn;t="«"+t+"R"+(r=(Qn&~(1<<32-fe(Qn)-1)).toString(32)+r),0<(r=ka++)&&(t+="H"+r.toString(32)),t+="»"}else t="«"+t+"r"+(r=Pa++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Cs,useFormState:ls,useActionState:ls,useOptimistic:function(e){var t=Ua();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=$s.bind(null,ba,!0,r),r.dispatch=t,[e,t]},useMemoCache:za,useCacheRefresh:function(){return Ua().memoizedState=Ns.bind(null,ba)}},Vs={readContext:xi,use:ja,useCallback:As,useContext:xi,useEffect:vs,useImperativeHandle:Ts,useInsertionEffect:bs,useLayoutEffect:Es,useMemo:ks,useReducer:Ha,useRef:ps,useState:function(){return Ha(Ga)},useDebugValue:ws,useDeferredValue:function(e,t){return Ls(Ba(),Ea.memoizedState,e,t)},useTransition:function(){var e=Ha(Ga)[0],t=Ba().memoizedState;return["boolean"==typeof e?e:$a(e),t]},useSyncExternalStore:Wa,useId:Ds,useHostTransitionStatus:Cs,useFormState:us,useActionState:us,useOptimistic:function(e,t){return es(Ba(),0,e,t)},useMemoCache:za,useCacheRefresh:Ms},Ws={readContext:xi,use:ja,useCallback:As,useContext:xi,useEffect:vs,useImperativeHandle:Ts,useInsertionEffect:bs,useLayoutEffect:Es,useMemo:ks,useReducer:Va,useRef:ps,useState:function(){return Va(Ga)},useDebugValue:ws,useDeferredValue:function(e,t){var r=Ba();return null===Ea?xs(r,e,t):Ls(r,Ea.memoizedState,e,t)},useTransition:function(){var e=Va(Ga)[0],t=Ba().memoizedState;return["boolean"==typeof e?e:$a(e),t]},useSyncExternalStore:Wa,useId:Ds,useHostTransitionStatus:Cs,useFormState:hs,useActionState:hs,useOptimistic:function(e,t){var r=Ba();return null!==Ea?es(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:za,useCacheRefresh:Ms},Ys=null,qs=0;function Xs(e){var t=qs;return qs+=1,null===Ys&&(Ys=[]),Qi(Ys,e,t)}function Qs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zs(e,t){if(t.$$typeof===f)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Js(e){return(0,e._init)(e._payload)}function eo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Un(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=zn(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function u(e,t,r,n){var a=r.type;return a===m?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===x&&Js(a)===t.type)?(Qs(t=i(t,r.props),r),t.return=e,t):(Qs(t=$n(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Gn(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function d(e,t,r,n,a){return null===t||7!==t.tag?((t=jn(r,e.mode,n,a)).return=e,t):((t=i(t,r)).return=e,t)}function h(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=zn(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return Qs(r=$n(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case g:return(t=Gn(t,e.mode,r)).return=e,t;case x:return h(e,t=(0,t._init)(t._payload),r)}if(C(t)||_(t))return(t=jn(t,e.mode,r,null)).return=e,t;if("function"==typeof t.then)return h(e,Xs(t),r);if(t.$$typeof===S)return h(e,Li(e,t),r);Zs(e,t)}return null}function f(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return null!==i?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return r.key===i?u(e,t,r,n):null;case g:return r.key===i?c(e,t,r,n):null;case x:return f(e,t,r=(i=r._init)(r._payload),n)}if(C(r)||_(r))return null!==i?null:d(e,t,r,n,null);if("function"==typeof r.then)return f(e,t,Xs(r),n);if(r.$$typeof===S)return f(e,t,Li(e,r),n);Zs(e,r)}return null}function y(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case g:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case x:return y(e,t,r,n=(0,n._init)(n._payload),i)}if(C(n)||_(n))return d(t,e=e.get(r)||null,n,i,null);if("function"==typeof n.then)return y(e,t,r,Xs(n),i);if(n.$$typeof===S)return y(e,t,r,Li(t,n),i);Zs(t,n)}return null}function v(l,u,c,d){if("object"==typeof c&&null!==c&&c.type===m&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===m){if(7===u.tag){r(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===x&&Js(b)===u.type){r(l,u.sibling),Qs(d=i(u,c.props),c),d.return=l,l=d;break e}r(l,u);break}t(l,u),u=u.sibling}c.type===m?((d=jn(c.props.children,l.mode,d,c.key)).return=l,l=d):(Qs(d=$n(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return o(l);case g:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){r(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}r(l,u);break}t(l,u),u=u.sibling}(d=Gn(c,l.mode,d)).return=l,l=d}return o(l);case x:return v(l,u,c=(b=c._init)(c._payload),d)}if(C(c))return function(i,s,o,l){for(var u=null,c=null,d=s,p=s=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var m=f(i,d,o[p],l);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),s=a(m,s,p),null===c?u=m:c.sibling=m,c=m,d=g}if(p===o.length)return r(i,d),ai&&Jn(i,p),u;if(null===d){for(;p<o.length;p++)null!==(d=h(i,o[p],l))&&(s=a(d,s,p),null===c?u=d:c.sibling=d,c=d);return ai&&Jn(i,p),u}for(d=n(d);p<o.length;p++)null!==(g=y(d,i,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),s=a(g,s,p),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(i,e)}),ai&&Jn(i,p),u}(l,u,c,d);if(_(c)){if("function"!=typeof(b=_(c)))throw Error(s(150));return function(i,o,l,u){if(null==l)throw Error(s(151));for(var c=null,d=null,p=o,g=o=0,m=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var b=f(i,p,v.value,u);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(i,p),o=a(b,o,g),null===d?c=b:d.sibling=b,d=b,p=m}if(v.done)return r(i,p),ai&&Jn(i,g),c;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(o=a(v,o,g),null===d?c=v:d.sibling=v,d=v);return ai&&Jn(i,g),c}for(p=n(p);!v.done;g++,v=l.next())null!==(v=y(p,i,g,v.value,u))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?c=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(i,e)}),ai&&Jn(i,g),c}(l,u,c=b.call(c),d)}if("function"==typeof c.then)return v(l,u,Xs(c),d);if(c.$$typeof===S)return v(l,u,Li(l,c),d);Zs(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(r(l,u.sibling),(d=i(u,c)).return=l,l=d):(r(l,u),(d=zn(c,l.mode,d)).return=l,l=d),o(l)):r(l,u)}return function(e,t,r,n){try{qs=0;var i=v(e,t,r,n);return Ys=null,i}catch(t){if(t===Ki||t===Wi)throw t;var a=Nn(29,t,null,e.mode);return a.lanes=n,a.return=e,a}}}var to=eo(!0),ro=eo(!1),no=B(null),io=null;function ao(e){var t=e.alternate;j(uo,1&uo.current),j(no,e),null===io&&(null===t||null!==fa.current||null!==t.memoizedState)&&(io=e)}function so(e){if(22===e.tag){if(j(uo,uo.current),j(no,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else oo()}function oo(){j(uo,uo.current),j(no,no.current)}function lo(e){$(no),io===e&&(io=null),$(uo)}var uo=B(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||md(r)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:h({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var fo={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Du(),i=ia(n);i.payload=t,null!=r&&(i.callback=r),null!==(t=aa(e,i,n))&&(Nu(t,0,n),sa(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Du(),i=ia(n);i.tag=1,i.payload=t,null!=r&&(i.callback=r),null!==(t=aa(e,i,n))&&(Nu(t,0,n),sa(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Du(),n=ia(r);n.tag=2,null!=t&&(n.callback=t),null!==(t=aa(e,n,r))&&(Nu(t,0,r),sa(t,e,r))}};function po(e,t,r,n,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,s):!(t.prototype&&t.prototype.isPureReactComponent&&qr(r,n)&&qr(i,a))}function go(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function mo(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var i in r===t&&(r=h({},r)),e)void 0===r[i]&&(r[i]=e[i]);return r}var yo="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vo(e){yo(e)}function bo(e){console.error(e)}function Eo(e){yo(e)}function So(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function To(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function wo(e,t,r){return(r=ia(r)).tag=3,r.payload={element:null},r.callback=function(){So(e,t)},r}function Ao(e){return(e=ia(e)).tag=3,e}function ko(e,t,r,n){var i=r.type.getDerivedStateFromError;if("function"==typeof i){var a=n.value;e.payload=function(){return i(a)},e.callback=function(){To(t,r,n)}}var s=r.stateNode;null!==s&&"function"==typeof s.componentDidCatch&&(e.callback=function(){To(t,r,n),"function"!=typeof i&&(null===Au?Au=new Set([this]):Au.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var xo=Error(s(461)),Lo=!1;function Po(e,t,r,n){t.child=null===e?ro(t,null,r,n):to(t,e.child,r,n)}function Ro(e,t,r,n,i){r=r.render;var a=t.ref;if("ref"in n){var s={};for(var o in n)"ref"!==o&&(s[o]=n[o])}else s=n;return ki(t),n=Oa(e,t,r,s,a,i),o=Ma(),null===e||Lo?(ai&&o&&ti(t),t.flags|=1,Po(e,t,n,i),t.child):(Na(e,t,i),qo(e,t,i))}function _o(e,t,r,n,i){if(null===e){var a=r.type;return"function"!=typeof a||Fn(a)||void 0!==a.defaultProps||null!==r.compare?((e=$n(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Oo(e,t,a,n,i))}if(a=e.child,!Xo(e,i)){var s=a.memoizedProps;if((r=null!==(r=r.compare)?r:qr)(s,n)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,(e=Un(a,n)).ref=t.ref,e.return=t,t.child=e}function Oo(e,t,r,n,i){if(null!==e){var a=e.memoizedProps;if(qr(a,n)&&e.ref===t.ref){if(Lo=!1,t.pendingProps=n=a,!Xo(e,i))return t.lanes=e.lanes,qo(e,t,i);131072&e.flags&&(Lo=!0)}}return Mo(e,t,r,n,i)}function Io(e,t,r){var n=t.pendingProps,i=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(128&t.flags){if(n=null!==a?a.baseLanes|r:r,null!==e){for(i=t.child=e.child,a=0;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~n}else t.childLanes=0,t.child=null;return Co(e,t,n,r)}if(!(536870912&r))return t.lanes=t.childLanes=536870912,Co(e,t,null!==a?a.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Gi(0,null!==a?a.cachePool:null),null!==a?ga(t,a):ma(),so(t)}else null!==a?(Gi(0,a.cachePool),ga(t,a),oo(),t.memoizedState=null):(null!==e&&Gi(0,null),ma(),oo());return Po(e,t,i,r),t.child}function Co(e,t,r,n){var i=zi();return i=null===i?null:{parent:Ii._currentValue,pool:i},t.memoizedState={baseLanes:r,cachePool:i},null!==e&&Gi(0,null),ma(),so(t),null!==e&&wi(e,t,n,!0),null}function Do(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof r&&"object"!=typeof r)throw Error(s(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function Mo(e,t,r,n,i){return ki(t),r=Oa(e,t,r,n,void 0,i),n=Ma(),null===e||Lo?(ai&&n&&ti(t),t.flags|=1,Po(e,t,r,i),t.child):(Na(e,t,i),qo(e,t,i))}function No(e,t,r,n,i,a){return ki(t),t.updateQueue=null,r=Ca(t,n,r,i),Ia(e),n=Ma(),null===e||Lo?(ai&&n&&ti(t),t.flags|=1,Po(e,t,r,a),t.child):(Na(e,t,a),qo(e,t,a))}function Fo(e,t,r,n,i){if(ki(t),null===t.stateNode){var a=Dn,s=r.contextType;"object"==typeof s&&null!==s&&(a=xi(s)),a=new r(n,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=fo,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=n,a.state=t.memoizedState,a.refs={},ra(t),s=r.contextType,a.context="object"==typeof s&&null!==s?xi(s):Dn,a.state=t.memoizedState,"function"==typeof(s=r.getDerivedStateFromProps)&&(ho(t,r,s,n),a.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(s=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&fo.enqueueReplaceState(a,a.state,null),ca(t,n,a,i),ua(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=mo(r,o);a.props=l;var u=a.context,c=r.contextType;s=Dn,"object"==typeof c&&null!==c&&(s=xi(c));var d=r.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o||u!==s)&&go(t,a,n,s),ta=!1;var h=t.memoizedState;a.state=h,ca(t,n,a,i),ua(),u=t.memoizedState,o||h!==u||ta?("function"==typeof d&&(ho(t,r,d,n),u=t.memoizedState),(l=ta||po(t,r,l,n,h,u,s))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),a.props=n,a.state=u,a.context=s,n=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,na(e,t),c=mo(r,s=t.memoizedProps),a.props=c,d=t.pendingProps,h=a.context,u=r.contextType,l=Dn,"object"==typeof u&&null!==u&&(l=xi(u)),(u="function"==typeof(o=r.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||h!==l)&&go(t,a,n,l),ta=!1,h=t.memoizedState,a.state=h,ca(t,n,a,i),ua();var f=t.memoizedState;s!==d||h!==f||ta||null!==e&&null!==e.dependencies&&Ai(e.dependencies)?("function"==typeof o&&(ho(t,r,o,n),f=t.memoizedState),(c=ta||po(t,r,c,n,h,f,l)||null!==e&&null!==e.dependencies&&Ai(e.dependencies))?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=l,n=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return a=n,Do(e,t),n=!!(128&t.flags),a||n?(a=t.stateNode,r=n&&"function"!=typeof r.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&n?(t.child=to(t,e.child,null,i),t.child=to(t,null,r,i)):Po(e,t,r,i),t.memoizedState=a.state,e=t.child):e=qo(e,t,i),e}function Uo(e,t,r,n){return fi(),t.flags|=256,Po(e,t,r,n),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $o(e){return{baseLanes:e,cachePool:Hi()}}function jo(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=mu),e}function zo(e,t,r){var n,i=t.pendingProps,a=!1,o=!!(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&!!(2&uo.current)),n&&(a=!0,t.flags&=-129),n=!!(32&t.flags),t.flags&=-33,null===e){if(ai){if(a?ao(t):oo(),ai){var l,u=ii;if(l=u){e:{for(l=u,u=oi;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=yd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Xn?{id:Qn,overflow:Zn}:null,retryLane:536870912,hydrationErrors:null},(l=Nn(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ni=t,ii=null,l=!0):l=!1}l||ui(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return md(u)?t.lanes=32:t.lanes=536870912,null;lo(t)}return u=i.children,i=i.fallback,a?(oo(),u=Ho({mode:"hidden",children:u},a=t.mode),i=jn(i,a,r,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(a=t.child).memoizedState=$o(r),a.childLanes=jo(e,n,r),t.memoizedState=Bo,i):(ao(t),Go(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(o)256&t.flags?(ao(t),t.flags&=-257,t=Ko(e,t,r)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),a=i.fallback,u=t.mode,i=Ho({mode:"visible",children:i.children},u),(a=jn(a,u,r,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,to(t,e.child,null,r),(i=t.child).memoizedState=$o(r),i.childLanes=jo(e,n,r),t.memoizedState=Bo,t=a);else if(ao(t),md(u)){if(n=u.nextSibling&&u.nextSibling.dataset)var c=n.dgst;n=c,(i=Error(s(419))).stack="",i.digest=n,gi({value:i,source:null,stack:null}),t=Ko(e,t,r)}else if(Lo||wi(e,t,r,!1),n=0!==(r&e.childLanes),Lo||n){if(null!==(n=nu)&&0!==(i=0!==((i=42&(i=r&-r)?1:Pe(i))&(n.suspendedLanes|r))?0:i)&&i!==l.retryLane)throw l.retryLane=i,On(e,i),Nu(n,0,i),xo;"$?"===u.data||Wu(),t=Ko(e,t,r)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(u.nextSibling),ni=t,ai=!0,si=null,oi=!1,null!==e&&(Yn[qn++]=Qn,Yn[qn++]=Zn,Yn[qn++]=Xn,Qn=e.id,Zn=e.overflow,Xn=t),(t=Go(t,i.children)).flags|=4096);return t}return a?(oo(),a=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Un(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?a=Un(c,a):(a=jn(a,u,r,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,null===(u=e.child.memoizedState)?u=$o(r):(null!==(l=u.cachePool)?(c=Ii._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Hi(),u={baseLanes:u.baseLanes|r,cachePool:l}),a.memoizedState=u,a.childLanes=jo(e,n,r),t.memoizedState=Bo,i):(ao(t),e=(r=e.child).sibling,(r=Un(r,{mode:"visible",children:i.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function Go(e,t){return(t=Ho({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ho(e,t){return(e=Nn(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ko(e,t,r){return to(t,e.child,null,r),(e=Go(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Si(e.return,t,r)}function Wo(e,t,r,n,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Yo(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Po(e,t,n.children,r),2&(n=uo.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,r,t);else if(19===e.tag)Vo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(j(uo,n),i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===co(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Wo(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Wo(t,!0,r,null,a);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),fu|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(wi(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Un(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Un(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Xo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ai(e))}function Qo(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Lo=!0;else{if(!(Xo(e,r)||128&t.flags))return Lo=!1,function(e,t,r){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),bi(0,Ii,e.memoizedState.cache),fi();break;case 27:case 5:Y(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(ao(t),t.flags|=128,null):0!==(r&t.child.childLanes)?zo(e,t,r):(ao(t),null!==(e=qo(e,t,r))?e.sibling:null);ao(t);break;case 19:var i=!!(128&e.flags);if((n=0!==(r&t.childLanes))||(wi(e,t,r,!1),n=0!==(r&t.childLanes)),i){if(n)return Yo(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),j(uo,uo.current),n)break;return null;case 22:case 23:return t.lanes=0,Io(e,t,r);case 24:bi(0,Ii,e.memoizedState.cache)}return qo(e,t,r)}(e,t,r);Lo=!!(131072&e.flags)}else Lo=!1,ai&&1048576&t.flags&&ei(t,Wn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,i=n._init;if(n=i(n._payload),t.type=n,"function"!=typeof n){if(null!=n){if((i=n.$$typeof)===T){t.tag=11,t=Ro(null,t,n,e,r);break e}if(i===k){t.tag=14,t=_o(null,t,n,e,r);break e}}throw t=I(n)||n,Error(s(306,t,""))}Fn(n)?(e=mo(n,e),t.tag=1,t=Fo(null,t,n,e,r)):(t.tag=0,t=Mo(null,t,n,e,r))}return t;case 0:return Mo(e,t,t.type,t.pendingProps,r);case 1:return Fo(e,t,n=t.type,i=mo(n,t.pendingProps),r);case 3:e:{if(V(t,t.stateNode.containerInfo),null===e)throw Error(s(387));n=t.pendingProps;var a=t.memoizedState;i=a.element,na(e,t),ca(t,n,null,r);var o=t.memoizedState;if(n=o.cache,bi(0,Ii,n),n!==a.cache&&Ti(t,[Ii],r,!0),ua(),n=o.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Uo(e,t,n,r);break e}if(n!==i){gi(i=An(Error(s(424)),t)),t=Uo(e,t,n,r);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,ii=yd(e.firstChild),ni=t,ai=!0,si=null,oi=!0,r=ro(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fi(),n===i){t=qo(e,t,r);break e}Po(e,t,n,r)}t=t.child}return t;case 26:return Do(e,t),null===e?(r=Pd(t.type,null,t.pendingProps,null))?t.memoizedState=r:ai||(r=t.type,e=t.pendingProps,(n=nd(H.current).createElement(r))[Ie]=t,n[Ce]=e,ed(n,r,e),Ke(n),t.stateNode=n):t.memoizedState=Pd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&ai&&(n=t.stateNode=Ed(t.type,t.pendingProps,H.current),ni=t,oi=!0,i=ii,fd(t.type)?(vd=i,ii=yd(n.firstChild)):ii=i),Po(e,t,t.pendingProps.children,r),Do(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ai&&((i=n=ii)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var i=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===a)return e}if(null===(e=yd(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,oi))?(t.stateNode=n,ni=t,ii=yd(n.firstChild),oi=!1,i=!0):i=!1),i||ui(t)),Y(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,n=a.children,sd(i,a)?n=null:null!==o&&sd(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=Oa(e,t,Da,null,null,r),Yd._currentValue=i),Do(e,t),Po(e,t,n,r),t.child;case 6:return null===e&&ai&&((e=r=ii)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(r,t.pendingProps,oi))?(t.stateNode=r,ni=t,ii=null,e=!0):e=!1),e||ui(t)),null;case 13:return zo(e,t,r);case 4:return V(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=to(t,null,n,r):Po(e,t,n,r),t.child;case 11:return Ro(e,t,t.type,t.pendingProps,r);case 7:return Po(e,t,t.pendingProps,r),t.child;case 8:case 12:return Po(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,bi(0,t.type,n.value),Po(e,t,n.children,r),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,ki(t),n=n(i=xi(i)),t.flags|=1,Po(e,t,n,r),t.child;case 14:return _o(e,t,t.type,t.pendingProps,r);case 15:return Oo(e,t,t.type,t.pendingProps,r);case 19:return Yo(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},null===e?((r=Ho(n,r)).ref=t.ref,t.child=r,r.return=t,t=r):((r=Un(e.child,n)).ref=t.ref,t.child=r,r.return=t,t=r),t;case 22:return Io(e,t,r);case 24:return ki(t),n=xi(Ii),null===e?(null===(i=zi())&&(i=nu,a=Ci(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=r),i=a),t.memoizedState={parent:n,cache:i},ra(t),bi(0,Ii,i)):(0!==(e.lanes&r)&&(na(e,t),ca(t,null,null,r),ua()),i=e.memoizedState,a=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Ii,n)):(n=a.cache,bi(0,Ii,n),n!==i.cache&&Ti(t,[Ii],r,!0))),Po(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Zo(e){e.flags|=4}function Jo(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!jd(t)){if(null!==(t=no.current)&&((4194048&au)===au?null!==io:(62914560&au)!==au&&!(536870912&au)||t!==io))throw Zi=Yi,Vi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?we():536870912,e.lanes|=t,yu|=t)}function tl(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=65011712&i.subtreeFlags,n|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function nl(e,t,r){var n=t.pendingProps;switch(ri(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ei(Ii),W(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Zo(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,pi())),rl(t),null;case 26:return r=t.memoizedState,null===e?(Zo(t),null!==r?(rl(t),Jo(t,r)):(rl(t),t.flags&=-16777217)):r?r!==e.memoizedState?(Zo(t),rl(t),Jo(t,r)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==n&&Zo(t),rl(t),t.flags&=-16777217),null;case 27:q(t),r=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Zo(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return rl(t),null}e=z.current,hi(t)?ci(t):(e=Ed(i,n,r),t.stateNode=e,Zo(t))}return rl(t),null;case 5:if(q(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Zo(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return rl(t),null}if(e=z.current,hi(t))ci(t);else{switch(i=nd(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof n.is?i.createElement("select",{is:n.is}):i.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"==typeof n.is?i.createElement(r,{is:n.is}):i.createElement(r)}}e[Ie]=t,e[Ce]=n;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zo(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&Zo(t);else{if("string"!=typeof n&&null===t.stateNode)throw Error(s(166));if(e=H.current,hi(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(i=ni))switch(i.tag){case 27:case 5:n=i.memoizedProps}e[Ie]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||Xc(e.nodeValue,r)))||ui(t)}else(e=nd(e).createTextNode(n))[Ie]=t,t.stateNode=e}return rl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[Ie]=t}else fi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),128&t.flags)return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){i=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(i=n.alternate.memoizedState.cachePool.pool);var a=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(a=n.memoizedState.cachePool.pool),a!==i&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),el(t,t.updateQueue),rl(t),null;case 4:return W(),null===e&&$c(t.stateNode.containerInfo),rl(t),null;case 10:return Ei(t.type),rl(t),null;case 19:if($(uo),null===(i=t.memoizedState))return rl(t),null;if(n=!!(128&t.flags),null===(a=i.rendering))if(n)tl(i,!1);else{if(0!==hu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=co(e))){for(t.flags|=128,tl(i,!1),e=a.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Bn(r,e),r=r.sibling;return j(uo,1&uo.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Tu&&(t.flags|=128,n=!0,tl(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=co(a))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!ai)return rl(t),null}else 2*te()-i.renderingStartTime>Tu&&536870912!==r&&(t.flags|=128,n=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=uo.current,j(uo,n?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return lo(t),ya(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?!!(536870912&r)&&!(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(r=t.updateQueue)&&el(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&$(ji),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ei(Ii),rl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function il(e,t){switch(ri(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ei(Ii),W(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return q(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return $(uo),null;case 4:return W(),null;case 10:return Ei(t.type),null;case 22:case 23:return lo(t),ya(),null!==e&&$(ji),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ei(Ii),null;default:return null}}function al(e,t){switch(ri(t),t.tag){case 3:Ei(Ii),W();break;case 26:case 27:case 5:q(t);break;case 4:W();break;case 13:lo(t);break;case 19:$(uo);break;case 10:Ei(t.type);break;case 22:case 23:lo(t),ya(),null!==e&&$(ji);break;case 24:Ei(Ii)}}function sl(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var i=n.next;r=i;do{if((r.tag&e)===e){n=void 0;var a=r.create,s=r.inst;n=a(),s.destroy=n}r=r.next}while(r!==i)}}catch(e){cc(t,t.return,e)}}function ol(e,t,r){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var a=i.next;n=a;do{if((n.tag&e)===e){var s=n.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,i=t;var l=r,u=o;try{u()}catch(e){cc(i,l,e)}}}n=n.next}while(n!==a)}}catch(e){cc(t,t.return,e)}}function ll(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{ha(t,r)}catch(t){cc(e,e.return,t)}}}function ul(e,t,r){r.props=mo(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(r){cc(e,t,r)}}function cl(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"==typeof r?e.refCleanup=r(n):r.current=n}}catch(r){cc(e,t,r)}}function dl(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"==typeof n)try{n()}catch(r){cc(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof r)try{r(null)}catch(r){cc(e,t,r)}else r.current=null}function hl(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(t){cc(e,e.return,t)}}function fl(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,o=null,l=null,u=null,c=null,d=null;for(p in r){var h=r[p];if(r.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":u=h;default:n.hasOwnProperty(p)||Zc(e,t,p,null,n,h)}}for(var f in n){var p=n[f];if(h=r[f],n.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":a=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&Zc(e,t,f,p,n,h)}}return void mt(e,o,l,u,c,d,a,i);case"select":for(a in p=o=l=f=null,r)if(u=r[a],r.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":p=u;default:n.hasOwnProperty(a)||Zc(e,t,a,null,n,u)}for(i in n)if(a=n[i],u=r[i],n.hasOwnProperty(i)&&(null!=a||null!=u))switch(i){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==u&&Zc(e,t,i,a,n,u)}return t=l,r=o,n=p,void(null!=f?bt(e,!!r,f,!1):!!n!=!!r&&(null!=t?bt(e,!!r,t,!0):bt(e,!!r,r?[]:"",!1)));case"textarea":for(l in p=f=null,r)if(i=r[l],r.hasOwnProperty(l)&&null!=i&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zc(e,t,l,null,n,i)}for(o in n)if(i=n[o],a=r[o],n.hasOwnProperty(o)&&(null!=i||null!=a))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==a&&Zc(e,t,o,i,n,a)}return void Et(e,f,p);case"option":for(var g in r)f=r[g],r.hasOwnProperty(g)&&null!=f&&!n.hasOwnProperty(g)&&("selected"===g?e.selected=!1:Zc(e,t,g,null,n,f));for(u in n)f=n[u],p=r[u],!n.hasOwnProperty(u)||f===p||null==f&&null==p||("selected"===u?e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f:Zc(e,t,u,f,n,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in r)f=r[m],r.hasOwnProperty(m)&&null!=f&&!n.hasOwnProperty(m)&&Zc(e,t,m,null,n,f);for(c in n)if(f=n[c],p=r[c],n.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:Zc(e,t,c,f,n,p)}return;default:if(xt(t)){for(var y in r)f=r[y],r.hasOwnProperty(y)&&void 0!==f&&!n.hasOwnProperty(y)&&Jc(e,t,y,void 0,n,f);for(d in n)f=n[d],p=r[d],!n.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Jc(e,t,d,f,n,p);return}}for(var v in r)f=r[v],r.hasOwnProperty(v)&&null!=f&&!n.hasOwnProperty(v)&&Zc(e,t,v,null,n,f);for(h in n)f=n[h],p=r[h],!n.hasOwnProperty(h)||f===p||null==f&&null==p||Zc(e,t,h,f,n,p)}(n,e.type,r,t),n[Ce]=t}catch(t){cc(e,e.return,t)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Qc));else if(4!==n&&(27===n&&fd(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,r),e=e.sibling;null!==e;)ml(e,t,r),e=e.sibling}function yl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&fd(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(yl(e,t,r),e=e.sibling;null!==e;)yl(e,t,r),e=e.sibling}function vl(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,n,r),t[Ie]=e,t[Ce]=r}catch(t){cc(e,e.return,t)}}var bl=!1,El=!1,Sl=!1,Tl="function"==typeof WeakSet?WeakSet:Set,wl=null;function Al(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Fl(e,r),4&n&&sl(5,r);break;case 1:if(Fl(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(e){cc(r,r.return,e)}else{var i=mo(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){cc(r,r.return,e)}}64&n&&ll(r),512&n&&cl(r,r.return);break;case 3:if(Fl(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{ha(e,t)}catch(e){cc(r,r.return,e)}}break;case 27:null===t&&4&n&&vl(r);case 26:case 5:Fl(e,r),null===t&&4&n&&hl(r),512&n&&cl(r,r.return);break;case 12:Fl(e,r);break;case 13:Fl(e,r),4&n&&_l(e,r),64&n&&null!==(e=r.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$?"!==e.data||"complete"===r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=pc.bind(null,r));break;case 22:if(!(n=null!==r.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||El,i=bl;var a=El;bl=n,(El=t)&&!a?Bl(e,r,!!(8772&r.subtreeFlags)):Fl(e,r),bl=i,El=a}break;case 30:break;default:Fl(e,r)}}function kl(e){var t=e.alternate;null!==t&&(e.alternate=null,kl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&$e(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xl=null,Ll=!1;function Pl(e,t,r){for(r=r.child;null!==r;)Rl(e,t,r),r=r.sibling}function Rl(e,t,r){if(de&&"function"==typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,r)}catch(e){}switch(r.tag){case 26:El||dl(r,t),Pl(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:El||dl(r,t);var n=xl,i=Ll;fd(r.type)&&(xl=r.stateNode,Ll=!1),Pl(e,t,r),Sd(r.stateNode),xl=n,Ll=i;break;case 5:El||dl(r,t);case 6:if(n=xl,i=Ll,xl=null,Pl(e,t,r),Ll=i,null!==(xl=n))if(Ll)try{(9===xl.nodeType?xl.body:"HTML"===xl.nodeName?xl.ownerDocument.body:xl).removeChild(r.stateNode)}catch(e){cc(r,t,e)}else try{xl.removeChild(r.stateNode)}catch(e){cc(r,t,e)}break;case 18:null!==xl&&(Ll?(pd(9===(e=xl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),Lh(e)):pd(xl,r.stateNode));break;case 4:n=xl,i=Ll,xl=r.stateNode.containerInfo,Ll=!0,Pl(e,t,r),xl=n,Ll=i;break;case 0:case 11:case 14:case 15:El||ol(2,r,t),El||ol(4,r,t),Pl(e,t,r);break;case 1:El||(dl(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount&&ul(r,t,n)),Pl(e,t,r);break;case 21:Pl(e,t,r);break;case 22:El=(n=El)||null!==r.memoizedState,Pl(e,t,r),El=n;break;default:Pl(e,t,r)}}function _l(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Lh(e)}catch(e){cc(t,t.return,e)}}function Ol(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Tl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){var n=gc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}function Il(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){xl=l.stateNode,Ll=!1;break e}break;case 5:xl=l.stateNode,Ll=!1;break e;case 3:case 4:xl=l.stateNode.containerInfo,Ll=!0;break e}l=l.return}if(null===xl)throw Error(s(160));Rl(a,o,i),xl=null,Ll=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Dl(t,e),t=t.sibling}var Cl=null;function Dl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Il(t,e),Ml(e),4&n&&(ol(3,e,e.return),sl(3,e),ol(5,e,e.return));break;case 1:Il(t,e),Ml(e),512&n&&(El||null===r||dl(r,r.return)),64&n&&bl&&null!==(e=e.updateQueue)&&null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n));break;case 26:var i=Cl;if(Il(t,e),Ml(e),512&n&&(El||null===r||dl(r,r.return)),4&n){var a=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":(!(a=i.getElementsByTagName("title")[0])||a[Be]||a[Ie]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(n),i.head.insertBefore(a,i.querySelector("head > title"))),ed(a,n,r),a[Ie]=e,Ke(a),n=a;break e;case"link":var o=Bd("link","href",i).get(n+(r.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&a.getAttribute("rel")===(null==r.rel?null:r.rel)&&a.getAttribute("title")===(null==r.title?null:r.title)&&a.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){o.splice(l,1);break t}ed(a=i.createElement(n),n,r),i.head.appendChild(a);break;case"meta":if(o=Bd("meta","content",i).get(n+(r.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&a.getAttribute("name")===(null==r.name?null:r.name)&&a.getAttribute("property")===(null==r.property?null:r.property)&&a.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&a.getAttribute("charset")===(null==r.charSet?null:r.charSet)){o.splice(l,1);break t}ed(a=i.createElement(n),n,r),i.head.appendChild(a);break;default:throw Error(s(468,n))}a[Ie]=e,Ke(a),n=a}e.stateNode=n}else $d(i,e.type,e.stateNode);else e.stateNode=Dd(i,n,e.memoizedProps);else a!==n?(null===a?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):a.count--,null===n?$d(i,e.type,e.stateNode):Dd(i,n,e.memoizedProps)):null===n&&null!==e.stateNode&&fl(e,e.memoizedProps,r.memoizedProps)}break;case 27:Il(t,e),Ml(e),512&n&&(El||null===r||dl(r,r.return)),null!==r&&4&n&&fl(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Il(t,e),Ml(e),512&n&&(El||null===r||dl(r,r.return)),32&e.flags){i=e.stateNode;try{Tt(i,"")}catch(t){cc(e,e.return,t)}}4&n&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==r?r.memoizedProps:i),1024&n&&(Sl=!0);break;case 6:if(Il(t,e),Ml(e),4&n){if(null===e.stateNode)throw Error(s(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(t){cc(e,e.return,t)}}break;case 3:if(Ud=null,i=Cl,Cl=Ad(t.containerInfo),Il(t,e),Cl=i,Ml(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Lh(t.containerInfo)}catch(t){cc(e,e.return,t)}Sl&&(Sl=!1,Nl(e));break;case 4:n=Cl,Cl=Ad(e.stateNode.containerInfo),Il(t,e),Ml(e),Cl=n;break;case 12:default:Il(t,e),Ml(e);break;case 13:Il(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==r&&null!==r.memoizedState)&&(Su=te()),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,Ol(e,n));break;case 22:i=null!==e.memoizedState;var u=null!==r&&null!==r.memoizedState,c=bl,d=El;if(bl=c||i,El=d||u,Il(t,e),El=d,bl=c,Ml(e),8192&n)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===r||u||bl||El||Ul(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){u=r=t;try{if(a=u.stateNode,i)"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=u.stateNode;var h=u.memoizedProps.style,f=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(e){cc(u,u.return,e)}}}else if(6===t.tag){if(null===r){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(e){cc(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&null!==(n=e.updateQueue)&&null!==(r=n.retryQueue)&&(n.retryQueue=null,Ol(e,r));break;case 19:Il(t,e),Ml(e),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,Ol(e,n));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(pl(n)){r=n;break}n=n.return}if(null==r)throw Error(s(160));switch(r.tag){case 27:var i=r.stateNode;yl(e,gl(e),i);break;case 5:var a=r.stateNode;32&r.flags&&(Tt(a,""),r.flags&=-33),yl(e,gl(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;ml(e,gl(e),o);break;default:throw Error(s(161))}}catch(t){cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Nl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Nl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Al(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Ul(t);break;case 1:dl(t,t.return);var r=t.stateNode;"function"==typeof r.componentWillUnmount&&ul(t,t.return,r),Ul(t);break;case 27:Sd(t.stateNode);case 26:case 5:dl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Bl(e,t,r){for(r=r&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,i=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:Bl(i,a,r),sl(4,a);break;case 1:if(Bl(i,a,r),"function"==typeof(i=(n=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(e){cc(n,n.return,e)}if(null!==(i=(n=a).updateQueue)){var o=n.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)da(l[i],o)}catch(e){cc(n,n.return,e)}}r&&64&s&&ll(a),cl(a,a.return);break;case 27:vl(a);case 26:case 5:Bl(i,a,r),r&&null===n&&4&s&&hl(a),cl(a,a.return);break;case 12:Bl(i,a,r);break;case 13:Bl(i,a,r),r&&4&s&&_l(i,a);break;case 22:null===a.memoizedState&&Bl(i,a,r),cl(a,a.return);break;case 30:break;default:Bl(i,a,r)}t=t.sibling}}function $l(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&Di(r))}function jl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Di(e))}function zl(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Gl(e,t,r,n),t=t.sibling}function Gl(e,t,r,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:zl(e,t,r,n),2048&i&&sl(9,t);break;case 1:case 13:default:zl(e,t,r,n);break;case 3:zl(e,t,r,n),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Di(e)));break;case 12:if(2048&i){zl(e,t,r,n),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"==typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){cc(t,t.return,e)}}else zl(e,t,r,n);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?zl(e,t,r,n):Kl(e,t):2&a._visibility?zl(e,t,r,n):(a._visibility|=2,Hl(e,t,r,n,!!(10256&t.subtreeFlags))),2048&i&&$l(s,t);break;case 24:zl(e,t,r,n),2048&i&&jl(t.alternate,t)}}function Hl(e,t,r,n,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,s=t,o=r,l=n,u=s.flags;switch(s.tag){case 0:case 11:case 15:Hl(a,s,o,l,i),sl(8,s);break;case 23:break;case 22:var c=s.stateNode;null!==s.memoizedState?2&c._visibility?Hl(a,s,o,l,i):Kl(a,s):(c._visibility|=2,Hl(a,s,o,l,i)),i&&2048&u&&$l(s.alternate,s);break;case 24:Hl(a,s,o,l,i),i&&2048&u&&jl(s.alternate,s);break;default:Hl(a,s,o,l,i)}t=t.sibling}}function Kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,i=n.flags;switch(n.tag){case 22:Kl(r,n),2048&i&&$l(n.alternate,n);break;case 24:Kl(r,n),2048&i&&jl(n.alternate,n);break;default:Kl(r,n)}t=t.sibling}}var Vl=8192;function Wl(e){if(e.subtreeFlags&Vl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Wl(e),e.flags&Vl&&null!==e.memoizedState&&function(e,t,r){if(null===zd)throw Error(s(475));var n=zd;if(!("stylesheet"!==t.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&t.state.loading)){if(null===t.instance){var i=Rd(r.href),a=e.querySelector(_d(i));if(a)return null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(n.count++,n=Hd.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=a,void Ke(a);a=e.ownerDocument||e,r=Od(r),(i=Td.get(i))&&Nd(r,i),Ke(a=a.createElement("link"));var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(a,"link",r),t.instance=a}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(n.count++,t=Hd.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(Cl,e.memoizedState,e.memoizedProps);break;case 5:default:Wl(e);break;case 3:case 4:var t=Cl;Cl=Ad(e.stateNode.containerInfo),Wl(e),Cl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Vl,Vl=16777216,Wl(e),Vl=t):Wl(e))}}function ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];wl=n,Jl(n,e)}ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Xl(e)}}function Zl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];wl=n,Jl(n,e)}ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Zl(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function Jl(e,t){for(;null!==wl;){var r=wl;switch(r.tag){case 0:case 11:case 15:ol(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Di(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,wl=n;else e:for(r=e;null!==wl;){var i=(n=wl).sibling,a=n.return;if(kl(n),n===r){wl=null;break e}if(null!==i){i.return=a,wl=i;break e}wl=a}}}var eu={getCacheForType:function(e){var t=xi(Ii),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},tu="function"==typeof WeakMap?WeakMap:Map,ru=0,nu=null,iu=null,au=0,su=0,ou=null,lu=!1,uu=!1,cu=!1,du=0,hu=0,fu=0,pu=0,gu=0,mu=0,yu=0,vu=null,bu=null,Eu=!1,Su=0,Tu=1/0,wu=null,Au=null,ku=0,xu=null,Lu=null,Pu=0,Ru=0,_u=null,Ou=null,Iu=0,Cu=null;function Du(){return 2&ru&&0!==au?au&-au:null!==D.T?0!==Fi?Fi:Rc():_e()}function Mu(){0===mu&&(mu=536870912&au&&!ai?536870912:Te());var e=no.current;return null!==e&&(e.flags|=32),mu}function Nu(e,t,r){(e!==nu||2!==su&&9!==su)&&null===e.cancelPendingCommit||(Gu(e,0),$u(e,au,mu,!1)),ke(e,r),2&ru&&e===nu||(e===nu&&(!(2&ru)&&(pu|=r),4===hu&&$u(e,au,mu,!1)),Tc(e))}function Fu(e,t,r){if(6&ru)throw Error(s(327));for(var n=!r&&!(124&t)&&0===(t&e.expiredLanes)||Ee(e,t),i=n?function(e,t){var r=ru;ru|=2;var n=Ku(),i=Vu();nu!==e||au!==t?(wu=null,Tu=te()+500,Gu(e,t)):uu=Ee(e,t);e:for(;;)try{if(0!==su&&null!==iu){t=iu;var a=ou;t:switch(su){case 1:su=0,ou=null,Ju(e,t,a,1);break;case 2:case 9:if(qi(a)){su=0,ou=null,Zu(t);break}t=function(){2!==su&&9!==su||nu!==e||(su=7),Tc(e)},a.then(t,t);break e;case 3:su=7;break e;case 4:su=5;break e;case 7:qi(a)?(su=0,ou=null,Zu(t)):(su=0,ou=null,Ju(e,t,a,7));break;case 5:var o=null;switch(iu.tag){case 26:o=iu.memoizedState;case 5:case 27:var l=iu;if(!o||jd(o)){su=0,ou=null;var u=l.sibling;if(null!==u)iu=u;else{var c=l.return;null!==c?(iu=c,ec(c)):iu=null}break t}}su=0,ou=null,Ju(e,t,a,5);break;case 6:su=0,ou=null,Ju(e,t,a,6);break;case 8:zu(),hu=6;break e;default:throw Error(s(462))}}Xu();break}catch(t){Hu(e,t)}return vi=yi=null,D.H=n,D.A=i,ru=r,null!==iu?0:(nu=null,au=0,Pn(),hu)}(e,t):Yu(e,t,!0),a=n;;){if(0===i){uu&&!n&&$u(e,t,0,!1);break}if(r=e.current.alternate,!a||Bu(r)){if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!=(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=vu;var u=l.current.memoizedState.isDehydrated;if(u&&(Gu(l,o).flags|=256),2!==(o=Yu(l,o,!1))){if(cu&&!u){l.errorRecoveryDisabledLanes|=a,pu|=a,i=4;break e}a=bu,bu=i,null!==a&&(null===bu?bu=a:bu.push.apply(bu,a))}i=o}if(a=!1,2!==i)continue}}if(1===i){Gu(e,0),$u(e,t,0,!0);break}e:{switch(n=e,a=i){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:$u(n,t,mu,!lu);break e;case 2:bu=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(i=Su+300-te())){if($u(n,t,mu,!lu),0!==be(n,0,!0))break e;n.timeoutHandle=ld(Uu.bind(null,n,r,bu,wu,Eu,t,mu,pu,yu,lu,a,2,-0,0),i)}else Uu(n,r,bu,wu,Eu,t,mu,pu,yu,lu,a,0,-0,0)}break}i=Yu(e,t,!1),a=!1}Tc(e)}function Uu(e,t,r,n,i,a,o,l,u,c,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||!(16785408&~h))&&(zd={stylesheets:null,count:0,unsuspend:Gd},Yl(t),null!==(h=function(){if(null===zd)throw Error(s(475));var e=zd;return e.stylesheets&&0===e.count&&Vd(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&Vd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=h(rc.bind(null,e,t,a,r,n,i,o,l,u,d,1,f,p)),void $u(e,a,o,!c);rc(e,t,a,r,n,i,o,l,u)}function Bu(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&null!==(r=t.updateQueue)&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Yr(a(),i))return!1}catch(e){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $u(e,t,r,n){t&=~gu,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var a=31-fe(i),s=1<<a;n[a]=-1,i&=~s}0!==r&&xe(e,r,t)}function ju(){return!!(6&ru)||(wc(0,!1),!1)}function zu(){if(null!==iu){if(0===su)var e=iu.return;else vi=yi=null,Fa(e=iu),Ys=null,qs=0,e=iu;for(;null!==e;)al(e.alternate,e),e=e.return;iu=null}}function Gu(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,ud(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),zu(),nu=e,iu=r=Un(e.current,null),au=t,su=0,ou=null,lu=!1,uu=Ee(e,t),cu=!1,yu=mu=gu=pu=fu=hu=0,bu=vu=null,Eu=!1,8&t&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var i=31-fe(n),a=1<<i;t|=e[i],n&=~a}return du=t,Pn(),r}function Hu(e,t){ba=null,D.H=Hs,t===Ki||t===Wi?(t=Ji(),su=3):t===Vi?(t=Ji(),su=4):su=t===xo?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,ou=t,null===iu&&(hu=1,So(e,An(t,e.current)))}function Ku(){var e=D.H;return D.H=Hs,null===e?Hs:e}function Vu(){var e=D.A;return D.A=eu,e}function Wu(){hu=4,lu||(4194048&au)!==au&&null!==no.current||(uu=!0),!(134217727&fu)&&!(134217727&pu)||null===nu||$u(nu,au,mu,!1)}function Yu(e,t,r){var n=ru;ru|=2;var i=Ku(),a=Vu();nu===e&&au===t||(wu=null,Gu(e,t)),t=!1;var s=hu;e:for(;;)try{if(0!==su&&null!==iu){var o=iu,l=ou;switch(su){case 8:zu(),s=6;break e;case 3:case 2:case 9:case 6:null===no.current&&(t=!0);var u=su;if(su=0,ou=null,Ju(e,o,l,u),r&&uu){s=0;break e}break;default:u=su,su=0,ou=null,Ju(e,o,l,u)}}qu(),s=hu;break}catch(t){Hu(e,t)}return t&&e.shellSuspendCounter++,vi=yi=null,ru=n,D.H=i,D.A=a,null===iu&&(nu=null,au=0,Pn()),s}function qu(){for(;null!==iu;)Qu(iu)}function Xu(){for(;null!==iu&&!J();)Qu(iu)}function Qu(e){var t=Qo(e.alternate,e,du);e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Zu(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=No(r,t,t.pendingProps,t.type,void 0,au);break;case 11:t=No(r,t,t.pendingProps,t.type.render,t.ref,au);break;case 5:Fa(t);default:al(r,t),t=Qo(r,t=iu=Bn(t,du),du)}e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Ju(e,t,r,n){vi=yi=null,Fa(t),Ys=null,qs=0;var i=t.return;try{if(function(e,t,r,n,i){if(r.flags|=32768,null!==n&&"object"==typeof n&&"function"==typeof n.then){if(null!==(t=r.alternate)&&wi(t,r,i,!0),null!==(r=no.current)){switch(r.tag){case 13:return null===io?Wu():null===r.alternate&&0===hu&&(hu=3),r.flags&=-257,r.flags|=65536,r.lanes=i,n===Yi?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),dc(e,n,i)),!1;case 22:return r.flags|=65536,n===Yi?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),dc(e,n,i)),!1}throw Error(s(435,r.tag))}return dc(e,n,i),Wu(),!1}if(ai)return null!==(t=no.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==li&&gi(An(e=Error(s(422),{cause:n}),r))):(n!==li&&gi(An(t=Error(s(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,n=An(n,r),oa(e,i=wo(e.stateNode,n,i)),4!==hu&&(hu=2)),!1;var a=Error(s(520),{cause:n});if(a=An(a,r),null===vu?vu=[a]:vu.push(a),4!==hu&&(hu=2),null===t)return!0;n=An(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=i&-i,r.lanes|=e,oa(r,e=wo(r.stateNode,n,e)),!1;case 1:if(t=r.type,a=r.stateNode,!(128&r.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Au&&Au.has(a))))return r.flags|=65536,i&=-i,r.lanes|=i,ko(i=Ao(i),e,r,n),oa(r,i),!1}r=r.return}while(null!==r);return!1}(e,i,t,r,au))return hu=1,So(e,An(r,e.current)),void(iu=null)}catch(t){if(null!==i)throw iu=i,t;return hu=1,So(e,An(r,e.current)),void(iu=null)}32768&t.flags?(ai||1===n?e=!0:uu||536870912&au?e=!1:(lu=e=!0,(2===n||9===n||3===n||6===n)&&null!==(n=no.current)&&13===n.tag&&(n.flags|=16384)),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(32768&t.flags)return void tc(t,lu);e=t.return;var r=nl(t.alternate,t,du);if(null!==r)return void(iu=r);if(null!==(t=t.sibling))return void(iu=t);iu=t=e}while(null!==t);0===hu&&(hu=5)}function tc(e,t){do{var r=il(e.alternate,e);if(null!==r)return r.flags&=32767,void(iu=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(iu=e);iu=e=r}while(null!==e);hu=6,iu=null}function rc(e,t,r,n,i,a,o,l,u){e.cancelPendingCommit=null;do{oc()}while(0!==ku);if(6&ru)throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,function(e,t,r,n,i,a){var s=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(r=s&~r;0<r;){var c=31-fe(r),d=1<<c;o[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-536870913)}r&=~d}0!==n&&xe(e,n,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,r,a|=Ln,o,l,u),e===nu&&(iu=nu=null,au=0),Lu=t,xu=e,Pu=r,Ru=a,_u=i,Ou=n,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,Q(ae,function(){return lc(),null})):(e.callbackNode=null,e.callbackPriority=0),n=!!(13878&t.flags),13878&t.subtreeFlags||n){n=D.T,D.T=null,i=M.p,M.p=2,o=ru,ru|=4;try{!function(e,t){if(e=e.containerInfo,td=rh,en(e=Jr(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(e){r=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==n&&3!==h.nodeType||(u=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++c===i&&(l=o),f===a&&++d===n&&(u=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===l||-1===u?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(rd={focusedElem:e,selectionRange:r},rh=!1,wl=t;null!==wl;)if(e=(t=wl).child,1024&t.subtreeFlags&&null!==e)e.return=t,wl=e;else for(;null!==wl;){switch(a=(t=wl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,r=t,i=a.memoizedProps,a=a.memoizedState,n=r.stateNode;try{var g=mo(r.type,i,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(g,a),n.__reactInternalSnapshotBeforeUpdate=e}catch(e){cc(r,r.return,e)}}break;case 3:if(1024&e)if(9===(r=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,wl=e;break}wl=t.return}}(e,t)}finally{ru=o,M.p=i,D.T=n}}ku=1,nc(),ic(),ac()}}function nc(){if(1===ku){ku=0;var e=xu,t=Lu,r=!!(13878&t.flags);if(13878&t.subtreeFlags||r){r=D.T,D.T=null;var n=M.p;M.p=2;var i=ru;ru|=4;try{Dl(t,e);var a=rd,s=Jr(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&Zr(o.ownerDocument.documentElement,o)){if(null!==l&&en(o)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(c,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(s=m,m=g,g=s);var y=Qr(o,g),v=Qr(o,m);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var E=d[o];E.element.scrollLeft=E.left,E.element.scrollTop=E.top}}rh=!!td,rd=td=null}finally{ru=i,M.p=n,D.T=r}}e.current=t,ku=2}}function ic(){if(2===ku){ku=0;var e=xu,t=Lu,r=!!(8772&t.flags);if(8772&t.subtreeFlags||r){r=D.T,D.T=null;var n=M.p;M.p=2;var i=ru;ru|=4;try{Al(e,t.alternate,t)}finally{ru=i,M.p=n,D.T=r}}ku=3}}function ac(){if(4===ku||3===ku){ku=0,ee();var e=xu,t=Lu,r=Pu,n=Ou;10256&t.subtreeFlags||10256&t.flags?ku=5:(ku=0,Lu=xu=null,sc(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Au=null),Re(r),t=t.stateNode,de&&"function"==typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==n){t=D.T,i=M.p,M.p=2,D.T=null;try{for(var a=e.onRecoverableError,s=0;s<n.length;s++){var o=n[s];a(o.value,{componentStack:o.stack})}}finally{D.T=t,M.p=i}}3&Pu&&oc(),Tc(e),i=e.pendingLanes,4194090&r&&42&i?e===Cu?Iu++:(Iu=0,Cu=e):Iu=0,wc(0,!1)}}function sc(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,Di(t))}function oc(e){return nc(),ic(),ac(),lc()}function lc(){if(5!==ku)return!1;var e=xu,t=Ru;Ru=0;var r=Re(Pu),n=D.T,i=M.p;try{M.p=32>r?32:r,D.T=null,r=_u,_u=null;var a=xu,o=Pu;if(ku=0,Lu=xu=null,Pu=0,6&ru)throw Error(s(331));var l=ru;if(ru|=4,Ql(a.current),Gl(a,a.current,o,r),ru=l,wc(0,!1),de&&"function"==typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,a)}catch(e){}return!0}finally{M.p=i,D.T=n,sc(e,t)}}function uc(e,t,r){t=An(r,t),null!==(e=aa(e,t=wo(e.stateNode,t,2),2))&&(ke(e,2),Tc(e))}function cc(e,t,r){if(3===e.tag)uc(e,e,r);else for(;null!==t;){if(3===t.tag){uc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Au||!Au.has(n))){e=An(r,e),null!==(n=aa(t,r=Ao(2),2))&&(ko(r,n,t,e),ke(n,2),Tc(n));break}}t=t.return}}function dc(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new tu;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(cu=!0,i.add(r),e=hc.bind(null,e,t,r),t.then(e,e))}function hc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,nu===e&&(au&r)===r&&(4===hu||3===hu&&(62914560&au)===au&&300>te()-Su?!(2&ru)&&Gu(e,0):gu|=r,yu===au&&(yu=0)),Tc(e)}function fc(e,t){0===t&&(t=we()),null!==(e=On(e,t))&&(ke(e,t),Tc(e))}function pc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),fc(e,r)}function gc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==n&&n.delete(t),fc(e,r)}var mc=null,yc=null,vc=!1,bc=!1,Ec=!1,Sc=0;function Tc(e){e!==yc&&null===e.next&&(null===yc?mc=yc=e:yc=yc.next=e),bc=!0,vc||(vc=!0,dd(function(){6&ru?Q(ne,Ac):kc()}))}function wc(e,t){if(!Ec&&bc){Ec=!0;do{for(var r=!1,n=mc;null!==n;){if(!t)if(0!==e){var i=n.pendingLanes;if(0===i)var a=0;else{var s=n.suspendedLanes,o=n.pingedLanes;a=(1<<31-fe(42|e)+1)-1,a=201326741&(a&=i&~(s&~o))?201326741&a|1:a?2|a:0}0!==a&&(r=!0,Pc(n,a))}else a=au,!(3&(a=be(n,n===nu?a:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||Ee(n,a)||(r=!0,Pc(n,a));n=n.next}}while(r);Ec=!1}}function Ac(){kc()}function kc(){bc=vc=!1;var e,t=0;0!==Sc&&(((e=window.event)&&"popstate"===e.type?e!==od&&(od=e,!0):(od=null,!1))&&(t=Sc),Sc=0);for(var r=te(),n=null,i=mc;null!==i;){var a=i.next,s=xc(i,r);0===s?(i.next=null,null===n?mc=a:n.next=a,null===a&&(yc=n)):(n=i,(0!==t||3&s)&&(bc=!0)),i=a}wc(t,!1)}function xc(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-fe(a),o=1<<s,l=i[s];-1===l?0!==(o&r)&&0===(o&n)||(i[s]=Se(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(r=au,r=be(e,e===(t=nu)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===su||9===su)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&Z(n),e.callbackNode=null,e.callbackPriority=0;if(!(3&r)||Ee(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&Z(n),Re(r)){case 2:case 8:r=ie;break;case 32:default:r=ae;break;case 268435456:r=oe}return n=Lc.bind(null,e),r=Q(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&Z(n),e.callbackPriority=2,e.callbackNode=null,2}function Lc(e,t){if(0!==ku&&5!==ku)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(oc()&&e.callbackNode!==r)return null;var n=au;return 0===(n=be(e,e===nu?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fu(e,n,t),xc(e,te()),null!=e.callbackNode&&e.callbackNode===r?Lc.bind(null,e):null)}function Pc(e,t){if(oc())return null;Fu(e,t,!0)}function Rc(){return 0===Sc&&(Sc=Te()),Sc}function _c(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Rt(""+e)}function Oc(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Ic=0;Ic<Sn.length;Ic++){var Cc=Sn[Ic];Tn(Cc.toLowerCase(),"on"+(Cc[0].toUpperCase()+Cc.slice(1)))}Tn(fn,"onAnimationEnd"),Tn(pn,"onAnimationIteration"),Tn(gn,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(mn,"onTransitionRun"),Tn(yn,"onTransitionStart"),Tn(vn,"onTransitionCancel"),Tn(bn,"onTransitionEnd"),qe("onMouseEnter",["mouseout","mouseover"]),qe("onMouseLeave",["mouseout","mouseover"]),qe("onPointerEnter",["pointerout","pointerover"]),qe("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function Nc(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=u;try{a(i)}catch(e){yo(e)}i.currentTarget=null,a=l}else for(s=0;s<n.length;s++){if(l=(o=n[s]).instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=u;try{a(i)}catch(e){yo(e)}i.currentTarget=null,a=l}}}}function Fc(e,t){var r=t[Me];void 0===r&&(r=t[Me]=new Set);var n=e+"__bubble";r.has(n)||(jc(t,e,2,!1),r.add(n))}function Uc(e,t,r){var n=0;t&&(n|=4),jc(r,e,n,t)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function $c(e){if(!e[Bc]){e[Bc]=!0,Ve.forEach(function(t){"selectionchange"!==t&&(Mc.has(t)||Uc(t,!1,e),Uc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bc]||(t[Bc]=!0,Uc("selectionchange",!1,t))}}function jc(e,t,r,n){switch(uh(t)){case 2:var i=nh;break;case 8:i=ih;break;default:i=ah}r=i.bind(null,t,r,e),i=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function zc(e,t,r,n,i){var a=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===i)break;if(4===s)for(s=n.return;null!==s;){var u=s.tag;if((3===u||4===u)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==o;){if(null===(s=je(o)))return;if(5===(u=s.tag)||6===u||26===u||27===u){n=a=s;continue e}o=o.parentNode}}n=n.return}Nt(function(){var n=a,i=Ot(r),s=[];e:{var o=En.get(e);if(void 0!==o){var u=Jt,c=e;switch(e){case"keypress":if(0===Kt(r))break e;case"keydown":case"keyup":u=pr;break;case"focusin":c="focus",u=ar;break;case"focusout":c="blur",u=ar;break;case"beforeblur":case"afterblur":u=ar;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=nr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=ir;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=mr;break;case fn:case pn:case gn:u=sr;break;case bn:u=yr;break;case"scroll":case"scrollend":u=tr;break;case"wheel":u=vr;break;case"copy":case"cut":case"paste":u=or;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=gr;break;case"toggle":case"beforetoggle":u=br}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,g=n;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Ft(g,f))&&d.push(Gc(g,m,p)),h)break;g=g.return}0<d.length&&(o=new u(o,c,null,r,i),s.push({event:o,listeners:d}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===_t||!(c=r.relatedTarget||r.fromElement)||!je(c)&&!c[De])&&(u||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,u?(u=n,null!==(c=(c=r.relatedTarget||r.toElement)?je(c):null)&&(h=l(c),d=c.tag,c!==h||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=n),u!==c)){if(d=nr,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=gr,m="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==u?o:Ge(u),p=null==c?o:Ge(c),(o=new d(m,g+"leave",u,r,i)).target=h,o.relatedTarget=p,m=null,je(i)===n&&((d=new d(f,g+"enter",c,r,i)).target=p,d.relatedTarget=h,m=d),h=m,u&&c)e:{for(f=c,g=0,p=d=u;p;p=Kc(p))g++;for(p=0,m=f;m;m=Kc(m))p++;for(;0<g-p;)d=Kc(d),g--;for(;0<p-g;)f=Kc(f),p--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Kc(d),f=Kc(f)}d=null}else d=null;null!==u&&Vc(s,o,u,d,!1),null!==c&&null!==h&&Vc(s,h,c,d,!0)}if("select"===(u=(o=n?Ge(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===u&&"file"===o.type)var y=Fr;else if(Or(o))if(Ur)y=Wr;else{y=Kr;var v=Hr}else!(u=o.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?n&&xt(n.elementType)&&(y=Fr):y=Vr;switch(y&&(y=y(e,n))?Ir(s,y,r,i):(v&&v(e,o,n),"focusout"===e&&n&&"number"===o.type&&null!=n.memoizedProps.value&&vt(o,"number",o.value)),v=n?Ge(n):window,e){case"focusin":(Or(v)||"true"===v.contentEditable)&&(rn=v,nn=n,an=null);break;case"focusout":an=nn=rn=null;break;case"mousedown":sn=!0;break;case"contextmenu":case"mouseup":case"dragend":sn=!1,on(s,r,i);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":on(s,r,i)}var b;if(Sr)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Rr?Lr(e,r)&&(E="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(E="onCompositionStart");E&&(Ar&&"ko"!==r.locale&&(Rr||"onCompositionStart"!==E?"onCompositionEnd"===E&&Rr&&(b=Ht()):(zt="value"in(jt=i)?jt.value:jt.textContent,Rr=!0)),0<(v=Hc(n,E)).length&&(E=new lr(E,e,null,r,i),s.push({event:E,listeners:v}),(b||null!==(b=Pr(r)))&&(E.data=b))),(b=wr?function(e,t){switch(e){case"compositionend":return Pr(t);case"keypress":return 32!==t.which?null:(xr=!0,kr);case"textInput":return(e=t.data)===kr&&xr?null:e;default:return null}}(e,r):function(e,t){if(Rr)return"compositionend"===e||!Sr&&Lr(e,t)?(e=Ht(),Gt=zt=jt=null,Rr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ar&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(E=Hc(n,"onBeforeInput")).length&&(v=new lr("onBeforeInput","beforeinput",null,r,i),s.push({event:v,listeners:E}),v.data=b),function(e,t,r,n,i){if("submit"===t&&r&&r.stateNode===i){var a=_c((i[Ce]||null).action),s=n.submitter;s&&null!==(t=(t=s[Ce]||null)?_c(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var o=new Jt("action","action",null,n,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==Sc){var e=s?Oc(i,s):new FormData(i);_s(r,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"==typeof a&&(o.preventDefault(),e=s?Oc(i,s):new FormData(i),_s(r,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}(s,e,n,r,i)}Nc(s,t)})}function Gc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hc(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=Ft(e,r))&&n.unshift(Gc(e,i,a)),null!=(i=Ft(e,t))&&n.push(Gc(e,i,a))),3===e.tag)return n;e=e.return}return[]}function Kc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Vc(e,t,r,n,i){for(var a=t._reactName,s=[];null!==r&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(o=o.tag,null!==l&&l===n)break;5!==o&&26!==o&&27!==o||null===u||(l=u,i?null!=(u=Ft(r,a))&&s.unshift(Gc(r,u,l)):i||null!=(u=Ft(r,a))&&s.push(Gc(r,u,l))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Wc=/\r\n?/g,Yc=/\u0000|\uFFFD/g;function qc(e){return("string"==typeof e?e:""+e).replace(Wc,"\n").replace(Yc,"")}function Xc(e,t){return t=qc(t),qc(e)===t}function Qc(){}function Zc(e,t,r,n,i,a){switch(r){case"children":"string"==typeof n?"body"===t||"textarea"===t&&""===n||Tt(e,n):("number"==typeof n||"bigint"==typeof n)&&"body"!==t&&Tt(e,""+n);break;case"className":rt(e,"class",n);break;case"tabIndex":rt(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":rt(e,r,n);break;case"style":kt(e,n,a);break;case"data":if("object"!==t){rt(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"==typeof n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=Rt(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"==typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===r?("input"!==t&&Zc(e,t,"name",i.name,i,null),Zc(e,t,"formEncType",i.formEncType,i,null),Zc(e,t,"formMethod",i.formMethod,i,null),Zc(e,t,"formTarget",i.formTarget,i,null)):(Zc(e,t,"encType",i.encType,i,null),Zc(e,t,"method",i.method,i,null),Zc(e,t,"target",i.target,i,null))),null==n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=Rt(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Qc);break;case"onScroll":null!=n&&Fc("scroll",e);break;case"onScrollEnd":null!=n&&Fc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(s(61));if(null!=(r=n.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"muted":e.muted=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"==typeof n||"boolean"==typeof n||"symbol"==typeof n){e.removeAttribute("xlink:href");break}r=Rt(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!=typeof n&&"symbol"!=typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"==typeof n||"symbol"==typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":Fc("beforetoggle",e),Fc("toggle",e),tt(e,"popover",n);break;case"xlinkActuate":nt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":nt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":nt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":nt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":nt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":nt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":nt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":nt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":nt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":tt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&tt(e,r=Lt.get(r)||r,n)}}function Jc(e,t,r,n,i,a){switch(r){case"style":kt(e,n,a);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(s(61));if(null!=(r=n.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=r}}break;case"children":"string"==typeof n?Tt(e,n):("number"==typeof n||"bigint"==typeof n)&&Tt(e,""+n);break;case"onScroll":null!=n&&Fc("scroll",e);break;case"onScrollEnd":null!=n&&Fc("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:We.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(i=r.endsWith("Capture"),t=r.slice(2,i?r.length-7:void 0),"function"==typeof(a=null!=(a=e[Ce]||null)?a[r]:null)&&e.removeEventListener(t,a,i),"function"!=typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):tt(e,r,n):("function"!=typeof a&&null!==a&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,i)))}}function ed(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fc("error",e),Fc("load",e);var n,i=!1,a=!1;for(n in r)if(r.hasOwnProperty(n)){var o=r[n];if(null!=o)switch(n){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Zc(e,t,n,o,r,null)}}return a&&Zc(e,t,"srcSet",r.srcSet,r,null),void(i&&Zc(e,t,"src",r.src,r,null));case"input":Fc("invalid",e);var l=n=o=a=null,u=null,c=null;for(i in r)if(r.hasOwnProperty(i)){var d=r[i];if(null!=d)switch(i){case"name":a=d;break;case"type":o=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":n=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:Zc(e,t,i,d,r,null)}}return yt(e,n,l,u,c,o,a,!1),void dt(e);case"select":for(a in Fc("invalid",e),i=o=n=null,r)if(r.hasOwnProperty(a)&&null!=(l=r[a]))switch(a){case"value":n=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:Zc(e,t,a,l,r,null)}return t=n,r=o,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=r&&bt(e,!!i,r,!0));case"textarea":for(o in Fc("invalid",e),n=a=i=null,r)if(r.hasOwnProperty(o)&&null!=(l=r[o]))switch(o){case"value":i=l;break;case"defaultValue":a=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Zc(e,t,o,l,r,null)}return St(e,i,a,n),void dt(e);case"option":for(u in r)r.hasOwnProperty(u)&&null!=(i=r[u])&&("selected"===u?e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:Zc(e,t,u,i,r,null));return;case"dialog":Fc("beforetoggle",e),Fc("toggle",e),Fc("cancel",e),Fc("close",e);break;case"iframe":case"object":Fc("load",e);break;case"video":case"audio":for(i=0;i<Dc.length;i++)Fc(Dc[i],e);break;case"image":Fc("error",e),Fc("load",e);break;case"details":Fc("toggle",e);break;case"embed":case"source":case"link":Fc("error",e),Fc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in r)if(r.hasOwnProperty(c)&&null!=(i=r[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Zc(e,t,c,i,r,null)}return;default:if(xt(t)){for(d in r)r.hasOwnProperty(d)&&void 0!==(i=r[d])&&Jc(e,t,d,i,r,void 0);return}}for(l in r)r.hasOwnProperty(l)&&null!=(i=r[l])&&Zc(e,t,l,i,r,null)}var td=null,rd=null;function nd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function sd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null,ld="function"==typeof setTimeout?setTimeout:void 0,ud="function"==typeof clearTimeout?clearTimeout:void 0,cd="function"==typeof Promise?Promise:void 0,dd="function"==typeof queueMicrotask?queueMicrotask:void 0!==cd?function(e){return cd.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function pd(e,t){var r=t,n=0,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0<n&&8>n){r=n;var s=e.ownerDocument;if(1&r&&Sd(s.documentElement),2&r&&Sd(s.body),4&r)for(Sd(r=s.head),s=r.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||r.removeChild(s),s=o}}if(0===i)return e.removeChild(a),void Lh(t);i--}else"$"===r||"$?"===r||"$!"===r?i++:n=r.charCodeAt(0)-48;else n=0;r=a}while(r);Lh(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":gd(r),$e(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function md(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function Ed(e,t,r){switch(t=nd(r),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$e(e)}var Td=new Map,wd=new Set;function Ad(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var kd=M.d;M.d={f:function(){var e=kd.f(),t=ju();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Is(t):kd.r(e)},D:function(e){kd.D(e),Ld("dns-prefetch",e,null)},C:function(e,t){kd.C(e,t),Ld("preconnect",e,t)},L:function(e,t,r){kd.L(e,t,r);var n=xd;if(n&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&r&&r.imageSrcSet?(i+='[imagesrcset="'+gt(r.imageSrcSet)+'"]',"string"==typeof r.imageSizes&&(i+='[imagesizes="'+gt(r.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var a=i;switch(t){case"style":a=Rd(e);break;case"script":a=Id(e)}Td.has(a)||(e=h({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),Td.set(a,e),null!==n.querySelector(i)||"style"===t&&n.querySelector(_d(a))||"script"===t&&n.querySelector(Cd(a))||(ed(t=n.createElement("link"),"link",e),Ke(t),n.head.appendChild(t)))}},m:function(e,t){kd.m(e,t);var r=xd;if(r&&e){var n=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(n)+'"][href="'+gt(e)+'"]',a=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Id(e)}if(!Td.has(a)&&(e=h({rel:"modulepreload",href:e},t),Td.set(a,e),null===r.querySelector(i))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Cd(a)))return}ed(n=r.createElement("link"),"link",e),Ke(n),r.head.appendChild(n)}}},X:function(e,t){kd.X(e,t);var r=xd;if(r&&e){var n=He(r).hoistableScripts,i=Id(e),a=n.get(i);a||((a=r.querySelector(Cd(i)))||(e=h({src:e,async:!0},t),(t=Td.get(i))&&Fd(e,t),Ke(a=r.createElement("script")),ed(a,"link",e),r.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(i,a))}},S:function(e,t,r){kd.S(e,t,r);var n=xd;if(n&&e){var i=He(n).hoistableStyles,a=Rd(e);t=t||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=n.querySelector(_d(a)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Td.get(a))&&Nd(e,r);var l=s=n.createElement("link");Ke(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Md(s,t,n)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}},M:function(e,t){kd.M(e,t);var r=xd;if(r&&e){var n=He(r).hoistableScripts,i=Id(e),a=n.get(i);a||((a=r.querySelector(Cd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Td.get(i))&&Fd(e,t),Ke(a=r.createElement("script")),ed(a,"link",e),r.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(i,a))}}};var xd="undefined"==typeof document?null:document;function Ld(e,t,r){var n=xd;if(n&&"string"==typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof r&&(i+='[crossorigin="'+r+'"]'),wd.has(i)||(wd.add(i),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(i)&&(ed(t=n.createElement("link"),"link",e),Ke(t),n.head.appendChild(t)))}}function Pd(e,t,r,n){var i,a,o,l,u=(u=H.current)?Ad(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof r.precedence&&"string"==typeof r.href?(t=Rd(r.href),(n=(r=He(u).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"==typeof r.href&&"string"==typeof r.precedence){e=Rd(r.href);var c=He(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(_d(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Td.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Td.set(e,r),c||(i=u,a=e,o=r,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=i.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),ed(a,"link",o),Ke(a),i.head.appendChild(a))))),t&&null===n)throw Error(s(528,""));return d}if(t&&null!==n)throw Error(s(529,""));return null;case"script":return t=r.async,"string"==typeof(r=r.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Id(r),(n=(r=He(u).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Rd(e){return'href="'+gt(e)+'"'}function _d(e){return'link[rel="stylesheet"]['+e+"]"}function Od(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Id(e){return'[src="'+gt(e)+'"]'}function Cd(e){return"script[async]"+e}function Dd(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+gt(r.href)+'"]');if(n)return t.instance=n,Ke(n),n;var i=h({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return Ke(n=(e.ownerDocument||e).createElement("style")),ed(n,"style",i),Md(n,r.precedence,e),t.instance=n;case"stylesheet":i=Rd(r.href);var a=e.querySelector(_d(i));if(a)return t.state.loading|=4,t.instance=a,Ke(a),a;n=Od(r),(i=Td.get(i))&&Nd(n,i),Ke(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(a,"link",n),t.state.loading|=4,Md(a,r.precedence,e),t.instance=a;case"script":return a=Id(r.src),(i=e.querySelector(Cd(a)))?(t.instance=i,Ke(i),i):(n=r,(i=Td.get(a))&&Fd(n=h({},r),i),Ke(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Md(n,r.precedence,e));return t.instance}function Md(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,a=i,s=0;s<n.length;s++){var o=n[s];if(o.dataset.precedence===t)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Nd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Bd(e,t,r){if(null===Ud){var n=new Map,i=Ud=new Map;i.set(r,n)}else(n=(i=Ud).get(r))||(n=new Map,i.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),i=0;i<r.length;i++){var a=r[i];if(!(a[Be]||a[Ie]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var o=n.get(s);o?o.push(a):n.set(s,[a])}}return n}function $d(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function jd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var zd=null;function Gd(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Vd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kd=null;function Vd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kd=new Map,t.forEach(Wd,e),Kd=null,Hd.call(e))}function Wd(e,t){if(!(4&t.state.loading)){var r=Kd.get(e);if(r)var n=r.get(null);else{r=new Map,Kd.set(e,r);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(r.set(s.dataset.precedence,s),n=s)}n&&r.set(null,n)}s=(i=t.instance).getAttribute("data-precedence"),(a=r.get(s)||n)===n&&r.set(null,i),r.set(s,i),this.count++,n=Hd.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:S,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function qd(e,t,r,n,i,a,s,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Xd(e,t,r,n,i,a,s,o,l,u,c,d){return e=new qd(e,t,r,s,o,l,u,d),t=1,!0===a&&(t|=24),a=Nn(3,null,null,t),e.current=a,a.stateNode=e,(t=Ci()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:n,isDehydrated:r,cache:t},ra(a),e}function Qd(e){return e?e=Dn:Dn}function Zd(e,t,r,n,i,a){i=Qd(i),null===n.context?n.context=i:n.pendingContext=i,(n=ia(t)).payload={element:r},null!==(a=void 0===a?null:a)&&(n.callback=a),null!==(r=aa(e,n,t))&&(Nu(r,0,t),sa(r,e,t))}function Jd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function eh(e,t){Jd(e,t),(e=e.alternate)&&Jd(e,t)}function th(e){if(13===e.tag){var t=On(e,67108864);null!==t&&Nu(t,0,67108864),eh(e,67108864)}}var rh=!0;function nh(e,t,r,n){var i=D.T;D.T=null;var a=M.p;try{M.p=2,ah(e,t,r,n)}finally{M.p=a,D.T=i}}function ih(e,t,r,n){var i=D.T;D.T=null;var a=M.p;try{M.p=8,ah(e,t,r,n)}finally{M.p=a,D.T=i}}function ah(e,t,r,n){if(rh){var i=sh(n);if(null===i)zc(e,t,n,oh,r),vh(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return dh=bh(dh,e,t,r,n,i),!0;case"dragenter":return hh=bh(hh,e,t,r,n,i),!0;case"mouseover":return fh=bh(fh,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return ph.set(a,bh(ph.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,gh.set(a,bh(gh.get(a)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(vh(e,n),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var a=ze(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=ve(a.pendingLanes);if(0!==s){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-fe(s);o.entanglements[1]|=l,s&=~l}Tc(a),!(6&ru)&&(Tu=te()+500,wc(0,!1))}}break;case 13:null!==(o=On(a,2))&&Nu(o,0,2),ju(),eh(a,2)}if(null===(a=sh(n))&&zc(e,t,n,oh,r),a===i)break;i=a}null!==i&&n.stopPropagation()}else zc(e,t,n,null,r)}}function sh(e){return lh(e=Ot(e))}var oh=null;function lh(e){if(oh=null,null!==(e=je(e))){var t=l(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=u(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case ne:return 2;case ie:return 8;case ae:case se:return 32;case oe:return 268435456;default:return 32}default:return 32}}var ch=!1,dh=null,hh=null,fh=null,ph=new Map,gh=new Map,mh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function bh(e,t,r,n,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=ze(t))&&th(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Eh(e){var t=je(e.target);if(null!==t){var r=l(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=u(r)))return e.blockedOn=t,void function(e){var t=M.p;try{return M.p=e,function(){if(13===r.tag){var e=Du();e=Pe(e);var t=On(r,e);null!==t&&Nu(t,0,e),eh(r,e)}}()}finally{M.p=t}}(e.priority)}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Sh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=sh(e.nativeEvent);if(null!==r)return null!==(t=ze(r))&&th(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);_t=n,r.target.dispatchEvent(n),_t=null,t.shift()}return!0}function Th(e,t,r){Sh(e)&&r.delete(t)}function wh(){ch=!1,null!==dh&&Sh(dh)&&(dh=null),null!==hh&&Sh(hh)&&(hh=null),null!==fh&&Sh(fh)&&(fh=null),ph.forEach(Th),gh.forEach(Th)}function Ah(e,t){e.blockedOn===t&&(e.blockedOn=null,ch||(ch=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,wh)))}var kh=null;function xh(e){kh!==e&&(kh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){kh===e&&(kh=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],i=e[t+2];if("function"!=typeof n){if(null===lh(n||r))continue;break}var a=ze(r);null!==a&&(e.splice(t,3),t-=3,_s(a,{pending:!0,data:i,method:r.method,action:n},n,i))}}))}function Lh(e){function t(t){return Ah(t,e)}null!==dh&&Ah(dh,e),null!==hh&&Ah(hh,e),null!==fh&&Ah(fh,e),ph.forEach(t),gh.forEach(t);for(var r=0;r<mh.length;r++){var n=mh[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<mh.length&&null===(r=mh[0]).blockedOn;)Eh(r),null===r.blockedOn&&mh.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var i=r[n],a=r[n+1],s=i[Ce]||null;if("function"==typeof a)s||xh(r);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[Ce]||null)o=s.formAction;else if(null!==lh(i))continue}else o=s.action;"function"==typeof o?r[n+1]=o:(r.splice(n,3),n-=3),xh(r)}}}function Ph(e){this._internalRoot=e}function Rh(e){this._internalRoot=e}Rh.prototype.render=Ph.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Zd(t.current,Du(),e,t,null,null)},Rh.prototype.unmount=Ph.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),ju(),t[De]=null}},Rh.prototype.unstable_scheduleHydration=function(e){if(e){var t=_e();e={blockedOn:null,target:e,priority:t};for(var r=0;r<mh.length&&0!==t&&t<mh[r].priority;r++);mh.splice(r,0,e),0===r&&Eh(e)}};var _h=i.version;if("19.1.0"!==_h)throw Error(s(527,_h,"19.1.0"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return c(i),e;if(a===n)return c(i),t;a=a.sibling}throw Error(s(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,u=i.child;u;){if(u===r){o=!0,r=i,n=a;break}if(u===n){o=!0,n=i,r=a;break}u=u.sibling}if(!o){for(u=a.child;u;){if(u===r){o=!0,r=a,n=i;break}if(u===n){o=!0,n=a,r=i;break}u=u.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(t),null===(e=null!==e?d(e):null)?null:e.stateNode};var Oh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{ce=Ih.inject(Oh),de=Ih}catch(e){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var r=!1,n="",i=vo,a=bo,l=Eo;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,r,n,i,a,l,0,null),e[De]=t.current,$c(e),new Ph(t)},t.hydrateRoot=function(e,t,r){if(!o(e))throw Error(s(299));var n=!1,i="",a=vo,l=bo,u=Eo,c=null;return null!=r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onUncaughtError&&(a=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(u=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(c=r.formState)),(t=Xd(e,1,!0,t,0,n,i,a,l,u,0,c)).context=Qd(null),r=t.current,(i=ia(n=Pe(n=Du()))).callback=null,aa(r,i,n),r=n,t.current.lanes=r,ke(t,r),Tc(t),e[De]=t.current,$c(e),new Rh(t)},t.version="19.1.0"},1283:(e,t,r)=>{"use strict";r.d(t,{CU:()=>c,Lx:()=>l,h1:()=>o,hx:()=>s,u3:()=>u});var n=r(5307),i=r(1932),a=(0,n.Z0)({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push((0,i.h4)(t.payload))},removeLegendPayload(e,t){var r=(0,i.ss)(e).payload.indexOf((0,i.h4)(t.payload));r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:s,setLegendSettings:o,addLegendPayload:l,removeLegendPayload:u}=a.actions,c=a.reducer},1290:(e,t,r)=>{"use strict";r.d(t,{BV:()=>ue,C5:()=>se,Kd:()=>Oe,N_:()=>Ce,Zp:()=>q,qh:()=>oe});var n=r(6540),i="popstate";function a(e={}){return function(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,d=a.history,h="POP",f=null,p=g();function g(){return(d.state||{idx:null}).idx}function m(){h="POP";let e=g(),t=null==e?null:e-p;p=e,f&&f({action:h,location:v.location,delta:t})}function y(e){return function(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),s(r,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:c(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}(e)}null==p&&(p=0,d.replaceState({...d.state,idx:p},""));let v={get action(){return h},get location(){return e(a,d)},listen(e){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(i,m),f=e,()=>{a.removeEventListener(i,m),f=null}},createHref:e=>t(a,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h="PUSH";let n=u(v.location,e,t);r&&r(n,e),p=g()+1;let i=l(n,p),s=v.createHref(n);try{d.pushState(i,"",s)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;a.location.assign(s)}o&&f&&f({action:h,location:v.location,delta:1})},replace:function(e,t){h="REPLACE";let n=u(v.location,e,t);r&&r(n,e),p=g();let i=l(n,p),a=v.createHref(n);d.replaceState(i,"",a),o&&f&&f({action:h,location:v.location,delta:0})},go:e=>d.go(e)};return v}(function(e,t){let{pathname:r,search:n,hash:i}=e.location;return u("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:c(t)},null,e)}function s(e,t){if(!1===e||null==e)throw new Error(t)}function o(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?d(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function c({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function d(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function h(e,t,r="/"){return function(e,t,r,n){let i=x(("string"==typeof t?d(t):t).pathname||"/",r);if(null==i)return null;let a=f(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let e=0;null==s&&e<a.length;++e){let t=k(i);s=w(a[e],t,n)}return s}(e,t,r,!1)}function f(e,t=[],r=[],n=""){let i=(e,i,a)=>{let o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(s(o.relativePath.startsWith(n),`Absolute route path "${o.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(n.length));let l=_([n,o.relativePath]),u=r.concat(o);e.children&&e.children.length>0&&(s(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),f(e.children,t,u,l)),(null!=e.path||e.index)&&t.push({path:l,score:T(l,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of p(e.path))i(e,t,r);else i(e,t)}),t}function p(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return i?[a,""]:[a];let s=p(n.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),i&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}new WeakMap;var g=/^:[\w-]+$/,m=3,y=2,v=1,b=10,E=-2,S=e=>"*"===e;function T(e,t){let r=e.split("/"),n=r.length;return r.some(S)&&(n+=E),t&&(n+=y),r.filter(e=>!S(e)).reduce((e,t)=>e+(g.test(t)?m:""===t?v:b),n)}function w(e,t,r=!1){let{routesMeta:n}=e,i={},a="/",s=[];for(let e=0;e<n.length;++e){let o=n[e],l=e===n.length-1,u="/"===a?t:t.slice(a.length)||"/",c=A({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},u),d=o.route;if(!c&&l&&r&&!n[n.length-1].route.index&&(c=A({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),s.push({params:i,pathname:_([a,c.pathname]),pathnameBase:O(_([a,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(a=_([a,c.pathnameBase]))}return s}function A(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t=!1,r=!0){o("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=l[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const i=l[n];return e[t]=r&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:s,pattern:e}}function k(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return o(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function x(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function L(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function R(e,t,r,n=!1){let i;"string"==typeof e?i=d(e):(i={...e},s(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),s(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),s(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let a,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)a=r;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let u=function(e,t="/"){let{pathname:r,search:n="",hash:i=""}="string"==typeof e?d(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:I(n),hash:C(i)}}(i,a),c=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&r.endsWith("/");return u.pathname.endsWith("/")||!c&&!h||(u.pathname+="/"),u}var _=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),I=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",C=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function D(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}var M=["POST","PUT","PATCH","DELETE"],N=(new Set(M),["GET",...M]);new Set(N),Symbol("ResetLoaderData");var F=n.createContext(null);F.displayName="DataRouter";var U=n.createContext(null);U.displayName="DataRouterState";n.createContext(!1);var B=n.createContext({isTransitioning:!1});B.displayName="ViewTransition",n.createContext(new Map).displayName="Fetchers",n.createContext(null).displayName="Await";var $=n.createContext(null);$.displayName="Navigation";var j=n.createContext(null);j.displayName="Location";var z=n.createContext({outlet:null,matches:[],isDataRoute:!1});z.displayName="Route";var G=n.createContext(null);G.displayName="RouteError";var H=!0;function K(){return null!=n.useContext(j)}function V(){return s(K(),"useLocation() may be used only in the context of a <Router> component."),n.useContext(j).location}var W="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Y(e){n.useContext($).static||n.useLayoutEffect(e)}function q(){let{isDataRoute:e}=n.useContext(z);return e?function(){let{router:e}=function(e){let t=n.useContext(F);return s(t,re(e)),t}("useNavigate"),t=ne("useNavigate"),r=n.useRef(!1);return Y(()=>{r.current=!0}),n.useCallback(async(n,i={})=>{o(r.current,W),r.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...i}))},[e,t])}():function(){s(K(),"useNavigate() may be used only in the context of a <Router> component.");let e=n.useContext(F),{basename:t,navigator:r}=n.useContext($),{matches:i}=n.useContext(z),{pathname:a}=V(),l=JSON.stringify(P(i)),u=n.useRef(!1);return Y(()=>{u.current=!0}),n.useCallback((n,i={})=>{if(o(u.current,W),!u.current)return;if("number"==typeof n)return void r.go(n);let s=R(n,JSON.parse(l),a,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:_([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,l,a,e])}()}function X(e,{relative:t}={}){let{matches:r}=n.useContext(z),{pathname:i}=V(),a=JSON.stringify(P(r));return n.useMemo(()=>R(e,JSON.parse(a),i,"path"===t),[e,a,i,t])}function Q(e,t,r,i){s(K(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=n.useContext($),{matches:l}=n.useContext(z),u=l[l.length-1],c=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;if(H){let e=g&&g.path||"";ae(f,!g||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let m,y=V();if(t){let e="string"==typeof t?d(t):t;s("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),m=e}else m=y;let v=m.pathname||"/",b=v;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let E=h(e,{pathname:b});H&&(o(g||null!=E,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),o(null==E||void 0!==E[E.length-1].route.element||void 0!==E[E.length-1].route.Component||void 0!==E[E.length-1].route.lazy,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`));let S=function(e,t=[],r=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let i=e,a=r?.errors;if(null!=a){let e=i.findIndex(e=>e.route.id&&void 0!==a?.[e.route.id]);s(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let o=!1,l=-1;if(r)for(let e=0;e<i.length;e++){let t=i[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,a=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||a){o=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}return i.reduceRight((e,s,u)=>{let c,d=!1,h=null,f=null;r&&(c=a&&s.route.id?a[s.route.id]:void 0,h=s.route.errorElement||J,o&&(l<0&&0===u?(ae("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):l===u&&(d=!0,f=s.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,u+1)),g=()=>{let t;return t=c?h:d?f:s.route.Component?n.createElement(s.route.Component,null):s.route.element?s.route.element:e,n.createElement(te,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:t})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===u)?n.createElement(ee,{location:r.location,revalidation:r.revalidation,component:h,error:c,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}(E&&E.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:_([p,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:_([p,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,r,i);return t&&S?n.createElement(j.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},S):S}function Z(){let e=function(){let e=n.useContext(G),t=function(e){let t=n.useContext(U);return s(t,re(e)),t}("useRouteError"),r=ne("useRouteError");return void 0!==e?e:t.errors?.[r]}(),t=D(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return H&&(console.error("Error handled by React Router default ErrorBoundary:",e),l=n.createElement(n.Fragment,null,n.createElement("p",null,"💿 Hey developer 👋"),n.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",n.createElement("code",{style:o},"ErrorBoundary")," or"," ",n.createElement("code",{style:o},"errorElement")," prop on your route."))),n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:a},r):null,l)}n.createContext(null);var J=n.createElement(Z,null),ee=class extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(z.Provider,{value:this.props.routeContext},n.createElement(G.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function te({routeContext:e,match:t,children:r}){let i=n.useContext(F);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),n.createElement(z.Provider,{value:e},r)}function re(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ne(e){let t=function(e){let t=n.useContext(z);return s(t,re(e)),t}(e),r=t.matches[t.matches.length-1];return s(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}var ie={};function ae(e,t,r){t||ie[e]||(ie[e]=!0,o(!1,r))}function se({to:e,replace:t,state:r,relative:i}){s(K(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=n.useContext($);o(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=n.useContext(z),{pathname:u}=V(),c=q(),d=R(e,P(l),u,"path"===i),h=JSON.stringify(d);return n.useEffect(()=>{c(JSON.parse(h),{replace:t,state:r,relative:i})},[c,h,i,t,r]),null}function oe(e){s(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function le({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:a,static:l=!1}){s(!K(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),c=n.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);"string"==typeof r&&(r=d(r));let{pathname:h="/",search:f="",hash:p="",state:g=null,key:m="default"}=r,y=n.useMemo(()=>{let e=x(h,u);return null==e?null:{location:{pathname:e,search:f,hash:p,state:g,key:m},navigationType:i}},[u,h,f,p,g,m,i]);return o(null!=y,`<Router basename="${u}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),null==y?null:n.createElement($.Provider,{value:c},n.createElement(j.Provider,{children:t,value:y}))}function ue({children:e,location:t}){return Q(ce(e),t)}function ce(e,t=[]){let r=[];return n.Children.forEach(e,(e,i)=>{if(!n.isValidElement(e))return;let a=[...t,i];if(e.type===n.Fragment)return void r.push.apply(r,ce(e.props.children,a));s(e.type===oe,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),s(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ce(e.props.children,a)),r.push(o)}),r}n.memo(function({routes:e,future:t,state:r}){return Q(e,void 0,r,t)}),n.Component;var de="get",he="application/x-www-form-urlencoded";function fe(e){return null!=e&&"string"==typeof e.tagName}var pe=null,ge=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function me(e){return null==e||ge.has(e)?e:(o(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${he}"`),null)}function ye(e,t){if(!1===e||null==e)throw new Error(t)}function ve(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function be(e,t,r,n,i,a){let s=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===a?t.filter((e,t)=>s(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function Ee(e,t,{includeHydrateFallback:r}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1),[...new Set(n)];var n}function Se(){let e=n.useContext(F);return ye(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Te(){let e=n.useContext(U);return ye(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0"),"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis,Symbol("SingleFetchRedirect");var we=n.createContext(void 0);function Ae(){let e=n.useContext(we);return ye(e,"You must render this element inside a <HydratedRouter> element"),e}function ke(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function xe({page:e,...t}){let{router:r}=Se(),i=n.useMemo(()=>h(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?n.createElement(Pe,{page:e,matches:i,...t}):null}function Le(e){let{manifest:t,routeModules:r}=Ae(),[i,a]=n.useState([]);return n.useEffect(()=>{let n=!1;return async function(e,t,r){return function(e,t){let r=new Set,n=new Set(t);return e.reduce((e,i)=>{if(t&&(null==(a=i)||"string"!=typeof a.page)&&"script"===i.as&&i.href&&n.has(i.href))return e;var a;let s=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(i));return r.has(s)||(r.add(s),e.push({key:s,link:i})),e},[])}((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(ve).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,t,r).then(e=>{n||a(e)}),()=>{n=!0}},[e,t,r]),i}function Pe({page:e,matches:t,...r}){let i=V(),{manifest:a,routeModules:s}=Ae(),{basename:o}=Se(),{loaderData:l,matches:u}=Te(),c=n.useMemo(()=>be(e,t,u,a,i,"data"),[e,t,u,a,i]),d=n.useMemo(()=>be(e,t,u,a,i,"assets"),[e,t,u,a,i]),h=n.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let r=new Set,n=!1;if(t.forEach(e=>{let t=a.routes[e.route.id];t&&t.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in l&&s[e.route.id]?.shouldRevalidate||t.hasClientLoader?n=!0:r.add(e.route.id))}),0===r.size)return[];let u=function(e,t,r){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===x(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}(e,o,"data");return n&&r.size>0&&u.searchParams.set("_routes",t.filter(e=>r.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[o,l,i,a,c,t,e,s]),f=n.useMemo(()=>Ee(d,a),[d,a]),p=Le(d);return n.createElement(n.Fragment,null,h.map(e=>n.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r})),f.map(e=>n.createElement("link",{key:e,rel:"modulepreload",href:e,...r})),p.map(({key:e,link:t})=>n.createElement("link",{key:e,nonce:r.nonce,...t})))}we.displayName="FrameworkContext";function Re(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}n.Component;var _e="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{_e&&(window.__reactRouterVersion="7.8.0")}catch(e){}function Oe({basename:e,children:t,window:r}){let i=n.useRef();null==i.current&&(i.current=a({window:r,v5Compat:!0}));let s=i.current,[o,l]=n.useState({action:s.action,location:s.location}),u=n.useCallback(e=>{n.startTransition(()=>l(e))},[l]);return n.useLayoutEffect(()=>s.listen(u),[s,u]),n.createElement(le,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}var Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=n.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:u,target:d,to:h,preventScrollReset:f,viewTransition:p,...g},m){let y,{basename:v}=n.useContext($),b="string"==typeof h&&Ie.test(h),E=!1;if("string"==typeof h&&b&&(y=h,_e))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),r=x(t.pathname,v);t.origin===e.origin&&null!=r?h=r+t.search+t.hash:E=!0}catch(e){o(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=function(e,{relative:t}={}){s(K(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=n.useContext($),{hash:a,pathname:o,search:l}=X(e,{relative:t}),u=o;return"/"!==r&&(u="/"===o?r:_([r,o])),i.createHref({pathname:u,search:l,hash:a})}(h,{relative:i}),[T,w,A]=function(e,t){let r=n.useContext(we),[i,a]=n.useState(!1),[s,o]=n.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=t,f=n.useRef(null);n.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),n.useEffect(()=>{if(i){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{a(!0)},g=()=>{a(!1),o(!1)};return r?"intent"!==e?[s,f,{}]:[s,f,{onFocus:ke(l,p),onBlur:ke(u,g),onMouseEnter:ke(c,p),onMouseLeave:ke(d,g),onTouchStart:ke(h,p)}]:[!1,f,{}]}(r,g),k=function(e,{target:t,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=q(),u=V(),d=X(e,{relative:s});return n.useCallback(n=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(n,t)){n.preventDefault();let t=void 0!==r?r:c(u)===c(d);l(e,{replace:t,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[u,l,d,r,i,t,e,a,s,o])}(h,{replace:l,state:u,target:d,preventScrollReset:f,relative:i,viewTransition:p}),L=n.createElement("a",{...g,...A,href:y||S,onClick:E||a?e:function(t){e&&e(t),t.defaultPrevented||k(t)},ref:Re(m,w),target:d,"data-discover":b||"render"!==t?void 0:"true"});return T&&!b?n.createElement(n.Fragment,null,L,n.createElement(xe,{page:S})):L});function De(e){let t=n.useContext(F);return s(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}Ce.displayName="Link",n.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:l,children:u,...c},d){let h=X(o,{relative:c.relative}),f=V(),p=n.useContext(U),{navigator:g,basename:m}=n.useContext($),y=null!=p&&function(e,{relative:t}={}){let r=n.useContext(B);s(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=De("useViewTransitionState"),a=X(e,{relative:t});if(!r.isTransitioning)return!1;let o=x(r.currentLocation.pathname,i)||r.currentLocation.pathname,l=x(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=A(a.pathname,l)||null!=A(a.pathname,o)}(h)&&!0===l,v=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,b=f.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(b=b.toLowerCase(),E=E?E.toLowerCase():null,v=v.toLowerCase()),E&&m&&(E=x(E,m)||E);const S="/"!==v&&v.endsWith("/")?v.length-1:v.length;let T,w=b===v||!i&&b.startsWith(v)&&"/"===b.charAt(S),k=null!=E&&(E===v||!i&&E.startsWith(v)&&"/"===E.charAt(v.length)),L={isActive:w,isPending:k,isTransitioning:y},P=w?e:void 0;T="function"==typeof r?r(L):[r,w?"active":null,k?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let R="function"==typeof a?a(L):a;return n.createElement(Ce,{...c,"aria-current":P,className:T,ref:d,style:R,to:o,viewTransition:l},"function"==typeof u?u(L):u)}).displayName="NavLink",n.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:a,state:o,method:l=de,action:u,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:p,...g},m)=>{let y=function(){let{router:e}=De("useSubmit"),{basename:t}=n.useContext($),r=ne("useRouteId");return n.useCallback(async(n,i={})=>{let{action:a,method:s,encType:o,formData:l,body:u}=function(e,t){let r,n,i,a,s;if(fe(o=e)&&"form"===o.tagName.toLowerCase()){let s=e.getAttribute("action");n=s?x(s,t):null,r=e.getAttribute("method")||de,i=me(e.getAttribute("enctype"))||he,a=new FormData(e)}else if(function(e){return fe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return fe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(n=o?x(o,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||de,i=me(e.getAttribute("formenctype"))||me(s.getAttribute("enctype"))||he,a=new FormData(s,e),!function(){if(null===pe)try{new FormData(document.createElement("form"),0),pe=!1}catch(e){pe=!0}return pe}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,n)}}else{if(fe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=de,n=null,i=he,s=e}var o;return a&&"text/plain"===i&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:s}}(n,t);if(!1===i.navigate){let t=i.fetcherKey||Ne();await e.fetch(t,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}(),v=function(e,{relative:t}={}){let{basename:r}=n.useContext($),i=n.useContext(z);s(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...X(e||".",{relative:t})},l=V();if(null==e){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();o.search=r?`?${r}`:""}}return e&&"."!==e||!a.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),"/"!==r&&(o.pathname="/"===o.pathname?r:_([r,o.pathname])),c(o)}(u,{relative:h}),b="get"===l.toLowerCase()?"get":"post",E="string"==typeof u&&Ie.test(u);return n.createElement("form",{ref:m,method:b,action:v,onSubmit:i?d:e=>{if(d&&d(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,i=n?.getAttribute("formmethod")||l;y(n||e.currentTarget,{fetcherKey:t,method:i,navigate:r,replace:a,state:o,relative:h,preventScrollReset:f,viewTransition:p})},...g,"data-discover":E||"render"!==e?void 0:"true"})}).displayName="Form";var Me=0,Ne=()=>`__${String(++Me)}__`},1334:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(645),i=r(4483),a=r(58);t.last=function(e){if(a.isArrayLike(e))return n.last(i.toArray(e))}},1366:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}},1465:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){return"string"==typeof e||"symbol"==typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}},1509:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});const n=Math.PI,i=2*n,a=1e-6,s=i-a;function o(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class l{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?o:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return o;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,a){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+a}`}arcTo(e,t,r,i,s){if(e=+e,t=+t,r=+r,i=+i,(s=+s)<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,u=r-e,c=i-t,d=o-e,h=l-t,f=d*d+h*h;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(f>a)if(Math.abs(h*u-c*d)>a&&s){let p=r-o,g=i-l,m=u*u+c*c,y=p*p+g*g,v=Math.sqrt(m),b=Math.sqrt(f),E=s*Math.tan((n-Math.acos((m+f-y)/(2*v*b)))/2),S=E/b,T=E/v;Math.abs(S-1)>a&&this._append`L${e+S*d},${t+S*h}`,this._append`A${s},${s},0,0,${+(h*p>d*g)},${this._x1=e+T*u},${this._y1=t+T*c}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,r,o,l,u){if(e=+e,t=+t,u=!!u,(r=+r)<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(o),d=r*Math.sin(o),h=e+c,f=t+d,p=1^u,g=u?o-l:l-o;null===this._x1?this._append`M${h},${f}`:(Math.abs(this._x1-h)>a||Math.abs(this._y1-f)>a)&&this._append`L${h},${f}`,r&&(g<0&&(g=g%i+i),g>s?this._append`A${r},${r},0,1,${p},${e-c},${t-d}A${r},${r},0,1,${p},${this._x1=h},${this._y1=f}`:g>a&&this._append`A${r},${r},0,${+(g>=n)},${p},${this._x1=e+r*Math.cos(l)},${this._y1=t+r*Math.sin(l)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function u(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new l(t)}l.prototype},1601:e=>{"use strict";e.exports=function(e){return e[1]}},1706:(e,t,r)=>{"use strict";r.d(t,{J:()=>k,Z:()=>E});var n=r(6540),i=r(4164),a=r(1174),s=r(4501),o=r(9744),l=r(4040),u=r(9287),c=r(9082),d=r(9538),h=["offset"],f=["labelRef"];function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){y(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(null,arguments)}var b=e=>{var{value:t,formatter:r}=e,n=(0,o.uy)(e.children)?t:e.children;return"function"==typeof r?r(n):n},E=e=>null!=e&&"function"==typeof e,S=(e,t,r,a)=>{var s,u,{position:c,offset:d,className:h}=e,{cx:f,cy:p,innerRadius:g,outerRadius:m,startAngle:y,endAngle:b,clockWise:E}=a,S=(g+m)/2,T=((e,t)=>(0,o.sA)(t-e)*Math.min(Math.abs(t-e),360))(y,b),w=T>=0?1:-1;"insideStart"===c?(s=y+w*d,u=E):"insideEnd"===c?(s=b-w*d,u=!E):"end"===c&&(s=b+w*d,u=E),u=T<=0?u:!u;var A=(0,l.IZ)(f,p,S,s),k=(0,l.IZ)(f,p,S,s+359*(u?1:-1)),x="M".concat(A.x,",").concat(A.y,"\n    A").concat(S,",").concat(S,",0,1,").concat(u?0:1,",\n    ").concat(k.x,",").concat(k.y),L=(0,o.uy)(e.id)?(0,o.NF)("recharts-radial-line-"):e.id;return n.createElement("text",v({},r,{dominantBaseline:"central",className:(0,i.$)("recharts-radial-bar-label",h)}),n.createElement("defs",null,n.createElement("path",{id:L,d:x})),n.createElement("textPath",{xlinkHref:"#".concat(L)},t))},T=(e,t,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:u}=e,c=(o+u)/2;if("outside"===r){var{x:d,y:h}=(0,l.IZ)(n,i,s+t,c);return{x:d,y:h,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var f=(a+s)/2,{x:p,y:g}=(0,l.IZ)(n,i,f,c);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},w=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,{x:a,y:s,width:l,height:u}=t,c=u>=0?1:-1,d=c*n,h=c>0?"end":"start",f=c>0?"start":"end",p=l>=0?1:-1,g=p*n,y=p>0?"end":"start",v=p>0?"start":"end";if("top"===i)return m(m({},{x:a+l/2,y:s-c*n,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(s-r.y,0),width:l}:{});if("bottom"===i)return m(m({},{x:a+l/2,y:s+u+d,textAnchor:"middle",verticalAnchor:f}),r?{height:Math.max(r.y+r.height-(s+u),0),width:l}:{});if("left"===i){var b={x:a-g,y:s+u/2,textAnchor:y,verticalAnchor:"middle"};return m(m({},b),r?{width:Math.max(b.x-r.x,0),height:u}:{})}if("right"===i){var E={x:a+l+g,y:s+u/2,textAnchor:v,verticalAnchor:"middle"};return m(m({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:u}:{})}var S=r?{width:l,height:u}:{};return"insideLeft"===i?m({x:a+g,y:s+u/2,textAnchor:v,verticalAnchor:"middle"},S):"insideRight"===i?m({x:a+l-g,y:s+u/2,textAnchor:y,verticalAnchor:"middle"},S):"insideTop"===i?m({x:a+l/2,y:s+d,textAnchor:"middle",verticalAnchor:f},S):"insideBottom"===i?m({x:a+l/2,y:s+u-d,textAnchor:"middle",verticalAnchor:h},S):"insideTopLeft"===i?m({x:a+g,y:s+d,textAnchor:v,verticalAnchor:f},S):"insideTopRight"===i?m({x:a+l-g,y:s+d,textAnchor:y,verticalAnchor:f},S):"insideBottomLeft"===i?m({x:a+g,y:s+u-d,textAnchor:v,verticalAnchor:h},S):"insideBottomRight"===i?m({x:a+l-g,y:s+u-d,textAnchor:y,verticalAnchor:h},S):i&&"object"==typeof i&&((0,o.Et)(i.x)||(0,o._3)(i.x))&&((0,o.Et)(i.y)||(0,o._3)(i.y))?m({x:a+(0,o.F4)(i.x,l),y:s+(0,o.F4)(i.y,u),textAnchor:"end",verticalAnchor:"end"},S):m({x:a+l/2,y:s+u/2,textAnchor:"middle",verticalAnchor:"middle"},S)},A=e=>"cx"in e&&(0,o.Et)(e.cx);function k(e){var{offset:t=5}=e,r=m({offset:t},p(e,h)),{viewBox:l,position:g,value:y,children:E,content:k,className:x="",textBreakAll:L,labelRef:P}=r,R=(0,c.G)(d.D0),_=(0,u.sk)(),O=l||("center"===g?_:null!=R?R:_);if(!O||(0,o.uy)(y)&&(0,o.uy)(E)&&!(0,n.isValidElement)(k)&&"function"!=typeof k)return null;var I,C=m(m({},r),{},{viewBox:O});if((0,n.isValidElement)(k)){var{labelRef:D}=C,M=p(C,f);return(0,n.cloneElement)(k,M)}if("function"==typeof k){if(I=(0,n.createElement)(k,C),(0,n.isValidElement)(I))return I}else I=b(r);var N=A(O),F=(0,s.J9)(r,!0);if(N&&("insideStart"===g||"insideEnd"===g||"end"===g))return S(r,I,F,O);var U=N?T(O,r.offset,r.position):w(r,O);return n.createElement(a.E,v({ref:P,className:(0,i.$)("recharts-label",x)},F,U,{breakAll:L}),I)}k.displayName="Label";var x=e=>{var{cx:t,cy:r,angle:n,startAngle:i,endAngle:a,r:s,radius:l,innerRadius:u,outerRadius:c,x:d,y:h,top:f,left:p,width:g,height:m,clockWise:y,labelViewBox:v}=e;if(v)return v;if((0,o.Et)(g)&&(0,o.Et)(m)){if((0,o.Et)(d)&&(0,o.Et)(h))return{x:d,y:h,width:g,height:m};if((0,o.Et)(f)&&(0,o.Et)(p))return{x:f,y:p,width:g,height:m}}return(0,o.Et)(d)&&(0,o.Et)(h)?{x:d,y:h,width:0,height:0}:(0,o.Et)(t)&&(0,o.Et)(r)?{cx:t,cy:r,startAngle:i||n||0,endAngle:a||n||0,innerRadius:u||0,outerRadius:c||l||s||0,clockWise:y}:e.viewBox?e.viewBox:void 0};k.parseViewBox=x,k.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var{children:i,labelRef:a}=e,l=x(e),u=(0,s.aS)(i,k).map((e,r)=>(0,n.cloneElement)(e,{viewBox:t||l,key:"label-".concat(r)}));if(!r)return u;var c=((e,t,r)=>{if(!e)return null;var i={viewBox:t,labelRef:r};return!0===e?n.createElement(k,v({key:"label-implicit"},i)):(0,o.vh)(e)?n.createElement(k,v({key:"label-implicit",value:e},i)):(0,n.isValidElement)(e)?e.type===k?(0,n.cloneElement)(e,m({key:"label-implicit"},i)):n.createElement(k,v({key:"label-implicit",content:e},i)):E(e)?n.createElement(k,v({key:"label-implicit",content:e},i)):e&&"object"==typeof e?n.createElement(k,v({},e,{key:"label-implicit"},i)):null})(e.label,t||l,a);return[c,...u]}},1846:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"==typeof e&&null!==e}},1932:(e,t,r)=>{"use strict";r.d(t,{Qx:()=>l,a6:()=>u,h4:()=>W,jM:()=>V,ss:()=>G});var n=Symbol.for("immer-nothing"),i=Symbol.for("immer-draftable"),a=Symbol.for("immer-state");function s(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var o=Object.getPrototypeOf;function l(e){return!!e&&!!e[a]}function u(e){return!!e&&(d(e)||Array.isArray(e)||!!e[i]||!!e.constructor?.[i]||m(e)||y(e))}var c=Object.prototype.constructor.toString();function d(e){if(!e||"object"!=typeof e)return!1;const t=o(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===c}function h(e,t){0===f(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function f(e){const t=e[a];return t?t.type_:Array.isArray(e)?1:m(e)?2:y(e)?3:0}function p(e,t){return 2===f(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function g(e,t,r){const n=f(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function m(e){return e instanceof Map}function y(e){return e instanceof Set}function v(e){return e.copy_||e.base_}function b(e,t){if(m(e))return new Map(e);if(y(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=d(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[a];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const i=r[n],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(o(e),t)}{const t=o(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function E(e,t=!1){return T(e)||l(e)||!u(e)||(f(e)>1&&(e.set=e.add=e.clear=e.delete=S),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>E(t,!0))),e}function S(){s(2)}function T(e){return Object.isFrozen(e)}var w,A={};function k(e){const t=A[e];return t||s(0),t}function x(){return w}function L(e,t){t&&(k("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function P(e){R(e),e.drafts_.forEach(O),e.drafts_=null}function R(e){e===w&&(w=e.parent_)}function _(e){return w={drafts_:[],parent_:w,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function O(e){const t=e[a];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function I(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[a].modified_&&(P(t),s(4)),u(e)&&(e=C(t,e),t.parent_||M(t,e)),t.patches_&&k("Patches").generateReplacementPatches_(r[a].base_,e,t.patches_,t.inversePatches_)):e=C(t,r,[]),P(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==n?e:void 0}function C(e,t,r){if(T(t))return t;const n=t[a];if(!n)return h(t,(i,a)=>D(e,n,t,i,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return M(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let i=t,a=!1;3===n.type_&&(i=new Set(t),t.clear(),a=!0),h(i,(i,s)=>D(e,n,t,i,s,r,a)),M(e,t,!1),r&&e.patches_&&k("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function D(e,t,r,n,i,a,s){if(l(i)){const s=C(e,i,a&&t&&3!==t.type_&&!p(t.assigned_,n)?a.concat(n):void 0);if(g(r,n,s),!l(s))return;e.canAutoFreeze_=!1}else s&&r.add(i);if(u(i)&&!T(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;C(e,i),t&&t.scope_.parent_||"symbol"==typeof n||!Object.prototype.propertyIsEnumerable.call(r,n)||M(e,i)}}function M(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&E(t,r)}var N={get(e,t){if(t===a)return e;const r=v(e);if(!p(r,t))return function(e,t,r){const n=B(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!u(n)?n:n===U(e.base_,t)?(j(e),e.copy_[t]=z(n,e)):n},has:(e,t)=>t in v(e),ownKeys:e=>Reflect.ownKeys(v(e)),set(e,t,r){const n=B(v(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=U(v(e),t),o=n?.[a];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((i=r)===(s=n)?0!==i||1/i==1/s:i!=i&&s!=s)&&(void 0!==r||p(e.base_,t)))return!0;j(e),$(e)}var i,s;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==U(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,j(e),$(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=v(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){s(11)},getPrototypeOf:e=>o(e.base_),setPrototypeOf(){s(12)}},F={};function U(e,t){const r=e[a];return(r?v(r):e)[t]}function B(e,t){if(!(t in e))return;let r=o(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=o(r)}}function $(e){e.modified_||(e.modified_=!0,e.parent_&&$(e.parent_))}function j(e){e.copy_||(e.copy_=b(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function z(e,t){const r=m(e)?k("MapSet").proxyMap_(e,t):y(e)?k("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:x(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=N;r&&(i=[n],a=F);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}(e,t);return(t?t.scope_:x()).drafts_.push(r),r}function G(e){return l(e)||s(10),H(e)}function H(e){if(!u(e)||T(e))return e;const t=e[a];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=b(e,t.scope_.immer_.useStrictShallowCopy_)}else r=b(e,!0);return h(r,(e,t)=>{g(r,e,H(t))}),t&&(t.finalized_=!1),r}h(N,(e,t)=>{F[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),F.deleteProperty=function(e,t){return F.set.call(this,e,t,void 0)},F.set=function(e,t,r){return N.set.call(this,e[0],t,r,e[0])};var K=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...i){return n.produce(e,e=>t.call(this,e,...i))}}let i;if("function"!=typeof t&&s(6),void 0!==r&&"function"!=typeof r&&s(7),u(e)){const n=_(this),a=z(e,void 0);let s=!0;try{i=t(a),s=!1}finally{s?P(n):R(n)}return L(n,r),I(i,n)}if(!e||"object"!=typeof e){if(i=t(e),void 0===i&&(i=e),i===n&&(i=void 0),this.autoFreeze_&&E(i,!0),r){const t=[],n=[];k("Patches").generateReplacementPatches_(e,i,t,n),r(t,n)}return i}s(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;return[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){u(e)||s(8),l(e)&&(e=G(e));const t=_(this),r=z(e,void 0);return r[a].isManual_=!0,R(t),r}finishDraft(e,t){const r=e&&e[a];r&&r.isManual_||s(9);const{scope_:n}=r;return L(n,t),I(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=k("Patches").applyPatches_;return l(e)?n(e,t):this.produce(e,e=>n(e,t))}},V=K.produce;function W(e){return e}K.produceWithPatches.bind(K),K.setAutoFreeze.bind(K),K.setUseStrictShallowCopy.bind(K),K.applyPatches.bind(K),K.createDraft.bind(K),K.finishDraft.bind(K)},2049:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},2070:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});var n=r(6540),i=(0,n.createContext)(null),a=()=>null!=(0,n.useContext)(i)},2162:(e,t,r)=>{"use strict";var n=r(6540),i=r(9888),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=u(function(){function e(e){if(!l){if(l=!0,s=e,e=n(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return o=t}return o=e}if(t=o,a(s,e))return t;var r=n(e);return void 0!==i&&i(t,r)?(s=e,t):(s=e,o=r)}var s,o,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,i]);var f=s(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),c(f),f}},2520:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}},2617:(e,t,r)=>{"use strict";r.d(t,{Vi:()=>l,ZF:()=>o,g5:()=>s,iZ:()=>d});var n=r(5307),i=r(1932),a=(0,n.Z0)({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push((0,i.h4)(t.payload))},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=(0,i.ss)(e).cartesianItems.indexOf((0,i.h4)(r));a>-1&&(e.cartesianItems[a]=(0,i.h4)(n))},removeCartesianGraphicalItem(e,t){var r=(0,i.ss)(e).cartesianItems.indexOf((0,i.h4)(t.payload));r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push((0,i.h4)(t.payload))},removePolarGraphicalItem(e,t){var r=(0,i.ss)(e).polarItems.indexOf((0,i.h4)(t.payload));r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:s,replaceCartesianGraphicalItem:o,removeCartesianGraphicalItem:l,addPolarGraphicalItem:u,removePolarGraphicalItem:c}=a.actions,d=a.reducer},2649:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});var n=(0,r(6540).createContext)(null)},2695:(e,t,r)=>{"use strict";r.d(t,{eC:()=>i,gY:()=>n,hX:()=>o,iO:()=>a,lZ:()=>s,pH:()=>l});var n=e=>e.rootProps.barCategoryGap,i=e=>e.rootProps.stackOffset,a=e=>e.options.chartName,s=e=>e.rootProps.syncId,o=e=>e.rootProps.syncMethod,l=e=>e.options.eventEmitter},2747:(e,t,r)=>{"use strict";r.d(t,{Pu:()=>d});var n=r(9938);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},{cacheSize:2e3,enableCache:!0}),o=new class{constructor(e){var t,r,n;t=this,r="cache",n=new Map,(r=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(s.cacheSize),l={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},u="recharts_measurement_span",c=(e,t)=>{try{var r=document.getElementById(u);r||((r=document.createElement("span")).setAttribute("id",u),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,l,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(e){return{width:0,height:0}}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||n.m.isSsr)return{width:0,height:0};if(!s.enableCache)return c(e,t);var r=function(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",s=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}(e,t),i=o.get(r);if(i)return i;var a=c(e,t);return o.set(r,a),a}},2810:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8805),i=r(6440),a=r(8161),s=r(8202);t.uniqBy=function(e,t=i.identity){return a.isArrayLikeObject(e)?n.uniqBy(Array.from(e),s.iteratee(t)):[]}},2925:(e,t,r)=>{"use strict";function n(e){return null==e?void 0:e.id}r.d(t,{x:()=>n})},2945:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var n=r(9082),i=()=>(0,n.G)(e=>e.rootProps.accessibilityLayer)},2984:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2049);t.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===n.getTag(e)}},3014:(e,t,r)=>{"use strict";r.d(t,{L:()=>o});var n=r(6540);class i{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,i=a=>{a-r>=t?e(a):"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{cancelAnimationFrame(n)}}}function a(){return e=new i,t=()=>null,r=!1,n=null,a=i=>{if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,[o,...l]=s;return"number"==typeof o?void(n=e.setTimeout(a.bind(null,l),o)):(a(o),void(n=e.setTimeout(a.bind(null,l))))}"string"==typeof i&&t(i),"object"==typeof i&&t(i),"function"==typeof i&&i()}},{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e};var e,t,r,n,a}var s=(0,n.createContext)(a);function o(e,t){var r=(0,n.useContext)(s);return(0,n.useMemo)(()=>null!=t?t:r(e),[e,t,r])}},3025:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toPath=function(e){const t=[],r=e.length;if(0===r)return t;let n=0,i="",a="",s=!1;for(46===e.charCodeAt(0)&&(t.push(""),n++);n<r;){const o=e[n];a?"\\"===o&&n+1<r?(n++,i+=e[n]):o===a?a="":i+=o:s?'"'===o||"'"===o?a=o:"]"===o?(s=!1,t.push(i),i=""):i+=o:"["===o?(s=!0,i&&(t.push(i),i="")):"."===o?i&&(t.push(i),i=""):i+=o,n++}return i&&t.push(i),t}},3032:(e,t,r)=>{"use strict";r.d(t,{BZ:()=>ce,eE:()=>pe,Xb:()=>de,JG:()=>ye,A2:()=>ue,yn:()=>ge,gL:()=>ee,fl:()=>te,R4:()=>ie,n4:()=>C});var n=r(5508),i=r(6118),a=r(9287),s=r(6470),o=r(8453),l=r(2695),u=r(9744),c=r(9495),d=r(5978),h=r(5403),f=r(9809),p=r(4544),g=r(4217),m=r(5180),y=r(6189),v=r(523),b=r(732),E=r(3571),S=r(9596),T=r(6680),w=r(3569),A=r(7617),k=r(6907),x=r(9531),L=(0,n.Mz)([A.D,a.fz,i.um,l.iO,w.R],i.sr),P=(0,n.Mz)([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),R=(0,n.Mz)([w.R,T.M],i.eo),_=(0,n.Mz)([P,A.D,R],i.ec),O=(0,n.Mz)([_],e=>e.filter(x.g)),I=(0,n.Mz)([_],i.rj),C=(0,n.Mz)([I,o.LF],i.Nk),D=(0,n.Mz)([O,o.LF,A.D],k.A),M=(0,n.Mz)([C,A.D,_],i.fb),N=(0,n.Mz)([A.D],i.S5),F=(0,n.Mz)([_],e=>e.filter(x.g)),U=(0,n.Mz)([D,F,l.eC],i.MK),B=(0,n.Mz)([U,o.LF,w.R],i.pM),$=(0,n.Mz)([_],i.IO),j=(0,n.Mz)([C,A.D,$,i.CH,w.R],i.kz),z=(0,n.Mz)([i.Kr,w.R,T.M],i.P9),G=(0,n.Mz)([z,w.R],i.Oz),H=(0,n.Mz)([i.gT,w.R,T.M],i.P9),K=(0,n.Mz)([H,w.R],i.q),V=(0,n.Mz)([i.$X,w.R,T.M],i.P9),W=(0,n.Mz)([V,w.R],i.bb),Y=(0,n.Mz)([G,W,K],i.yi),q=(0,n.Mz)([A.D,N,B,j,Y,a.fz,w.R],i.wL),X=(0,n.Mz)([A.D,a.fz,C,M,l.eC,w.R,q],i.tP),Q=(0,n.Mz)([X,A.D,L],i.xp),Z=(0,n.Mz)([A.D,X,Q,w.R],i.g1),J=e=>{var t=(0,w.R)(e),r=(0,T.M)(e);return(0,i.D5)(e,t,r,!1)},ee=(0,n.Mz)([A.D,J],c.I),te=(0,n.Mz)([A.D,L,Z,ee],i.Qn),re=(0,n.Mz)([a.fz,M,A.D,w.R],i.tF),ne=(0,n.Mz)([a.fz,M,A.D,w.R],i.iv),ie=(0,n.Mz)([a.fz,A.D,L,te,J,re,ne,w.R],(e,t,r,n,i,a,o,l)=>{if(t){var{type:c}=t,d=(0,s._L)(e,l);if(n){var h="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,f="category"===c&&n.bandwidth?n.bandwidth()/h:0;return f="angleAxis"===l&&null!=i&&(null==i?void 0:i.length)>=2?2*(0,u.sA)(i[0]-i[1])*f:f,d&&o?o.map((e,t)=>({coordinate:n(e)+f,value:e,index:t,offset:f})):n.domain().map((e,t)=>({coordinate:n(e)+f,value:a?a[e]:e,index:t,offset:f}))}}}),ae=(0,n.Mz)([d.xH,d.Hw,e=>e.tooltip.settings],(e,t,r)=>(0,d.$g)(r.shared,e,t)),se=e=>e.tooltip.settings.trigger,oe=e=>e.tooltip.settings.defaultIndex,le=(0,n.Mz)([E.J,ae,se,oe],f.i),ue=(0,n.Mz)([le,C],p.P),ce=(0,n.Mz)([ie,ue],h.E),de=(0,n.Mz)([le],e=>{if(e)return e.dataKey}),he=(0,n.Mz)([E.J,ae,se,oe],v.q),fe=(0,n.Mz)([m.Lp,m.A$,a.fz,y.HZ,ie,oe,he,b.x],g.o),pe=(0,n.Mz)([le,fe],(e,t)=>null!=e&&e.coordinate?e.coordinate:t),ge=(0,n.Mz)([le],e=>e.active),me=(0,n.Mz)([he,ue,o.LF,A.D,ce,b.x,ae],S.N),ye=(0,n.Mz)([me],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}})},3036:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(717),i=r(1465),a=r(3923),s=r(4200),o=r(7324);t.matchesProperty=function(e,t){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=i.toKey(e)}return t=a.cloneDeep(t),function(r){const i=s.get(r,e);return void 0===i?o.has(r,e):void 0===t?void 0===i:n.isMatch(i,t)}}},3097:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3500),i=r(3998),a=r(3025);t.orderBy=function(e,t,r,s){if(null==e)return[];r=s?void 0:r,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(r)||(r=null==r?[]:[r]),r=r.map(e=>String(e));const o=(e,t)=>{let r=e;for(let e=0;e<t.length&&null!=r;++e)r=r[t[e]];return r},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||i.isKey(e)?e:{key:e,path:a.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"==typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"==typeof e?e(t):Array.isArray(e)?o(t,e):"object"==typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let i=0;i<l.length;i++){const a=n.compareValues(e.criteria[i],t.criteria[i],r[i]);if(0!==a)return a}return 0}).map(e=>e.original)}},3403:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4200);t.property=function(e){return function(t){return n.get(t,e)}}},3412:(e,t,r)=>{e.exports=r(5012).range},3462:(e,t,r)=>{"use strict";r.d(t,{f:()=>m});var n,i,a,s=r(9744),o=r(2747),l=r(9938);class u{static create(e){return new u(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n;case"end":var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}if(t){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}n=u,a=1e-4,(i=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(i="EPS"))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a;var c=function(e){var{width:t,height:r}=e,n=((arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)%180+180)%180*Math.PI/180,i=Math.atan(r/t),a=n>i&&n<Math.PI-i?r/Math.sin(n):t/Math.cos(n);return Math.abs(a)};function d(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],i=0;i<e.length;i+=t){if(void 0!==r&&!0!==r(e[i]))return;n.push(e[i])}return n}function h(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){g(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function g(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r){var n,{tick:i,ticks:a,viewBox:u,minTickGap:f,orientation:g,interval:m,tickFormatter:y,unit:v,angle:b}=e;if(!a||!a.length||!i)return[];if((0,s.Et)(m)||l.m.isSsr)return null!==(n=function(e,t){return d(e,t+1)}(a,(0,s.Et)(m)?m:0))&&void 0!==n?n:[];var E=[],S="top"===g||"bottom"===g?"width":"height",T=v&&"width"===S?(0,o.Pu)(v,{fontSize:t,letterSpacing:r}):{width:0,height:0},w=(e,n)=>{var i="function"==typeof y?y(e.value,n):e.value;return"width"===S?function(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return c(n,r)}((0,o.Pu)(i,{fontSize:t,letterSpacing:r}),T,b):(0,o.Pu)(i,{fontSize:t,letterSpacing:r})[S]},A=a.length>=2?(0,s.sA)(a[1].coordinate-a[0].coordinate):1,k=function(e,t,r){var n="width"===r,{x:i,y:a,width:s,height:o}=e;return 1===t?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}(u,A,S);return"equidistantPreserveStart"===m?function(e,t,r,n,i){for(var a,s=(n||[]).slice(),{start:o,end:l}=t,u=0,c=1,f=o,p=function(){var t=null==n?void 0:n[u];if(void 0===t)return{v:d(n,c)};var a,s=u,p=()=>(void 0===a&&(a=r(t,s)),a),g=t.coordinate,m=0===u||h(e,g,p,f,l);m||(u=0,f=o,c+=1),m&&(f=g+e*(p()/2+i),u+=c)};c<=s.length;)if(a=p())return a.v;return[]}(A,k,w,a,f):(E="preserveStart"===m||"preserveStartEnd"===m?function(e,t,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:l,end:u}=t;if(a){var c=n[o-1],d=r(c,o-1),f=e*(c.coordinate+e*d/2-u);s[o-1]=c=p(p({},c),{},{tickCoord:f>0?c.coordinate-f*e:c.coordinate}),h(e,c.tickCoord,()=>d,l,u)&&(u=c.tickCoord-e*(d/2+i),s[o-1]=p(p({},c),{},{isShow:!0}))}for(var g=a?o-1:o,m=function(t){var n,a=s[t],o=()=>(void 0===n&&(n=r(a,t)),n);if(0===t){var c=e*(a.coordinate-e*o()/2-l);s[t]=a=p(p({},a),{},{tickCoord:c<0?a.coordinate-c*e:a.coordinate})}else s[t]=a=p(p({},a),{},{tickCoord:a.coordinate});h(e,a.tickCoord,o,l,u)&&(l=a.tickCoord+e*(o()/2+i),s[t]=p(p({},a),{},{isShow:!0}))},y=0;y<g;y++)m(y);return s}(A,k,w,a,f,"preserveStartEnd"===m):function(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=t,{end:l}=t,u=function(t){var n,u=a[t],c=()=>(void 0===n&&(n=r(u,t)),n);if(t===s-1){var d=e*(u.coordinate+e*c()/2-l);a[t]=u=p(p({},u),{},{tickCoord:d>0?u.coordinate-d*e:u.coordinate})}else a[t]=u=p(p({},u),{},{tickCoord:u.coordinate});h(e,u.tickCoord,c,o,l)&&(l=u.tickCoord-e*(c()/2+i),a[t]=p(p({},u),{},{isShow:!0}))},c=s-1;c>=0;c--)u(c);return a}(A,k,w,a,f),E.filter(e=>e.isShow))}},3500:(e,t)=>{"use strict";function r(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:e!=e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.compareValues=(e,t,n)=>{if(e!==t){const i=r(e),a=r(t);if(i===a&&0===i){if(e<t)return"desc"===n?1:-1;if(e>t)return"desc"===n?-1:1}return"desc"===n?a-i:i-a}return 0}},3569:(e,t,r)=>{"use strict";r.d(t,{R:()=>i});var n=r(9287),i=e=>{var t=(0,n.fz)(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"}},3571:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});var n=e=>e.tooltip},3844:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3964);t.cloneDeep=function(e){return n.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},3908:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3923:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9467);t.cloneDeep=function(e){return n.cloneDeepWith(e)}},3929:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{dl:()=>s,mP:()=>o,s8:()=>l});var s=(e,t,r)=>e.map(e=>{return"".concat((n=e,n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(r);var n}).join(","),o=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((e,t)=>e.filter(e=>t.includes(e))),l=(e,t)=>Object.keys(t).reduce((r,n)=>i(i({},r),{},{[n]:e(n,t[n])}),{})},3964:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6012),i=r(2049),a=r(9184),s=r(2520),o=r(3908);function l(e,t,r,n=new Map,c=void 0){const d=c?.(e,t,r,n);if(void 0!==d)return d;if(s.isPrimitive(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let i=0;i<e.length;i++)t[i]=l(e[i],i,r,n,c);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[i,a]of e)t.set(i,l(a,i,r,n,c));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const i of e)t.add(l(i,void 0,r,n,c));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let i=0;i<e.length;i++)t[i]=l(e[i],i,r,n,c);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),u(t,e,r,n,c),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),u(t,e,r,n,c),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),u(t,e,r,n,c),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,u(t,e,r,n,c),t}if("object"==typeof e&&function(e){switch(i.getTag(e)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),u(t,e,r,n,c),t}return e}function u(e,t,r=e,i,a){const s=[...Object.keys(t),...n.getSymbols(t)];for(let n=0;n<s.length;n++){const o=s[n],u=Object.getOwnPropertyDescriptor(e,o);(null==u||u.writable)&&(e[o]=l(t[o],o,r,i,a))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=u},3998:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1366),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!=typeof e&&"boolean"!=typeof e&&null!=e&&!n.isSymbol(e))||"string"==typeof e&&(a.test(e)||!i.test(e))||null!=t&&Object.hasOwn(t,e))}},4040:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{IZ:()=>l,Kg:()=>s,lY:()=>u,yy:()=>d}),r(6540);var s=Math.PI/180,o=e=>180*e/Math.PI,l=(e,t,r,n)=>({x:e+Math.cos(-s*n)*r,y:t+Math.sin(-s*n)*r}),u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},c=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360);return e+360*Math.min(i,a)},d=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=((e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,s=((e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)})({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var l=(r-i)/s,u=Math.acos(l);return n>a&&(u=2*Math.PI-u),{radius:s,angle:o(u),angleInRadian:u}})({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(a<l||a>u)return null;if(0===a)return null;var d,{startAngle:h,endAngle:f}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-360*a,endAngle:r-360*a}})(t),p=s;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;d=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;d=p>=f&&p<=h}return d?i(i({},t),{},{radius:a,angle:c(p,t)}):null}},4115:(e,t,r)=>{"use strict";r.d(t,{CA:()=>m,MC:()=>c,QG:()=>g,Vi:()=>u,cU:()=>d,fR:()=>h});var n=r(5307),i=r(1932);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=(0,n.Z0)({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=(0,i.h4)(t.payload)},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=(0,i.h4)(t.payload)},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=(0,i.h4)(t.payload)},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=s(s({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:u,removeXAxis:c,addYAxis:d,removeYAxis:h,addZAxis:f,removeZAxis:p,updateYAxisWidth:g}=l.actions,m=l.reducer},4128:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},4164:(e,t,r)=>{"use strict";function n(e){var t,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=n(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function i(){for(var e,t,r=0,i="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=n(e))&&(i&&(i+=" "),i+=t);return i}r.d(t,{$:()=>i})},4200:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8193),i=r(5112),a=r(1465),s=r(3025);t.get=function e(t,r,o){if(null==t)return o;switch(typeof r){case"string":{if(n.isUnsafeProperty(r))return o;const a=t[r];return void 0===a?i.isDeepKey(r)?e(t,s.toPath(r),o):o:a}case"number":case"symbol":{"number"==typeof r&&(r=a.toKey(r));const e=t[r];return void 0===e?o:e}default:{if(Array.isArray(r))return function(e,t,r){if(0===t.length)return r;let i=e;for(let e=0;e<t.length;e++){if(null==i)return r;if(n.isUnsafeProperty(t[e]))return r;i=i[t[e]]}return void 0===i?r:i}(t,r,o);if(r=Object.is(r?.valueOf(),-0)?"-0":String(r),n.isUnsafeProperty(r))return o;const e=t[r];return void 0===e?o:e}}}},4217:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var n=(e,t,r,n,i,a,s,o)=>{if(null!=a&&null!=o){var l=s[0],u=null==l?void 0:o(l.positions,a);if(null!=u)return u;var c=null==i?void 0:i[Number(a)];if(c)return"horizontal"===r?{x:c.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:c.coordinate}}}},4259:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3097),i=r(5711),a=r(316);t.sortBy=function(e,...t){const r=t.length;return r>1&&a.isIterateeCall(e,t[0],t[1])?t=[]:r>2&&a.isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),n.orderBy(e,i.flatten(t),["asc"])}},4274:(e,t,r)=>{"use strict";r.d(t,{l3:()=>y,m7:()=>v});var n=r(6540),i=r(9082),a=r(2695),s=new(r(4128)),o="recharts.syncEvent.tooltip",l="recharts.syncEvent.brush",u=r(6960),c=r(4531),d=r(7997),h=r(3032);function f(e){return e.tooltip.syncInteraction}var p=r(9287),g=r(6446),m=()=>{};function y(){var e=(0,i.j)();(0,n.useEffect)(()=>{e((0,u.dl)())},[e]),function(){var e=(0,i.G)(a.lZ),t=(0,i.G)(a.pH),r=(0,i.j)(),l=(0,i.G)(a.hX),u=(0,i.G)(h.R4),d=(0,p.WX)(),f=(0,p.sk)(),g=(0,i.G)(e=>e.rootProps.className);(0,n.useEffect)(()=>{if(null==e)return m;var n=(n,i,a)=>{if(t!==a&&e===n)if("index"!==l){if(null!=u){var s;if("function"==typeof l){var o={activeTooltipIndex:null==i.payload.index?void 0:Number(i.payload.index),isTooltipActive:i.payload.active,activeIndex:null==i.payload.index?void 0:Number(i.payload.index),activeLabel:i.payload.label,activeDataKey:i.payload.dataKey,activeCoordinate:i.payload.coordinate},h=l(u,o);s=u[h]}else"value"===l&&(s=u.find(e=>String(e.value)===i.payload.label));var{coordinate:p}=i.payload;if(null!=s&&!1!==i.payload.active&&null!=p&&null!=f){var{x:g,y:m}=p,y=Math.min(g,f.x+f.width),v=Math.min(m,f.y+f.height),b={x:"horizontal"===d?s.coordinate:y,y:"horizontal"===d?v:s.coordinate},E=(0,c.E1)({active:i.payload.active,coordinate:b,dataKey:i.payload.dataKey,index:String(s.index),label:i.payload.label});r(E)}else r((0,c.E1)({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}))}}else r(i)};return s.on(o,n),()=>{s.off(o,n)}},[g,r,t,e,l,u,d,f])}(),function(){var e=(0,i.G)(a.lZ),t=(0,i.G)(a.pH),r=(0,i.j)();(0,n.useEffect)(()=>{if(null==e)return m;var n=(n,i,a)=>{t!==a&&e===n&&r((0,g.M)(i))};return s.on(l,n),()=>{s.off(l,n)}},[r,t,e])}()}function v(e,t,r,l,u,h){var p=(0,i.G)(r=>(0,d.dp)(r,e,t)),g=(0,i.G)(a.pH),m=(0,i.G)(a.lZ),y=(0,i.G)(a.hX),v=(0,i.G)(f),b=null==v?void 0:v.active;(0,n.useEffect)(()=>{if(!b&&null!=m&&null!=g){var e=(0,c.E1)({active:h,coordinate:r,dataKey:p,index:u,label:"number"==typeof l?String(l):l});s.emit(o,m,e,g)}},[b,r,p,u,l,g,m,y,h])}},4296:(e,t,r)=>{"use strict";r.d(t,{s:()=>ce});var n=r(6540),i=r(961),a=r(5846),s=r(4164),o=r(9303);Math.abs,Math.atan2;const l=Math.cos,u=(Math.max,Math.min,Math.sin),c=Math.sqrt,d=Math.PI,h=2*d,f={draw(e,t){const r=c(t/d);e.moveTo(r,0),e.arc(0,0,r,0,h)}},p={draw(e,t){const r=c(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},g=c(1/3),m=2*g,y={draw(e,t){const r=c(t/m),n=r*g;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},v={draw(e,t){const r=c(t),n=-r/2;e.rect(n,n,r,r)}},b=u(d/10)/u(7*d/10),E=u(h/10)*b,S=-l(h/10)*b,T={draw(e,t){const r=c(.8908130915292852*t),n=E*r,i=S*r;e.moveTo(0,-r),e.lineTo(n,i);for(let t=1;t<5;++t){const a=h*t/5,s=l(a),o=u(a);e.lineTo(o*r,-s*r),e.lineTo(s*n-o*i,o*n+s*i)}e.closePath()}},w=c(3),A={draw(e,t){const r=-c(t/(3*w));e.moveTo(0,2*r),e.lineTo(-w*r,-r),e.lineTo(w*r,-r),e.closePath()}},k=-.5,x=c(3)/2,L=1/c(12),P=3*(L/2+1),R={draw(e,t){const r=c(t/P),n=r/2,i=r*L,a=n,s=r*L+r,o=-a,l=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(k*n-x*i,x*n+k*i),e.lineTo(k*a-x*s,x*a+k*s),e.lineTo(k*o-x*l,x*o+k*l),e.lineTo(k*n+x*i,k*i-x*n),e.lineTo(k*a+x*s,k*s-x*a),e.lineTo(k*o+x*l,k*l-x*o),e.closePath()}};var _=r(8946),O=r(1509);c(3),c(3);var I=r(4501),C=r(9744),D=["type","size","sizeType"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(null,arguments)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){U(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B={symbolCircle:f,symbolCross:p,symbolDiamond:y,symbolSquare:v,symbolStar:T,symbolTriangle:A,symbolWye:R},$=Math.PI/180,j=e=>{var t,r,{type:i="circle",size:a=64,sizeType:o="area"}=e,l=F(F({},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,D)),{},{type:i,size:a,sizeType:o}),{className:u,cx:c,cy:d}=l,h=(0,I.J9)(l,!0);return c===+c&&d===+d&&a===+a?n.createElement("path",M({},h,{className:(0,s.$)("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(d,")"),d:(t=(e=>{var t="symbol".concat((0,C.Zb)(e));return B[t]||f})(i),r=function(e,t){let r=null,n=(0,O.i)(i);function i(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return e="function"==typeof e?e:(0,_.A)(e||f),t="function"==typeof t?t:(0,_.A)(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"==typeof t?t:(0,_.A)(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:(0,_.A)(+e),i):t},i.context=function(e){return arguments.length?(r=null==e?null:e,i):r},i}().type(t).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*$;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(a,o,i)),r())})):null};j.registerSymbol=(e,t)=>{B["symbol".concat((0,C.Zb)(e))]=t};var z=r(8940);function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G.apply(null,arguments)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=32;class W extends n.PureComponent{renderIcon(e,t){var{inactiveColor:r}=this.props,i=16,a=V/6,s=V/3,o=e.inactive?r:e.color,l=null!=t?t:e.type;if("none"===l)return null;if("plainline"===l)return n.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:V,y2:i,className:"recharts-legend-icon"});if("line"===l)return n.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,"\n            H").concat(V,"M").concat(2*s,",").concat(i,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if("rect"===l)return n.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(V,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(n.isValidElement(e.legendIcon)){var u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach(function(t){K(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete u.legendIcon,n.cloneElement(e.legendIcon,u)}return n.createElement(j,{fill:o,cx:i,cy:i,size:V,sizeType:"diameter",type:l})}renderItems(){var{payload:e,iconSize:t,layout:r,formatter:i,inactiveColor:a,iconType:l}=this.props,u={x:0,y:0,width:V,height:V},c={display:"horizontal"===r?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((e,r)=>{var h=e.formatter||i,f=(0,s.$)({"recharts-legend-item":!0,["legend-item-".concat(r)]:!0,inactive:e.inactive});if("none"===e.type)return null;var p=e.inactive?a:e.color,g=h?h(e.value,e,r):e.value;return n.createElement("li",G({className:f,style:c,key:"legend-item-".concat(r)},(0,z.XC)(this.props,e,r)),n.createElement(o.u,{width:t,height:t,viewBox:u,style:d,"aria-label":"".concat(g," legend icon")},this.renderIcon(e,l)),n.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},g))})}render(){var{payload:e,layout:t,align:r}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===t?r:"left"};return n.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}K(W,"displayName","Legend"),K(W,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Y=r(9799),q=r(9082),X=r(7962),Q=r(6583),Z=r(9287),J=r(1283),ee=["contextPayload"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(null,arguments)}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach(function(t){ie(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ie(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e){return e.value}function se(e){var{contextPayload:t}=e,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,ee),i=(0,Y.s)(t,e.payloadUniqBy,ae),a=ne(ne({},r),{},{payload:i});return n.isValidElement(e.content)?n.cloneElement(e.content,a):"function"==typeof e.content?n.createElement(e.content,a):n.createElement(W,a)}function oe(e){var t=(0,q.j)();return(0,n.useEffect)(()=>{t((0,J.h1)(e))},[t,e]),null}function le(e){var t=(0,q.j)();return(0,n.useEffect)(()=>(t((0,J.hx)(e)),()=>{t((0,J.hx)({width:0,height:0}))}),[t,e]),null}function ue(e){var t=(0,q.G)(X.g0),r=(0,a.M)(),s=(0,Z.Kp)(),{width:o,height:l,wrapperStyle:u,portal:c}=e,[d,h]=(0,Q.V)([t]),f=(0,Z.yi)(),p=(0,Z.rY)(),g=f-(s.left||0)-(s.right||0),m=ce.getWidthOrHeight(e.layout,l,o,g),y=c?u:ne(ne({position:"absolute",width:(null==m?void 0:m.width)||o||"auto",height:(null==m?void 0:m.height)||l||"auto"},function(e,t,r,n,i,a){var s,o,{layout:l,align:u,verticalAlign:c}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(s="center"===u&&"vertical"===l?{left:((n||0)-a.width)/2}:"right"===u?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(o="middle"===c?{top:((i||0)-a.height)/2}:"bottom"===c?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),ne(ne({},s),o)}(u,e,s,f,p,d)),u),v=null!=c?c:r;if(null==v)return null;var b=n.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:h},n.createElement(oe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),n.createElement(le,{width:d.width,height:d.height}),n.createElement(se,te({},e,m,{margin:s,chartWidth:f,chartHeight:p,contextPayload:t})));return(0,i.createPortal)(b,v)}class ce extends n.PureComponent{static getWidthOrHeight(e,t,r,n){return"vertical"===e&&(0,C.Et)(t)?{height:t}:"horizontal"===e?{width:r||n}:null}render(){return n.createElement(ue,this.props)}}ie(ce,"displayName","Legend"),ie(ce,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"})},4297:(e,t,r)=>{e.exports=r(5259).throttle},4354:(e,t,r)=>{"use strict";r.d(t,{$:()=>i,X:()=>a});var n=r(6540),i=(0,n.createContext)(null),a=()=>(0,n.useContext)(i)},4364:(e,t,r)=>{"use strict";r.d(t,{F0:()=>n,tQ:()=>a,um:()=>i});var n="data-recharts-item-index",i="data-recharts-item-data-key",a=60},4405:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler");Symbol.for("react.provider");var o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition");Symbol.for("react.client.reference");t.zv=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case a:case c:case d:case p:return e;default:switch(e=e&&e.$$typeof){case l:case u:case f:case h:case o:return e;default:return t}}case n:return t}}}(e)===i}},4477:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<a(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,s=i>>>1;n<s;){var o=2*(n+1)-1,l=e[o],u=o+1,c=e[u];if(0>a(l,r))u<i&&0>a(c,l)?(e[n]=c,e[u]=r,n=u):(e[n]=l,e[o]=r,n=o);else{if(!(u<i&&0>a(c,r)))break e;e[n]=c,e[u]=r,n=u}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y=!1,v="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,E="undefined"!=typeof setImmediate?setImmediate:null;function S(e){for(var t=n(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,r(u,t)}t=n(c)}}function T(e){if(m=!1,S(e),!g)if(null!==n(u))g=!0,A||(A=!0,w());else{var t=n(c);null!==t&&I(T,t.startTime-e)}}var w,A=!1,k=-1,x=5,L=-1;function P(){return!(!y&&t.unstable_now()-L<x)}function R(){if(y=!1,A){var e=t.unstable_now();L=e;var r=!0;try{e:{g=!1,m&&(m=!1,b(k),k=-1),p=!0;var a=f;try{t:{for(S(e),h=n(u);null!==h&&!(h.expirationTime>e&&P());){var s=h.callback;if("function"==typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof o){h.callback=o,S(e),r=!0;break t}h===n(u)&&i(u),S(e)}else i(u);h=n(u)}if(null!==h)r=!0;else{var l=n(c);null!==l&&I(T,l.startTime-e),r=!1}}break e}finally{h=null,f=a,p=!1}r=void 0}}finally{r?w():A=!1}}}if("function"==typeof E)w=function(){E(R)};else if("undefined"!=typeof MessageChannel){var _=new MessageChannel,O=_.port2;_.port1.onmessage=R,w=function(){O.postMessage(null)}}else w=function(){v(R,0)};function I(e,r){k=v(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,r(c,e),null===n(u)&&e===n(c)&&(m?(b(k),k=-1):m=!0,I(T,a-s))):(e.sortIndex=o,r(u,e),g||p||(g=!0,A||(A=!0,w()))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},4483:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},4501:(e,t,r)=>{"use strict";r.d(t,{J9:()=>y,aS:()=>g,y$:()=>m});var n=r(305),i=r.n(n),a=r(6540),s=r(4405),o=r(9744),l=r(8940),u=r(8129),c=r(5448),d=e=>"string"==typeof e?e:e?e.displayName||e.name||"Component":"",h=null,f=null,p=e=>{if(e===h&&Array.isArray(f))return f;var t=[];return a.Children.forEach(e,e=>{(0,o.uy)(e)||((0,s.zv)(e)?t=t.concat(p(e.props.children)):t.push(e))}),f=t,h=e,t};function g(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(e=>d(e)):[d(t)],p(e).forEach(e=>{var t=i()(e,"type.displayName")||i()(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}var m=e=>!e||"object"!=typeof e||!("clipDot"in e)||Boolean(e.clipDot),y=(e,t,r)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if((0,a.isValidElement)(e)&&(n=e.props),"object"!=typeof n&&"function"!=typeof n)return null;var i={};return Object.keys(n).forEach(e=>{var a;((e,t,r,n)=>{var i;if("symbol"==typeof t||"number"==typeof t)return!0;var a=null!==(i=n&&(null===l.VU||void 0===l.VU?void 0:l.VU[n]))&&void 0!==i?i:[],s=t.startsWith("data-"),o="function"!=typeof e&&(Boolean(n)&&a.includes(t)||(0,c.R)(t)),d=Boolean(r)&&(0,u.q)(t);return s||o||d})(null===(a=n)||void 0===a?void 0:a[e],e,t,r)&&(i[e]=n[e])}),i}},4520:(e,t,r)=>{"use strict";r.d(t,{b:()=>vt});var n=r(6540),i=r(6960);r(8418);var a={notify(){},get:()=>[]};var s=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),o=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),l=(()=>s||o?n.useLayoutEffect:n.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var u=Symbol.for("react-redux-context"),c="undefined"!=typeof globalThis?globalThis:{};function d(){if(!n.createContext)return{};const e=c[u]??=new Map;let t=e.get(n.createContext);return t||(t=n.createContext(null),e.set(n.createContext,t)),t}var h=d(),f=function(e){const{children:t,context:r,serverState:i,store:s}=e,o=n.useMemo(()=>{const e=function(e,t){let r,n=a,i=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function l(){i++,r||(r=t?t.addNestedSub(o):e.subscribe(o),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){n&&null!==e&&(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function u(){i--,r&&0===i&&(r(),r=void 0,n.clear(),n=a)}const c={addNestedSub:function(e){l();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),u())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,l())},tryUnsubscribe:function(){s&&(s=!1,u())},getListeners:()=>n};return c}(s);return{store:s,subscription:e,getServerState:i?()=>i:void 0}},[s,i]),u=n.useMemo(()=>s.getState(),[s]);l(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==s.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,u]);const c=r||h;return n.createElement(c.Provider,{value:o},t)},p=r(4644),g=r(5307),m=r(4531),y=r(6446),v=(0,g.Z0)({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:b,setLayout:E,setChartSize:S,setScale:T}=v.actions,w=v.reducer,A=r(5508),k=r(9287),x=r(3032),L=r(6189),P=r(7997),R=r(9538),_=r(3569),O=(0,A.Mz)([(e,t)=>t,k.fz,R.D0,_.R,x.gL,x.R4,P.r1,L.HZ],P.aX),I=r(5978),C=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},D=(0,g.VP)("mouseClick"),M=(0,g.Nc)();M.startListening({actionCreator:D,effect:(e,t)=>{var r=e.payload,n=O(t.getState(),C(r));null!=(null==n?void 0:n.activeIndex)&&t.dispatch((0,m.jF)({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var N=(0,g.VP)("mouseMove"),F=(0,g.Nc)();function U(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}F.startListening({actionCreator:N,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=(0,I.au)(n,n.tooltip.settings.shared),a=O(n,C(r));"axis"===i&&(null!=(null==a?void 0:a.activeIndex)?t.dispatch((0,m.Nt)({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch((0,m.xS)()))}});var B=r(4115),$=r(2617),j=r(1932),z=(0,g.Z0)({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=(0,j.ss)(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=(0,j.ss)(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=(0,j.ss)(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:G,removeDot:H,addArea:K,removeArea:V,addLine:W,removeLine:Y}=z.actions,q=z.reducer,X={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Q=(0,g.Z0)({name:"brush",initialState:X,reducers:{setBrushSettings:(e,t)=>null==t.payload?X:t.payload}}),{setBrushSettings:Z}=Q.actions,J=Q.reducer,ee=r(1283),te={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},re=(0,g.Z0)({name:"rootProps",initialState:te,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:te.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),ne=re.reducer,{updateOptions:ie}=re.actions,ae=(0,g.Z0)({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=(0,j.h4)(t.payload)},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=(0,j.h4)(t.payload)},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:se,removeRadiusAxis:oe,addAngleAxis:le,removeAngleAxis:ue}=ae.actions,ce=ae.reducer,de=(0,g.Z0)({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:he}=de.actions,fe=de.reducer,pe=r(6118),ge=r(4544),me=(0,g.VP)("keyDown"),ye=(0,g.VP)("focus"),ve=(0,g.Nc)();ve.startListening({actionCreator:me,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,i=e.payload;if("ArrowRight"===i||"ArrowLeft"===i||"Enter"===i){var a=Number((0,ge.P)(n,(0,x.n4)(r))),s=(0,x.R4)(r);if("Enter"!==i){var o=a+("ArrowRight"===i?1:-1)*("left-to-right"===(0,pe._y)(r)?1:-1);if(!(null==s||o>=s.length||o<0)){var l=(0,P.pg)(r,"axis","hover",String(o));t.dispatch((0,m.o4)({active:!0,activeIndex:o.toString(),activeDataKey:void 0,activeCoordinate:l}))}}else{var u=(0,P.pg)(r,"axis","hover",String(n.index));t.dispatch((0,m.o4)({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:u}))}}}}}),ve.startListening({actionCreator:ye,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var i=(0,P.pg)(r,"axis","hover",String("0"));t.dispatch((0,m.o4)({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:i}))}}}});var be=(0,g.VP)("externalEvent"),Ee=(0,g.Nc)();Ee.startListening({actionCreator:be,effect:(e,t)=>{if(null!=e.payload.handler){var r=t.getState(),n={activeCoordinate:(0,x.eE)(r),activeDataKey:(0,x.Xb)(r),activeIndex:(0,x.A2)(r),activeLabel:(0,x.BZ)(r),activeTooltipIndex:(0,x.A2)(r),isTooltipActive:(0,x.yn)(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Se=r(4364),Te=r(732),we=r(3571),Ae=(0,A.Mz)([we.J],e=>e.tooltipItemPayloads),ke=(0,A.Mz)([Ae,Te.x,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(e=>e.settings.dataKey===n);if(null!=i){var{positions:a}=i;if(null!=a)return t(a,r)}}),xe=(0,g.VP)("touchMove"),Le=(0,g.Nc)();Le.startListening({actionCreator:xe,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=(0,I.au)(n,n.tooltip.settings.shared);if("axis"===i){var a=O(n,C({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null==a?void 0:a.activeIndex)&&t.dispatch((0,m.Nt)({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if("item"===i){var s,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(Se.F0),c=null!==(s=l.getAttribute(Se.um))&&void 0!==s?s:void 0,d=ke(t.getState(),u,c);t.dispatch((0,m.RD)({activeDataKey:c,activeIndex:u,activeCoordinate:d}))}}});var Pe=(0,g.Z0)({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==n.dataKey||e.direction!==n.direction))}}}),{addErrorBar:Re,removeErrorBar:_e}=Pe.actions,Oe=Pe.reducer,Ie=(0,p.HY)({brush:J,cartesianAxis:B.CA,chartData:y.LV,errorBars:Oe,graphicalItems:$.iZ,layout:w,legend:ee.CU,options:i.lJ,polarAxis:ce,polarOptions:fe,referenceElements:q,rootProps:ne,tooltip:m.En}),Ce=r(2070),De=r(2649);function Me(e){var{preloadedState:t,children:r,reduxStoreName:i}=e,a=(0,Ce.r)(),s=(0,n.useRef)(null);if(a)return r;null==s.current&&(s.current=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart";return(0,g.U1)({reducer:Ie,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([M.middleware,F.middleware,ve.middleware,Ee.middleware,Le.middleware]),devTools:{serialize:{replacer:U},name:"recharts-".concat(t)}})}(t,i));var o=De.E;return n.createElement(f,{context:o,store:s.current},r)}var Ne=r(9082),Fe=e=>{var{chartData:t}=e,r=(0,Ne.j)(),i=(0,Ce.r)();return(0,n.useEffect)(()=>i?()=>{}:(r((0,y.hq)(t)),()=>{r((0,y.hq)(void 0))}),[t,r,i]),null};function Ue(e){var{layout:t,width:r,height:i,margin:a}=e,s=(0,Ne.j)(),o=(0,Ce.r)();return(0,n.useEffect)(()=>{o||(s(E(t)),s(S({width:r,height:i})),s(b(a)))},[s,o,t,r,i,a]),null}function Be(e){var t=(0,Ne.j)();return(0,n.useEffect)(()=>{t(ie(e))},[t,e]),null}var $e=r(2945),je=r(9303),ze=r(6461),Ge=r(8813),He=["children"];function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ke.apply(null,arguments)}var Ve={width:"100%",height:"100%"},We=(0,n.forwardRef)((e,t)=>{var r=(0,k.yi)(),i=(0,k.rY)(),a=(0,$e.$)();if(!(0,Ge.F)(r)||!(0,Ge.F)(i))return null;var s,o,{children:l,otherAttributes:u,title:c,desc:d}=e;return s="number"==typeof u.tabIndex?u.tabIndex:a?0:void 0,o="string"==typeof u.role?u.role:a?"application":void 0,n.createElement(je.u,Ke({},u,{title:c,desc:d,role:o,tabIndex:s,width:r,height:i,style:Ve,ref:t}),l)}),Ye=e=>{var{children:t}=e,r=(0,Ne.G)(ze.U);if(!r)return null;var{width:i,height:a,y:s,x:o}=r;return n.createElement(je.u,{width:i,height:a,x:o,y:s},t)},qe=(0,n.forwardRef)((e,t)=>{var{children:r}=e,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,He);return(0,Ce.r)()?n.createElement(Ye,null,r):n.createElement(We,Ke({ref:t},i),r)}),Xe=r(4164),Qe=r(4274),Ze=r(5180),Je=r(4354),et=r(5846);function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach(function(t){nt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nt(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var it=(0,n.forwardRef)((e,t)=>{var{children:r,className:i,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:u,onMouseEnter:c,onMouseLeave:d,onMouseMove:h,onMouseUp:f,onTouchEnd:p,onTouchMove:g,onTouchStart:y,style:v,width:b}=e,E=(0,Ne.j)(),[S,w]=(0,n.useState)(null),[A,k]=(0,n.useState)(null);(0,Qe.l3)();var x=function(){var e=(0,Ne.j)(),[t,r]=(0,n.useState)(null),i=(0,Ne.G)(Ze.et);return(0,n.useEffect)(()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;(0,Ge.H)(r)&&r!==i&&e(T(r))}},[t,e,i]),r}(),L=(0,n.useCallback)(e=>{x(e),"function"==typeof t&&t(e),w(e),k(e)},[x,t,w,k]),P=(0,n.useCallback)(e=>{E(D(e)),E(be({handler:s,reactEvent:e}))},[E,s]),R=(0,n.useCallback)(e=>{E(N(e)),E(be({handler:c,reactEvent:e}))},[E,c]),_=(0,n.useCallback)(e=>{E((0,m.xS)()),E(be({handler:d,reactEvent:e}))},[E,d]),O=(0,n.useCallback)(e=>{E(N(e)),E(be({handler:h,reactEvent:e}))},[E,h]),I=(0,n.useCallback)(()=>{E(ye())},[E]),C=(0,n.useCallback)(e=>{E(me(e.key))},[E]),M=(0,n.useCallback)(e=>{E(be({handler:o,reactEvent:e}))},[E,o]),F=(0,n.useCallback)(e=>{E(be({handler:l,reactEvent:e}))},[E,l]),U=(0,n.useCallback)(e=>{E(be({handler:u,reactEvent:e}))},[E,u]),B=(0,n.useCallback)(e=>{E(be({handler:f,reactEvent:e}))},[E,f]),$=(0,n.useCallback)(e=>{E(be({handler:y,reactEvent:e}))},[E,y]),j=(0,n.useCallback)(e=>{E(xe(e)),E(be({handler:g,reactEvent:e}))},[E,g]),z=(0,n.useCallback)(e=>{E(be({handler:p,reactEvent:e}))},[E,p]);return n.createElement(Je.$.Provider,{value:S},n.createElement(et.t.Provider,{value:A},n.createElement("div",{className:(0,Xe.$)("recharts-wrapper",i),style:rt({position:"relative",cursor:"default",width:b,height:a},v),onClick:P,onContextMenu:M,onDoubleClick:F,onFocus:I,onKeyDown:C,onMouseDown:U,onMouseEnter:R,onMouseLeave:_,onMouseMove:O,onMouseUp:B,onTouchEnd:z,onTouchMove:j,onTouchStart:$,ref:L},r)))}),at=r(9744),st=r(6270),ot=(0,n.createContext)(void 0),lt=e=>{var{children:t}=e,[r]=(0,n.useState)("".concat((0,at.NF)("recharts"),"-clip")),i=(0,st.oM)();if(null==i)return null;var{x:a,y:s,width:o,height:l}=i;return n.createElement(ot.Provider,{value:r},n.createElement("defs",null,n.createElement("clipPath",{id:r},n.createElement("rect",{x:a,y:s,height:l,width:o}))),t)},ut=r(5448),ct=["children","className","width","height","style","compact","title","desc"],dt=(0,n.forwardRef)((e,t)=>{var{children:r,className:i,width:a,height:s,style:o,compact:l,title:u,desc:c}=e,d=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,ct),h=(0,ut.u)(d);return l?n.createElement(qe,{otherAttributes:h,title:u,desc:c},r):n.createElement(it,{className:i,style:o,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},n.createElement(qe,{otherAttributes:h,title:u,desc:c,ref:t},n.createElement(lt,null,r)))}),ht=r(7404),ft=["width","height"];function pt(){return pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pt.apply(null,arguments)}var gt={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},mt=(0,n.forwardRef)(function(e,t){var r,i=(0,ht.e)(e.categoricalChartProps,gt),{width:a,height:s}=i,o=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(i,ft);if(!(0,Ge.F)(a)||!(0,Ge.F)(s))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,categoricalChartProps:h}=e,f={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return n.createElement(Me,{preloadedState:{options:f},reduxStoreName:null!==(r=h.id)&&void 0!==r?r:l},n.createElement(Fe,{chartData:h.data}),n.createElement(Ue,{width:a,height:s,layout:i.layout,margin:i.margin}),n.createElement(Be,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),n.createElement(dt,pt({},o,{width:a,height:s,ref:t})))}),yt=["axis"],vt=(0,n.forwardRef)((e,t)=>n.createElement(mt,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yt,tooltipPayloadSearcher:i.uN,categoricalChartProps:e,ref:t}))},4531:(e,t,r)=>{"use strict";r.d(t,{E1:()=>y,En:()=>b,Ix:()=>l,Nt:()=>g,RD:()=>d,UF:()=>c,XB:()=>u,jF:()=>m,k_:()=>a,o4:()=>v,xS:()=>f});var n=r(5307),i=r(1932),a={active:!1,index:null,dataKey:void 0,coordinate:void 0},s={itemInteraction:{click:a,hover:a},axisInteraction:{click:a,hover:a},keyboardInteraction:a,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},o=(0,n.Z0)({name:"tooltip",initialState:s,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push((0,i.h4)(t.payload))},removeTooltipEntrySettings(e,t){var r=(0,i.ss)(e).tooltipItemPayloads.indexOf((0,i.h4)(t.payload));r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:l,removeTooltipEntrySettings:u,setTooltipSettingsState:c,setActiveMouseOverItemIndex:d,mouseLeaveItem:h,mouseLeaveChart:f,setActiveClickItemIndex:p,setMouseOverAxisIndex:g,setMouseClickAxisIndex:m,setSyncInteraction:y,setKeyboardInteraction:v}=o.actions,b=o.reducer},4544:(e,t,r)=>{"use strict";r.d(t,{P:()=>i});var n=r(8813),i=(e,t)=>{var r=null==e?void 0:e.index;if(null==r)return null;var i=Number(r);if(!(0,n.H)(i))return r;var a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(0,Math.min(i,a)))}},4569:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8919);t.toFinite=function(e){return e?(e=n.toNumber(e))===1/0||e===-1/0?(e<0?-1:1)*Number.MAX_VALUE:e==e?e:0:0===e?e:0}},4644:(e,t,r)=>{"use strict";function n(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}r.d(t,{HY:()=>u,Qd:()=>o,Tw:()=>d,Zz:()=>c,ve:()=>h,y$:()=>l});var i=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),a=()=>Math.random().toString(36).substring(7).split("").join("."),s={INIT:`@@redux/INIT${a()}`,REPLACE:`@@redux/REPLACE${a()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${a()}`};function o(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function l(e,t,r){if("function"!=typeof e)throw new Error(n(2));if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(n(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(n(1));return r(l)(e,t)}let a=e,u=t,c=new Map,d=c,h=0,f=!1;function p(){d===c&&(d=new Map,c.forEach((e,t)=>{d.set(t,e)}))}function g(){if(f)throw new Error(n(3));return u}function m(e){if("function"!=typeof e)throw new Error(n(4));if(f)throw new Error(n(5));let t=!0;p();const r=h++;return d.set(r,e),function(){if(t){if(f)throw new Error(n(6));t=!1,p(),d.delete(r),c=null}}}function y(e){if(!o(e))throw new Error(n(7));if(void 0===e.type)throw new Error(n(8));if("string"!=typeof e.type)throw new Error(n(17));if(f)throw new Error(n(9));try{f=!0,u=a(u,e)}finally{f=!1}return(c=d).forEach(e=>{e()}),e}return y({type:s.INIT}),{dispatch:y,subscribe:m,getState:g,replaceReducer:function(e){if("function"!=typeof e)throw new Error(n(10));a=e,y({type:s.REPLACE})},[i]:function(){const e=m;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(n(11));function r(){const e=t;e.next&&e.next(g())}return r(),{unsubscribe:e(r)}},[i](){return this}}}}}function u(e){const t=Object.keys(e),r={};for(let n=0;n<t.length;n++){const i=t[n];"function"==typeof e[i]&&(r[i]=e[i])}const i=Object.keys(r);let a;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if(void 0===r(void 0,{type:s.INIT}))throw new Error(n(12));if(void 0===r(void 0,{type:s.PROBE_UNKNOWN_ACTION()}))throw new Error(n(13))})}(r)}catch(e){a=e}return function(e={},t){if(a)throw a;let s=!1;const o={};for(let a=0;a<i.length;a++){const l=i[a],u=r[l],c=e[l],d=u(c,t);if(void 0===d)throw t&&t.type,new Error(n(14));o[l]=d,s=s||d!==c}return s=s||i.length!==Object.keys(e).length,s?o:e}}function c(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}function d(...e){return t=>(r,i)=>{const a=t(r,i);let s=()=>{throw new Error(n(15))};const o={getState:a.getState,dispatch:(e,...t)=>s(e,...t)},l=e.map(e=>e(o));return s=c(...l)(a.dispatch),{...a,dispatch:s}}}function h(e){return o(e)&&"type"in e&&"string"==typeof e.type}},4653:(e,t,r)=>{"use strict";r.d(t,{u:()=>h});var n=r(4164),i=r(6540),a=r(4297),s=r.n(a),o=r(9744),l=r(6634);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=(0,i.forwardRef)((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:u="100%",height:d="100%",minWidth:h=0,minHeight:f,maxHeight:p,children:g,debounce:m=0,id:y,className:v,onResize:b,style:E={}}=e,S=(0,i.useRef)(null),T=(0,i.useRef)();T.current=b,(0,i.useImperativeHandle)(t,()=>S.current);var[w,A]=(0,i.useState)({containerWidth:a.width,containerHeight:a.height}),k=(0,i.useCallback)((e,t)=>{A(r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}})},[]);(0,i.useEffect)(()=>{var e=e=>{var t,{width:r,height:n}=e[0].contentRect;k(r,n),null===(t=T.current)||void 0===t||t.call(T,r,n)};m>0&&(e=s()(e,m,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=S.current.getBoundingClientRect();return k(r,n),t.observe(S.current),()=>{t.disconnect()}},[k,m]);var x=(0,i.useMemo)(()=>{var{containerWidth:e,containerHeight:t}=w;if(e<0||t<0)return null;(0,l.R)((0,o._3)(u)||(0,o._3)(d),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",u,d),(0,l.R)(!r||r>0,"The aspect(%s) must be greater than zero.",r);var n=(0,o._3)(u)?e:u,a=(0,o._3)(d)?t:d;return r&&r>0&&(n?a=n/r:a&&(n=a*r),p&&a>p&&(a=p)),(0,l.R)(n>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",n,a,u,d,h,f,r),i.Children.map(g,e=>(0,i.cloneElement)(e,{width:n,height:a,style:c({width:n,height:a},e.props.style)}))},[r,g,d,p,f,h,w,u]);return i.createElement("div",{id:y?"".concat(y):void 0,className:(0,n.$)("recharts-responsive-container",v),style:c(c({},E),{},{width:u,height:d,minWidth:h,minHeight:f,maxHeight:p}),ref:S},i.createElement("div",{style:{width:0,height:0,overflow:"visible"}},x))})},4905:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},4945:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>uo});const n=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},i=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=a},a=Number.MAX_SAFE_INTEGER||9007199254740991;let s=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),o=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),l=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e}({});var u="manifest",c="level",d="audioTrack",h="subtitleTrack",f="main",p="audio",g="subtitle";class m{constructor(e,t=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}sample(e,t){const r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class y{constructor(e,t,r,n=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new m(e),this.fast_=new m(t),this.defaultTTFB_=n,this.ttfb_=new m(e)}update(e,t){const{slow_:r,fast_:n,ttfb_:i}=this;r.halfLife!==e&&(this.slow_=new m(e,r.getEstimate(),r.getTotalWeight())),n.halfLife!==t&&(this.fast_=new m(t,n.getEstimate(),n.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new m(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const r=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/r;this.fast_.sample(r,n),this.slow_.sample(r,n)}sampleTTFB(e){const t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(null,arguments)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class T{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=w,this.debug=t.debug.bind(null,r),this.log=t.log.bind(null,r),this.warn=t.warn.bind(null,r),this.info=t.info.bind(null,r),this.error=t.error.bind(null,r)}}const w=function(){},A={trace:w,debug:w,log:w,warn:w,info:w,error:w};function k(){return b({},A)}function x(e,t,r){return t[e]?t[e].bind(t):function(e,t){const r=self.console[e];return r?r.bind(self.console,`${t?"["+t+"] ":""}[${e}] >`):w}(e,r)}const L=k(),P=L;function R(e=!0){if("undefined"!=typeof self)return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function _(e,t){const r=Object.keys(e),n=Object.keys(t),i=r.length,a=n.length;return!i||!a||i===a&&!r.some(e=>-1===n.indexOf(e))}function O(e,t=!1){if("undefined"!=typeof TextDecoder){const r=new TextDecoder("utf-8").decode(e);if(t){const e=r.indexOf("\0");return-1!==e?r.substring(0,e):r}return r.replace(/\0/g,"")}const r=e.length;let n,i,a,s="",o=0;for(;o<r;){if(n=e[o++],0===n&&t)return s;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(n);break;case 12:case 13:i=e[o++],s+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=e[o++],a=e[o++],s+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&a)}}return s}const I=function(e){let t="";for(let r=0;r<e.length;r++){let n=e[r].toString(16);n.length<2&&(n="0"+n),t+=n}return t};function C(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function D(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M,N,F,U,B,$,j={exports:{}},z=(M||(M=1,N=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,F=/^(?=([^\/?#]*))\1([^]*)$/,U=/(?:\/|^)\.(?=\/)/g,B=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,j.exports=$={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=$.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=$.normalizePath(n.path),$.buildURLFromParts(n)}var i=$.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=$.normalizePath(i.path),$.buildURLFromParts(i)):t;var a=$.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=F.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(o.netLoc=a.netLoc,"/"!==i.path[0]))if(i.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+i.path;o.path=$.normalizePath(u)}else o.path=a.path,i.params||(o.params=a.params,i.query||(o.query=a.query));return null===o.path&&(o.path=r.alwaysNormalize?$.normalizePath(i.path):i.path),$.buildURLFromParts(o)},parseURL:function(e){var t=N.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(U,"");e.length!==(e=e.replace(B,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}}),j.exports);class G{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var H="audio",K="video",V="audiovideo";class W{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,"string"==typeof e&&(e={url:e}),this.base=e,function(e,t){const r=Q(e,t);r&&(r.enumerable=!0,Object.defineProperty(e,t,r))}(this,"stats")}setByteRange(e,t){const r=e.split("@",2);let n;n=1===r.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(r[1]),this._byteRange=[n,parseInt(r[0])+n]}get baseurl(){return this.base.url}get byteRange(){return null===this._byteRange?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return null===this._streams&&(this._streams={[H]:null,[K]:null,[V]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return null!==this._stats}get hasStreams(){return null!==this._streams}get stats(){return null===this._stats&&(this._stats=new G),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=z.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[H]=null,e[K]=null,e[V]=null}}function Y(e){return"initSegment"!==e.sn}class q extends W{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],t=this.byteRange[1];if(n(e)&&n(t))return t-e}return null}get bitrate(){return this.byteLength?8*this.byteLength/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;const e=n(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}get programDateTime(){return null===this._programDateTime&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){n(e)?this._programDateTime=e:this._programDateTime=this.rawProgramDateTime=null}get ref(){return Y(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,r,n,i,a=!1){const{elementaryStreams:s}=this,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,n),o.endDTS=Math.max(o.endDTS,i)):s[e]={startPTS:t,endPTS:r,startDTS:n,endDTS:i,partial:a}}}class X extends W{constructor(e,t,r,n,i){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=n;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function Q(e,t){const r=Object.getPrototypeOf(e);if(r){return Object.getOwnPropertyDescriptor(r,t)||Q(r,t)}}const Z=Math.pow(2,32)-1,J=[].push,ee={video:1,audio:2,id3:3,text:4};function te(e){return String.fromCharCode.apply(null,e)}function re(e,t){const r=e[t]<<8|e[t+1];return r<0?65536+r:r}function ne(e,t){const r=ae(e,t);return r<0?4294967296+r:r}function ie(e,t){let r=ne(e,t);return r*=Math.pow(2,32),r+=ne(e,t+4),r}function ae(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function se(e,t){const r=[];if(!t.length)return r;const n=e.byteLength;for(let i=0;i<n;){const a=ne(e,i),s=a>1?i+a:n;if(te(e.subarray(i+4,i+8))===t[0])if(1===t.length)r.push(e.subarray(i+8,s));else{const n=se(e.subarray(i+8,s),t.slice(1));n.length&&J.apply(r,n)}i=s}return r}function oe(e){const t=[],r=e[0];let n=8;const i=ne(e,n);n+=4;let a=0,s=0;0===r?(a=ne(e,n),s=ne(e,n+4),n+=8):(a=ie(e,n),s=ie(e,n+8),n+=16),n+=2;let o=e.length+s;const l=re(e,n);n+=2;for(let r=0;r<l;r++){let r=n;const a=ne(e,r);r+=4;const s=2147483647&a;if(1==(2147483648&a)>>>31)return P.warn("SIDX has hierarchical references (not supported)"),null;const l=ne(e,r);r+=4,t.push({referenceSize:s,subsegmentDuration:l,info:{duration:l/i,start:o,end:o+s-1}}),o+=s,r+=4,n=r}return{earliestPresentationTime:a,timescale:i,version:r,referencesCount:l,references:t}}function le(e){const t=[],r=se(e,["moov","trak"]);for(let e=0;e<r.length;e++){const n=r[e],i=se(n,["tkhd"])[0];if(i){let e=i[0];const r=ne(i,0===e?12:20),a=se(n,["mdia","mdhd"])[0];if(a){e=a[0];const i=ne(a,0===e?12:20),s=se(n,["mdia","hdlr"])[0];if(s){const e=te(s.subarray(8,12)),a={soun:H,vide:K}[e],o=ue(se(n,["mdia","minf","stbl","stsd"])[0]);a?(t[r]={timescale:i,type:a,stsd:o},t[a]=S({timescale:i,id:r},o)):t[r]={timescale:i,type:e,stsd:o}}}}}return se(e,["moov","mvex","trex"]).forEach(e=>{const r=ne(e,4),n=t[r];n&&(n.default={duration:ne(e,12),flags:ne(e,20)})}),t}function ue(e){const t=e.subarray(8),r=t.subarray(86),n=te(t.subarray(4,8));let i,a=n;const s="enca"===n||"encv"===n;if(s){const e=se(t,[n])[0];se(e.subarray("enca"===n?28:78),["sinf"]).forEach(e=>{const t=se(e,["schm"])[0];if(t){const r=te(t.subarray(4,8));if("cbcs"===r||"cenc"===r){const t=se(e,["frma"])[0];t&&(a=te(t))}}})}const o=a;switch(a){case"avc1":case"avc2":case"avc3":case"avc4":{const e=se(r,["avcC"])[0];e&&e.length>3&&(a+="."+he(e[1])+he(e[2])+he(e[3]),i=ce("avc1"===o?"dva1":"dvav",r));break}case"mp4a":{const e=se(t,[n])[0],r=se(e.subarray(28),["esds"])[0];if(r&&r.length>7){let e=4;if(3!==r[e++])break;e=de(r,e),e+=2;const t=r[e++];if(128&t&&(e+=2),64&t&&(e+=r[e++]),4!==r[e++])break;e=de(r,e);const n=r[e++];if(64!==n)break;if(a+="."+he(n),e+=12,5!==r[e++])break;e=de(r,e);const i=r[e++];let s=(248&i)>>3;31===s&&(s+=1+((7&i)<<3)+((224&r[e])>>5)),a+="."+s}break}case"hvc1":case"hev1":{const e=se(r,["hvcC"])[0];if(e&&e.length>12){const t=e[1],r=["","A","B","C"][t>>6],n=31&t,i=ne(e,2),s=(32&t)>>5?"H":"L",o=e[12],l=e.subarray(6,12);a+="."+r+n,a+="."+function(e){let t=0;for(let r=0;r<32;r++)t|=(e>>r&1)<<31-r;return t>>>0}(i).toString(16).toUpperCase(),a+="."+s+o;let u="";for(let e=l.length;e--;){const t=l[e];(t||u)&&(u="."+t.toString(16).toUpperCase()+u)}a+=u}i=ce("hev1"==o?"dvhe":"dvh1",r);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":a=ce(a,r)||a;break;case"vp09":{const e=se(r,["vpcC"])[0];if(e&&e.length>6){const t=e[4],r=e[5],n=e[6]>>4&15;a+="."+fe(t)+"."+fe(r)+"."+fe(n)}break}case"av01":{const e=se(r,["av1C"])[0];if(e&&e.length>2){const t=e[1]>>>5,n=31&e[1],s=e[2]>>>7?"H":"M",o=(64&e[2])>>6,l=(32&e[2])>>5,u=2===t&&o?l?12:10:o?10:8,c=(16&e[2])>>4,d=(8&e[2])>>3,h=(4&e[2])>>2,f=3&e[2],p=1,g=1,m=1,y=0;a+="."+t+"."+fe(n)+s+"."+fe(u)+"."+c+"."+d+h+f+"."+fe(p)+"."+fe(g)+"."+fe(m)+"."+y,i=ce("dav1",r)}break}}return{codec:a,encrypted:s,supplemental:i}}function ce(e,t){const r=se(t,["dvvC"]),n=r.length?r[0]:se(t,["dvcC"])[0];if(n){const t=n[2]>>1&127,r=n[2]<<5&32|n[3]>>3&31;return e+"."+fe(t)+"."+fe(r)}}function de(e,t){const r=t+5;for(;128&e[t++]&&t<r;);return t}function he(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function fe(e){return(e<10?"0":"")+e}function pe(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function ge(e,t){const r=[],n=t.samples,i=t.timescale,a=t.id;let s=!1;return se(n,["moof"]).map(o=>{const l=o.byteOffset-8;se(o,["traf"]).map(o=>{const u=se(o,["tfdt"]).map(e=>{const t=e[0];let r=ne(e,4);return 1===t&&(r*=Math.pow(2,32),r+=ne(e,8)),r/i})[0];return void 0!==u&&(e=u),se(o,["tfhd"]).map(u=>{const c=ne(u,4),d=16777215&ne(u,0);let h=0;const f=!!(16&d);let p=0;const g=!!(32&d);let m=8;c===a&&(!!(1&d)&&(m+=8),!!(2&d)&&(m+=4),!!(8&d)&&(h=ne(u,m),m+=4),f&&(p=ne(u,m),m+=4),g&&(m+=4),"video"===t.type&&(s=me(t.codec)),se(o,["trun"]).map(a=>{const o=a[0],u=16777215&ne(a,0),c=!!(1&u);let d=0;const f=!!(4&u),g=!!(256&u);let m=0;const y=!!(512&u);let v=0;const b=!!(1024&u),E=!!(2048&u);let S=0;const T=ne(a,4);let w=8;c&&(d=ne(a,w),w+=4),f&&(w+=4);let A=d+l;for(let l=0;l<T;l++){if(g?(m=ne(a,w),w+=4):m=h,y?(v=ne(a,w),w+=4):v=p,b&&(w+=4),E&&(S=0===o?ne(a,w):ae(a,w),w+=4),t.type===K){let t=0;for(;t<v;){const a=ne(n,A);A+=4,ye(s,n[A])&&ve(n.subarray(A,A+a),s?2:1,e+S/i,r),A+=a,t+=a+4}}e+=m/i}}))})})}),r}function me(e){if(!e)return!1;const t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function ye(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6==(31&t)}function ve(e,t,r,n){const i=be(e);let a=0;a+=t;let s=0,o=0,l=0;for(;a<i.length;){s=0;do{if(a>=i.length)break;l=i[a++],s+=l}while(255===l);o=0;do{if(a>=i.length)break;l=i[a++],o+=l}while(255===l);const e=i.length-a;let t=a;if(o<e)a+=o;else if(o>e){P.error(`Malformed SEI payload. ${o} is too small, only ${e} bytes left to parse.`);break}if(4===s){if(181===i[t++]){const e=re(i,t);if(t+=2,49===e){const e=ne(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const a=i[t++],o=64&a,l=o?2+3*(31&a):0,u=new Uint8Array(l);if(o){u[0]=a;for(let e=1;e<l;e++)u[e]=i[t++]}n.push({type:e,payloadType:s,pts:r,bytes:u})}}}}}else if(5===s&&o>16){const e=[];for(let r=0;r<16;r++){const n=i[t++].toString(16);e.push(1==n.length?"0"+n:n),3!==r&&5!==r&&7!==r&&9!==r||e.push("-")}const a=o-16,l=new Uint8Array(a);for(let e=0;e<a;e++)l[e]=i[t++];n.push({payloadType:s,pts:r,uuid:e.join(""),userData:O(l),userDataBytes:l})}}}function be(e){const t=e.byteLength,r=[];let n=1;for(;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(r.push(n+2),n+=2):n++;if(0===r.length)return e;const i=t-r.length,a=new Uint8Array(i);let s=0;for(n=0;n<i;s++,n++)s===r[0]&&(s++,r.shift()),a[n]=e[s];return a}const Ee=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Se={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Te(e,t){const r=Se[t];return!!r&&!!r[e.slice(0,4)]}function we(e,t,r=!0){return!e.split(",").some(e=>!Ae(e,t,r))}function Ae(e,t,r=!0){var n;const i=R(r);return null!=(n=null==i?void 0:i.isTypeSupported(ke(e,t)))&&n}function ke(e,t){return`${t}/mp4;codecs=${e}`}function xe(e){if(e){const t=e.substring(0,4);return Se.video[t]}return 2}function Le(e){const t=Ee();return e.split(",").reduce((e,r)=>{const n=t&&me(r)?9:Se.video[r];return n?(2*n+e)/(e?3:2):(Se.audio[r]+e)/(e?2:1)},0)}const Pe={},Re=/flac|opus|mp4a\.40\.34/i;function _e(e,t=!0){return e.replace(Re,e=>function(e,t=!0){if(Pe[e])return Pe[e];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let i=0;i<r.length;i++){var n;if(Ae(r[i],"audio",t))return Pe[e]=r[i],r[i];if("mp3"===r[i]&&null!=(n=R(t))&&n.isTypeSupported("audio/mpeg"))return""}return e}(e.toLowerCase(),t))}function Oe(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e))&&(Ie(e,"audio")||Ie(e,"video")))return e;if(t){const r=t.split(",");if(r.length>1){if(e)for(let t=r.length;t--;)if(r[t].substring(0,4)===e.substring(0,4))return r[t];return r[0]}}return t||e}function Ie(e,t){return Te(e,t)&&Ae(e,t)}function Ce(e){if(e.startsWith("av01.")){const t=e.split("."),r=["0","111","01","01","01","0"];for(let e=t.length;e>4&&e<10;e++)t[e]=r[e-4];return t.join(".")}return e}function De(e){const t=R(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Me(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const Ne={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function Fe(e,t){return{supported:!1,configurations:t,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:e}}function Ue(e,t,r,i,a,s){const o=e.videoCodec,l=e.audioCodec?e.audioGroups:null,u=null==s?void 0:s.audioCodec,c=null==s?void 0:s.channels,d=c?parseInt(c):u?1/0:2;let h=null;if(null!=l&&l.length)try{h=1===l.length&&l[0]?t.groups[l[0]].channels:l.reduce((e,r)=>{if(r){const n=t.groups[r];if(!n)throw new Error(`Audio track group ${r} not found`);Object.keys(n.channels).forEach(t=>{e[t]=(e[t]||0)+n.channels[t]})}return e},{2:0})}catch(e){return!0}return void 0!==o&&(o.split(",").some(e=>me(e))||e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(i,30)||"SDR"!==e.videoRange&&e.videoRange!==r||e.bitrate>Math.max(a,8e6))||!!h&&n(d)&&Object.keys(h).some(e=>parseInt(e)>d)}function Be(e,t,r,n={}){const i=e.videoCodec;if(!i&&!e.audioCodec||!r)return Promise.resolve(Ne);const a=[],s=function(e){var t;const r=null==(t=e.videoCodec)?void 0:t.split(","),n=je(e),i=e.width||640,a=e.height||480,s=e.frameRate||30,o=e.videoRange.toLowerCase();return r?r.map(e=>{const t={contentType:ke(Ce(e),"video"),width:i,height:a,bitrate:n,framerate:s};return"sdr"!==o&&(t.transferFunction=o),t}):[]}(e),o=s.length,l=function(e,t,r){var n;const i=null==(n=e.audioCodec)?void 0:n.split(","),a=je(e);return i&&e.audioGroups?e.audioGroups.reduce((e,n)=>{var s;const o=n?null==(s=t.groups[n])?void 0:s.tracks:null;return o?o.reduce((e,t)=>{if(t.groupId===n){const n=parseFloat(t.channels||"");i.forEach(t=>{const i={contentType:ke(t,"audio"),bitrate:r?$e(t,a):a};n&&(i.channels=""+n),e.push(i)})}return e},e):e},[]):[]}(e,t,o>0),u=l.length;for(let e=o||1*u||1;e--;){const t={type:"media-source"};if(o&&(t.video=s[e%o]),u){t.audio=l[e%u];const r=t.audio.bitrate;t.video&&r&&(t.video.bitrate-=r)}a.push(t)}if(i){const e=navigator.userAgent;if(i.split(",").some(e=>me(e))&&Ee())return Promise.resolve(Fe(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${e})`),a))}return Promise.all(a.map(e=>{const t=function(e){let t="";const{audio:r,video:n}=e;return n&&(t+=`${Me(n.contentType)}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`),r&&(t+=`${n?"_":""}${Me(r.contentType)}_c${r.channels}`),t}(e);return n[t]||(n[t]=r.decodingInfo(e))})).then(e=>({supported:!e.some(e=>!e.supported),configurations:a,decodingInfoResults:e})).catch(e=>({supported:!1,configurations:a,decodingInfoResults:[],error:e}))}function $e(e,t){if(t<=1)return 1;let r=128e3;return"ec-3"===e?r=768e3:"ac-3"===e&&(r=64e4),Math.min(t/2,r)}function je(e){return 1e3*Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)/1e3)||1}const ze=["NONE","TYPE-0","TYPE-1",null],Ge=["SDR","PQ","HLG"];function He(e){const{canSkipUntil:t,canSkipDateRanges:r,age:n}=e;return t&&n<t/2?r?"v2":"YES":""}class Ke{constructor(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Ve{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(e=>!!e).map(e=>e.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const r=null==(t=e.supplemental)?void 0:t.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return We(this._audioGroups,e)}hasSubtitleGroup(e){return We(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function We(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}const Ye=(e,t)=>JSON.stringify(e,(e=>{const t=new WeakSet;return(r,n)=>{if(e&&(n=e(r,n)),"object"==typeof n&&null!==n){if(t.has(n))return;t.add(n)}return n}})(t));function qe(e,t){P.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function Xe(e){return e.reduce((e,t)=>{let r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);const n=t.channels||"2";return r.channels[n]=(r.channels[n]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Qe(e){if(!e)return e;const{lang:t,assocLang:r,characteristics:n,channels:i,audioCodec:a}=e;return{lang:t,assocLang:r,characteristics:n,channels:i,audioCodec:a}}function Ze(e,t,r){if("attrs"in e){const r=t.indexOf(e);if(-1!==r)return r}for(let n=0;n<t.length;n++)if(Je(e,t[n],r))return n;return-1}function Je(e,t,r){const{groupId:n,name:i,lang:a,assocLang:s,default:o}=e,l=e.forced;return(void 0===n||t.groupId===n)&&(void 0===i||t.name===i)&&(void 0===a||function(e,t="--"){return e.length===t.length?e===t:e.startsWith(t)||t.startsWith(e)}(a,t.lang))&&(void 0===a||t.assocLang===s)&&(void 0===o||t.default===o)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||function(e,t=""){const r=e.split(","),n=t.split(",");return r.length===n.length&&!r.some(e=>-1===n.indexOf(e))}(e.characteristics||"",t.characteristics))&&(void 0===r||r(e,t))}function et(e,t){const{audioCodec:r,channels:n}=e;return!(void 0!==r&&(t.audioCodec||"").substring(0,4)!==r.substring(0,4)||void 0!==n&&n!==(t.channels||"2"))}function tt(e,t,r){for(let n=t;n>-1;n--)if(r(e[n]))return n;for(let n=t+1;n<e.length;n++)if(r(e[n]))return n;return-1}function rt(e,t){var r;return!!e&&e!==(null==(r=t.loadLevelObj)?void 0:r.uri)}const nt=function(e,t){let r=0,n=e.length-1,i=null,a=null;for(;r<=n;){i=(r+n)/2|0,a=e[i];const s=t(a);if(s>0)r=i+1;else{if(!(s<0))return a;n=i-1}}return null};function it(e,t,r=0,n=0,i=.005){let a=null;if(e){a=t[1+e.sn-t[0].sn]||null;const n=e.endDTS-r;n>0&&n<15e-7&&(r+=15e-7),a&&e.level!==a.level&&a.end<=e.end&&(a=t[2+e.sn-t[0].sn]||null)}else 0===r&&0===t[0].start&&(a=t[0]);if(a&&((!e||e.level===a.level)&&0===at(r,n,a)||function(e,t,r){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const n=t.tagList.reduce((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e),r);return e.start<=n}return!1}(a,e,Math.min(i,n))))return a;const s=nt(t,at.bind(null,r,n));return!s||s===e&&a?a:s}function at(e=0,t=0,r){if(r.start<=e&&r.start+r.duration>e)return 0;const n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function st(e,t,r){const n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>e}function ot(e,t,r){if(e&&e.startCC<=t&&e.endCC>=t){let n=e.fragments;const{fragmentHint:i}=e;let a;return i&&(n=n.concat(i)),nt(n,e=>e.cc<t?1:e.cc>t?-1:(a=e,e.end<=r?1:e.start>r?-1:0)),a||null}return null}function lt(e){switch(e.details){case o.FRAG_LOAD_TIMEOUT:case o.KEY_LOAD_TIMEOUT:case o.LEVEL_LOAD_TIMEOUT:case o.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function ut(e,t){const r=lt(t);return e.default[(r?"timeout":"error")+"Retry"]}function ct(e,t){const r="linear"===e.backoff?1:Math.pow(2,t);return Math.min(r*e.retryDelayMs,e.maxRetryDelayMs)}function dt(e){return S(S({},e),{errorRetry:null,timeoutRetry:null})}function ht(e,t,r,n){if(!e)return!1;const i=null==n?void 0:n.code,a=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(i)||!!r);return e.shouldRetry?e.shouldRetry(e,t,r,n,a):a}function ft(e){const t={action:0,flags:0};return e&&(t.resolved=!0),t}var pt="NOT_LOADED",gt="APPENDING",mt="PARTIAL",yt="OK";class vt{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.BUFFER_APPENDED,this.onBufferAppended,this),e.on(l.FRAG_BUFFERED,this.onFragBuffered,this),e.on(l.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.BUFFER_APPENDED,this.onBufferAppended,this),e.off(l.FRAG_BUFFERED,this.onFragBuffered,this),e.off(l.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const r=this.activePartLists[t];if(r)for(let t=r.length;t--;){const n=r[t];if(!n)break;const i=n.end;if(n.start<=e&&null!==i&&e<=i)return n}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,r){const{fragments:n}=this,i=Object.keys(n);for(let a=i.length;a--;){const s=n[i[a]];if((null==s?void 0:s.body.type)===t&&(!r||s.buffered)){const t=s.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,r,n,i){this.timeRanges&&(this.timeRanges[e]=t);const a=(null==n?void 0:n.fragment.sn)||-1;Object.keys(this.fragments).forEach(n=>{const s=this.fragments[n];if(!s)return;if(a>=s.body.sn)return;if(!s.buffered&&(!s.loaded||i))return void(s.body.type===r&&this.removeFragment(s.body));const o=s.range[e];o&&(0!==o.time.length?o.time.some(e=>{const r=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return r&&this.removeFragment(s.body),r}):this.removeFragment(s.body))})}detectPartialFragments(e){const t=this.timeRanges;if(!t||"initSegment"===e.frag.sn)return;const r=e.frag,n=Et(r),i=this.fragments[n];if(!i||i.buffered&&r.gap)return;const a=!r.relurl;Object.keys(t).forEach(n=>{const s=r.elementaryStreams[n];if(!s)return;const o=t[n],l=a||!0===s.partial;i.range[n]=this.getBufferedTimes(r,e.part,l,o)}),i.loaded=null,Object.keys(i.range).length?(i.buffered=!0,(i.body.endList=r.endList||i.body.endList)&&(this.endListFragments[i.body.type]=i),bt(i)||this.removeParts(r.sn-1,r.type)):this.removeFragment(i.body)}removeParts(e,t){const r=this.activePartLists[t];r&&(this.activePartLists[t]=St(r,t=>t.fragment.sn>=e))}fragBuffered(e,t){const r=Et(e);let n=this.fragments[r];!n&&t&&(n=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),n&&(n.loaded=null,n.buffered=!0)}getBufferedTimes(e,t,r,n){const i={time:[],partial:r},a=e.start,s=e.end,o=e.minEndPTS||s,l=e.maxStartPTS||a;for(let e=0;e<n.length;e++){const t=n.start(e)-this.bufferPadding,r=n.end(e)+this.bufferPadding;if(l>=t&&o<=r){i.time.push({startPTS:Math.max(a,n.start(e)),endPTS:Math.min(s,n.end(e))});break}if(a<r&&s>t){const t=Math.max(a,n.start(e)),r=Math.min(s,n.end(e));r>t&&(i.partial=!0,i.time.push({startPTS:t,endPTS:r}))}else if(s<=t)break}return i}getPartialFragment(e){let t,r,n,i=null,a=0;const{bufferPadding:s,fragments:o}=this;return Object.keys(o).forEach(l=>{const u=o[l];u&&bt(u)&&(r=u.body.start-s,n=u.body.end+s,e>=r&&e<=n&&(t=Math.min(e-r,n-e),a<=t&&(i=u.body,a=t)))}),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||bt(t))}getState(e){const t=Et(e),r=this.fragments[t];return r?r.buffered?bt(r)?mt:yt:gt:pt}isTimeBuffered(e,t,r){let n,i;for(let a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if("initSegment"===t.frag.sn||t.frag.bitrateTest)return;const r=t.frag,n=t.part?null:t,i=Et(r);this.fragments[i]={body:r,appendedPTS:null,loaded:n,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:r,part:n,timeRanges:i,type:a}=t;if("initSegment"===r.sn)return;const s=r.type;if(n){let e=this.activePartLists[s];e||(this.activePartLists[s]=e=[]),e.push(n)}this.timeRanges=i;const o=i[a];this.detectEvictedFragments(a,o,s,n)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Et(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,r=Object.keys(t);if(!e)return r.length>0;for(let n=r.length;n--;){const i=t[r[n]];if((null==i?void 0:i.body.type)===e)return!0}return!1}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,r,n,i){n&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const s=this.fragments[a];if(!s)return;const o=s.body;o.type!==r||n&&!o.gap||o.start<t&&o.end>e&&(s.buffered||i)&&this.removeFragment(o)})}removeFragment(e){const t=Et(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const t=e.sn;this.activePartLists[e.type]=St(r,e=>e.fragment.sn!==t)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=null==(e=this.hls)||null==(t=e.latestLevelDetails)?void 0:t.partList;r&&r.forEach(e=>e.clearElementaryStreamInfo())}}function bt(e){var t,r,n;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(r=e.range.audio)?void 0:r.partial)||(null==(n=e.range.audiovideo)?void 0:n.partial))}function Et(e){return`${e.type}_${e.level}_${e.sn}`}function St(e,t){return e.filter(e=>{const r=t(e);return r||e.clearElementaryStreamInfo(),r})}class Tt{constructor(e,t,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=r}decrypt(e,t){switch(this.aesMode){case 0:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case 1:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}class wt{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),r=new Uint32Array(4);for(let e=0;e<4;e++)r[e]=t.getUint32(4*e);return r}initTable(){const e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],h=new Uint32Array(256);let f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){let r=p^p<<1^p<<2^p<<3^p<<4;r=r>>>8^255&r^99,e[f]=r,t[r]=f;const o=h[f],g=h[o],m=h[g];let y=257*h[r]^16843008*r;n[f]=y<<24|y>>>8,i[f]=y<<16|y>>>16,a[f]=y<<8|y>>>24,s[f]=y,y=16843009*m^65537*g^257*o^16843008*f,l[r]=y<<24|y>>>8,u[r]=y<<16|y>>>16,c[r]=y<<8|y>>>24,d[r]=y,f?(f=o^h[h[h[m^o]]],p^=h[h[p]]):f=p=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let r=!0,n=0;for(;n<t.length&&r;)r=t[n]===this.key[n],n++;if(r)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const a=this.ksRows=4*(i+6+1);let s,o;const l=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),c=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],g=h[2],m=h[3];let y,v;for(s=0;s<a;s++)s<i?y=l[s]=t[s]:(v=y,s%i===0?(v=v<<8|v>>>24,v=c[v>>>24]<<24|c[v>>>16&255]<<16|c[v>>>8&255]<<8|c[255&v],v^=d[s/i|0]<<24):i>6&&s%i===4&&(v=c[v>>>24]<<24|c[v>>>16&255]<<16|c[v>>>8&255]<<8|c[255&v]),l[s]=y=(l[s-i]^v)>>>0);for(o=0;o<a;o++)s=a-o,v=3&o?l[s]:l[s-4],u[o]=o<4||s<=4?v:f[c[v>>>24]]^p[c[v>>>16&255]]^g[c[v>>>8&255]]^m[c[255&v]],u[o]=u[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,r){const n=this.keySize+6,i=this.invKeySchedule,a=this.invSBox,s=this.invSubMix,o=s[0],l=s[1],u=s[2],c=s[3],d=this.uint8ArrayToUint32Array_(r);let h=d[0],f=d[1],p=d[2],g=d[3];const m=new Int32Array(e),y=new Int32Array(m.length);let v,b,E,S,T,w,A,k,x,L,P,R,_,O;const I=this.networkToHostOrderSwap;for(;t<m.length;){for(x=I(m[t]),L=I(m[t+1]),P=I(m[t+2]),R=I(m[t+3]),T=x^i[0],w=R^i[1],A=P^i[2],k=L^i[3],_=4,O=1;O<n;O++)v=o[T>>>24]^l[w>>16&255]^u[A>>8&255]^c[255&k]^i[_],b=o[w>>>24]^l[A>>16&255]^u[k>>8&255]^c[255&T]^i[_+1],E=o[A>>>24]^l[k>>16&255]^u[T>>8&255]^c[255&w]^i[_+2],S=o[k>>>24]^l[T>>16&255]^u[w>>8&255]^c[255&A]^i[_+3],T=v,w=b,A=E,k=S,_+=4;v=a[T>>>24]<<24^a[w>>16&255]<<16^a[A>>8&255]<<8^a[255&k]^i[_],b=a[w>>>24]<<24^a[A>>16&255]<<16^a[k>>8&255]<<8^a[255&T]^i[_+1],E=a[A>>>24]<<24^a[k>>16&255]<<16^a[T>>8&255]<<8^a[255&w]^i[_+2],S=a[k>>>24]<<24^a[T>>16&255]<<16^a[w>>8&255]<<8^a[255&A]^i[_+3],y[t]=I(v^h),y[t+1]=I(S^f),y[t+2]=I(E^p),y[t+3]=I(b^g),h=x,f=L,p=P,g=R,t+=4}return y.buffer}}class At{constructor(e,t,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=r}expandKey(){const e=function(e){switch(e){case 0:return"AES-CBC";case 1:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${e}`)}}(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}class kt{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(e){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,r=t&&new DataView(e.buffer).getUint8(t-1);return r?e.slice(0,t-r):e}(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,r,n){return this.useSoftware?new Promise((i,a)=>{const s=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(s,t,r,n);const o=this.flush();o?i(o.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r,n)}softwareDecrypt(e,t,r,n){const{currentIV:i,currentResult:a,remainderData:s}=this;if(0!==n||16!==t.byteLength)return P.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),s&&(e=pe(s,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(r=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new wt),l.expandKey(t);const u=a;return this.currentResult=l.decrypt(o.buffer,0,r),this.currentIV=o.slice(-16).buffer,u||null}webCryptoDecrypt(e,t,r,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r,n));this.key=t,this.fastAesKey=new At(this.subtle,t,n)}return this.fastAesKey.expandKey().then(t=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Tt(this.subtle,new Uint8Array(r),n).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(P.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,r,n)))}onWebCryptoError(e,t,r,n){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r,n);const i=this.flush();if(i)return i.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const r=e.length-e.length%16;return r!==e.length&&(t=e.slice(0,r),this.remainderData=e.slice(r)),t}logOnce(e){this.logEnabled&&(P.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const xt=Math.pow(2,17);class Lt{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const r=e.url;if(!r)return Promise.reject(new _t({type:s.NETWORK_ERROR,details:o.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(r?"part list":"url")),networkDetails:null}));this.abort();const n=this.config,i=n.fLoader,a=n.loader;return new Promise((l,u)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some(e=>"GAP"===e[0]))return void u(Rt(e));e.gap=!1}const c=this.loader=i?new i(n):new a(n),d=Pt(e);e.loader=c;const h=dt(n.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:xt};e.stats=c.stats;const p={onSuccess:(t,r,n,i)=>{this.resetLoader(e,c);let a=t.data;n.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(a.slice(0,16)),a=a.slice(16)),l({frag:e,part:null,payload:a,networkDetails:i})},onError:(t,n,i,a)=>{this.resetLoader(e,c),u(new _t({type:s.NETWORK_ERROR,details:o.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:S({url:r,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:i,stats:a}))},onAbort:(t,r,n)=>{this.resetLoader(e,c),u(new _t({type:s.NETWORK_ERROR,details:o.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:n,stats:t}))},onTimeout:(t,r,n)=>{this.resetLoader(e,c),u(new _t({type:s.NETWORK_ERROR,details:o.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:n,stats:t}))}};t&&(p.onProgress=(r,n,i,a)=>t({frag:e,part:null,payload:i,networkDetails:a})),c.load(d,f,p)})}loadPart(e,t,r){this.abort();const n=this.config,i=n.fLoader,a=n.loader;return new Promise((l,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void u(Rt(e,t));const c=this.loader=i?new i(n):new a(n),d=Pt(e,t);e.loader=c;const h=dt(n.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:xt};t.stats=c.stats,c.load(d,f,{onSuccess:(n,i,a,s)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const o={frag:e,part:t,payload:n.data,networkDetails:s};r(o),l(o)},onError:(r,n,i,a)=>{this.resetLoader(e,c),u(new _t({type:s.NETWORK_ERROR,details:o.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:S({url:d.url,data:void 0},r),error:new Error(`HTTP Error ${r.code} ${r.text}`),networkDetails:i,stats:a}))},onAbort:(r,n,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),u(new _t({type:s.NETWORK_ERROR,details:o.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:r}))},onTimeout:(r,n,i)=>{this.resetLoader(e,c),u(new _t({type:s.NETWORK_ERROR,details:o.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:i,stats:r}))}})})}updateStatsFromPart(e,t){const r=e.stats,n=t.stats,i=n.total;if(r.loaded+=n.loaded,i){const n=Math.round(e.duration/t.duration),a=Math.min(Math.round(r.loaded/i),n),s=(n-a)*Math.round(r.loaded/a);r.total=r.loaded+s}else r.total=Math.max(r.loaded,r.total);const a=r.loading,s=n.loading;a.start?a.first+=s.first-s.start:(a.start=s.start,a.first=s.first),a.end=s.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Pt(e,t=null){const r=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},a=r.byteRangeStartOffset,s=r.byteRangeEndOffset;if(n(a)&&n(s)){var o;let t=a,r=s;if("initSegment"===e.sn&&("AES-128"===(l=null==(o=e.decryptdata)?void 0:o.method)||"AES-256"===l)){const e=s-a;e%16&&(r=s+(16-e%16)),0!==a&&(i.resetIV=!0,t=a-16)}i.rangeStart=t,i.rangeEnd=r}var l;return i}function Rt(e,t){const r=new Error(`GAP ${e.gap?"tag":"attribute"} found`),n={type:s.MEDIA_ERROR,details:o.FRAG_GAP,fatal:!1,frag:e,error:r,networkDetails:null};return t&&(n.part=t),(t||e).stats.aborted=!0,new _t(n)}class _t extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Ot extends T{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class It{constructor(e,t,r,n=0,i=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=r,this.size=n,this.part=i,this.partial=a}}const Ct={length:0,start:()=>0,end:()=>0};class Dt{static isBuffered(e,t){if(e){const r=Dt.getBuffered(e);for(let e=r.length;e--;)if(t>=r.start(e)&&t<=r.end(e))return!0}return!1}static bufferedRanges(e){if(e){const t=Dt.getBuffered(e);return Dt.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}static bufferInfo(e,t,r){if(e){const n=Dt.bufferedRanges(e);if(n.length)return Dt.bufferedInfo(n,t,r)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,r){t=Math.max(0,t),e.length>1&&e.sort((e,t)=>e.start-t.start||t.end-e.end);let n=-1,i=[];if(r)for(let a=0;a<e.length;a++){t>=e[a].start&&t<=e[a].end&&(n=a);const s=i.length;if(s){const t=i[s-1].end;e[a].start-t<r?e[a].end>t&&(i[s-1].end=e[a].end):i.push(e[a])}else i.push(e[a])}else i=e;let a,s=0,o=t,l=t;for(let e=0;e<i.length;e++){const u=i[e].start,c=i[e].end;if(-1===n&&t>=u&&t<=c&&(n=e),t+r>=u&&t<c)o=u,l=c,s=l-t;else if(t+r<u){a=u;break}}return{len:s,start:o||0,end:l||0,nextStart:a,buffered:e,bufferedIndex:n}}static getBuffered(e){try{return e.buffered||Ct}catch(e){return P.log("failed to get media.buffered",e),Ct}}}const Mt=/\{\$([a-zA-Z0-9-_]+)\}/g;function Nt(e){return Mt.test(e)}function Ft(e,t){if(null!==e.variableList||e.hasVariableRefs){const r=e.variableList;return t.replace(Mt,t=>{const n=t.substring(2,t.length-1),i=null==r?void 0:r[n];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${n}"`)),t):i})}return t}function Ut(e,t,r){let n,i,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){n=t.QUERYPARAM;try{const e=new self.URL(r).searchParams;if(!e.has(n))throw new Error(`"${n}" does not match any query parameter in URI: "${r}"`);i=e.get(n)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${t.message}`))}}else n=t.NAME,i=t.VALUE;n in a?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${n}"`)):a[n]=i||""}function Bt(e,t,r){const n=t.IMPORT;if(r&&n in r){let t=e.variableList;t||(e.variableList=t={}),t[n]=r[n]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const $t=/^(\d+)x(\d+)$/,jt=/(.+?)=(".*?"|.*?)(?:,|$)/g;class zt{constructor(e,t){"string"==typeof e&&(e=zt.parseAttrList(e,t)),b(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>"X-"===e.substring(0,2))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const r=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)r[e]=parseInt(t.slice(2*e,2*e+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const r=this[e];return r?parseFloat(r):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((e,t)=>(e[t.toLowerCase()]=!0,e),t)}bool(e){return"YES"===this[e]}decimalResolution(e){const t=$t.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let r;const n={};for(jt.lastIndex=0;null!==(r=jt.exec(e));){const i=r[1].trim();let a=r[2];const s=0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1;let o=!1;if(s)a=a.slice(1,-1);else switch(i){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":o=!0}if(t&&(s||o))a=Ft(t,a);else if(!o&&!s)switch(i){case"CLOSED-CAPTIONS":if("NONE"===a)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":P.warn(`${e}: attribute ${i} is missing quotes`)}n[i]=a}return n}}function Gt(e){return"ID"!==e&&"CLASS"!==e&&"CUE"!==e&&"START-DATE"!==e&&"DURATION"!==e&&"END-DATE"!==e&&"END-ON-NEXT"!==e}function Ht(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}class Kt{constructor(e,t,r=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(i=null==t?void 0:t.tagOrder)?i:r,t){const r=t.attr;for(const t in r)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==r[t]){P.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=b(new zt({}),r,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);n(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return null===e||null===e.programDateTime?(P.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(n(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return"com.apple.hls.interstitial"===this.class}get isValid(){return!!this.id&&!this._badValueForSameId&&n(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}class Vt{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1}get hasProgramDateTime(){return!!this.fragments.length&&n(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(-1!==t){for(let r=e.length;r--;)if(e[r].index>t)return e[r].index;return t}}return 0}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Wt(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function Yt(e){switch(e){case"AES-128":case"AES-256":return 0;case"AES-256-CTR":return 1;default:throw new Error(`invalid full segment method ${e}`)}}function qt(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function Xt(e){return Uint8Array.from(unescape(encodeURIComponent(e)),e=>e.charCodeAt(0))}const Qt="undefined"!=typeof self?self:void 0;var Zt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Jt="org.w3.clearkey",er="com.apple.streamingkeydelivery",tr="com.microsoft.playready",rr="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function nr(e){switch(e){case er:return Zt.FAIRPLAY;case tr:return Zt.PLAYREADY;case rr:return Zt.WIDEVINE;case Jt:return Zt.CLEARKEY}}function ir(e){switch(e){case Zt.FAIRPLAY:return er;case Zt.PLAYREADY:return tr;case Zt.WIDEVINE:return rr;case Zt.CLEARKEY:return Jt}}function ar(e){const{drmSystems:t,widevineLicenseUrl:r}=e,n=t?[Zt.FAIRPLAY,Zt.WIDEVINE,Zt.PLAYREADY,Zt.CLEARKEY].filter(e=>!!t[e]):[];return!n[Zt.WIDEVINE]&&r&&n.push(Zt.WIDEVINE),n}const sr=null!=Qt&&null!=(or=Qt.navigator)&&or.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var or;let lr={};class ur{static clearKeyUriToKeyIdMap(){lr={}}constructor(e,t,r,n=[1],i=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=n,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!Wt(e),null!=a&&a.startsWith("0x")&&(this.keyId=new Uint8Array(C(a)))}matches(e){var t,r;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&(null==(t=e.iv)?void 0:t.join(","))===(null==(r=this.iv)?void 0:r.join(","))}isSupported(){if(this.method){if(Wt(this.method)||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case er:case rr:case tr:case Jt:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(Wt(this.method)&&this.uri&&!this.iv){"number"!=typeof e&&(P.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=function(e){const t=new Uint8Array(16);for(let r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}(e);return new ur(this.method,this.uri,"identity",this.keyFormatVersions,t)}if(this.pssh&&this.keyId)return this;const t=function(e){const t=e.split(":");let r=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),n=e[e.length-1].split(",");if(2===n.length){const t="base64"===n[0],i=n[1];t?(e.splice(-1,1),r=qt(i)):r=function(e){const t=Xt(e).subarray(0,16),r=new Uint8Array(16);return r.set(t,16-t.length),r}(i)}}return r}(this.uri);if(t)switch(this.keyFormat){case rr:if(this.pssh=t,!this.keyId&&t.length>=22){const e=t.length-22;this.keyId=t.subarray(e,e+16)}break;case tr:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function(e,t,r){if(16!==e.byteLength)throw new RangeError("Invalid system id");let n,i,a;n=0,i=new Uint8Array,a=new Uint8Array;const s=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(s.buffer).setUint32(0,r.byteLength,!1),function(e,...t){const r=t.length;let n=8,i=r;for(;i--;)n+=t[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=255&n,a.set(e,4),i=0,n=8;i<r;i++)a.set(t[i],n),n+=t[i].byteLength;return a}([112,115,115,104],new Uint8Array([0,0,0,0]),e,a,i,s,r||new Uint8Array)}(e,0,t),this.keyId=function(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),r=String.fromCharCode.apply(null,Array.from(t)),n=r.substring(r.indexOf("<"),r.length),i=(new DOMParser).parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=qt(e).subarray(0,16);return function(e){const t=function(e,t,r){const n=e[t];e[t]=e[r],e[r]=n};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),t}}return null}(t);break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=lr[this.uri];if(!e){const t=Object.keys(lr).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16),new DataView(e.buffer,12,4).setUint32(0,t),lr[this.uri]=e}this.keyId=e}return this}}const cr=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,dr=/#EXT-X-MEDIA:(.*)/g,hr=/^#EXT(?:INF|-X-TARGETDURATION):/m,fr=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),pr=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class gr{static findGroup(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(n.id===t)return n}}static resolve(e,t){return z.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return hr.test(e)}static parseMasterPlaylist(e,t){const r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Nt(e)},n=[];let i;for(cr.lastIndex=0;null!=(i=cr.exec(e));)if(i[1]){var a;const e=new zt(i[1],r),s=Ft(r,i[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:gr.resolve(s,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),Er(e.CODECS,o);const u=e["SUPPLEMENTAL-CODECS"];u&&(o.supplemental={},Er(u,o.supplemental)),null!=(a=o.unknownCodecs)&&a.length||n.push(o),r.levels.push(o)}else if(i[3]){const e=i[3],n=i[4];switch(e){case"SESSION-DATA":{const e=new zt(n,r),t=e["DATA-ID"];t&&(null===r.sessionData&&(r.sessionData={}),r.sessionData[t]=e);break}case"SESSION-KEY":{const e=vr(n,t,r);e.encrypted&&e.isSupported()?(null===r.sessionKeys&&(r.sessionKeys=[]),r.sessionKeys.push(e)):P.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${n}"`);break}case"DEFINE":Ut(r,new zt(n,r),t);break;case"CONTENT-STEERING":{const e=new zt(n,r);r.contentSteering={uri:gr.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":r.startTimeOffset=br(n)}}const s=n.length>0&&n.length<r.levels.length;return r.levels=s?n:r.levels,0===r.levels.length&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,r){let n;const i={},a=r.levels,s={AUDIO:a.map(e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec})),SUBTITLES:a.map(e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec})),"CLOSED-CAPTIONS":[]};let o=0;for(dr.lastIndex=0;null!==(n=dr.exec(e));){const e=new zt(n[1],r),a=e.TYPE;if(a){const r=s[a],n=i[a]||[];i[a]=n;const l=e.LANGUAGE,u=e["ASSOC-LANGUAGE"],c=e.CHANNELS,d=e.CHARACTERISTICS,h=e["INSTREAM-ID"],f={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||l||"",type:a,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:l,url:e.URI?gr.resolve(e.URI,t):""};if(u&&(f.assocLang=u),c&&(f.channels=c),d&&(f.characteristics=d),h&&(f.instreamId=h),null!=r&&r.length){const e=gr.findGroup(r,f.groupId)||r[0];Sr(f,e,"audioCodec"),Sr(f,e,"textCodec")}n.push(f)}}return i}static parseLevelPlaylist(e,t,r,i,a,s){var o;const l={url:t},u=new Vt(t),c=u.fragments,d=[];let h,f,p,g,m=null,y=0,v=0,E=0,S=0,T=0,w=null,A=new q(i,l),k=-1,x=!1,L=null;if(fr.lastIndex=0,u.m3u8=e,u.hasVariableRefs=Nt(e),"#EXTM3U"!==(null==(o=fr.exec(e))?void 0:o[0]))return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;null!==(h=fr.exec(e));){x&&(x=!1,A=new q(i,l),A.playlistOffset=E,A.start=E,A.sn=y,A.cc=S,T&&(A.bitrate=T),A.level=r,m&&(A.initSegment=m,m.rawProgramDateTime&&(A.rawProgramDateTime=m.rawProgramDateTime,m.rawProgramDateTime=null),L&&(A.setByteRange(L),L=null)));const e=h[1];if(e){A.duration=parseFloat(e);const t=(" "+h[2]).slice(1);A.title=t||null,A.tagList.push(t?["INF",e,t]:["INF",e])}else if(h[3]){if(n(A.duration)){A.playlistOffset=E,A.start=E,p&&Ar(A,p,u),A.sn=y,A.level=r,A.cc=S,c.push(A);const e=(" "+h[3]).slice(1);A.relurl=Ft(u,e),Tr(A,w,d),w=A,E+=A.duration,y++,v=0,x=!0}}else{if(h=h[0].match(pr),!h){P.warn("No matches on slow regex match for level playlist!");continue}for(f=1;f<h.length&&void 0===h[f];f++);const e=(" "+h[f]).slice(1),a=(" "+h[f+1]).slice(1),o=h[f+2]?(" "+h[f+2]).slice(1):null;switch(e){case"BYTERANGE":w?A.setByteRange(a,w):A.setByteRange(a);break;case"PROGRAM-DATE-TIME":A.rawProgramDateTime=a,A.tagList.push(["PROGRAM-DATE-TIME",a]),-1===k&&(k=c.length);break;case"PLAYLIST-TYPE":u.type&&kr(u,e,h),u.type=a.toUpperCase();break;case"MEDIA-SEQUENCE":0!==u.startSN?kr(u,e,h):c.length>0&&xr(u,e,h),y=u.startSN=parseInt(a);break;case"SKIP":{u.skippedSegments&&kr(u,e,h);const t=new zt(a,u),r=t.decimalInteger("SKIPPED-SEGMENTS");if(n(r)){u.skippedSegments+=r;for(let e=r;e--;)c.push(null);y+=r}const i=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");i&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(i.split("\t")));break}case"TARGETDURATION":0!==u.targetduration&&kr(u,e,h),u.targetduration=Math.max(parseInt(a),1);break;case"VERSION":null!==u.version&&kr(u,e,h),u.version=parseInt(a);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||kr(u,e,h),u.live=!1;break;case"#":(a||o)&&A.tagList.push(o?[a,o]:[a]);break;case"DISCONTINUITY":S++,A.tagList.push(["DIS"]);break;case"GAP":A.gap=!0,A.tagList.push([e]);break;case"BITRATE":A.tagList.push([e,a]),T=1e3*parseInt(a),n(T)?A.bitrate=T:T=0;break;case"DATERANGE":{const e=new zt(a,u),t=new Kt(e,u.dateRanges[e.ID],u.dateRangeTagCount);u.dateRangeTagCount++,t.isValid||u.skippedSegments?u.dateRanges[t.id]=t:P.warn(`Ignoring invalid DATERANGE tag: "${a}"`),A.tagList.push(["EXT-X-DATERANGE",a]);break}case"DEFINE":{const e=new zt(a,u);"IMPORT"in e?Bt(u,e,s):Ut(u,e,t)}break;case"DISCONTINUITY-SEQUENCE":0!==u.startCC?kr(u,e,h):c.length>0&&xr(u,e,h),u.startCC=S=parseInt(a);break;case"KEY":{const e=vr(a,t,u);if(e.isSupported()){if("NONE"===e.method){p=void 0;break}p||(p={});const t=p[e.keyFormat];null!=t&&t.matches(e)||(t&&(p=b({},p)),p[e.keyFormat]=e)}else P.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${a}"`);break}case"START":u.startTimeOffset=br(a);break;case"MAP":{const e=new zt(a,u);if(A.duration){const t=new q(i,l);wr(t,e,r,p),m=t,A.initSegment=m,m.rawProgramDateTime&&!A.rawProgramDateTime&&(A.rawProgramDateTime=m.rawProgramDateTime)}else{const t=A.byteRangeEndOffset;if(t){const e=A.byteRangeStartOffset;L=`${t-e}@${e}`}else L=null;wr(A,e,r,p),m=A,x=!0}m.cc=S;break}case"SERVER-CONTROL":g&&kr(u,e,h),g=new zt(a),u.canBlockReload=g.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=g.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&g.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=g.optionalFloat("PART-HOLD-BACK",0),u.holdBack=g.optionalFloat("HOLD-BACK",0);break;case"PART-INF":{u.partTarget&&kr(u,e,h);const t=new zt(a);u.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=u.partList;e||(e=u.partList=[]);const t=v>0?e[e.length-1]:void 0,r=v++,n=new zt(a,u),i=new X(n,A,l,r,t);e.push(i),A.duration+=i.duration;break}case"PRELOAD-HINT":{const e=new zt(a,u);u.preloadHint=e;break}case"RENDITION-REPORT":{const e=new zt(a,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(e);break}default:P.warn(`line parsed but not handled: ${h}`)}}}w&&!w.relurl?(c.pop(),E-=w.duration,u.partList&&(u.fragmentHint=w)):u.partList&&(Tr(A,w,d),A.cc=S,u.fragmentHint=A,p&&Ar(A,p,u)),u.targetduration||(u.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const R=c.length,_=c[0],O=c[R-1];if(E+=u.skippedSegments*u.targetduration,E>0&&R&&O){u.averagetargetduration=E/R;const e=O.sn;u.endSN="initSegment"!==e?e:0,u.live||(O.endList=!0),_&&void 0===u.startCC&&(u.startCC=_.cc),k>0&&(function(e,t){let r=e[t];for(let n=t;n--;){const t=e[n];if(!t)return;t.programDateTime=r.programDateTime-1e3*t.duration,r=t}}(c,k),_&&d.unshift(_))}else u.endSN=0,u.startCC=0;return u.fragmentHint&&(E+=u.fragmentHint.duration),u.totalduration=E,d.length&&u.dateRangeTagCount&&_&&mr(d,u),u.endCC=S,u}}function mr(e,t){const r=e.length;if(!r)return;const n=e[r-1],i=t.live?1/0:t.totalduration,a=Object.keys(t.dateRanges);for(let s=a.length;s--;){const o=t.dateRanges[a[s]],l=o.startDate.getTime();o.tagAnchor=n.ref;for(let n=r;n--;){const r=yr(t,l,e,n,i);if(-1!==r){o.tagAnchor=t.fragments[r].ref;break}}}}function yr(e,t,r,n,i){const a=r[n];if(a){const o=a.programDateTime;var s;if(t>=o||0===n)if(t<=o+1e3*(((null==(s=r[n+1])?void 0:s.start)||i)-a.start)){const i=r[n].sn-e.startSN,a=e.fragments;if(a.length>r.length)for(let s=(r[n+1]||a[a.length-1]).sn-e.startSN;s>i;s--){const e=a[s].programDateTime;if(t>=e&&t<e+1e3*a[s].duration)return s}return i}}return-1}function vr(e,t,r){var n,i;const a=new zt(e,r),s=null!=(n=a.METHOD)?n:"",o=a.URI,l=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,c=null!=(i=a.KEYFORMAT)?i:"identity";o&&a.IV&&!l&&P.error(`Invalid IV: ${a.IV}`);const d=o?gr.resolve(o,t):"",h=(u||"1").split("/").map(Number).filter(Number.isFinite);return new ur(s,d,c,h,l,a.KEYID)}function br(e){const t=new zt(e).decimalFloatingPoint("TIME-OFFSET");return n(t)?t:null}function Er(e,t){let r=(e||"").split(/[ ,]+/).filter(e=>e);["video","audio","text"].forEach(e=>{const n=r.filter(t=>Te(t,e));n.length&&(t[`${e}Codec`]=n.map(e=>e.split("/")[0]).join(","),r=r.filter(e=>-1===n.indexOf(e)))}),t.unknownCodecs=r}function Sr(e,t,r){const n=t[r];n&&(e[r]=n)}function Tr(e,t,r){e.rawProgramDateTime?r.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function wr(e,t,r,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=r,e.sn="initSegment",n&&(e.levelkeys=n),e.initSegment=null}function Ar(e,t,r){e.levelkeys=t;const{encryptedFragments:n}=r;n.length&&n[n.length-1].levelkeys===t||!Object.keys(t).some(e=>t[e].isCommonEncryption)||n.push(e)}function kr(e,t,r){e.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${r[0]})`)}function xr(e,t,r){e.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${r[0]})`)}function Lr(e,t){const r=t.startPTS;if(n(r)){let n,i=0;t.sn>e.sn?(i=r-e.start,n=e):(i=e.start-r,n=t),n.duration!==i&&n.setDuration(i)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration):t.setStart(Math.max(e.start-t.duration,0))}function Pr(e,t,r,i,a,s){i-r<=0&&(P.warn("Fragment should have a positive duration",t),i=r+t.duration,s=a+t.duration);let o=r,l=i;const u=t.startPTS,c=t.endPTS;if(n(u)){const e=Math.abs(u-r);n(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,o=Math.max(r,u),r=Math.min(r,u),a=Math.min(a,t.startDTS),l=Math.min(i,c),i=Math.max(i,c),s=Math.max(s,t.endDTS)}const d=r-t.start;0!==t.start&&t.setStart(r),t.setDuration(i-t.start),t.startPTS=r,t.maxStartPTS=o,t.startDTS=a,t.endPTS=i,t.minEndPTS=l,t.endDTS=s;const h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;let f;const p=h-e.startSN,g=e.fragments;for(g[p]=t,f=p;f>0;f--)Lr(g[f],g[f-1]);for(f=p;f<g.length-1;f++)Lr(g[f],g[f+1]);return e.fragmentHint&&Lr(g[g.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function Rr(e,t,r,n,i){return new Error(`${e} ${i.url}\nPlaylist starting @${t.startSN}\n${t.m3u8}\n\nPlaylist starting @${r.startSN}\n${r.m3u8}`)}function _r(e,t,r=!0){const n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments,a=n>=0;let s=0;if(a&&n<i.length)s=i[n].start;else if(a&&t.startSN===e.endSN+1)s=e.fragmentEnd;else if(a&&r)s=e.fragmentStart+n*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;s=e.fragmentStart}Or(t,s)}function Or(e,t){if(t){const r=e.fragments;for(let n=e.skippedSegments;n<r.length;n++)r[n].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function Ir(e,t=1/0){let r=1e3*e.targetduration;if(e.updated){const n=e.fragments,i=4;if(n.length&&r*i>t){const e=1e3*n[n.length-1].duration;e<r&&(r=e)}}else r/=2;return Math.round(r)}function Cr(e,t,r){if(!e)return null;let n=e.fragments[t-e.startSN];return n||(n=e.fragmentHint,n&&n.sn===t?n:t<e.startSN&&r&&r.sn===t?r:null)}function Dr(e,t,r){return e?Mr(e.partList,t,r):null}function Mr(e,t,r){if(e)for(let n=e.length;n--;){const i=e[n];if(i.index===r&&i.fragment.sn===t)return i}return null}function Nr(e){e.forEach((e,t)=>{var r;null==(r=e.details)||r.fragments.forEach(e=>{e.level=t,e.initSegment&&(e.initSegment.level=t)})})}function Fr(e,t){for(let n=0,i=e.length;n<i;n++){var r;if((null==(r=e[n])?void 0:r.cc)===t)return e[n]}return null}function Ur(e,t){if(e){const r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}function Br(e,t){const r=t.fragments;for(let t=0,n=r.length;t<n;t++)Ur(r[t],e);t.fragmentHint&&Ur(t.fragmentHint,e),t.alignedSliding=!0}function $r(e,t){if(!function(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}(t,e))return;const r=Math.min(t.endCC,e.endCC),n=Fr(t.fragments,r),i=Fr(e.fragments,r);n&&i&&(P.log(`Aligning playlist at start of dicontinuity sequence ${r}`),Br(n.start-i.start,e))}function jr(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const r=e.fragments,n=t.fragments;if(!r.length||!n.length)return;let i,a;const s=Math.min(t.endCC,e.endCC);t.startCC<s&&e.startCC<s&&(i=Fr(n,s),a=Fr(r,s)),i&&a||(i=n[Math.floor(n.length/2)],a=Fr(r,i.cc)||r[Math.floor(r.length/2)]);const o=i.programDateTime,l=a.programDateTime;o&&l&&Br((l-o)/1e3-(a.start-i.start),e)}const zr="STOPPED",Gr="IDLE",Hr="KEY_LOADING",Kr="FRAG_LOADING",Vr="FRAG_LOADING_WAITING_RETRY",Wr="WAITING_TRACK",Yr="PARSING",qr="PARSED",Xr="ENDED",Qr="ERROR",Zr="WAITING_INIT_PTS",Jr="WAITING_LEVEL";class en extends Ot{constructor(e,t,r,i,a){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=zr,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:e,fragCurrent:t,media:r,mediaBuffer:i,state:a}=this,s=r?r.currentTime:0,o=Dt.bufferInfo(i||r,s,e.maxBufferHole),l=!o.len;if(this.log(`Media seeking to ${n(s)?s.toFixed(3):s}, state: ${a}, ${l?"out of":"in"} buffer`),this.state===Xr)this.resetLoadingState();else if(t){const r=e.maxFragLookUpTolerance,n=t.start-r,i=t.start+t.duration+r;if(l||i<o.start||n>o.end){const e=s>i;(s<n||e)&&(e&&t.loader&&(this.log(`Cancelling fragment load for seek (sn: ${t.sn})`),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(r&&(this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0),s>this.lastCurrentTime&&(this.lastCurrentTime=s),!this.loadingParts)){const e=Math.max(o.end,s),t=this.shouldLoadParts(this.getLevelDetails(),e);t&&(this.log(`LL-Part loading ON after seeking to ${s.toFixed(2)} with buffer @${e.toFixed(2)}`),this.loadingParts=t)}this.hls.hasEnoughToStart||(this.log(`Setting ${l?"startPosition":"nextLoadPosition"} to ${s} for seek without enough to start`),this.nextLoadPosition=s,l&&(this.startPosition=s)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new Lt(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new kt(e.config)}registerListeners(){const{hls:e}=this;e.on(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(l.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(l.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===zr)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=zr}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return-1===t&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const r=e.end||0,n=this.config.timelineOffset||0;if(r<=n)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=Dt.bufferedInfo(i,e.start,0));const a=e.nextStart;if(a&&a>n&&a<t.edge)return!1;if(this.media.currentTime<e.start)return!1;const s=t.partList;if(null!=s&&s.length){const e=s[s.length-1];return Dt.isBuffered(this.media,e.start+e.duration/2)}const o=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(o)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}get timelineOffset(){const e=this.config.timelineOffset;var t;return e?(null==(t=this.getLevelDetails())?void 0:t.appliedTimelineOffset)||e:0}onMediaAttached(e,t){const r=this.media=this.mediaBuffer=t.media;r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);const n=this.config;this.levels&&n.autoStartLoad&&this.state===zr&&this.startLoad(n.startPosition)}onMediaDetaching(e,t){const r=!!t.transferMedia,n=this.media;if(null!==n){if(n.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),n.removeEventListener("seeking",this.onMediaSeeking),n.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=zr,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,r){this.startFragRequested=!0,this._loadFragForPlayback(e,t,r)}_loadFragForPlayback(e,t,r){this._doFragLoad(e,t,r,e=>{const t=e.frag;if(this.fragContextChanged(t))return this.warn(`${t.type} sn: ${t.sn}${e.part?" part: "+e.part.index:""} of ${this.fragInfo(t,!1,e.part)}) was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)}).then(e=>{if(!e)return;const t=this.state,r=e.frag;this.fragContextChanged(r)?(t===Kr||!this.fragCurrent&&t===Yr)&&(this.fragmentTracker.removeFragment(r),this.state=Gr):("payload"in e&&(this.log(`Loaded ${r.type} sn: ${r.sn} of ${this.playlistLabel()} ${r.level}`),this.hls.trigger(l.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))}).catch(t=>{this.state!==zr&&this.state!==Qr&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:r}=this;if(r.getState(e)===gt){const t=e.type,n=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,n?n.len:this.config.maxBufferLength),a=this.backtrackFragment;(1===(a?e.sn-a.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&r.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===mt&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,r=null){if(!(e-t))return;const n={startOffset:e,endOffset:t,type:r};this.hls.trigger(l.BUFFER_FLUSHING,n)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(e=>{const t=null==e?void 0:e.frag;if(!t||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e}).then(e=>{const{hls:t}=this,{frag:r,payload:n}=e,i=r.decryptdata;if(n&&n.byteLength>0&&null!=i&&i.key&&i.iv&&Wt(i.method)){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer,Yt(i.method)).catch(e=>{throw t.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:r}),e}).then(n=>{const i=self.performance.now();return t.trigger(l.FRAG_DECRYPTED,{frag:r,payload:n,stats:{tstart:a,tdecrypt:i}}),e.payload=n,this.completeInitSegmentLoad(e)})}return this.completeInitSegmentLoad(e)}).catch(t=>{this.state!==zr&&this.state!==Qr&&(this.warn(t),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==zr&&(this.state=Gr),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${r?function(e){let t="";const r=e.length;for(let n=0;n<r;n++)t+=`[${e.start(n).toFixed(3)}-${e.end(n).toFixed(3)}]`;return t}(Dt.getBuffered(r)):"(detached)"})`),Y(e)){var n;if(e.type!==g){const t=e.elementaryStreams;if(!Object.keys(t).some(e=>!!t[e]))return void(this.state=Gr)}const t=null==(n=this.levels)?void 0:n[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=Gr}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:r,part:n,partsLoaded:i}=e,a=!i||0===i.length||i.some(e=>!e),s=new It(r.level,r.sn,r.stats.chunkCount+1,0,n?n.index:-1,!a);t.flush(s)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,r=null,i){var a;this.fragCurrent=e;const s=null==t?void 0:t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let o=null;!e.encrypted||null!=(a=e.decryptdata)&&a.key?e.encrypted||(o=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired")):(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Hr,this.fragCurrent=e,o=this.keyLoader.load(e).then(e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(l.KEY_LOADED,e),this.state===Hr&&(this.state=Gr),e}),this.hls.trigger(l.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING"))));const u=this.fragPrevious;if(Y(e)&&(!u||e.sn!==u.sn)){const r=this.shouldLoadParts(t.details,e.end);r!==this.loadingParts&&(this.log(`LL-Part loading ${r?"ON":"OFF"} loading sn ${null==u?void 0:u.sn}->${e.sn}`),this.loadingParts=r)}if(r=Math.max(e.start,r||0),this.loadingParts&&Y(e)){const n=s.partList;if(n&&i){r>e.end&&s.fragmentHint&&(e=s.fragmentHint);const a=this.getNextPart(n,e,r);if(a>-1){const u=n[a];let c;return e=this.fragCurrent=u.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${u.index} (${a}/${n.length-1}) of ${this.fragInfo(e,!1,u)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=u.start+u.duration,this.state=Kr,c=o?o.then(r=>!r||this.fragContextChanged(r.frag)?null:this.doFragPartsLoad(e,u,t,i)).catch(e=>this.handleFragLoadError(e)):this.doFragPartsLoad(e,u,t,i).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(l.FRAG_LOADING,{frag:e,part:u,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c}if(!e.url||this.loadedEndOfParts(n,r))return Promise.resolve(null)}}if(Y(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${s?"["+s.startSN+"-"+s.endSN+"]":""}, target: ${parseFloat(r.toFixed(3))}`),n(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Kr;const c=this.config.progressive;let d;return d=c&&o?o.then(t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,i)).catch(e=>this.handleFragLoadError(e)):Promise.all([this.fragmentLoader.load(e,c?i:void 0),o]).then(([e])=>(!c&&e&&i&&i(e),e)).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(l.FRAG_LOADING,{frag:e,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,t,r,n){return new Promise((i,a)=>{var s;const o=[],u=null==(s=r.details)?void 0:s.partList,c=t=>{this.fragmentLoader.loadPart(e,t,n).then(n=>{o[t.index]=n;const a=n.part;this.hls.trigger(l.FRAG_LOADED,n);const s=Dr(r.details,e.sn,t.index+1)||Mr(u,e.sn,t.index+1);if(!s)return i({frag:e,part:a,partsLoaded:o});c(s)}).catch(a)};c(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===o.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(l.ERROR,t)}else this.hls.trigger(l.ERROR,{type:s.OTHER_ERROR,details:o.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Yr)return void(this.fragCurrent||this.state===zr||this.state===Qr||(this.state=Gr));const{frag:r,part:n,level:i}=t,a=self.performance.now();r.stats.parsing.end=a,n&&(n.stats.parsing.end=a);const s=this.getLevelDetails(),o=s&&r.sn>s.endSN||this.shouldLoadParts(s,r.end);o!==this.loadingParts&&(this.log(`LL-Part loading ${o?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=o),this.updateLevelTiming(r,n,i,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(null!=e&&e.partList){var r;const i=e.partList[0];var n;if(t>=i.end+((null==(r=e.fragmentHint)?void 0:r.duration)||0))if((this.hls.hasEnoughToStart?(null==(n=this.media)?void 0:n.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:r}=this,{level:n,sn:i,part:a}=e;if(null==t||!t[n])return this.warn(`Levels object was unset while buffering fragment ${i} of ${this.playlistLabel()} ${n}. The current chunk will not be buffered.`),null;const s=t[n],o=s.details,l=a>-1?Dr(o,i,a):null,u=l?l.fragment:Cr(o,i,r);return u?(r&&r!==u&&(u.stats=r.stats),{frag:u,part:l,level:s}):null}bufferFragmentData(e,t,r,n,i){var a;if(!e||this.state!==Yr)return;const{data1:s,data2:o}=e;let u=s;if(s&&o&&(u=pe(s,o)),null==(a=u)||!a.length)return;const c=this.initPTS[t.cc],d=c?-c.baseTime/c.timescale:void 0,h={type:e.type,frag:t,part:r,chunkMeta:n,offset:d,parent:t.type,data:u};if(this.hls.trigger(l.BUFFER_APPENDING,h),e.dropped&&e.independent&&!r){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Dt.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const r=t.currentTime,n=Dt.bufferInfo(t,r,0),i=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),s=Math.max(Math.min(e.start-a,n.end-a),r+a);e.start-s>a&&this.flushMainBuffer(s,e.start)}getFwdBufferInfo(e,t){var r;const i=this.getLoadPosition();if(!n(i))return null;const a=this.lastCurrentTime>i||null!=(r=this.media)&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,a)}getFwdBufferInfoAtPos(e,t,r,n){const i=Dt.bufferInfo(e,t,n);if(0===i.len&&void 0!==i.nextStart){const a=this.fragmentTracker.getBufferedFrag(t,r);if(a&&(i.nextStart<=a.end||a.gap)){const r=Math.max(Math.min(i.nextStart,a.end)-t,n);return Dt.bufferInfo(e,t,r)}}return i}getMaxBufferLength(e){const{config:t}=this;let r;return r=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(r,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const r=this.config,n=Math.max(Math.min(e-t,r.maxBufferLength),t),i=Math.max(e-3*t,r.maxMaxBufferLength/2,n);return i>=n&&(r.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0)}getAppendedFrag(e,t=f){var r;const n=null==(r=this.fragmentTracker)?void 0:r.getAppendedFrag(e,t);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const r=t.fragments,n=r.length;if(!n)return null;const{config:i}=this,a=r[0].start,s=i.lowLatencyMode&&!!t.partList;let o=null;if(t.live){const r=i.initialLiveManifestSize;if(n<r)return this.warn(`Not enough fragments to start playback (have: ${n}, need: ${r})`),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<a){var l;s&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t);const r=this.hls.startPosition,n=this.hls.liveSyncPosition,i=o?(-1!==r&&r>=a?r:n)||o.start:e;this.log(`Setting startPosition to ${i} to match start frag at live edge. mainStart: ${r} liveSyncPosition: ${n} frag.start: ${null==(l=o)?void 0:l.start}`),this.startPosition=this.nextLoadPosition=i}}else e<=a&&(o=r[0]);if(!o){const r=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,r,t)}let u=this.filterReplacedPrimary(o,t);if(!u&&o){const e=o.sn-t.startSN;u=this.filterReplacedPrimary(r[e+1]||null,t)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(e,t){const r=this.fragmentTracker.getState(e);return(r===yt||r===mt&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,r,n,i){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&r.nextStart)){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,n,0);if(null!==e&&r.len+e.len>=i){const e=a.sn;return this.loopSn!==e&&(this.log(`buffer full after gaps in "${n}" playlist starting at sn: ${e}`),this.loopSn=e),null}}return this.loopSn=void 0,a}get primaryPrefetch(){var e,t;if(tn(this.hls.config)&&(null==(e=this.hls.interstitialsManager)||null==(t=e.playingItem)?void 0:t.event))return!0;return!1}filterReplacedPrimary(e,t){if(!e)return e;if(tn(this.hls.config)&&e.type!==g){const r=this.hls.interstitialsManager,n=null==r?void 0:r.bufferingItem;if(n){const r=n.event;if(r){if(r.appendInPlace||Math.abs(e.start-n.start)>1||0===n.start)return null}else{if(e.end<=n.start&&!1===(null==t?void 0:t.live))return null;if(e.start>n.end&&n.nextEvent&&(n.nextEvent.appendInPlace||e.start-n.end>1))return null}}const i=null==r?void 0:r.playerQueue;if(i)for(let t=i.length;t--;){const r=i[t].interstitial;if(r.appendInPlace&&e.start>=r.startTime&&e.end<=r.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,r){let n=-1,i=!1,a=!0;for(let s=0,o=e.length;s<o;s++){const o=e[s];if(a=a&&!o.independent,n>-1&&r<o.start)break;const l=o.loaded;l?n=-1:(i||o.independent||a)&&o.fragment===t&&(n=s),i=l}return n}loadedEndOfParts(e,t){const r=e[e.length-1];return r&&t>r.start&&r.loaded}getInitialLiveFragment(e){const t=e.fragments,r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=function(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!n(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;for(let n=0;n<e.length;++n){const i=e[n];if(st(t,r,i))return i}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const n=r.sn+1;if(n>=e.startSN&&n<=e.endSN){const a=t[n-e.startSN];r.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=ot(e,r.cc,r.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(i=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,r){const{config:n}=this;let{fragPrevious:i}=this,{fragments:a,endSN:s}=r;const{fragmentHint:o}=r,{maxFragLookUpTolerance:l}=n,u=r.partList,c=!!(this.loadingParts&&null!=u&&u.length&&o);let d;var h;(c&&o&&!this.bitrateTest&&u[u.length-1].fragment.sn===o.sn&&(a=a.concat(o),s=o.sn),e<t)?d=it(i,a,e,e<this.lastCurrentTime||e>t-l||null!=(h=this.media)&&h.paused||!this.startFragRequested?0:l):d=a[a.length-1];if(d){const e=d.sn-r.startSN,t=this.fragmentTracker.getState(d);if((t===yt||t===mt&&d.gap)&&(i=d),i&&d.sn===i.sn&&(!c||u[0].fragment.sn>d.sn||!r.live&&!c)&&i&&d.level===i.level){const t=a[e+1];d=d.sn<s&&this.fragmentTracker.getState(t)!==yt?t:null}}return d}alignPlaylists(e,t,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,s=!t,o=e.alignedSliding&&n(a);if(s||!o&&!a){!function(e,t){e&&($r(t,e),!t.alignedSliding&&e&&jr(t,e),t.alignedSliding||!e||t.skippedSegments||_r(e,t,!1))}(r,e);const n=e.fragmentStart;return this.log(`Live playlist sliding: ${n.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),n}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let r=this.startPosition;r<t&&(r=-1);const i=this.timelineOffset;if(-1===r){const a=null!==this.startTimeOffset,s=a?this.startTimeOffset:e.startTimeOffset;null!==s&&n(s)?(r=t+s,s<0&&(r+=e.edge),r=Math.min(Math.max(t,r),t+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${s} found in ${a?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+i}this.nextLoadPosition=r+i}getLoadPosition(){var e;const{media:t}=this;let r=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?r=t.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&Y(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Vr)||(this.state=Gr)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;var n;if(this.fragContextChanged(r))return void this.warn(`Frag load error must match current frag to retry ${r.url} > ${null==(n=this.fragCurrent)?void 0:n.url}`);const i=t.details===o.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(r,!0);const a=t.errorAction,{action:s,flags:l,retryCount:u=0,retryConfig:c}=a||{},d=!!a&&!!c,h=d&&5===s,f=d&&!a.resolved&&1===l;if(!h&&f&&Y(r)&&!r.endList)this.resetFragmentErrors(e),this.treatAsGap(r),a.resolved=!0;else if((h||f)&&u<c.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const n=ct(c,u);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${u+1}/${c.maxNumRetry} in ${n}ms`),a.resolved=!0,this.retryDate=self.performance.now()+n,this.state=Vr}else if(c&&a){if(this.resetFragmentErrors(e),!(u<c.maxNumRetry))return void this.warn(`${t.details} reached or exceeded max retry (${u})`);i||3===s||(a.resolved=!0)}else this.state=2===s?Jr:Qr;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===Yr||this.state===qr){const t=e.frag,r=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,r),i=n&&n.len>.5;i&&this.reduceMaxBufferLength(n.len,(null==t?void 0:t.duration)||10);const a=!i;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===p&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==zr&&(this.state=Gr)}afterBufferFlushed(e,t,r){if(!e)return;const n=Dt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,n,r),this.state===Xr&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==zr&&(this.state=Gr)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,r,n){const i=r.details;if(i){var a;if(!Object.keys(e.elementaryStreams).reduce((t,a)=>{const s=e.elementaryStreams[a];if(s){const o=s.endPTS-s.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${a} duration reliably (${o})`),t||!1;const u=n?0:Pr(i,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return this.hls.trigger(l.LEVEL_PTS_UPDATED,{details:i,level:r,drift:u,type:a,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t},!1)&&(0===r.fragmentError&&this.treatAsGap(e,r),null===(null==(a=this.transmuxer)?void 0:a.error))){const t=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(t.message),this.hls.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=qr,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(l.FRAG_PARSED,{frag:e,part:t})}else this.warn("level.details undefined")}playlistLabel(){return this.playlistType===f?"level":"track"}fragInfo(e,t=!0,r){var n,i;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${(null!=(n=t&&!r?e.startPTS:(r||e).start)?n:NaN).toFixed(3)}-${(null!=(i=t&&!r?e.endPTS:(r||e).end)?i:NaN).toFixed(3)}]${r&&"main"===e.type?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;null==(e=this.transmuxer)||e.reset()}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function tn(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}class rn{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let r;return e.length?(r=1===e.length?e[0]:function(e,t){const r=new Uint8Array(t);let n=0;for(let t=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(e,t),this.reset(),r):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}var nn,an={exports:{}},sn=(nn||(nn=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(an)),an.exports),on=D(sn);const ln="1.6.7",un={};function cn(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function dn(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function hn(e,t){let r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3],r}function fn(e,t){const r=t;let n=0;for(;dn(e,t);)n+=10,n+=hn(e,t+6),cn(e,t+10)&&(n+=10),t+=n;if(n>0)return e.subarray(r,r+n)}function pn(e,t){return 255===e[t]&&240==(246&e[t+1])}function gn(e,t){return 1&e[t+1]?7:9}function mn(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function yn(e,t){return t+1<e.length&&pn(e,t)}function vn(e,t){if(yn(e,t)){const r=gn(e,t);if(t+r>=e.length)return!1;const n=mn(e,t);if(n<=r)return!1;const i=t+n;return i===e.length||yn(e,i)}return!1}function bn(e,t,r,n,i){if(!e.samplerate){const a=function(e,t,r,n){const i=t[r+2],a=i>>2&15;if(a>12){const t=new Error(`invalid ADTS sampling index:${a}`);return void e.emit(l.ERROR,l.ERROR,{type:s.MEDIA_ERROR,details:o.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}const u=1+(i>>6&3),c=t[r+3]>>6&3|(1&i)<<2,d="mp4a.40."+u,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][a];let f=a;5!==u&&29!==u||(f-=3);const p=[u<<3|(14&f)>>1,(1&f)<<7|c<<3];return P.log(`manifest codec:${n}, parsed codec:${d}, channels:${c}, rate:${h} (ADTS object type:${u} sampling index:${a})`),{config:p,samplerate:h,channelCount:c,codec:d,parsedCodec:d,manifestCodec:n}}(t,r,n,i);if(!a)return;b(e,a)}}function En(e){return 9216e4/e}function Sn(e,t,r,n,i){const a=n+i*En(e.samplerate),s=function(e,t){const r=gn(e,t);if(t+r<=e.length){const n=mn(e,t)-r;if(n>0)return{headerLength:r,frameLength:n}}}(t,r);let o;if(s){const{frameLength:n,headerLength:i}=s,l=i+n,u=Math.max(0,r+l-t.length);u?(o=new Uint8Array(l-i),o.set(t.subarray(r+i,t.length),0)):o=t.subarray(r+i,r+l);const c={unit:o,pts:a};return u||e.samples.push(c),{sample:c,length:l,missing:u}}const l=t.length-r;return o=new Uint8Array(l),o.set(t.subarray(r,t.length),0),{sample:{unit:o,pts:a},length:l,missing:-1}}function Tn(e,t){return dn(e,t)&&hn(e,t+6)+10<=e.length-t}function wn(e,t=0,r=1/0){return function(e,t,r,n){const i=(a=e)instanceof ArrayBuffer?a:a.buffer;var a;let s=1;"BYTES_PER_ELEMENT"in n&&(s=n.BYTES_PER_ELEMENT);const o=(d=e)&&d.buffer instanceof ArrayBuffer&&void 0!==d.byteLength&&void 0!==d.byteOffset?e.byteOffset:0,l=(o+e.byteLength)/s,u=(o+t)/s,c=Math.floor(Math.max(0,Math.min(u,l)));var d;return new n(i,c,Math.floor(Math.min(c+Math.max(r,0),l))-c)}(e,t,r,Uint8Array)}function An(e){return"PRIV"===e.type?function(e){if(e.size<2)return;const t=O(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const r=O(e.data.subarray(t),!0);t+=r.length+1;const n=O(e.data.subarray(t));return{key:e.type,info:r,data:n}}const t=O(e.data);return{key:e.type,info:"",data:t}}(e):"APIC"===e.type?function(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.size<2)return;if(3!==e.data[0])return void console.log("Ignore frame with unrecognized character encoding");const r=e.data.subarray(1).indexOf(0);if(-1===r)return;const n=O(wn(e.data,1,r)),i=e.data[2+r],a=e.data.subarray(3+r).indexOf(0);if(-1===a)return;const s=O(wn(e.data,3+r,a));let o;return o="--\x3e"===n?O(wn(e.data,4+r+a)):(l=e.data.subarray(4+r+a))instanceof ArrayBuffer?l:0==l.byteOffset&&l.byteLength==l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer,t.mimeType=n,t.pictureType=i,t.description=s,t.data=o,t;var l}(e):function(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const r=O(e.data.subarray(t),!0);t+=r.length+1;const n=O(e.data.subarray(t));return{key:e.type,info:r,data:n}}const t=O(e.data.subarray(1));return{key:e.type,info:"",data:t}}(e)}function kn(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=hn(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}}function xn(e){let t=0;const r=[];for(;dn(e,t);){const n=hn(e,t+6);e[t+5]>>6&1&&(t+=10),t+=10;const i=t+n;for(;t+10<i;){const n=kn(e.subarray(t)),i=An(n);i&&r.push(i),t+=n.size+10}cn(e,t)&&(t+=10)}return r}function Ln(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function Pn(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),r=1&t[3];let n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}}function Rn(e){const t=xn(e);for(let e=0;e<t.length;e++){const r=t[e];if(Ln(r))return Pn(r)}}let _n=function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e}({});function On(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class In{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,r,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,r){}demux(e,t){this.cachedData&&(e=pe(this.cachedData,e),this.cachedData=null);let r,i=fn(e,0),a=i?i.length:0;const s=this._audioTrack,o=this._id3Track,l=i?Rn(i):void 0,u=e.length;for((null===this.basePTS||0===this.frameIndex&&n(l))&&(this.basePTS=Cn(l,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:_n.audioId3,duration:Number.POSITIVE_INFINITY});a<u;){if(this.canParse(e,a)){const t=this.appendFrame(s,e,a);t?(this.frameIndex++,this.lastPTS=t.sample.pts,a+=t.length,r=a):a=u}else Tn(e,a)?(i=fn(e,a),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:_n.audioId3,duration:Number.POSITIVE_INFINITY}),a+=i.length,r=a):a++;if(a===u&&r!==u){const t=e.slice(r);this.cachedData?this.cachedData=pe(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:On(),id3Track:o,textTrack:On()}}demuxSampleAes(e,t,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:On(),id3Track:this._id3Track,textTrack:On()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Cn=(e,t,r)=>n(e)?90*e:9e4*t+(r?9e4*r.baseTime/r.timescale:0);let Dn=null;const Mn=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Nn=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Fn=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Un=[0,1,1,4];function Bn(e,t,r,n,i){if(r+24>t.length)return;const a=$n(t,r);if(a&&r+a.frameLength<=t.length){const s=n+i*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}function $n(e,t){const r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==r&&0!==i&&15!==i&&3!==a){const s=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*Mn[14*(3===r?3-n:3===n?3:4)+i-1],u=Nn[3*(3===r?0:2===r?1:2)+a],c=3===o?1:2,d=Fn[r][n],h=Un[n],f=8*d*h,p=Math.floor(d*l/u+s)*h;if(null===Dn){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Dn=e?parseInt(e[1]):0}return!!Dn&&Dn<=87&&2===n&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:u,channelCount:c,frameLength:p,samplesPerFrame:f}}}function jn(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function zn(e,t){return t+1<e.length&&jn(e,t)}function Gn(e,t){if(t+1<e.length&&jn(e,t)){const r=4,n=$n(e,t);let i=r;null!=n&&n.frameLength&&(i=n.frameLength);const a=t+i;return a===e.length||zn(e,a)}return!1}const Hn=(e,t)=>{let r=0,n=5;t+=n;const i=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);for(;n>0;){s[0]=e[t];const o=Math.min(n,8),l=8-o;a[0]=4278190080>>>24+l<<l,i[0]=(s[0]&a[0])>>l,r=r?r<<o|i[0]:i[0],t+=1,n-=o}return r};function Kn(e,t,r,n,i){if(r+8>t.length)return-1;if(11!==t[r]||119!==t[r+1])return-1;const a=t[r+4]>>6;if(a>=3)return-1;const s=[48e3,44100,32e3][a],o=63&t[r+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+a];if(r+l>t.length)return-1;const u=t[r+6]>>5;let c=0;2===u?c+=2:(1&u&&1!==u&&(c+=2),4&u&&(c+=2));const d=(t[r+6]<<8|t[r+7])>>12-c&1,h=[2,1,2,3,3,4,4,5][u]+d,f=t[r+5]>>3,p=7&t[r+5],g=new Uint8Array([a<<6|f<<1|p>>2,(3&p)<<6|u<<3|d<<2|o>>4,o<<4&224]),m=n+i*(1536/s*9e4),y=t.subarray(r,r+l);return e.config=g,e.channelCount=h,e.samplerate=s,e.samples.push({unit:y,pts:m}),l}const Vn=/\/emsg[-/]ID3/i;function Wn(e,t){return n(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}class Yn{constructor(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new kt(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,0)}decryptAacSample(e,t,r){const n=e[t].unit;if(n.length<=16)return;const i=n.subarray(16,n.length-n.length%16),a=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(a).then(i=>{const a=new Uint8Array(i);n.set(a,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,r)})}decryptAacSamples(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,r),this.decrypter.isSync())))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t);let n=0;for(let t=32;t<e.length-16;t+=160,n+=16)r.set(e.subarray(t,t+16),n);return r}getAvcDecryptedUnit(e,t){const r=new Uint8Array(t);let n=0;for(let t=32;t<e.length-16;t+=160,n+=16)e.set(r.subarray(n,n+16),t);return e}decryptAvcSample(e,t,r,n,i){const a=be(i.data),s=this.getAvcEncryptedData(a);this.decryptBuffer(s.buffer).then(s=>{i.data=this.getAvcDecryptedUnit(a,s),this.decrypter.isSync()||this.decryptAvcSamples(e,t,r+1,n)})}decryptAvcSamples(e,t,r,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length)return void n();const i=e[t].units;for(;!(r>=i.length);r++){const a=i[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,r,n,a),this.decrypter.isSync())))return}}}}class qn{constructor(){this.VideoSample=null}createVideoSample(e,t,r){return{key:e,frame:!1,pts:t,dts:r,units:[],length:0}}getLastNalUnit(e){var t;let r,n=this.VideoSample;if(n&&0!==n.units.length||(n=e[e.length-1]),null!=(t=n)&&t.units){const e=n.units;r=e[e.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const r=t.samples,n=r.length;if(!n)return void t.dropped++;{const t=r[n-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}}parseNALu(e,t,r){const n=t.byteLength;let i=e.naluState||0;const a=i,s=[];let o,l,u,c=0,d=-1,h=0;for(-1===i&&(d=0,h=this.getNALuType(t,0),i=0,c=1);c<n;)if(o=t[c++],i)if(1!==i)if(o)if(1===o){if(l=c-i-1,d>=0){const e={data:t.subarray(d,l),type:h};s.push(e)}else{const r=this.getLastNalUnit(e.samples);r&&(a&&c<=4-a&&r.state&&(r.data=r.data.subarray(0,r.data.byteLength-a)),l>0&&(r.data=pe(r.data,t.subarray(0,l)),r.state=0))}c<n?(u=this.getNALuType(t,c),d=c,h=u,i=0):i=-1}else i=0;else i=3;else i=o?0:2;else i=o?0:1;if(d>=0&&i>=0){const e={data:t.subarray(d,n),type:h,state:i};s.push(e)}if(0===s.length){const r=this.getLastNalUnit(e.samples);r&&(r.data=pe(r.data,t))}return e.naluState=i,s}}class Xn{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const r=this.word>>>32-t;if(e>32&&P.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Qn extends qn{parsePES(e,t,r,n){const i=this.parseNALu(e,r.data,n);let a,s=this.VideoSample,o=!1;r.data=null,s&&i.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),i.forEach(n=>{var i,l;switch(n.type){case 1:{let t=!1;a=!0;const i=n.data;if(o&&i.length>4){const e=this.readSliceType(i);2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var u;t&&null!=(u=s)&&u.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.frame=!0,s.key=t;break}case 5:a=!0,null!=(i=s)&&i.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 6:a=!0,ve(n.data,1,r.pts,t.samples);break;case 7:{var c,d;a=!0,o=!0;const t=n.data,r=this.readSPS(t);if(!e.sps||e.width!==r.width||e.height!==r.height||(null==(c=e.pixelRatio)?void 0:c[0])!==r.pixelRatio[0]||(null==(d=e.pixelRatio)?void 0:d[1])!==r.pixelRatio[1]){e.width=r.width,e.height=r.height,e.pixelRatio=r.pixelRatio,e.sps=[t];const n=t.subarray(1,4);let i="avc1.";for(let e=0;e<3;e++){let t=n[e].toString(16);t.length<2&&(t="0"+t),i+=t}e.codec=i}break}case 8:a=!0,e.pps=[n.data];break;case 9:a=!0,e.audFound=!0,null!=(l=s)&&l.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:a=!0;break;default:a=!1}s&&a&&s.units.push(n)}),n&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}getNALuType(e,t){return 31&e[t]}readSliceType(e){const t=new Xn(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let r,n=8,i=8;for(let a=0;a<e;a++)0!==i&&(r=t.readEG(),i=(n+r+256)%256),n=0===i?n:i}readSPS(e){const t=new Xn(e);let r,n,i,a=0,s=0,o=0,l=0;const u=t.readUByte.bind(t),c=t.readBits.bind(t),d=t.readUEG.bind(t),h=t.readBoolean.bind(t),f=t.skipBits.bind(t),p=t.skipEG.bind(t),g=t.skipUEG.bind(t),m=this.skipScalingList.bind(this);u();const y=u();if(c(5),f(3),u(),g(),100===y||110===y||122===y||244===y||44===y||83===y||86===y||118===y||128===y){const e=d();if(3===e&&f(1),g(),g(),f(1),h())for(n=3!==e?8:12,i=0;i<n;i++)h()&&m(i<6?16:64,t)}g();const v=d();if(0===v)d();else if(1===v)for(f(1),p(),p(),r=d(),i=0;i<r;i++)p();g(),f(1);const b=d(),E=d(),S=c(1);0===S&&f(1),f(1),h()&&(a=d(),s=d(),o=d(),l=d());let T=[1,1];if(h()&&h())switch(u()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[u()<<8|u(),u()<<8|u()]}return{width:Math.ceil(16*(b+1)-2*a-2*s),height:(2-S)*(E+1)*16-(S?2:4)*(o+l),pixelRatio:T}}}class Zn extends qn{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,r,n){const i=this.parseNALu(e,r.data,n);let a,s=this.VideoSample,o=!1;r.data=null,s&&i.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),i.forEach(n=>{var i,l;switch(n.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),s.frame=!0,a=!0;break;case 16:case 17:case 18:case 21:var u;a=!0,o&&null!=(u=s)&&u.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 19:case 20:a=!0,null!=(i=s)&&i.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 39:a=!0,ve(n.data,2,r.pts,t.samples);break;case 32:a=!0,e.vps||("object"!=typeof e.params&&(e.params={}),e.params=b(e.params,this.readVPS(n.data)),this.initVPS=n.data),e.vps=[n.data];break;case 33:if(a=!0,o=!0,void 0===e.vps||e.vps[0]===this.initVPS||void 0===e.sps||this.matchSPS(e.sps[0],n.data)||(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const t=this.readSPS(n.data);e.width=t.width,e.height=t.height,e.pixelRatio=t.pixelRatio,e.codec=t.codecString,e.sps=[],"object"!=typeof e.params&&(e.params={});for(const r in t.params)e.params[r]=t.params[r]}this.pushParameterSet(e.sps,n.data,e.vps),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0;break;case 34:if(a=!0,"object"==typeof e.params){if(!e.pps){e.pps=[];const t=this.readPPS(n.data);for(const r in t)e.params[r]=t[r]}this.pushParameterSet(e.pps,n.data,e.vps)}break;case 35:a=!0,e.audFound=!0,null!=(l=s)&&l.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:a=!1}s&&a&&s.units.push(n)}),n&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}pushParameterSet(e,t,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(t)}getNALuType(e,t){return(126&e[t])>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let r=0;for(let n=0;n<e.byteLength;n++)n>=2&&3===e[n]&&0===e[n-1]&&0===e[n-2]||(t[r]=e[n],r++);return new Uint8Array(t.buffer,0,r)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Xn(e);return t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6),{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}}readSPS(e){const t=new Xn(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const r=t.readBits(3);t.readBoolean();const n=t.readBits(2),i=t.readBoolean(),a=t.readBits(5),s=t.readUByte(),o=t.readUByte(),l=t.readUByte(),u=t.readUByte(),c=t.readUByte(),d=t.readUByte(),h=t.readUByte(),f=t.readUByte(),p=t.readUByte(),g=t.readUByte(),m=t.readUByte(),y=[],v=[];for(let e=0;e<r;e++)y.push(t.readBoolean()),v.push(t.readBoolean());if(r>0)for(let e=r;e<8;e++)t.readBits(2);for(let e=0;e<r;e++)y[e]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),v[e]&&t.readUByte();t.readUEG();const b=t.readUEG();3==b&&t.skipBits(1);const E=t.readUEG(),S=t.readUEG(),T=t.readBoolean();let w=0,A=0,k=0,x=0;T&&(w+=t.readUEG(),A+=t.readUEG(),k+=t.readUEG(),x+=t.readUEG());const L=t.readUEG(),P=t.readUEG(),R=t.readUEG();for(let e=t.readBoolean()?0:r;e<=r;e++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let e=0;e<4;e++)for(let r=0;r<(3===e?2:6);r++)if(t.readBoolean()){const r=Math.min(64,1<<4+(e<<1));e>1&&t.readEG();for(let e=0;e<r;e++)t.readEG()}else t.readUEG();t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const _=t.readUEG();let O=0;for(let e=0;e<_;e++){let r=!1;if(0!==e&&(r=t.readBoolean()),r){e===_&&t.readUEG(),t.readBoolean(),t.readUEG();let r=0;for(let e=0;e<=O;e++){const e=t.readBoolean();let n=!1;e||(n=t.readBoolean()),(e||n)&&r++}O=r}else{const e=t.readUEG(),r=t.readUEG();O=e+r;for(let r=0;r<e;r++)t.readUEG(),t.readBoolean();for(let e=0;e<r;e++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const e=t.readUEG();for(let r=0;r<e;r++){for(let e=0;e<R+4;e++)t.readBits(1);t.readBits(1)}}let I=0,C=1,D=1,M=!0,N=1,F=0;t.readBoolean(),t.readBoolean();let U=!1;if(t.readBoolean()){if(t.readBoolean()){const e=t.readUByte();e>0&&e<16?(C=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],D=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(C=t.readBits(16),D=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),U=t.readBoolean(),U&&(w+=t.readUEG(),A+=t.readUEG(),k+=t.readUEG(),x+=t.readUEG()),t.readBoolean()&&(N=t.readBits(32),F=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const e=t.readBoolean(),n=t.readBoolean();let i=!1;(e||n)&&(i=t.readBoolean(),i&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),i&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let a=0;a<=r;a++){M=t.readBoolean();let r=!1;M||t.readBoolean()?t.readEG():r=t.readBoolean();const a=r?1:t.readUEG()+1;if(e)for(let e=0;e<a;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(n)for(let e=0;e<a;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),I=t.readUEG())}let B=E,$=S;if(T||U){let e=1,t=1;1===b?e=t=2:2==b&&(e=2),B=E-e*A-e*w,$=S-t*x-t*k}const j=n?["A","B","C"][n]:"",z=s<<24|o<<16|l<<8|u;let G=0;for(let e=0;e<32;e++)G=(G|(z>>e&1)<<31-e)>>>0;let H=G.toString(16);return 1===a&&"2"===H&&(H="6"),{codecString:`hvc1.${j}${a}.${H}.${i?"H":"L"}${m}.B0`,params:{general_tier_flag:i,general_profile_idc:a,general_profile_space:n,general_profile_compatibility_flags:[s,o,l,u],general_constraint_indicator_flags:[c,d,h,f,p,g],general_level_idc:m,bit_depth:L+8,bit_depth_luma_minus8:L,bit_depth_chroma_minus8:P,min_spatial_segmentation_idc:I,chroma_format_idc:b,frame_rate:{fixed:M,fps:F/N}},width:B,height:$,pixelRatio:[C,D]}}readPPS(e){const t=new Xn(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const r=t.readBoolean(),n=t.readBoolean();let i=1;return n&&r?i=0:n?i=3:r&&(i=2),{parallelismType:i}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const Jn=188;class ei{constructor(e,t,r,n){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.logger=n,this.videoParser=null}static probe(e,t){const r=ei.syncOffset(e);return r>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),-1!==r}static syncOffset(e){const t=e.length;let r=Math.min(940,t-Jn)+1,n=0;for(;n<r;){let i=!1,a=-1,s=0;for(let o=n;o<t;o+=Jn){if(71!==e[o]||t-o!==Jn&&71!==e[o+Jn]){if(s)return-1;break}if(s++,-1===a&&(a=o,0!==a&&(r=Math.min(a+18612,e.length-Jn)+1)),i||(i=0===ti(e,o)),i&&s>1&&(0===a&&s>2||o+Jn>r))return a}n++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:ee[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,r,n){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=ei.createTrack("video"),this._videoTrack.duration=n,this._audioTrack=ei.createTrack("audio",n),this._id3Track=ei.createTrack("id3"),this._txtTrack=ei.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:r}=this;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,r=!1,n=!1){let i;r||(this.sampleAes=null);const a=this._videoTrack,s=this._audioTrack,o=this._id3Track,l=this._txtTrack;let u=a.pid,c=a.pesData,d=s.pid,h=o.pid,f=s.pesData,p=o.pesData,g=null,m=this.pmtParsed,y=this._pmtId,v=e.length;if(this.remainderData&&(v=(e=pe(this.remainderData,e)).length,this.remainderData=null),v<Jn&&!n)return this.remainderData=e,{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};const b=Math.max(0,ei.syncOffset(e));v-=(v-b)%Jn,v<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,v,e.buffer.byteLength-v));let E=0;for(let t=b;t<v;t+=Jn)if(71===e[t]){const n=!!(64&e[t+1]),v=ti(e,t);let E;if((48&e[t+3])>>4>1){if(E=t+5+e[t+4],E===t+Jn)continue}else E=t+4;switch(v){case u:if(n){if(c&&(i=si(c,this.logger))){if(null===this.videoParser)switch(a.segmentCodec){case"avc":this.videoParser=new Qn;break;case"hevc":this.videoParser=new Zn}null!==this.videoParser&&this.videoParser.parsePES(a,l,i,!1)}c={data:[],size:0}}c&&(c.data.push(e.subarray(E,t+Jn)),c.size+=t+Jn-E);break;case d:if(n){if(f&&(i=si(f,this.logger)))switch(s.segmentCodec){case"aac":this.parseAACPES(s,i);break;case"mp3":this.parseMPEGPES(s,i);break;case"ac3":this.parseAC3PES(s,i)}f={data:[],size:0}}f&&(f.data.push(e.subarray(E,t+Jn)),f.size+=t+Jn-E);break;case h:n&&(p&&(i=si(p,this.logger))&&this.parseID3PES(o,i),p={data:[],size:0}),p&&(p.data.push(e.subarray(E,t+Jn)),p.size+=t+Jn-E);break;case 0:n&&(E+=e[E]+1),y=this._pmtId=ri(e,E);break;case y:{n&&(E+=e[E]+1);const i=ni(e,E,this.typeSupported,r,this.observer,this.logger);u=i.videoPid,u>0&&(a.pid=u,a.segmentCodec=i.segmentVideoCodec),d=i.audioPid,d>0&&(s.pid=d,s.segmentCodec=i.segmentAudioCodec),h=i.id3Pid,h>0&&(o.pid=h),null===g||m||(this.logger.warn(`MPEG-TS PMT found at ${t} after unknown PID '${g}'. Backtracking to sync byte @${b} to parse all TS packets.`),g=null,t=b-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=v}}else E++;E>0&&ii(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=c,s.pesData=f,o.pesData=p;const S={audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};return n&&this.extractRemainingSamples(S),S}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:r,id3Track:n,textTrack:i}=e,a=r.pesData,s=t.pesData,o=n.pesData;let l;if(a&&(l=si(a,this.logger))){if(null===this.videoParser)switch(r.segmentCodec){case"avc":this.videoParser=new Qn;break;case"hevc":this.videoParser=new Zn}null!==this.videoParser&&(this.videoParser.parsePES(r,i,l,!0),r.pesData=null)}else r.pesData=a;if(s&&(l=si(s,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=s&&s.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=s;o&&(l=si(o,this.logger))?(this.parseID3PES(n,l),n.pesData=null):n.pesData=o}demuxSampleAes(e,t,r){const n=this.demux(e,r,!0,!this.config.progressive),i=this.sampleAes=new Yn(this.observer,this.config,t);return this.decrypt(n,i)}decrypt(e,t){return new Promise(r=>{const{audioTrack:n,videoTrack:i}=e;n.samples&&"aac"===n.segmentCodec?t.decryptAacSamples(n.samples,0,()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,()=>{r(e)}):r(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let r=0;const n=this.aacOverFlow;let i,a,s,o=t.data;if(n){this.aacOverFlow=null;const t=n.missing,i=n.sample.unit.byteLength;if(-1===t)o=pe(n.sample.unit,o);else{const a=i-t;n.sample.unit.set(o.subarray(0,t),a),e.samples.push(n.sample),r=n.missing}}for(i=r,a=o.length;i<a-1&&!yn(o,i);i++);if(i!==r){let e;const t=i<a-1;if(e=t?`AAC PES did not start with ADTS header,offset:${i}`:"No ADTS header found in AAC PES",ii(this.observer,new Error(e),t,this.logger),!t)return}if(bn(e,this.observer,o,i,this.audioCodec),void 0!==t.pts)s=t.pts;else{if(!n)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=En(e.samplerate);s=n.sample.pts+t}}let l,u=0;for(;i<a;){if(l=Sn(e,o,i,s,u),i+=l.length,l.missing){this.aacOverFlow=l;break}for(u++;i<a-1&&!yn(o,i);i++);}}parseMPEGPES(e,t){const r=t.data,n=r.length;let i=0,a=0;const s=t.pts;if(void 0!==s)for(;a<n;)if(zn(r,a)){const t=Bn(e,r,a,s,i);if(!t)break;a+=t.length,i++}else a++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const r=t.data,n=t.pts;if(void 0===n)return void this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=r.length;let a,s=0,o=0;for(;o<i&&(a=Kn(e,r,o,n,s++))>0;)o+=a}}parseID3PES(e,t){if(void 0===t.pts)return void this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");const r=b({},t,{type:this._videoTrack?_n.emsg:_n.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function ti(e,t){return((31&e[t+1])<<8)+e[t+2]}function ri(e,t){return(31&e[t+10])<<8|e[t+11]}function ni(e,t,r,n,i,a){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){const o=ti(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!n){ai("ADTS AAC",a);break}case 15:-1===s.audioPid&&(s.audioPid=o);break;case 21:-1===s.id3Pid&&(s.id3Pid=o);break;case 219:if(!n){ai("H.264",a);break}case 27:-1===s.videoPid&&(s.videoPid=o);break;case 3:case 4:r.mpeg||r.mp3?-1===s.audioPid&&(s.audioPid=o,s.segmentAudioCodec="mp3"):a.log("MPEG audio found, not supported in this browser");break;case 193:if(!n){ai("AC-3",a);break}case 129:r.ac3?-1===s.audioPid&&(s.audioPid=o,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===s.audioPid&&l>0){let n=t+5,i=l;for(;i>2;){106===e[n]&&(!0!==r.ac3?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=o,s.segmentAudioCodec="ac3"));const t=e[n+1]+2;n+=t,i-=t}}break;case 194:case 135:return ii(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:-1===s.videoPid&&(s.videoPid=o,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"))}t+=l+5}return s}function ii(e,t,r,n){n.warn(`parsing error: ${t.message}`),e.emit(l.ERROR,l.ERROR,{type:s.MEDIA_ERROR,details:o.FRAG_PARSING_ERROR,fatal:!1,levelRetry:r,error:t,reason:t.message})}function ai(e,t){t.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function si(e,t){let r,n,i,a,s,o=0;const l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;)l[0]=pe(l[0],l[1]),l.splice(1,1);if(r=l[0],1===(r[0]<<16)+(r[1]<<8)+r[2]){if(n=(r[4]<<8)+r[5],n&&n>e.size-6)return null;const u=r[7];192&u&&(a=536870912*(14&r[9])+4194304*(255&r[10])+16384*(254&r[11])+128*(255&r[12])+(254&r[13])/2,64&u?(s=536870912*(14&r[14])+4194304*(255&r[15])+16384*(254&r[16])+128*(255&r[17])+(254&r[18])/2,a-s>54e5&&(t.warn(`${Math.round((a-s)/9e4)}s delta between PTS and DTS, align them`),a=s)):s=a),i=r[8];let c=i+9;if(e.size<=c)return null;e.size-=c;const d=new Uint8Array(e.size);for(let e=0,t=l.length;e<t;e++){r=l[e];let t=r.byteLength;if(c){if(c>t){c-=t;continue}r=r.subarray(c),t-=c,c=0}d.set(r,o),o+=t}return n&&(n-=i+3),{data:d,pts:a,dts:s,len:n}}return null}class oi{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const li=Math.pow(2,32)-1;class ui{static init(){let e;for(e in ui.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},ui.types)ui.types.hasOwnProperty(e)&&(ui.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ui.HDLR_TYPES={video:t,audio:r};const n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);ui.STTS=ui.STSC=ui.STCO=i,ui.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ui.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ui.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ui.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);ui.FTYP=ui.box(ui.types.ftyp,a,o,a,s),ui.DINF=ui.box(ui.types.dinf,ui.box(ui.types.dref,n))}static box(e,...t){let r=8,n=t.length;const i=n;for(;n--;)r+=t[n].byteLength;const a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=255&r,a.set(e,4),n=0,r=8;n<i;n++)a.set(t[n],r),r+=t[n].byteLength;return a}static hdlr(e){return ui.box(ui.types.hdlr,ui.HDLR_TYPES[e])}static mdat(e){return ui.box(ui.types.mdat,e)}static mdhd(e,t){t*=e;const r=Math.floor(t/(li+1)),n=Math.floor(t%(li+1));return ui.box(ui.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))}static mdia(e){return ui.box(ui.types.mdia,ui.mdhd(e.timescale||0,e.duration||0),ui.hdlr(e.type),ui.minf(e))}static mfhd(e){return ui.box(ui.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?ui.box(ui.types.minf,ui.box(ui.types.smhd,ui.SMHD),ui.DINF,ui.stbl(e)):ui.box(ui.types.minf,ui.box(ui.types.vmhd,ui.VMHD),ui.DINF,ui.stbl(e))}static moof(e,t,r){return ui.box(ui.types.moof,ui.mfhd(e),ui.traf(r,t))}static moov(e){let t=e.length;const r=[];for(;t--;)r[t]=ui.trak(e[t]);return ui.box.apply(null,[ui.types.moov,ui.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(ui.mvex(e)))}static mvex(e){let t=e.length;const r=[];for(;t--;)r[t]=ui.trex(e[t]);return ui.box.apply(null,[ui.types.mvex,...r])}static mvhd(e,t){t*=e;const r=Math.floor(t/(li+1)),n=Math.floor(t%(li+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ui.box(ui.types.mvhd,i)}static sdtp(e){const t=e.samples||[],r=new Uint8Array(4+t.length);let n,i;for(n=0;n<t.length;n++)i=t[n].flags,r[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return ui.box(ui.types.sdtp,r)}static stbl(e){return ui.box(ui.types.stbl,ui.stsd(e),ui.box(ui.types.stts,ui.STTS),ui.box(ui.types.stsc,ui.STSC),ui.box(ui.types.stsz,ui.STSZ),ui.box(ui.types.stco,ui.STCO))}static avc1(e){let t,r,n,i=[],a=[];for(t=0;t<e.sps.length;t++)r=e.sps[t],n=r.byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(r));for(t=0;t<e.pps.length;t++)r=e.pps[t],n=r.byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(r));const s=ui.box(ui.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(a))),o=e.width,l=e.height,u=e.pixelRatio[0],c=e.pixelRatio[1];return ui.box(ui.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,ui.box(ui.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ui.box(ui.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return ui.box(ui.types.mp4a,ui.audioStsd(e),ui.box(ui.types.esds,ui.esds(e)))}static mp3(e){return ui.box(ui.types[".mp3"],ui.audioStsd(e))}static ac3(e){return ui.box(ui.types["ac-3"],ui.audioStsd(e),ui.box(ui.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if("audio"===e.type){if("aac"===t)return ui.box(ui.types.stsd,ui.STSD,ui.mp4a(e));if("ac3"===t&&e.config)return ui.box(ui.types.stsd,ui.STSD,ui.ac3(e));if("mp3"===t&&"mp3"===e.codec)return ui.box(ui.types.stsd,ui.STSD,ui.mp3(e))}else{if(!e.pps||!e.sps)throw new Error("video track missing pps or sps");if("avc"===t)return ui.box(ui.types.stsd,ui.STSD,ui.avc1(e));if("hevc"===t&&e.vps)return ui.box(ui.types.stsd,ui.STSD,ui.hvc1(e))}throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,r=(e.duration||0)*(e.timescale||0),n=e.width||0,i=e.height||0,a=Math.floor(r/(li+1)),s=Math.floor(r%(li+1));return ui.box(ui.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const r=ui.sdtp(e),n=e.id,i=Math.floor(t/(li+1)),a=Math.floor(t%(li+1));return ui.box(ui.types.traf,ui.box(ui.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),ui.box(ui.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a])),ui.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,ui.box(ui.types.trak,ui.tkhd(e),ui.mdia(e))}static trex(e){const t=e.id;return ui.box(ui.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const r=e.samples||[],n=r.length,i=12+16*n,a=new Uint8Array(i);let s,o,l,u,c,d;for(t+=8+i,a.set(["video"===e.type?1:0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),s=0;s<n;s++)o=r[s],l=o.duration,u=o.size,c=o.flags,d=o.cts,a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,u>>>24&255,u>>>16&255,u>>>8&255,255&u,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*s);return ui.box(ui.types.trun,a)}static initSegment(e){ui.types||ui.init();const t=ui.moov(e);return pe(ui.FTYP,t)}static hvc1(e){const t=e.params,r=[e.vps,e.sps,e.pps],n=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),3|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),r.length]);let i=n.length;for(let e=0;e<r.length;e+=1){i+=3;for(let t=0;t<r[e].length;t+=1)i+=2+r[e][t].length}const a=new Uint8Array(i);a.set(n,0),i=n.length;const s=r.length-1;for(let e=0;e<r.length;e+=1){a.set(new Uint8Array([32+e|(e===s?128:0),0,r[e].length]),i),i+=3;for(let t=0;t<r[e].length;t+=1)a.set(new Uint8Array([r[e][t].length>>8,255&r[e][t].length]),i),i+=2,a.set(r[e][t],i),i+=r[e][t].length}const o=ui.box(ui.types.hvcC,a),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return ui.box(ui.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,ui.box(ui.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ui.box(ui.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))}}function ci(e,t,r=1,n=!1){const i=e*t*r;return n?Math.round(i):i}function di(e,t=!1){return ci(e,1e3,1/9e4,t)}ui.types=void 0,ui.HDLR_TYPES=void 0,ui.STTS=void 0,ui.STSC=void 0,ui.STCO=void 0,ui.STSZ=void 0,ui.VMHD=void 0,ui.SMHD=void 0,ui.STSD=void 0,ui.FTYP=void 0,ui.DINF=void 0;let hi,fi=null,pi=null;function gi(e,t,r,n){return{duration:t,size:r,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class mi extends T{constructor(e,t,r,n){if(super("mp4-remuxer",n),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===fi){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);fi=e?parseInt(e[1]):0}if(null===pi){const e=navigator.userAgent.match(/Safari\/(\d+)/i);pi=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const r=e[0].pts,n=e.reduce((e,n)=>{let i=n.pts,a=i-e;return a<-4294967296&&(t=!0,i=yi(i,r),a=i-e),a>0?e:i},r);return t&&this.debug("PTS rollover detected"),n}remux(e,t,r,n,i,a,s,o){let l,u,c,d,h,f,g=i,m=i;const y=e.pid>-1,v=t.pid>-1,b=t.samples.length,E=e.samples.length>0,S=s&&b>0||b>1;if((!y||E)&&(!v||S)||this.ISGenerated||s){if(this.ISGenerated){var T,w,A,k;const e=this.videoTrackConfig;(e&&(t.width!==e.width||t.height!==e.height||(null==(T=t.pixelRatio)?void 0:T[0])!==(null==(w=e.pixelRatio)?void 0:w[0])||(null==(A=t.pixelRatio)?void 0:A[1])!==(null==(k=e.pixelRatio)?void 0:k[1]))||!e&&S||null===this.nextAudioTs&&E)&&this.resetInitSegment()}this.ISGenerated||(c=this.generateIS(e,t,i,a));const r=this.isVideoContiguous;let n,s=-1;if(S&&(s=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!r&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,s>0){this.warn(`Dropped ${s} out of ${b} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(s),t.dropped+=s,m+=(t.samples[0].pts-e)/t.inputTimeScale,n=m}else-1===s&&(this.warn(`No keyframe found out of ${b} video samples`),f=!1);if(this.ISGenerated){if(E&&S){const r=this.getVideoStartPts(t.samples),n=(yi(e.samples[0].pts,r)-r)/t.inputTimeScale;g+=Math.max(0,n),m+=Math.max(0,-n)}if(E){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),c=this.generateIS(e,t,i,a)),u=this.remuxAudio(e,g,this.isAudioContiguous,a,v||S||o===p?m:void 0),S){const n=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),c=this.generateIS(e,t,i,a)),l=this.remuxVideo(t,m,r,n)}}else S&&(l=this.remuxVideo(t,m,r,0));l&&(l.firstKeyFrame=s,l.independent=-1!==s,l.firstKeyFramePTS=n)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(h=vi(r,i,this._initPTS,this._initDTS)),n.samples.length&&(d=bi(n,i,this._initPTS))),{audio:u,video:l,initSegment:c,independent:f,text:d,id3:h}}generateIS(e,t,r,n){const i=e.samples,a=t.samples,s=this.typeSupported,o={},l=this._initPTS;let u,c,d,h,f=!l||n,p="audio/mp4";if(f&&(u=c=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":s.mpeg?(p="audio/mpeg",e.codec=""):s.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}o.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&s.mpeg?new Uint8Array(0):ui.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(h=e.id,d=e.inputTimeScale,l&&d===l.timescale?f=!1:u=c=i[0].pts-Math.round(d*r))}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:ui.initSegment([t]),metadata:{width:t.width,height:t.height}},f)if(h=t.id,d=t.inputTimeScale,l&&d===l.timescale)f=!1;else{const e=this.getVideoStartPts(a),t=Math.round(d*r);c=Math.min(c,yi(a[0].dts,e)-t),u=Math.min(u,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,f?(this._initPTS={baseTime:u,timescale:d},this._initDTS={baseTime:c,timescale:d}):u=d=void 0,{tracks:o,initPTS:u,timescale:d,trackId:h}}remuxVideo(e,t,r,n){const i=e.inputTimeScale,a=e.samples,u=[],c=a.length,d=this._initPTS,h=d.baseTime*i/d.timescale;let f,p,g=this.nextVideoTs,m=8,y=this.videoSampleDuration,v=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,S=!1;if(!r||null===g){const e=h+t*i,n=a[0].pts-yi(a[0].dts,a[0].pts);fi&&null!==g&&Math.abs(e-n-(g+h))<15e3?r=!0:g=e-n-h}const T=g+h;for(let e=0;e<c;e++){const t=a[e];t.pts=yi(t.pts,T),t.dts=yi(t.dts,T),t.dts<a[e>0?e-1:e].dts&&(S=!0)}S&&a.sort(function(e,t){const r=e.dts-t.dts,n=e.pts-t.pts;return r||n}),f=a[0].dts,p=a[a.length-1].dts;const w=p-f,A=w?Math.round(w/(c-1)):y||e.inputTimeScale/30;if(r){const r=f-T,n=r>A,i=r<-1;if((n||i)&&(n?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${di(r,!0)} ms (${r}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${di(-r,!0)} ms (${r}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!i||T>=a[0].pts||fi)){f=T;const e=a[0].pts-r;if(n)a[0].dts=f,a[0].pts=e;else{let t=!0;for(let n=0;n<a.length&&!(a[n].dts>e&&t);n++){const e=a[n].pts;if(a[n].dts-=r,a[n].pts-=r,n<a.length-1){const r=a[n+1].pts;t=r<=a[n].pts==r<=e}}}this.log(`Video: Initial PTS/DTS adjusted: ${di(e,!0)}/${di(f,!0)}, delta: ${di(r,!0)} ms`)}}f=Math.max(0,f);let k=0,x=0,L=f;for(let e=0;e<c;e++){const t=a[e],r=t.units,n=r.length;let i=0;for(let e=0;e<n;e++)i+=r[e].data.length;x+=i,k+=n,t.length=i,t.dts<L?(t.dts=L,L+=A/4|0||1):L=t.dts,v=Math.min(t.pts,v),E=Math.max(t.pts,E)}p=a[c-1].dts;const P=x+4*k+8;let R;try{R=new Uint8Array(P)}catch(e){return void this.observer.emit(l.ERROR,l.ERROR,{type:s.MUX_ERROR,details:o.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:P,reason:`fail allocating video mdat ${P}`})}const _=new DataView(R.buffer);_.setUint32(0,P),R.set(ui.types.mdat,4);let O=!1,I=Number.POSITIVE_INFINITY,C=Number.POSITIVE_INFINITY,D=Number.NEGATIVE_INFINITY,M=Number.NEGATIVE_INFINITY;for(let e=0;e<c;e++){const t=a[e],r=t.units;let s,o=0;for(let e=0,t=r.length;e<t;e++){const t=r[e],n=t.data,i=t.data.byteLength;_.setUint32(m,i),m+=4,R.set(n,m),m+=i,o+=4+i}if(e<c-1)y=a[e+1].dts-t.dts,s=a[e+1].pts-t.pts;else{const r=this.config,o=e>0?t.dts-a[e-1].dts:A;if(s=e>0?t.pts-a[e-1].pts:A,r.stretchShortVideoTrack&&null!==this.nextAudioTs){const e=Math.floor(r.maxBufferHole*i),a=(n?v+n*i:this.nextAudioTs+h)-t.pts;a>e?(y=a-o,y<0?y=o:O=!0,this.log(`It is approximately ${a/90} ms to the next segment; using duration ${y/90} ms for the last video frame.`)):y=o}else y=o}const l=Math.round(t.pts-t.dts);I=Math.min(I,y),D=Math.max(D,y),C=Math.min(C,s),M=Math.max(M,s),u.push(gi(t.key,y,o,l))}if(u.length)if(fi){if(fi<70){const e=u[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(pi&&M-C<D-I&&A/D<.025&&0===u[0].cts){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=f;for(let t=0,r=u.length;t<r;t++){const n=e+u[t].duration,i=e+u[t].cts;if(t<r-1){const e=n+u[t+1].cts;u[t].duration=e-i}else u[t].duration=t?u[t-1].duration:A;u[t].cts=0,e=n}}y=O||!y?A:y;const N=p+y;this.nextVideoTs=g=N-h,this.videoSampleDuration=y,this.isVideoContiguous=!0;const F={data1:ui.moof(e.sequenceNumber++,f,b(e,{samples:u})),data2:R,startPTS:(v-h)/i,endPTS:(E+y-h)/i,startDTS:(f-h)/i,endDTS:g/i,type:"video",hasAudio:!1,hasVideo:!0,nb:u.length,dropped:e.dropped};return e.samples=[],e.dropped=0,F}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,r,n,i){const a=e.inputTimeScale,u=a/(e.samplerate?e.samplerate:a),c=this.getSamplesPerFrame(e),d=c*u,h=this._initPTS,f="mp3"===e.segmentCodec&&this.typeSupported.mpeg,p=[],g=void 0!==i;let m=e.samples,y=f?0:8,v=this.nextAudioTs||-1;const E=h.baseTime*a/h.timescale,S=E+t*a;if(this.isAudioContiguous=r=r||m.length&&v>0&&(n&&Math.abs(S-(v+E))<9e3||Math.abs(yi(m[0].pts,S)-(v+E))<20*d),m.forEach(function(e){e.pts=yi(e.pts,S)}),!r||v<0){if(m=m.filter(e=>e.pts>=0),!m.length)return;v=0===i?0:n&&!g?Math.max(0,S-E):m[0].pts-E}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let r=0,n=v+E;r<m.length;r++){const i=m[r],s=i.pts,o=s-n,l=Math.abs(1e3*o/a);if(o<=-t*d&&g)0===r&&(this.warn(`Audio frame @ ${(s/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*o/a)} ms.`),this.nextAudioTs=v=s-E,n=s);else if(o>=t*d&&l<1e4&&g){let t=Math.round(o/d);for(n=s-t*d;n<0&&t&&d;)t--,n+=d;0===r&&(this.nextAudioTs=v=n-E),this.warn(`Injecting ${t} audio frames @ ${((n-E)/a).toFixed(3)}s due to ${Math.round(1e3*o/a)} ms gap.`);for(let a=0;a<t;a++){let t=oi.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);t||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),t=i.unit.subarray()),m.splice(r,0,{unit:t,pts:n}),n+=d,r++}}i.pts=n,n+=d}}let T,w=null,A=null,k=0,x=m.length;for(;x--;)k+=m[x].unit.byteLength;for(let t=0,n=m.length;t<n;t++){const n=m[t],i=n.unit;let a=n.pts;if(null!==A)p[t-1].duration=Math.round((a-A)/u);else{if(r&&"aac"===e.segmentCodec&&(a=v+E),w=a,!(k>0))return;k+=y;try{T=new Uint8Array(k)}catch(e){return void this.observer.emit(l.ERROR,l.ERROR,{type:s.MUX_ERROR,details:o.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:k,reason:`fail allocating audio mdat ${k}`})}f||(new DataView(T.buffer).setUint32(0,k),T.set(ui.types.mdat,4))}T.set(i,y);const d=i.byteLength;y+=d,p.push(gi(!0,c,d,0)),A=a}const L=p.length;if(!L)return;const P=p[p.length-1];v=A-E,this.nextAudioTs=v+u*P.duration;const R=f?new Uint8Array(0):ui.moof(e.sequenceNumber++,w/u,b({},e,{samples:p}));e.samples=[];const _=(w-E)/a,O=v/a,I={data1:R,data2:T,startPTS:_,endPTS:O,startDTS:_,endDTS:O,type:"audio",hasAudio:!0,hasVideo:!1,nb:L};return this.isAudioContiguous=!0,I}}function yi(e,t){let r;if(null===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}function vi(e,t,r,n){const i=e.samples.length;if(!i)return;const a=e.inputTimeScale;for(let s=0;s<i;s++){const i=e.samples[s];i.pts=yi(i.pts-r.baseTime*a/r.timescale,t*a)/a,i.dts=yi(i.dts-n.baseTime*a/n.timescale,t*a)/a}const s=e.samples;return e.samples=[],{samples:s}}function bi(e,t,r){const n=e.samples.length;if(!n)return;const i=e.inputTimeScale;for(let a=0;a<n;a++){const n=e.samples[a];n.pts=yi(n.pts-r.baseTime*i/r.timescale,t*i)/i}e.samples.sort((e,t)=>e.pts-t.pts);const a=e.samples;return e.samples=[],{samples:a}}function Ei(e,t,r=!1){return void 0!==(null==e?void 0:e.start)?(e.start+(r?e.duration:0))/e.timescale:t}function Si(e,t,r){const n=null==e?void 0:e.codec;return n&&n.length>4?n:t===H?"ec-3"===n||"ac-3"===n||"alac"===n?n:"fLaC"===n||"Opus"===n?_e(n,!1):(r.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(r.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}try{hi=self.performance.now.bind(self.performance)}catch(e){hi=Date.now}const Ti=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,r,n){const i=this.videoTrack=On("video",1),a=this.audioTrack=On("audio",1),s=this.txtTrack=On("text",1);if(this.id3Track=On("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=le(e);if(o.video){const{id:e,timescale:t,codec:r,supplemental:n}=o.video;i.id=e,i.timescale=s.timescale=t,i.codec=r,i.supplemental=n}if(o.audio){const{id:e,timescale:t,codec:r}=o.audio;a.id=e,a.timescale=t,a.codec=r}s.id=ee.text,i.sampleDuration=0,i.duration=a.duration=n}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let r=0;r<t;){const n=ne(e,r);if(n>8&&109===e[r+4]&&111===e[r+5]&&111===e[r+6]&&102===e[r+7])return!0;r=n>1?r+n:t}return!1}(e)}demux(e,t){this.timeOffset=t;let r=e;const n=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=pe(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},r=se(e,["moof"]);if(r.length<2)return t.remainder=e,t;const n=r[r.length-1];return t.valid=e.slice(0,n.byteOffset-8),t.remainder=e.slice(n.byteOffset-8),t}(r);this.remainderData=t.remainder,n.samples=t.valid||new Uint8Array}else n.samples=r;const a=this.extractID3Track(n,t);return i.samples=ge(t,n),{videoTrack:n,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const n=this.extractID3Track(t,this.timeOffset);return r.samples=ge(e,t),{videoTrack:t,audioTrack:On(),id3Track:n,textTrack:On()}}extractID3Track(e,t){const r=this.id3Track;if(e.samples.length){const n=se(e.samples,["emsg"]);n&&n.forEach(e=>{const n=function(e){const t=e[0];let r="",n="",a=0,s=0,o=0,l=0,u=0,c=0;if(0===t){for(;"\0"!==te(e.subarray(c,c+1));)r+=te(e.subarray(c,c+1)),c+=1;for(r+=te(e.subarray(c,c+1)),c+=1;"\0"!==te(e.subarray(c,c+1));)n+=te(e.subarray(c,c+1)),c+=1;n+=te(e.subarray(c,c+1)),c+=1,a=ne(e,12),s=ne(e,16),l=ne(e,20),u=ne(e,24),c=28}else if(1===t){c+=4,a=ne(e,c),c+=4;const t=ne(e,c);c+=4;const s=ne(e,c);for(c+=4,o=2**32*t+s,i(o)||(o=Number.MAX_SAFE_INTEGER,P.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),l=ne(e,c),c+=4,u=ne(e,c),c+=4;"\0"!==te(e.subarray(c,c+1));)r+=te(e.subarray(c,c+1)),c+=1;for(r+=te(e.subarray(c,c+1)),c+=1;"\0"!==te(e.subarray(c,c+1));)n+=te(e.subarray(c,c+1)),c+=1;n+=te(e.subarray(c,c+1)),c+=1}return{schemeIdUri:r,value:n,timeScale:a,presentationTime:o,presentationTimeDelta:s,eventDuration:l,id:u,payload:e.subarray(c,e.byteLength)}}(e);if(Vn.test(n.schemeIdUri)){const e=Wn(n,t);let i=4294967295===n.eventDuration?Number.POSITIVE_INFINITY:n.eventDuration/n.timeScale;i<=.001&&(i=Number.POSITIVE_INFINITY);const a=n.payload;r.samples.push({data:a,len:a.byteLength,dts:e,pts:e,type:_n.emsg,duration:i})}else if(this.config.enableEmsgKLVMetadata&&n.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const e=Wn(n,t);r.samples.push({data:n.payload,len:n.payload.byteLength,dts:e,pts:e,type:_n.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}},remux:class extends T{constructor(e,t,r,n){super("passthrough-remuxer",n),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,r,n){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(function(e,t){if(!e||!t)return e;const r=t.keyId;return r&&t.isCommonEncryption&&se(e,["moov","trak"]).forEach(e=>{const t=se(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let n=se(t,["enca"]);const i=n.length>0;i||(n=se(t,["encv"])),n.forEach(e=>{se(i?e.subarray(28):e.subarray(78),["sinf"]).forEach(e=>{const t=function(e){const t=se(e,["schm"])[0];if(t){const r=te(t.subarray(4,8));if("cbcs"===r||"cenc"===r)return se(e,["schi","tenc"])[0]}return null}(e);if(t){const e=t.subarray(8,24);e.some(e=>0!==e)||(P.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${I(e)} -> ${I(r)}`),t.set(r,8))}})})}),e}(e,n)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:r}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const n=this.initData=le(e);n.audio&&(t=Si(n.audio,H,this)),n.video&&(r=Si(n.video,K,this));const i={};n.audio&&n.video?i.audiovideo={container:"video/mp4",codec:t+","+r,supplemental:n.video.supplemental,initSegment:e,id:"main"}:n.audio?i.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:n.video?i.video={container:"video/mp4",codec:r,supplemental:n.video.supplemental,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,t,r,i,a,s){var o,l;let{initPTS:u,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};n(c)||(c=this.lastEndTime=a||0);const h=t.samples;if(null==h||!h.length)return d;const f={initPTS:void 0,timescale:void 0,trackId:void 0};let p=this.initData;if(null!=(o=p)&&o.length||(this.generateInitSegment(h),p=this.initData),null==(l=p)||!l.length)return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const g=function(e,t,r){const i={},a=se(e,["moof","traf"]);for(let e=0;e<a.length;e++){const s=a[e],o=se(s,["tfhd"])[0],l=ne(o,4),u=t[l];if(!u)continue;const c=i[l]||(i[l]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type}),d=se(s,["tfdt"])[0];if(d){const e=d[0];let t=ne(d,4);1===e&&(t===Z?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(t*=Z+1,t+=ne(d,8))),n(t)&&(!n(c.start)||t<c.start)&&(c.start=t)}const h=u.default,f=ne(o,0)|(null==h?void 0:h.flags);let p=(null==h?void 0:h.duration)||0;8&f&&(p=ne(o,2&f?12:8));const g=se(s,["trun"]);let m=c.start||0,y=0,v=p;for(let e=0;e<g.length;e++){const t=g[e],r=ne(t,4),n=c.sampleCount;c.sampleCount+=r;const i=1&t[3],a=4&t[3],s=1&t[2],o=2&t[2],l=4&t[2],u=8&t[2];let d=8,h=r;for(i&&(d+=4),a&&r&&(1&t[d+1]||void 0!==c.keyFrameIndex||(c.keyFrameIndex=n),d+=4,s?(v=ne(t,d),d+=4):v=p,o&&(d+=4),u&&(d+=4),m+=v,y+=v,h--);h--;)s?(v=ne(t,d),d+=4):v=p,o&&(d+=4),l&&(1&t[d+1]||void 0===c.keyFrameIndex&&(c.keyFrameIndex=c.sampleCount-(h+1),c.keyFrameStart=m),d+=4),u&&(d+=4),m+=v,y+=v;!y&&p&&(y+=p*r)}c.duration+=y}if(!Object.keys(i).some(e=>i[e].duration)){let t=1/0,r=0;const a=se(e,["sidx"]);for(let e=0;e<a.length;e++){const n=oe(a[e]);if(null!=n&&n.references){t=Math.min(t,n.earliestPresentationTime/n.timescale);const e=n.references.reduce((e,t)=>e+t.info.duration||0,0);r=Math.max(r,e+n.earliestPresentationTime/n.timescale)}}r&&n(r)&&Object.keys(i).forEach(e=>{i[e].duration||(i[e].duration=r*i[e].timescale-i[e].start)})}return i}(h,p,this),m=p.audio?g[p.audio.id]:null,y=p.video?g[p.video.id]:null,v=Ei(y,1/0),b=Ei(m,1/0),E=Ei(y,0,!0),S=Ei(m,0,!0);let T,w=a,A=0;if(m&&(!y||!u&&b<v||u&&u.trackId===p.audio.id)?(f.trackId=p.audio.id,T=m,A=S-b):y&&(f.trackId=p.video.id,T=y,A=E-v),T){const e=T.timescale;w=T.start/e,f.initPTS=T.start-a*e,f.timescale=e,u||(this.initPTS=u={baseTime:f.initPTS,timescale:e,trackId:f.trackId})}!s&&u||!function(e,t,r,n){if(null===e)return!0;const i=Math.max(n,1),a=t-e.baseTime/e.timescale;return Math.abs(a-r)>i}(u,w,a,A)&&f.timescale===u.timescale||(f.initPTS=w-a,f.timescale=1,u&&1===u.timescale&&this.warn(`Adjusting initPTS @${a} from ${u.baseTime/u.timescale} to ${f.initPTS}`),this.initPTS=u={baseTime:f.initPTS,timescale:1});const k=e?w-u.baseTime/u.timescale:c,x=k+A;A>0?this.lastEndTime=x:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const L=!!p.audio,P=!!p.video;let R="";L&&(R+="audio"),P&&(R+="video");const _={data1:h,startPTS:k,startDTS:k,endPTS:x,endDTS:x,type:R,hasAudio:L,hasVideo:P,nb:1,dropped:0};d.audio=L&&!P?_:void 0,d.video=P?_:void 0;const O=null==y?void 0:y.sampleCount;if(O){const e=y.keyFrameIndex,t=-1!==e;_.nb=O,_.dropped=0===e||this.isVideoContiguous?0:t?e:O,_.independent=t,_.firstKeyFrame=e,t&&y.keyFrameStart&&(_.firstKeyFramePTS=(y.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(d.independent=t),this.isVideoContiguous||(this.isVideoContiguous=t),_.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${e}/${O} dropped: ${_.dropped} start: ${_.firstKeyFramePTS||"NA"}`)}return d.initSegment=f,d.id3=vi(r,a,u,u),i.samples.length&&(d.text=bi(i,a,u)),d}}},{demux:ei,remux:mi},{demux:class extends In{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,r,n){super.resetInitSegment(e,t,r,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const r=fn(e,0);let n=(null==r?void 0:r.length)||0;if(Gn(e,n))return!1;for(let r=e.length;n<r;n++)if(vn(e,n))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&pn(e,t)&&mn(e,t)<=e.length-t}(e,t)}appendFrame(e,t,r){bn(e,this.observer,t,r,e.manifestCodec);const n=Sn(e,t,r,this.basePTS,this.frameIndex);if(n&&0===n.missing)return n}},remux:mi},{demux:class extends In{resetInitSegment(e,t,r,n){super.resetInitSegment(e,t,r,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=fn(e,0);let r=(null==t?void 0:t.length)||0;if(t&&11===e[r]&&119===e[r+1]&&void 0!==Rn(t)&&Hn(e,r)<=16)return!1;for(let t=e.length;r<t;r++)if(Gn(e,r))return P.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return jn(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,r){if(null!==this.basePTS)return Bn(e,t,r,this.basePTS,this.frameIndex)}},remux:mi}];Ti.splice(2,0,{demux:class extends In{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,r,n){super.resetInitSegment(e,t,r,n),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,r){const n=Kn(e,t,r,this.basePTS,this.frameIndex);if(-1!==n)return{sample:e.samples[e.samples.length-1],length:n,missing:0}}static probe(e){if(!e)return!1;const t=fn(e,0);if(!t)return!1;const r=t.length;return 11===e[r]&&119===e[r+1]&&void 0!==Rn(t)&&Hn(e,r)<16}},remux:mi});class wi{constructor(e,t,r,n,i,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.id=i,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,r,n){const i=r.transmuxing;i.executeStart=hi();let a=new Uint8Array(e);const{currentTransmuxState:u,transmuxConfig:c}=this;n&&(this.currentTransmuxState=n);const{contiguous:d,discontinuity:h,trackSwitch:f,accurateTimeOffset:p,timeOffset:g,initSegmentChange:m}=n||u,{audioCodec:y,videoCodec:v,defaultInitPts:b,duration:E,initSegmentData:S}=c,T=function(e,t){let r=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(r=t),r}(a,t);if(T&&Wt(T.method)){const e=this.getDecrypter(),t=Yt(T.method);if(!e.isSync())return this.asyncResult=!0,this.decryptionPromise=e.webCryptoDecrypt(a,T.key.buffer,T.iv.buffer,t).then(e=>{const t=this.push(e,null,r);return this.decryptionPromise=null,t}),this.decryptionPromise;{let n=e.softwareDecrypt(a,T.key.buffer,T.iv.buffer,t);if(r.part>-1){const t=e.flush();n=t?t.buffer:t}if(!n)return i.executeEnd=hi(),Ai(r);a=new Uint8Array(n)}}const w=this.needsProbing(h,f);if(w){const e=this.configureTransmuxer(a);if(e)return this.logger.warn(`[transmuxer] ${e.message}`),this.observer.emit(l.ERROR,l.ERROR,{type:s.MEDIA_ERROR,details:o.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=hi(),Ai(r)}(h||f||m||w)&&this.resetInitSegment(S,y,v,E,t),(h||m||w)&&this.resetInitialTimestamp(b),d||this.resetContiguity();const A=this.transmux(a,T,g,p,r);this.asyncResult=ki(A);const k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,i.executeEnd=hi(),A}flush(e){const t=e.transmuxing;t.executeStart=hi();const{decrypter:r,currentTransmuxState:n,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then(()=>this.flush(e));const a=[],{timeOffset:s}=n;if(r){const t=r.flush();t&&a.push(this.push(t.buffer,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l){t.executeEnd=hi();const r=[Ai(e)];return this.asyncResult?Promise.resolve(r):r}const u=o.flush(s);return ki(u)?(this.asyncResult=!0,u.then(t=>(this.flushRemux(a,t,e),a))):(this.flushRemux(a,u,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,r){const{audioTrack:n,videoTrack:i,id3Track:a,textTrack:s}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===f?"level":"track"} ${r.level}`);const u=this.remuxer.remux(n,i,a,s,l,o,!0,this.id);e.push({remuxResult:u,chunkMeta:r}),r.transmuxing.executeEnd=hi()}resetInitialTimestamp(e){const{demuxer:t,remuxer:r}=this;t&&r&&(t.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,r,n,i){const{demuxer:a,remuxer:s}=this;a&&s&&(a.resetInitSegment(e,t,r,n),s.resetInitSegment(e,t,r,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,r,n,i){let a;return a=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,r,n,i):this.transmuxUnencrypted(e,r,n,i),a}transmuxUnencrypted(e,t,r,n){const{audioTrack:i,videoTrack:a,id3Track:s,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,a,s,o,t,r,!1,this.id),chunkMeta:n}}transmuxSampleAes(e,t,r,n,i){return this.demuxer.demuxSampleAes(e,t,r).then(e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,r,n,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:t,observer:r,typeSupported:n}=this;let i;for(let t=0,r=Ti.length;t<r;t++){var a;if(null!=(a=Ti[t].demux)&&a.probe(e,this.logger)){i=Ti[t];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const s=this.demuxer,o=this.remuxer,l=i.remux,u=i.demux;o&&o instanceof l||(this.remuxer=new l(r,t,n,this.logger)),s&&s instanceof u||(this.demuxer=new u(r,t,n,this.logger),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new kt(this.config)),e}}const Ai=e=>({remuxResult:{},chunkMeta:e});function ki(e){return"then"in e&&e.then instanceof Function}class xi{constructor(e,t,r,n,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=n,this.defaultInitPts=i||null}}class Li{constructor(e,t,r,n,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=n,this.timeOffset=i,this.initSegmentChange=a}}let Pi=0;class Ri{constructor(e,t,r,n){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=Pi++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=e=>{const t=e.data,r=this.hls;if(r&&null!=t&&t.event&&t.instanceNo===this.instanceNo)switch(t.event){case"init":{var n;const e=null==(n=this.workerContext)?void 0:n.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":r.logger[t.data.logType]&&r.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.part=this.part,t.data.id=this.id,r.trigger(t.event,t.data)}},this.onWorkerError=e=>{if(!this.hls)return;const t=new Error(`${e.message}  (${e.filename}:${e.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(l.ERROR,{type:s.OTHER_ERROR,details:o.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})};const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=r,this.onFlush=n;const a=(e,t)=>{(t=t||{}).frag=this.frag||void 0,e===l.ERROR&&(t.parent=this.id,t.part=this.part,this.error=t.error),this.hls.trigger(e,t)};this.observer=new on,this.observer.on(l.FRAG_DECRYPTED,a),this.observer.on(l.ERROR,a);const u=De(i.preferManagedMediaSource);if(this.useWorker&&"undefined"!=typeof Worker){const r=this.hls.logger;if(i.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(r.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=function(e){const t=un[e];if(t)return t.clientCount++,t;const r=new self.URL(e,self.location.href).href,n={worker:new self.Worker(r),scriptURL:r,clientCount:1};return un[e]=n,n}(i.workerPath)):(r.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=un[ln];if(e)return e.clientCount++,e;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),r=self.URL.createObjectURL(t),n={worker:new self.Worker(r),objectURL:r,clientCount:1};return un[ln]=n,n}());const{worker:e}=this.workerContext;e.addEventListener("message",this.onWorkerMessage),e.addEventListener("error",this.onWorkerError),e.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:u,id:t,config:Ye(i)})}catch(n){r.warn(`Error setting up "${t}" Web Worker, fallback to inline`,n),this.terminateWorker(),this.error=null,this.transmuxer=new wi(this.observer,u,i,"",t,e.logger)}return}}this.transmuxer=new wi(this.observer,u,i,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=Pi++;const t=this.hls.config,r=De(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:Ye(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),function(e){const t=un[e||ln];if(t&&1===t.clientCount--){const{worker:r,objectURL:n}=t;delete un[e||ln],n&&self.URL.revokeObjectURL(n),r.terminate()}}(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,r,n,i,a,s,o,l,u){var c,d;l.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:p}=this,g=a?a.start:i.start,m=i.decryptdata,y=this.frag,v=!(y&&i.cc===y.cc),b=!(y&&l.level===y.level),E=y?l.sn-y.sn:-1,S=this.part?l.part-this.part.index:-1,T=0===E&&l.id>1&&l.id===(null==y?void 0:y.stats.chunkCount),w=!b&&(1===E||0===E&&(1===S||T&&S<=0)),A=self.performance.now();(b||E||0===i.stats.parsing.start)&&(i.stats.parsing.start=A),!a||!S&&w||(a.stats.parsing.start=A);const k=!(y&&(null==(c=i.initSegment)?void 0:c.url)===(null==(d=y.initSegment)?void 0:d.url)),x=new Li(v,w,o,b,g,k);if(!w||v||k){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${i.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===f?"level":"track"}: ${l.level} id: ${l.id}\n        discontinuity: ${v}\n        trackSwitch: ${b}\n        contiguous: ${w}\n        accurateTimeOffset: ${o}\n        timeOffset: ${g}\n        initSegmentChange: ${k}`);const e=new xi(r,n,t,s,u);this.configureTransmuxer(e)}if(this.frag=i,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:m,chunkMeta:l,state:x},e instanceof ArrayBuffer?[e]:[]);else if(p){const t=p.push(e,m,l,x);ki(t)?t.then(e=>{this.handleTransmuxComplete(e)}).catch(e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(t)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(r){const t=r.flush(e);ki(t)?t.then(t=>{this.handleFlushResult(t,e)}).catch(t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}):this.handleFlushResult(t,e)}}transmuxerError(e,t,r){this.hls&&(this.error=e,this.hls.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,t){e.forEach(e=>{this.handleTransmuxComplete(e)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class _i extends T{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,r){const n=null==t?void 0:t.renditionReports;if(n){let i=-1;for(let r=0;r<n.length;r++){const a=n[r];let s;try{s=new self.URL(a.URI,t.url).href}catch(e){this.warn(`Could not construct new URL for Rendition Report: ${e}`),s=a.URI||""}if(s===e){i=r;break}s===e.substring(0,s.length)&&(i=r)}if(-1!==i){const e=n[i],a=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let s=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);s>=0&&e>t.partTarget&&(s+=1)}const o=r&&He(r);return new Ke(a,s>=0?s:void 0,o)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}return e}playlistLoaded(e,t,r){const{details:i,stats:a}=t,u=self.performance.now(),c=a.loading.first?Math.max(0,u-a.loading.first):0;i.advancedDateTime=Date.now()-c;const d=this.hls.config.timelineOffset;if(d!==i.appliedTimelineOffset){const e=Math.max(d||0,0);i.appliedTimelineOffset=e,i.fragments.forEach(t=>{t.start=t.playlistOffset+e})}if(i.live||null!=r&&r.live){const d="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(r),r&&i.fragments.length>0){!function(e,t){if(e===t)return;let r=null;const i=e.fragments;for(let e=i.length-1;e>=0;e--){const t=i[e].initSegment;if(t){r=t;break}}let a;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,r){const n=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(n?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let u=i;u<=a;u++){const i=l[s+u];let a=o[u];if(n&&!a&&i&&(a=t.fragments[u]=i),i&&a){if(r(i,a,u,o),i.url&&i.url!==a.url)return void(t.playlistParsingError=Rr(`media sequence mismatch ${a.sn}:`,e,t,0,a));if(i.cc!==a.cc)return void(t.playlistParsingError=Rr(`discontinuity sequence mismatch (${i.cc}!=${a.cc})`,e,t,0,a))}}}(e,t,(e,i,s,o)=>{if((!t.startCC||t.skippedSegments)&&i.cc!==e.cc){const r=e.cc-i.cc;for(let e=s;e<o.length;e++)o[e].cc+=r;t.endCC=o[o.length-1].cc}n(e.startPTS)&&n(e.endPTS)&&(i.setStart(i.startPTS=e.startPTS),i.startDTS=e.startDTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.setDuration(e.endPTS-e.startPTS),i.duration&&(a=i),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(i.elementaryStreams=e.elementaryStreams),i.loader=e.loader,e.hasStats&&(i.stats=e.stats),e.initSegment&&(i.initSegment=e.initSegment,r=e.initSegment)});const s=t.fragments,o=t.fragmentHint?s.concat(t.fragmentHint):s;if(r&&o.forEach(e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=r)?void 0:t.relurl)||(e.initSegment=r)}),t.skippedSegments){if(t.deltaUpdateFailed=s.some(e=>!e),t.deltaUpdateFailed){P.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)s.shift();t.startSN=s[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=function(e,t){const{dateRanges:r,recentlyRemovedDateranges:n}=t,i=b({},e);n&&n.forEach(e=>{delete i[e]});const a=Object.keys(i).length;return a&&Object.keys(r).forEach(e=>{const t=i[e],n=new Kt(r[e].attr,t);n.isValid?(i[e]=n,t||(n.tagOrder+=a)):P.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Ye(r[e].attr)}"`)}),i}(e.dateRanges,t));const r=e.fragments.filter(e=>e.rawProgramDateTime);if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let e=1;e<o.length;e++)null===o[e].programDateTime&&Tr(o[e],o[e-1],r);mr(r,t)}t.endCC=s[s.length-1].cc}if(!t.startCC){var l;const r=Cr(e,t.startSN-1);t.startCC=null!=(l=null==r?void 0:r.cc)?l:s[0].cc}!function(e,t,r){if(e&&t){let n=0;for(let i=0,a=e.length;i<=a;i++){const a=e[i],s=t[i+n];a&&s&&a.index===s.index&&a.fragment.sn===s.fragment.sn?r(a,s):n--}}}(e.partList,t.partList,(e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),a?Pr(t,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS):_r(e,t),s.length&&(t.totalduration=t.edge-s[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const u=t.advancedDateTime;if(t.advanced&&u){const e=t.edge;t.driftStart||(t.driftStartTime=u,t.driftStart=e),t.driftEndTime=u,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}(r,i);const e=i.playlistParsingError;if(e){this.warn(e);const r=this.hls;if(!r.config.ignorePlaylistParsingErrors){var h;const{networkDetails:n}=t;return void r.trigger(l.ERROR,{type:s.NETWORK_ERROR,details:o.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:e,reason:e.message,level:t.level||void 0,parent:null==(h=i.fragments[0])?void 0:h.type,networkDetails:n,stats:a})}i.playlistParsingError=null}}-1===i.requestScheduled&&(i.requestScheduled=a.loading.start);const f=this.hls.mainForwardBufferInfo,p=f?f.end-f.len:0,g=Ir(i,1e3*(i.edge-p));if(i.requestScheduled+g<u?i.requestScheduled=u:i.requestScheduled+=g,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let m,y,v;if(i.canBlockReload&&i.endSN&&i.advanced){const e=this.hls.config.lowLatencyMode,n=i.lastPartSn,a=i.endSN,s=i.lastPartIndex,o=n===a;-1!==s?o?(y=a+1,v=e?0:s):(y=n,v=e?s+1:i.maxPartIndex):y=a+1;const l=i.age,c=l+i.ageHeader;let h=Math.min(c-i.partTarget,1.5*i.targetduration);if(h>0){if(c>3*i.targetduration)this.log(`Playlist last advanced ${l.toFixed(2)}s ago. Omitting segment and part directives.`),y=void 0,v=void 0;else if(null!=r&&r.tuneInGoal&&c-i.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${h} with playlist age: ${i.age}`),h=0;else{const e=Math.floor(h/i.targetduration);y+=e,void 0!==v&&(v+=Math.round(h%i.targetduration/i.partTarget)),this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${l.toFixed(2)}s goal: ${h} skip sn ${e} to part ${v}`)}i.tuneInGoal=h}if(m=this.getDeliveryDirectives(i,t.deliveryDirectives,y,v),e||!o)return i.requestScheduled=u,void this.loadingPlaylist(d,m)}else(i.canBlockReload||i.canSkipUntil)&&(m=this.getDeliveryDirectives(i,t.deliveryDirectives,y,v));m&&void 0!==y&&i.canBlockReload&&(i.requestScheduled=a.loading.first+Math.max(g-2*c,g/2)),this.scheduleLoading(d,m,i)}else this.clearTimer()}scheduleLoading(e,t,r){const n=r||e.details;if(!n)return void this.loadingPlaylist(e,t);const i=self.performance.now(),a=n.requestScheduled;if(i>=a)return void this.loadingPlaylist(e,t);const s=a-i;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(s)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),s)}getDeliveryDirectives(e,t,r,n){let i=He(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,n=t.part,i=""),new Ke(r,n,i)}checkRetry(e){const t=e.details,r=lt(e),n=e.errorAction,{action:i,retryCount:a=0,retryConfig:s}=n||{},o=!!n&&!!s&&(5===i||!n.resolved&&2===i);if(o){var l;if(a>=s.maxNumRetry)return!1;if(r&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${s.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=ct(s,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),e),this.warn(`Retrying playlist loading ${a+1}/${s.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,n.resolved=!0}return o}}function Oi(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ii(e[r].attrs,t[r].attrs))return!1;return!0}function Ii(e,t,r){const n=e["STABLE-RENDITION-ID"];return n&&!r?n===t["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>e[r]!==t[r])}function Ci(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class Di{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,r){if(null===this.queues||null===this.tracks)return;const n=this.queues[t];n.push(e),1!==n.length||r||this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const r={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const r={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const r=null==(t=e[0])?void 0:t.label;"async-blocker"!==r&&"async-blocker-prepend"!==r||(e[0].execute(),e.splice(0,1))})}unblockAudio(e){null!==this.queues&&this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(null===this.queues||null===this.tracks)return;const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(t){var r;if(n.onError(t),null===this.queues||null===this.tracks)return;const i=null==(r=this.tracks[e])?void 0:r.buffer;null!=i&&i.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return null===e||null===t?"<destroyed>":`\n${this.list("video")}\n${this.list("audio")}\n${this.list("audiovideo")}}`}list(e){var t,r;return null!=(t=this.queues)&&t[e]||null!=(r=this.tracks)&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const r=null==(t=this.tracks)?void 0:t[e],n=null==r?void 0:r.buffer;return n?`SourceBuffer${n.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var t;return(null==(t=this.queues)?void 0:t[e].map(e=>e.label).join(", "))||""}}const Mi=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,Ni="HlsJsTrackRemovedError";class Fi extends Error{constructor(e){super(e),this.name=Ni}}function Ui(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach(t=>{e.removeChild(t)})}function Bi(e){return"audio"===e?1:0}class $i{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(l.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(l.MANIFEST_PARSED,this.onManifestParsed,this),e.on(l.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(l.BUFFER_CODECS,this.onBufferCodecs,this),e.on(l.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(l.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(l.MANIFEST_PARSED,this.onManifestParsed,this),e.off(l.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(l.BUFFER_CODECS,this.onBufferCodecs,this),e.off(l.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&n(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=r,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const r=t.filter((t,r)=>this.isLevelAllowed(t)&&r<=e);return this.clientRect=null,$i.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height)}static getMaxLevelByMediaSize(e,t,r){if(null==e||!e.length)return-1;const n=(e,t)=>!t||e.width!==t.width||e.height!==t.height;let i=e.length-1;const a=Math.max(t,r);for(let t=0;t<e.length;t+=1){const r=e[t];if((r.width>=a||r.height>=a)&&n(r,e[t+1])){i=t;break}}return i}}const ji="m",zi="a",Gi="v",Hi="av",Ki="i",Vi="tt",Wi="h",Yi="CMCD-Object",qi="CMCD-Request",Xi="CMCD-Session",Qi="CMCD-Status",Zi={[Yi]:["br","ab","d","ot","tb","tpb","lb","tab","lab","url"],[qi]:["pb","bl","tbl","dl","ltc","mtp","nor","nrr","rc","sn","sta","su","ttfb","ttfbb","ttlb","cmsdd","cmsds","smrt","df","cs"],[Xi]:["cid","pr","sf","sid","st","v","msd"],[Qi]:["bs","bsd","cdn","rtp","bg","pt","ec","e"]};class Ji{constructor(e,t){Array.isArray(e)&&(e=e.map(e=>e instanceof Ji?e:new Ji(e))),this.value=e,this.params=t}}function ea(e,t,r){return function(e,t,r,n){return new Error(`failed to ${e} "${i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"==typeof i?JSON.stringify(i):String(i)}" as ${r}`,{cause:n});var i}("serialize",e,t,r)}class ta{constructor(e){this.description=e}}const ra="Bare Item";function na(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw ea(e,"Integer");return e.toString()}function ia(e,t){if(e<0)return-ia(-e,t);const r=Math.pow(10,t);if(Math.abs(e*r%1-.5)<Number.EPSILON){const t=Math.floor(e*r);return(t%2==0?t:t+1)/r}return Math.round(e*r)/r}function aa(e){const t=ia(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw ea(e,"Decimal");const r=t.toString();return r.includes(".")?r:`${r}.0`}const sa=/[\x00-\x1f\x7f]+/;function oa(e){const t=(r=e).description||r.toString().slice(7,-1);var r;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw ea(t,"Token");return t}function la(e){switch(typeof e){case"number":if(!n(e))throw ea(e,ra);return Number.isInteger(e)?na(e):aa(e);case"string":return function(e){if(sa.test(e))throw ea(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return oa(e);case"boolean":return function(e){if("boolean"!=typeof e)throw ea(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${na(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return function(e){if(!1===ArrayBuffer.isView(e))throw ea(e,"Byte Sequence");return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}(e);if(e instanceof ta)return oa(e);default:throw ea(e,ra)}}function ua(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw ea(e,"Key");return e}function ca(e){return null==e?"":Object.entries(e).map(([e,t])=>!0===t?`;${ua(e)}`:`;${ua(e)}=${la(t)}`).join("")}function da(e){return e instanceof Ji?`${la(e.value)}${ca(e.params)}`:la(e)}const ha=e=>Math.round(e),fa=e=>100*ha(e/100),pa={br:ha,d:ha,bl:fa,dl:fa,mtp:fa,nor:(e,t)=>((null==t?void 0:t.baseUrl)&&(e=function(e,t){const r=new URL(e),n=new URL(t);if(r.origin!==n.origin)return e;const i=r.pathname.split("/").slice(1),a=n.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:fa,tb:ha};function ga(e,t={}){return e?function(e,t){return function(e,t={whitespace:!0}){if("object"!=typeof e)throw ea(e,"Dict");const r=e instanceof Map?e.entries():Object.entries(e),n=(null==t?void 0:t.whitespace)?" ":"";return Array.from(r).map(([e,t])=>{t instanceof Ji==0&&(t=new Ji(t));let r=ua(e);var n;return!0===t.value?r+=ca(t.params):(r+="=",Array.isArray(t.value)?r+=`(${(n=t).value.map(da).join(" ")})${ca(n.params)}`:r+=da(t)),r}).join(`,${n}`)}(e,t)}(function(e,t){const r={};if(null==e||"object"!=typeof e)return r;const i=Object.keys(e).sort(),a=b({},pa,null==t?void 0:t.formatters),s=null==t?void 0:t.filter;return i.forEach(i=>{if(!1===(null==s?void 0:s(i)))return;let o=e[i];const l=a[i];l&&(o=l(o,t)),"v"===i&&1===o||"pr"==i&&1===o||function(e){return"number"==typeof e?n(e):null!=e&&""!==e&&!1!==e}(o)&&(function(e){return["ot","sf","st","e","sta"].includes(e)}(i)&&"string"==typeof o&&(o=new ta(o)),r[i]=o)}),r}(e,t),b({whitespace:!1},t)):""}const ma=/CMCD=[^&#]+/;function ya(e,t,r,n){e&&Object.keys(t).forEach(i=>{const a=e.filter(e=>e.groupId===i).map(e=>{const a=b({},e);return a.details=void 0,a.attrs=new zt(a.attrs),a.url=a.attrs.URI=va(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),a.groupId=a.attrs["GROUP-ID"]=t[i],a.attrs["PATHWAY-ID"]=n,a});e.push(...a)})}function va(e,t,r,n){const{HOST:i,PARAMS:a,[r]:s}=n;let o;t&&(o=null==s?void 0:s[t],o&&(e=o));const l=new self.URL(e);return i&&!o&&(l.host=i),a&&Object.keys(a).sort().forEach(e=>{e&&l.searchParams.set(e,a[e])}),l.href}function ba(e,t,r){Ea(e,t,r),e.addEventListener(t,r)}function Ea(e,t,r){e.removeEventListener(t,r)}class Sa extends T{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Sa.CDMCleanupPromise?[Sa.CDMCleanupPromise]:[],this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(l.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(l.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(l.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(l.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(l.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(l.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(l.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(l.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(l.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(l.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:r}=this.config,n=t[e];return n?n.licenseUrl:e===Zt.WIDEVINE&&r?r:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,r=t[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,r=(e,t,r)=>!!e&&r.indexOf(e)===t,n=t.map(e=>e.audioCodec).filter(r),i=t.map(e=>e.videoCodec).filter(r);return n.length+i.length===0&&i.push("avc1.42e01e"),new Promise((t,r)=>{const a=e=>{const l=e.shift();this.getMediaKeysPromise(l,n,i).then(e=>t({keySystem:l,mediaKeys:e})).catch(t=>{e.length?a(e):r(t instanceof Ta?t:new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})};a(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:r}=this.config;if("function"!=typeof r){let e=`Configured requestMediaKeySystemAccess is not a function ${r}`;return null===sr&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return r(e,t)}getMediaKeysPromise(e,t,r){const n=function(e,t,r,n){let i;switch(e){case Zt.FAIRPLAY:i=["cenc","sinf"];break;case Zt.WIDEVINE:case Zt.PLAYREADY:i=["cenc"];break;case Zt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,r,n){return[{initDataTypes:e,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:t.map(e=>({contentType:`audio/mp4; codecs=${e}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:r.map(e=>({contentType:`video/mp4; codecs=${e}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}(i,t,r,n)}(e,t,r,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let a=null==i?void 0:i.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Ye(n)}`),a=this.requestMediaKeySystemAccess(e,n);const t=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)}),a.then(r=>{this.log(`Access for key-system "${r.keySystem}" obtained`);const n=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=r.createMediaKeys().then(r=>(this.log(`Media-keys created for "${e}"`),t.hasMediaKeys=!0,n.then(t=>t?this.setMediaKeysServerCertificate(r,e,t):r))),t.mediaKeys.catch(t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)}),t.mediaKeys})}return a.then(()=>i.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:r}){this.log(`Creating key-system session "${t}" keyId: ${I(e.keyId||[])}`);const n=r.createSession(),i={decryptdata:e,keySystem:t,mediaKeys:r,mediaKeysSession:n,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const r=this.createMediaKeySessionContext(e),n=this.getKeyIdString(t),i="cenc";this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(r,i,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return I(e.keyId)}updateKeySession(e,t){var r;const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyID ${I((null==(r=e.decryptdata)?void 0:r.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>ir(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:e,mediaKeys:t})=>this.attemptSetMediaKeys(e,t))}selectKeySystem(e){return new Promise((t,r)=>this.getKeySystemSelectionPromise(e).then(({keySystem:e})=>{const n=ir(e);n?t(n):r(new Error(`Unable to find format for key-system "${e}"`))}).catch(r))}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=ar(this.config),r=e.map(nr).filter(e=>!!e&&-1!==t.indexOf(e));return this.selectKeySystem(r)}loadKey(e){const t=e.keyInfo.decryptdata,r=this.getKeyIdString(t),n=`(keyId: ${r} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${n}`);let i=this.keyIdToKeySessionPromise[r];return i||(i=this.getKeySystemForKeyPromise(t).then(({keySystem:r,mediaKeys:i})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${n}`),this.attemptSetMediaKeys(r,i).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:r,mediaKeys:i,decryptdata:t}))))),(this.keyIdToKeySessionPromise[r]=i.then(e=>{const r=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(e,"cenc",r,"playlist-key")})).catch(e=>this.handleError(e))),i}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Ta?this.hls.trigger(l.ERROR,e.data):this.hls.trigger(l.ERROR,{type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){const t=nr(e.keyFormat),r=t?[t]:ar(this.config);return this.attemptKeySystemAccess(r)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=ar(this.config)),0===e.length)throw new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Ye({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const n=Promise.all(r).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(n),n.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(n),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(e=>-1===r.indexOf(e))})}generateRequestWithPreferredKeySession(e,t,r,n){var i,a;const l=null==(i=this.config.drmSystems)||null==(a=i[e.keySystem])?void 0:a.generateRequest;if(l)try{const n=l.call(this.hls,t,r,e);if(!n)throw new Error("Invalid response from configured generateRequest filter");t=n.initDataType,r=n.initData?n.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(e){var u;if(this.warn(e.message),null!=(u=this.hls)&&u.config.debug)throw e}if(null===r)return this.log(`Skipping key-session request for "${n}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${n}": ${c} (init data type: ${t} length: ${r?r.byteLength:null})`);const d=new on,h=e._onmessage=t=>{const r=e.mediaKeysSession;if(!r)return void d.emit("error",new Error("invalid state"));const{messageType:n,message:i}=t;this.log(`"${n}" message event for session "${r.sessionId}" message size: ${i.byteLength}`),"license-request"===n||"license-renewal"===n?this.renewLicense(e,i).catch(e=>{d.eventNames().length?d.emit("error",e):this.handleError(e)}):"license-release"===n?e.keySystem===Zt.FAIRPLAY&&(this.updateKeySession(e,Xt("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${n}"`)},f=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void d.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const r=e.keyStatus;d.emit("keyStatus",r),"expired"===r&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};ba(e.mediaKeysSession,"message",h),ba(e.mediaKeysSession,"keystatuseschange",f);const p=new Promise((e,t)=>{d.on("error",t),d.on("keyStatus",r=>{r.startsWith("usable")?e():"output-restricted"===r?t(new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?t(new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${r}"`)):"expired"===r?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${r}"`)})});return e.mediaKeysSession.generateRequest(t,r).then(()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${c}`)}).catch(e=>{throw new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)}).then(()=>p).catch(t=>{throw d.removeAllListeners(),this.removeSession(e),t}).then(()=>(d.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,r)=>{if("string"==typeof r&&"object"==typeof t){const e=r;r=t,t=e}this.log(`key status change "${t}" for keyStatuses keyId: ${I("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${I(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,r=new(0,t.loader)(t),n=this.getServerCertificateUrl(e);return n?(this.log(`Fetching server certificate for "${e}"`),new Promise((i,a)=>{const l={responseType:"arraybuffer",url:n},u=t.certLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(e,t,r,n)=>{i(e.data)},onError:(t,r,i,u)=>{a(new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:S({url:l.url,data:void 0},t)},`"${e}" certificate request failed (${n}). Status: ${t.code} (${t.text})`))},onTimeout:(t,r,i)=>{a(new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${n})`))},onAbort:(e,t,r)=>{a(new Error("aborted"))}};r.load(l,c,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,r){return new Promise((n,i)=>{e.setServerCertificate(r).then(i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${null==r?void 0:r.byteLength}) on "${t}"`),n(e)}).catch(e=>{i(new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(t=>this.updateKeySession(e,new Uint8Array(t)).catch(e=>{throw new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}unpackPlayReadyKeyMessage(e,t){const r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const n=(new DOMParser).parseFromString(r,"application/xml"),i=n.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let r=0,n=i.length;r<n;r++){var a,s;t=i[r];const n=null==(a=t.querySelector("name"))?void 0:a.textContent,o=null==(s=t.querySelector("value"))?void 0:s.textContent;n&&o&&e.setRequestHeader(n,o)}}const o=n.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return Xt(atob(l))}setupLicenseXHR(e,t,r,n){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,r,n)}).catch(a=>{if(!r.decryptdata)throw a;return e.open("POST",t,!0),i.call(this.hls,e,t,r,n)}).then(r=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:r||n})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:n}))}requestLicense(e,t){const r=this.config.keyLoadPolicy.default;return new Promise((n,i)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const l=new XMLHttpRequest;l.responseType="arraybuffer",l.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===l.readyState)if(200===l.status){this._requestLicenseFailureCount=0;let t=l.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const r=this.config.licenseResponseCallback;if(r)try{t=r.call(this.hls,l,a,e)}catch(e){this.error(e)}n(t)}else{const u=r.errorRetry,c=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||l.status>=400&&l.status<500)i(new Ta({type:s.KEY_SYSTEM_ERROR,details:o.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:l,response:{url:a,data:void 0,code:l.status,text:l.statusText}},`License Request XHR failed (${a}). Status: ${l.status} (${l.statusText})`));else{const r=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${r} attempts left`),this.requestLicense(e,t).then(n,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=l,this.setupLicenseXHR(l,a,e,t).then(({xhr:t,licenseChallenge:r})=>{e.keySystem==Zt.PLAYREADY&&(r=this.unpackPlayReadyKeyMessage(t,r)),t.send(r)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const r=t.media;this.media=r,ba(r,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Ea(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,ur.clearKeyUriToKeyIdMap();const n=r.length;Sa.CDMCleanupPromise=Promise.all(r.map(e=>this.removeSession(e)).concat(null==t||null==(e=t.setMediaKeys(null))?void 0:e.catch(e=>{var t;this.log(`Could not clear media keys: ${e}`),null==(t=this.hls)||t.trigger(l.ERROR,{type:s.OTHER_ERROR,details:o.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${e}`)})}))).catch(e=>{var t;this.log(`Could not close sessions and clear media keys: ${e}`),null==(t=this.hls)||t.trigger(l.ERROR,{type:s.OTHER_ERROR,details:o.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${e}`)})}).then(()=>{n&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:r}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const n=this.mediaKeySessions.indexOf(e);n>-1&&this.mediaKeySessions.splice(n,1);const{drmSystemOptions:i}=this.config,a=function(e){var t;return"persistent-license"===e.sessionType||!(null==(t=e.sessionTypes)||!t.some(e=>"persistent-license"===e))}(i)?new Promise((e,r)=>{self.setTimeout(()=>r(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(e)}):Promise.resolve();return a.catch(e=>{var t;this.log(`Could not remove session: ${e}`),null==(t=this.hls)||t.trigger(l.ERROR,{type:s.OTHER_ERROR,details:o.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${e}`)})}).then(()=>t.close()).catch(e=>{var t;this.log(`Could not close session: ${e}`),null==(t=this.hls)||t.trigger(l.ERROR,{type:s.OTHER_ERROR,details:o.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${e}`)})})}}}Sa.CDMCleanupPromise=void 0;class Ta extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function wa(e,t){let r;try{r=new Event("addtrack")}catch(e){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function Aa(e,t){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(r){P.debug(`[texttrack-utils]: ${r}`);try{const r=new self.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,e.addCue(r)}catch(e){P.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${e}`)}}"disabled"===r&&(e.mode=r)}function ka(e,t){const r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues)for(let r=e.cues.length;r--;)t&&e.cues[r].removeEventListener("enter",t),e.removeCue(e.cues[r]);"disabled"===r&&(e.mode=r)}function xa(e,t,r,n){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,r){const n=[],i=function(e,t){if(t<=e[0].startTime)return 0;const r=e.length-1;if(t>e[r].endTime)return-1;let n,i=0,a=r;for(;i<=a;)if(n=Math.floor((a+i)/2),t<e[n].startTime)a=n-1;else{if(!(t>e[n].startTime&&i<r))return n;i=n+1}return e[i].startTime-t<t-e[a].startTime?i:a}(e,t);if(i>-1)for(let a=i,s=e.length;a<s;a++){const i=e[a];if(i.startTime>=t&&i.endTime<=r)n.push(i);else if(i.startTime>r)return n}return n}(e.cues,t,r);for(let t=0;t<i.length;t++)n&&!n(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function La(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];"subtitles"!==n.kind&&"captions"!==n.kind||!n.label||t.push(e[r])}return t}function Pa(e){let t=5381,r=e.length;for(;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}const Ra=.025;let _a=function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e}({});function Oa(e,t,r){return`${e.identifier}-${r+1}-${Pa(t)}`}class Ia{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return!(e<=0||isNaN(r))&&(0===r||((null==(t=this.assetList[e])?void 0:t.startOffset)||0)>r)}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Ca(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(0===this.startTime||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime;return t-Ca(t,e)<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=n(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Ca(e,t)}return e}get appendInPlace(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Ra))}set appendInPlace(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}get timelineStart(){return null!==this._timelineStart?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return t=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?_a.Range:_a.Point}get supplementsPrimary(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}get contentMayVary(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||null!==this.assetListResponse}toString(){return`["${(e=this).identifier}" ${e.cue.pre?"<pre>":e.cue.post?"<post>":""}${e.timelineStart.toFixed(2)}-${e.resumeTime.toFixed(2)}]`;var e}}function Ca(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<Ra)?t.start:t.start+t.duration}function Da(e,t,r){const n=new self.URL(e,r);return"data:"!==n.protocol&&n.searchParams.set("_HLS_primary_id",t),n}function Ma(e,t){for(;null!=(r=e.assetList[++t])&&r.error;)var r;return t}function Na(e){const t=e.timelineStart,r=e.duration||0;return`["${e.identifier}" ${t.toFixed(2)}-${(t+r).toFixed(2)}]`}class Fa{constructor(e,t,r,n){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(l.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(t);this.interstitial=r,this.assetItem=n;let a=n.uri;try{a=Da(a,t.primarySessionId).href}catch(e){}i.loadSource(a);const s=()=>{this.hasDetails=!0};i.once(l.LEVEL_LOADED,s),i.once(l.AUDIO_TRACK_LOADED,s),i.once(l.SUBTITLE_TRACK_LOADED,s),i.on(l.MEDIA_ATTACHING,(e,{media:t})=>{this.removeMediaListeners(),this.mediaAttached=t,this.interstitial.playoutLimit&&(t.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on(l.BUFFER_APPENDED,()=>{const e=this.bufferedEnd;this.reachedPlayout(e)&&(this._bufferedEosTime=e,i.trigger(l.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var e;return(null==(e=this.interstitial)?void 0:e.appendInPlace)||!1}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const r=this.timelineOffset,n=Dt.bufferInfo(e,r,0);return this.getAssetTime(n.end)>=this._bufferedEosTime-.02}reachedPlayout(e){const t=this.interstitial.playoutLimit;return this.startOffset+e>=t}get destroyed(){var e;return!(null!=(e=this.hls)&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return(null==(e=this.hls)?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=Dt.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){return this.assetItem.duration||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const r=e-t;if(Math.abs(r)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-t),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){var e;this.mediaAttached&&null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const e=this.hls;if(this.hasDetails){e.stopLoad();const t=e=>delete e.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,r){this.hls.on(e,t)}once(e,t,r){this.hls.once(e,t)}off(e,t,r){this.hls.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${Na(this.assetItem)} ${null==(e=this.hls)?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}class Ua extends T{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((r,n)=>e<=n.startOffset&&t>n.startOffset?(delete n.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const n=this.items;if(n)for(n[r]||(void 0===t&&(t=e.start),r=this.findItemIndexAtTime(t));r>=0&&null!=(i=n[r])&&i.event;){var i;r--}return r}findItemIndexAtTime(e,t){const r=this.items;if(r)for(let n=0;n<r.length;n++){let i=r[n];if(t&&"primary"!==t&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return n}return-1}findJumpRestrictedIndex(e,t){const r=this.items;if(r)for(let n=e;n<=t&&r[n];n++){const e=r[n].event;if(null!=e&&e.restrictions.jump&&!e.appendInPlace)return n}return-1}findEventIndex(e){const t=this.items;if(t)for(let n=t.length;n--;){var r;if((null==(r=t[n].event)?void 0:r.identifier)===e)return n}return-1}findAssetIndex(e,t){const r=e.assetList,n=r.length;if(n>1)for(let e=0;e<n;e++){const n=r[e];if(!n.error){const r=n.timelineStart;if(t===r||t>r&&t<r+(n.duration||0))return e}}return 0}get assetIdAtEnd(){var e,t;const r=null==(e=this.items)||null==(t=e[this.length-1])?void 0:t.event;if(r){const e=r.assetList,t=e[e.length-1];if(t)return t.identifier}return null}parseInterstitialDateRanges(e,t){const r=e.main.details,{dateRanges:n}=r,i=this.events,a=this.parseDateRanges(n,{url:r.url},t),s=Object.keys(n),o=i?i.filter(e=>!s.includes(e.identifier)):[];a.length&&a.sort((e,t)=>{const r=e.cue.pre,n=e.cue.post,i=t.cue.pre,a=t.cue.post;if(r&&!i)return-1;if(i&&!r)return 1;if(n&&!a)return 1;if(a&&!n)return-1;if(!(r||i||n||a)){const r=e.startTime,n=t.startTime;if(r!==n)return r-n}return e.dateRange.tagOrder-t.dateRange.tagOrder}),this.events=a,o.forEach(e=>{this.removeEvent(e)}),this.updateSchedule(e,o)}updateSchedule(e,t=[]){const r=this.events||[];if(r.length||t.length||this.length<2){const n=this.items,i=this.parseSchedule(r,e);(t.length||(null==n?void 0:n.length)!==i.length||i.some((e,t)=>Math.abs(e.playout.start-n[t].playout.start)>.005||Math.abs(e.playout.end-n[t].playout.end)>.005))&&(this.items=i,this.onScheduleUpdate(t,n))}}parseDateRanges(e,t,r){const n=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const s=i[a],o=e[s];if(o.isInterstitial){let e=this.eventMap[s];e?e.setDateRange(o):(e=new Ia(o,t),this.eventMap[s]=e,!1===r&&(e.appendInPlace=r)),n.push(e)}}return n}parseSchedule(e,t){const r=[],n=t.main.details,i=n.live?1/0:n.edge;let a=0;if((e=e.filter(e=>!(e.error||e.cue.once&&e.hasPlayed))).length){this.resolveOffsets(e,t);let n=0,o=0;if(e.forEach((t,s)=>{const l=t.cue.pre,u=t.cue.post,c=e[s-1]||null,d=t.appendInPlace,h=u?i:t.startOffset,f=t.duration,p=t.timelineOccupancy===_a.Range?f:0,g=t.resumptionOffset,m=(null==c?void 0:c.startTime)===h,y=h+t.cumulativeDuration;let v=d?y+f:h+g;if(l||!u&&h<=0){const e=o;o+=p,t.timelineStart=y;const n=a;a+=f,r.push({event:t,start:y,end:v,playout:{start:n,end:a},integrated:{start:e,end:o}})}else{if(!(h<=i))return;{if(!m){const i=h-n;if(i>.033){const l=n,u=o;o+=i;const c=a;a+=i;const d={previousEvent:e[s-1]||null,nextEvent:t,start:l,end:l+i,playout:{start:c,end:a},integrated:{start:u,end:o}};r.push(d)}else i>0&&c&&(c.cumulativeDuration+=i,r[r.length-1].end=h)}u&&(v=y),t.timelineStart=y;const i=o;o+=p;const l=a;a+=f,r.push({event:t,start:y,end:v,playout:{start:l,end:a},integrated:{start:i,end:o}})}}const b=t.resumeTime;n=u||b>i?i:b}),n<i){var s;const e=n,t=o,l=i-n;o+=l;const u=a;a+=l,r.push({previousEvent:(null==(s=r[r.length-1])?void 0:s.event)||null,nextEvent:null,start:n,end:e+l,playout:{start:u,end:a},integrated:{start:t,end:o}})}this.setDurations(i,a,o)}else{const e=0;r.push({previousEvent:null,nextEvent:null,start:e,end:i,playout:{start:e,end:i},integrated:{start:e,end:i}}),this.setDurations(i,i,i)}return r}setDurations(e,t,r){this.durations={primary:e,playout:t,integrated:r}}resolveOffsets(e,t){const r=t.main.details,i=r.live?1/0:r.edge;let a=0,s=-1;e.forEach((o,l)=>{const u=o.cue.pre,c=o.cue.post,d=u?0:c?i:o.startTime;this.updateAssetDurations(o),s===d?o.cumulativeDuration=a:(a=0,s=d),!c&&o.snapOptions.in&&(o.resumeAnchor=it(null,r.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<.033&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const h=n(o.resumeOffset)?o.resumeOffset:o.duration;a+=h})}primaryCanResumeInPlaceAt(e,t){const r=e.resumeTime,n=e.startTime+e.resumptionOffset;return Math.abs(r-n)>Ra?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${n}`),!1):t?!Object.keys(t).some(n=>{const i=t[n].details,a=i.edge;if(r>=a)return this.log(`"${e.identifier}" resumption ${r} past ${n} playlist end ${a}`),!1;const s=it(null,i.fragments,r);if(!s)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${n} playlist (${i.fragStart}-${i.fragmentEnd})`),!0;const o="audio"===n?.175:0;return!(Math.abs(s.start-r)<Ra+o||Math.abs(s.end-r)<Ra+o||(this.log(`"${e.identifier}" resumption ${r} not aligned with ${n} fragment bounds (${s.start}-${s.end} sn: ${s.sn} cc: ${s.cc})`),0))}):(this.log(`"${e.identifier}" resumption ${r} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let r=0,n=!1,i=!1;e.assetList.forEach((e,a)=>{const s=t+r;e.startOffset=r,e.timelineStart=s,n||(n=null===e.duration),i||(i=!!e.error);const o=e.error?0:e.duration||0;r+=o}),e.duration=n&&!i?Math.max(r,e.duration):r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Ba(e){return`[${e.event?'"'+e.event.identifier+'"':"primary"}: ${e.start.toFixed(2)}-${e.end.toFixed(2)}]`}class $a{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const r=e.assetListUrl;let n;try{n=Da(r,this.hls.sessionId,e.baseUrl)}catch(t){const n=this.assignAssetListError(e,o.ASSET_LIST_LOAD_ERROR,t,r);return void this.hls.trigger(l.ERROR,n)}t&&"data:"!==n.protocol&&n.searchParams.set("_HLS_start_offset",""+t);const i=this.hls.config,a=new(0,i.loader)(i),s={responseType:"json",url:n.href},u=i.interstitialAssetListLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(t,r,n,i)=>{const a=t.data,s=null==a?void 0:a.ASSETS;if(!Array.isArray(s)){const t=this.assignAssetListError(e,o.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),n.url,r,i);return void this.hls.trigger(l.ERROR,t)}e.assetListResponse=a,this.hls.trigger(l.ASSET_LIST_LOADED,{event:e,assetListResponse:a,networkDetails:i})},onError:(t,r,n,i)=>{const a=this.assignAssetListError(e,o.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${t.code} ${t.text} (${r.url})`),r.url,i,n);this.hls.trigger(l.ERROR,a)},onTimeout:(t,r,n)=>{const i=this.assignAssetListError(e,o.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${r.url})`),r.url,t,n);this.hls.trigger(l.ERROR,i)}};return a.load(s,c,d),this.hls.trigger(l.ASSET_LIST_LOADING,{event:e}),a}assignAssetListError(e,t,r,n,i,a){return e.error=r,{type:s.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:n,error:r,networkDetails:a,stats:i}}}function ja(e){null==e||e.play().catch(()=>{})}class za{constructor(e){this.buffered=void 0;const t=(t,r,n)=>{if((r>>>=0)>n-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${n})`);return e[r][t]};this.buffered={get length(){return e.length},end:r=>t("end",r,e.length),start:r=>t("start",r,e.length)}}}const Ga={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ha=e=>String.fromCharCode(Ga[e]||e),Ka=15,Va=100,Wa={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ya={17:2,18:4,21:6,22:8,23:10,19:13,20:15},qa={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Xa={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Qa=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Za{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const r="function"==typeof t?t():t;P.log(`${this.time} [${e}] ${r}`)}}}const Ja=function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t};class es{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){const n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class ts{constructor(){this.uchar=" ",this.penState=new es}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class rs{constructor(e){this.chars=[],this.pos=0,this.currPenState=new es,this.cueStartTime=null,this.logger=void 0;for(let e=0;e<Va;e++)this.chars.push(new ts);this.logger=e}equals(e){for(let t=0;t<Va;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Va;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Va;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Va&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Va)}moveCursor(e){const t=this.pos+e;if(e>1)for(let e=this.pos+1;e<t+1;e++)this.chars[e].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Ha(e);this.pos>=Va?this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<Va;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let r=0;r<Va;r++){const n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class ns{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Ka;t++)this.rows.push(new rs(e));this.logger=e}reset(){for(let e=0;e<Ka;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let r=0;r<Ka;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}copy(e){for(let t=0;t<Ka;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Ka;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Ye(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let e=0;e<Ka;e++)this.rows[e].clear();const e=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){const n=r.rows[e].cueStartTime,i=this.logger.time;if(null!==n&&null!==i&&n<i)for(let n=0;n<this.nrRollUpRows;n++)this.rows[t-this.nrRollUpRows+n+1].copy(r.rows[e+n])}}this.currRow=t;const r=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,n=Math.max(t-1,0);r.setCursor(e.indent),e.color=r.chars[n].penState.foreground}const n={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(n)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Ye(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let r="",n=-1;for(let r=0;r<Ka;r++){const i=this.rows[r].getTextString();i&&(n=r+1,e?t.push("Row "+n+": '"+i+"'"):t.push(i.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r}getTextAndFormat(){return this.rows}}class is{constructor(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new ns(r),this.nonDisplayedMemory=new ns(r),this.lastOutputScreen=new ns(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}this.logger.log(2,"MIDROW: "+Ye(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class as{constructor(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const n=this.logger=new Za;this.channels=[null,new is(e,t,n),new is(e+1,r,n)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let e=0;e<t.length;e+=2){const r=127&t[e],n=127&t[e+1];let i=!1,a=null;if(0===r&&0===n)continue;this.logger.log(3,()=>"["+Ja([t[e],t[e+1]])+"] -> ("+Ja([r,n])+")");const s=this.cmdHistory;if(r>=16&&r<=31){if(os(r,n,s)){ss(null,null,s),this.logger.log(3,()=>"Repeated command ("+Ja([r,n])+") is dropped");continue}ss(r,n,this.cmdHistory),i=this.parseCmd(r,n),i||(i=this.parseMidrow(r,n)),i||(i=this.parsePAC(r,n)),i||(i=this.parseBackgroundAttributes(r,n))}else ss(null,null,s);if(!i&&(a=this.parseChars(r,n),a)){const e=this.currentChannel;e&&e>0?this.channels[e].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||a||this.logger.log(2,()=>"Couldn't parse cleaned data "+Ja([r,n])+" orig: "+Ja([t[e],t[e+1]]))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;const r=20===e||21===e||23===e?1:2,n=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let r=0;if((17===e||25===e)&&t>=32&&t<=47){if(r=17===e?1:2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const n=this.channels[r];return!!n&&(n.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Ja([e,t])+")"),!0)}return!1}parsePAC(e,t){let r;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;const n=e<=23?1:2;r=t>=64&&t<=95?1===n?Wa[e]:qa[e]:1===n?Ya[e]:Xa[e];const i=this.channels[n];return!!i&&(i.setPAC(this.interpretPAC(r,t)),this.currentChannel=n,!0)}interpretPAC(e,t){let r;const n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=!(1&~r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n}parseChars(e,t){let r,n=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,()=>"Special char '"+Ha(e)+"' in channel "+r),n=[e]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);return n&&this.logger.log(3,()=>"Char codes =  "+Ja(n).join(",")),n}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;let r;const n={};16===e||24===e?(r=Math.floor((t-32)/2),n.background=Qa[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(n),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}ss(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const r=this.channels[t];r&&r.cueSplitAtTime(e)}}}function ss(e,t,r){r.a=e,r.b=t}function os(e,t,r){return r.a===e&&r.b===t}var ls=function(){if(null!=Qt&&Qt.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function r(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const r=t.toLowerCase();return!!~e.indexOf(r)&&r}function n(e){return r(t,e)}function i(e,...t){let r=1;for(;r<arguments.length;r++){const t=arguments[r];for(const r in t)e[r]=t[r]}return e}function a(t,a,s){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let u="",c=!1,d=t,h=a,f=s,p=null,g="",m=!0,y="auto",v="start",b=50,E="middle",S=50,T="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return g},set:function(t){const n=function(t){return r(e,t)}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return y},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return v},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return E},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return S},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");S=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return T},set:function(e){const t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class us{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function cs(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+parseFloat(n||0)}const r=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?t(r[2],r[3],0,r[4]):t(r[1],r[2],r[3],r[4]):null}class ds{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,r){for(let n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function hs(e,t,r,n){const i=n?e.split(n):[e];for(const e in i){if("string"!=typeof i[e])continue;const n=i[e].split(r);2===n.length&&t(n[0],n[1])}}const fs=new ls(0,0,""),ps="middle"===fs.align?"middle":"center";function gs(e,t,r){const n=e;function i(){const t=cs(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.slice(3),a(),t.endTime=i(),a(),function(e,t){const n=new ds;hs(e,function(e,t){let i;switch(e){case"region":for(let i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),n.integer(e,i[0]),n.percent(e,i[0])&&n.set("snapToLines",!1),n.alt(e,i[0],["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start",ps,"end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start",ps,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",ps,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");let i=n.get("line","auto");"auto"===i&&-1===fs.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",ps);let a=n.get("position","auto");"auto"===a&&50===fs.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function ms(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class ys{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new us,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function r(){let e=t.buffer,r=0;for(e=ms(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;const n=e.slice(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.slice(r),n}function n(e){hs(e,function(e,t){},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=r();const n=e.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==n||!n[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let i=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:e=r(),t.state){case"HEADER":/:/.test(e)?n(e):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new ls(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{gs(e,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const r=-1!==e.indexOf("--\x3e");if(!e||r&&(i=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const vs=/\r\n|\n\r|\n|\r/g,bs=function(e,t,r=0){return e.slice(r,r+t.length)===t};function Es(e,t,r){return Pa(e.toString())+Pa(t.toString())+Pa(r)}const Ss="stpp.ttml.im1t",Ts=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ws=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,As={left:"start",center:"center",right:"end",start:"start",end:"end"};function ks(e,t,r,n){const i=se(new Uint8Array(e),["mdat"]);if(0===i.length)return void n(new Error("Could not parse IMSC1 mdat"));const a=i.map(e=>O(e)),s=function(e,t,r=1,n=!1){return ci(e,t,1/r,n)}(t.baseTime,1,t.timescale);try{a.forEach(e=>r(function(e,t){const r=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(n).reduce((e,t)=>(e[t]=r.getAttribute(`ttp:${t}`)||n[t],e),{}),a="preserve"!==r.getAttribute("xml:space"),s=Ls(xs(r,"styling","style")),o=Ls(xs(r,"layout","region")),l=xs(r,"body","[begin]");return[].map.call(l,e=>{const r=Ps(e,a);if(!r||!e.hasAttribute("begin"))return null;const n=Os(e.getAttribute("begin"),i),l=Os(e.getAttribute("dur"),i);let u=Os(e.getAttribute("end"),i);if(null===n)throw _s(e);if(null===u){if(null===l)throw _s(e);u=n+l}const c=new ls(n-t,u-t,r);c.id=Es(c.startTime,c.endTime,c.text);const d=function(e,t,r){const n="http://www.w3.org/ns/ttml#styling";let i=null;const a=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return a&&r.hasOwnProperty(a)&&(i=r[a]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((r,a)=>{const s=Rs(t,n,a)||Rs(e,n,a)||Rs(i,n,a);return s&&(r[a]=s),r},{})}(o[e.getAttribute("region")],s[e.getAttribute("style")],s),{textAlign:h}=d;if(h){const e=As[h];e&&(c.lineAlign=e),c.align=h}return b(c,d),c}).filter(e=>null!==e)}(e,s)))}catch(e){n(e)}}function xs(e,t,r){const n=e.getElementsByTagName(t)[0];return n?[].slice.call(n.querySelectorAll(r)):[]}function Ls(e){return e.reduce((e,t)=>{const r=t.getAttribute("xml:id");return r&&(e[r]=t),e},{})}function Ps(e,t){return[].slice.call(e.childNodes).reduce((e,r,n)=>{var i;return"br"===r.nodeName&&n?e+"\n":null!=(i=r.childNodes)&&i.length?Ps(r,t):t?e+r.textContent.trim().replace(/\s+/g," "):e+r.textContent},"")}function Rs(e,t,r){return e&&e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function _s(e){return new Error(`Could not parse ttml timestamp ${e}`)}function Os(e,t){if(!e)return null;let r=cs(e);return null===r&&(Ts.test(e)?r=function(e,t){const r=Ts.exec(e),n=(0|r[4])+(0|r[5])/t.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+n/t.frameRate}(e,t):ws.test(e)&&(r=function(e,t){const r=ws.exec(e),n=Number(r[1]);switch(r[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}(e,t))),r}class Is{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}function Cs(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function Ds(e,t){return!!e&&e.kind===Cs(t)&&Ci(t,e)}function Ms(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}const Ns=/\s/,Fs={newCue(e,t,r,n){const i=[];let a,s,o,l,u;const c=self.VTTCue||self.TextTrackCue;for(let h=0;h<n.rows.length;h++)if(a=n.rows[h],o=!0,l=0,u="",!a.isEmpty()){var d;for(let e=0;e<a.chars.length;e++)Ns.test(a.chars[e].uchar)&&o?l++:(u+=a.chars[e].uchar,o=!1);a.cueStartTime=t,t===r&&(r+=1e-4),l>=16?l--:l++;const n=ms(u.trim()),f=Es(t,r,n);null!=e&&null!=(d=e.cues)&&d.getCueById(f)||(s=new c(t,r,n),s.id=f,s.line=h+1,s.align="left",s.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(s))}return e&&i.length&&(i.sort((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line),i.forEach(t=>Aa(e,t))),i}},Us=/(\d+)-(\d+)\/(\d+)/;class Bs{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||$s,this.controller=new self.AbortController,this.stats=new G}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const a=function(e,t){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(b({},e.headers))};return e.rangeEnd&&r.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),r}(e,this.controller.signal),s="arraybuffer"===e.responseType,o=s?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:u}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=l&&n(l)?l:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(ki(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(r=>{var a;this.response=this.loader=r;const o=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},u-(o-i.loading.start)),!r.ok){const{status:e,statusText:t}=r;throw new js(t||"fetch, bad network response",e,r)}i.loading.first=o,i.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=Us.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(n(e))return e}const r=e.get("Content-Length");if(r)return parseInt(r)}(r.headers)||i.total;const l=null==(a=this.callbacks)?void 0:a.onProgress;return l&&n(t.highWaterMark)?this.loadProgressively(r,i,e,t.highWaterMark,l):s?r.arrayBuffer():"json"===e.responseType?r.json():r.text()}).then(r=>{var a,s;const l=this.response;if(!l)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const u=r[o];u&&(i.loaded=i.total=u);const c={url:l.url,data:r,code:l.status},d=null==(a=this.callbacks)?void 0:a.onProgress;d&&!n(t.highWaterMark)&&d(i,e,r,l),null==(s=this.callbacks)||s.onSuccess(c,i,e,l)}).catch(t=>{var r;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const n=t&&t.code||0,a=t?t.message:null;null==(r=this.callbacks)||r.onError({code:n,text:a},e,t?t.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,r,n=0,i){const a=new rn,s=e.body.getReader(),o=()=>s.read().then(s=>{if(s.done)return a.dataLength&&i(t,r,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const l=s.value,u=l.length;return t.loaded+=u,u<n||a.dataLength?(a.push(l),a.dataLength>=n&&i(t,r,a.flush().buffer,e)):i(t,r,l.buffer,e),o()}).catch(()=>Promise.reject());return o()}}function $s(e,t){return new self.Request(e.url,t)}class js extends Error{constructor(e,t,r){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}const zs=/^age:\s*[\d.]+\s*$/im;class Gs{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new G,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const r=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0,n.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(this.loader===r&&!this.stats.aborted)return i(r,t.url)}).catch(e=>{if(this.loader===r&&!this.stats.aborted)return r.open("GET",t.url,!0),i(r,t.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,t,e)}).catch(e=>{var i;null==(i=this.callbacks)||i.onError({code:r.status,text:e.message},t,r,n)}):this.openAndSendXhr(r,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:s}=r.loadPolicy;if(i)for(const t in i)e.setRequestHeader(t,i[t]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&n(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:r}=this;if(!e||!t)return;const n=t.readyState,i=this.config;if(!r.aborted&&n>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===n)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const n=t.status,l="text"===t.responseType?t.responseText:null;if(n>=200&&n<300){const i=null!=l?l:t.response;if(null!=i){var a,s;r.loading.end=Math.max(self.performance.now(),r.loading.first);const o="arraybuffer"===t.responseType?i.byteLength:i.length;r.loaded=r.total=o,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first);const l=null==(a=this.callbacks)?void 0:a.onProgress;l&&l(r,e,i,t);const u={url:t.responseURL,data:i,code:n};return void(null==(s=this.callbacks)||s.onSuccess(u,r,e,t))}}const u=i.loadPolicy.errorRetry;var o;ht(u,r.retry,!1,{url:e.url,data:void 0,code:n})?this.retry(u):(P.error(`${n} while loading ${e.url}`),null==(o=this.callbacks)||o.onError({code:n,text:t.statusText},e,t,r))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(ht(e,this.stats.retry,!0))this.retry(e);else{var t;P.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:r}=this;this.retryDelay=ct(e,r.retry),r.retry++,P.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&zs.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const Hs=S(S({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:Gs,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class extends T{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var t;const{fragCurrent:r,partCurrent:i,hls:a}=this,{autoLevelEnabled:s,media:o}=a;if(!r||!o)return;const u=performance.now(),c=i?i.stats:r.stats,d=i?i.duration:r.duration,h=u-c.loading.start,f=a.minAutoLevel,p=r.level,g=this._nextAutoLevel;if(c.aborted||c.loaded&&c.loaded===c.total||p<=f)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!s)return;const m=g>-1&&g!==p,y=!!e||m;if(!y&&(o.paused||!o.playbackRate||!o.readyState))return;const v=a.mainForwardBufferInfo;if(!y&&null===v)return;const b=this.bwEstimator.getEstimateTTFB(),E=Math.abs(o.playbackRate);if(h<=Math.max(b,d/(2*E)*1e3))return;const S=v?v.len/E:0,T=c.loading.first?c.loading.first-c.loading.start:-1,w=c.loaded&&T>-1,A=this.getBwEstimate(),k=a.levels,x=k[p],L=Math.max(c.loaded,Math.round(d*(r.bitrate||x.averageBitrate)/8));let P=w?h-T:h;P<1&&w&&(P=Math.min(h,8*c.loaded/A));const R=w?1e3*c.loaded/P:0,_=b/1e3,O=R?(L-c.loaded)/R:8*L/A+_;if(O<=S)return;const I=R?8*R:A,C=!0===(null==(t=(null==e?void 0:e.details)||this.hls.latestLevelDetails)?void 0:t.live),D=this.hls.config.abrBandWidthUpFactor;let M,N=Number.POSITIVE_INFINITY;for(M=p-1;M>f;M--){const e=k[M].maxBitrate,t=!k[M].details||C;if(N=this.getTimeToLoadFrag(_,I,d*e,t),N<Math.min(S,d+_))break}if(N>=O)return;if(N>10*d)return;w?this.bwEstimator.sample(h-Math.min(b,T),c.loaded):this.bwEstimator.sampleTTFB(h);const F=k[M].maxBitrate;this.getBwEstimate()*D>F&&this.resetEstimator(F);const U=this.findBestLevel(F,f,M,0,S,1,1);U>-1&&(M=U),this.warn(`Fragment ${r.sn}${i?" part "+i.index:""} of level ${p} is loading too slowly;\n      Fragment duration: ${r.duration.toFixed(3)}\n      Time to underbuffer: ${S.toFixed(3)} s\n      Estimated load time for current fragment: ${O.toFixed(3)} s\n      Estimated load time for down switch fragment: ${N.toFixed(3)} s\n      TTFB estimate: ${0|T} ms\n      Current BW estimate: ${n(A)?0|A:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${M} @ ${0|F} bps`),a.nextLoadLevel=a.nextAutoLevel=M,this.clearTimer();const B=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===M&&M>0){const e=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${M>0?"and switching down":""}\n      Fragment duration: ${r.duration.toFixed(3)} s\n      Time to underbuffer: ${e.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,M>f){let t=this.findBestLevel(this.hls.levels[f].bitrate,f,M,0,e,1,1);-1===t&&(t=f),this.hls.nextLoadLevel=this.hls.nextAutoLevel=t,this.resetEstimator(this.hls.levels[t].bitrate)}}};m||O>2*N?B():this.timer=self.setInterval(B,1e3*N),a.trigger(l.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:i,stats:c})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new y(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.FRAG_LOADING,this.onFragLoading,this),e.on(l.FRAG_LOADED,this.onFragLoaded,this),e.on(l.FRAG_BUFFERED,this.onFragBuffered,this),e.on(l.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(l.LEVEL_LOADED,this.onLevelLoaded,this),e.on(l.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(l.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(l.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.FRAG_LOADING,this.onFragLoading,this),e.off(l.FRAG_LOADED,this.onFragLoaded,this),e.off(l.FRAG_BUFFERED,this.onFragBuffered,this),e.off(l.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(l.LEVEL_LOADED,this.onLevelLoaded,this),e.off(l.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(l.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(l.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const r=t.frag;var n;this.ignoreFragment(r)||(r.bitrateTest||(this.fragCurrent=r,this.partCurrent=null!=(n=t.part)?n:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100))}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case o.BUFFER_ADD_CODEC_ERROR:case o.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case o.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:r,partCurrent:n}=this;if(e&&r&&e.sn===r.sn&&e.level===r.level){const t=performance.now(),r=n?n.stats:e.stats,i=t-r.loading.start,a=r.loading.first?r.loading.first-r.loading.start:-1;if(r.loaded&&a>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,a),r.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,r,n){return e+r/t+(n?e+this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const r=this.hls.config,{loading:i}=t.stats,a=i.end-i.first;n(a)&&(this.lastLevelLoadSec=a/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:r}){const n=r?r.stats:t.stats;if(t.type===f&&this.bwEstimator.sampleTTFB(n.loading.first-n.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=r?r.duration:t.duration,i=this.hls.levels[t.level],a=(i.loaded?i.loaded.bytes:0)+n.loaded,s=(i.loaded?i.loaded.duration:0)+e;i.loaded={bytes:a,duration:s},i.realBitrate=Math.round(8*a/s)}if(t.bitrateTest){const e={stats:n,frag:t,part:r,id:t.type};this.onFragBuffered(l.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:r,part:n}=t,i=null!=n&&n.stats.loaded?n.stats:r.stats;if(i.aborted)return;if(this.ignoreFragment(r))return;const a=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==f||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,r=this.getBwEstimate(),n=this.hls.config.maxStarvationDelay,i=this.findBestLevel(r,t,e,0,n,1,1);if(i>-1)return i;const a=this.hls.firstLevel,s=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${s}`),s}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&r&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;const n=t&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,n)&&t[e].loadError<=t[n].loadError)return e}return this._nextAutoLevel=n,this.nextAutoLevelKey=this.getAutoLevelKey(),n}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:n,config:i,minAutoLevel:a}=r,s=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let u=i.abrBandWidthFactor,c=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(o,a,n,l,0,u,c);if(e>=0)return this.rebufferNotice=-1,e}let d=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;e&&(d=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-e,this.info(`bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*d)} ms`),u=c=1)}const h=this.findBestLevel(o,a,n,l,d,u,c);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const f=r.levels[a],p=r.loadLevelObj;return p&&(null==f?void 0:f.bitrate)<p.bitrate?a:r.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const r=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,n=e.mainForwardBufferInfo;return(n?n.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,i,a,s,o){var l;const u=i+a,c=this.lastLoadedFragLevel,d=-1===c?this.hls.firstLevel:c,{fragCurrent:h,partCurrent:f}=this,{levels:p,allAudioTracks:g,loadLevel:m,config:y}=this.hls;if(1===p.length)return 0;const v=p[d],b=!(null==(l=this.hls.latestLevelDetails)||!l.live),E=-1===m||-1===c;let S,T="SDR",w=(null==v?void 0:v.frameRate)||0;const{audioPreference:A,videoPreference:k}=y,x=this.audioTracksByGroup||(this.audioTracksByGroup=Xe(g));let L=-1;if(E){if(-1!==this.firstSelection)return this.firstSelection;const i=this.codecTiers||(this.codecTiers=function(e,t,r,n){return e.slice(r,n+1).reduce((e,r,n)=>{if(!r.codecSet)return e;const i=r.audioGroups;let a=e[r.codecSet];a||(e[r.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:n,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,r.bitrate);const s=Math.min(r.height,r.width);return a.minHeight=Math.min(a.minHeight,s),a.minFramerate=Math.min(a.minFramerate,r.frameRate),a.minIndex=Math.min(a.minIndex,n),a.maxScore=Math.max(a.maxScore,r.score),a.fragmentError+=r.fragmentError,a.videoRanges[r.videoRange]=(a.videoRanges[r.videoRange]||0)+1,i&&i.forEach(e=>{if(!e)return;const r=t.groups[e];r&&(a.hasDefaultAudio=a.hasDefaultAudio||t.hasDefaultAudio?r.hasDefault:r.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(r.channels).forEach(e=>{a.channels[e]=(a.channels[e]||0)+r.channels[e]}))}),e},{})}(p,x,t,r)),a=function(e,t,r,i,a){const s=Object.keys(e),o=null==i?void 0:i.channels,l=null==i?void 0:i.audioCodec,u=null==a?void 0:a.videoCodec,c=o&&2===parseInt(o);let d=!1,h=!1,f=1/0,p=1/0,g=1/0,m=1/0,y=0,v=[];const{preferHDR:b,allowedVideoRanges:E}=function(e,t){let r=!1,n=[];if(e&&(r="SDR"!==e,n=[e]),t){n=t.allowedVideoRanges||Ge.slice(0);const e="SDR"!==n.join("")&&!t.videoCodec;r=void 0!==t.preferHDR?t.preferHDR:e&&function(){if("function"==typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),r||(n=["SDR"])}return{preferHDR:r,allowedVideoRanges:n}}(t,a);for(let t=s.length;t--;){const r=e[s[t]];d||(d=r.channels[2]>0),f=Math.min(f,r.minHeight),p=Math.min(p,r.minFramerate),g=Math.min(g,r.minBitrate),E.filter(e=>r.videoRanges[e]>0).length>0&&(h=!0)}f=n(f)?f:0,p=n(p)?p:0;const S=Math.max(1080,f),T=Math.max(30,p);g=n(g)?g:r,r=Math.max(g,r),h||(t=void 0);const w=s.length>1;return{codecSet:s.reduce((t,n)=>{const i=e[n];if(n===t)return t;if(v=h?E.filter(e=>i.videoRanges[e]>0):[],w){if(i.minBitrate>r)return qe(n,`min bitrate of ${i.minBitrate} > current estimate of ${r}`),t;if(!i.hasDefaultAudio)return qe(n,"no renditions with default or auto-select sound found"),t;if(l&&n.indexOf(l.substring(0,4))%5!=0)return qe(n,`audio codec preference "${l}" not found`),t;if(o&&!c){if(!i.channels[o])return qe(n,`no renditions with ${o} channel sound found (channels options: ${Object.keys(i.channels)})`),t}else if((!l||c)&&d&&0===i.channels[2])return qe(n,"no renditions with stereo sound found"),t;if(i.minHeight>S)return qe(n,`min resolution of ${i.minHeight} > maximum of ${S}`),t;if(i.minFramerate>T)return qe(n,`min framerate of ${i.minFramerate} > maximum of ${T}`),t;if(!v.some(e=>i.videoRanges[e]>0))return qe(n,`no variants with VIDEO-RANGE of ${Ye(v)} found`),t;if(u&&n.indexOf(u.substring(0,4))%5!=0)return qe(n,`video codec preference "${u}" not found`),t;if(i.maxScore<y)return qe(n,`max score of ${i.maxScore} < selected max of ${y}`),t}return t&&(Le(n)>=Le(t)||i.fragmentError>e[t].fragmentError)?t:(m=i.minIndex,y=i.maxScore,n)},void 0),videoRanges:v,preferHDR:b,minFramerate:p,minBitrate:g,minIndex:m}}(i,T,e,A,k),{codecSet:s,videoRanges:o,minFramerate:l,minBitrate:u,minIndex:c,preferHDR:d}=a;L=c,S=s,T=d?o[o.length-1]:o[0],w=l,e=Math.max(e,u),this.log(`picked start tier ${Ye(a)}`)}else S=null==v?void 0:v.codecSet,T=null==v?void 0:v.videoRange;const P=f?f.duration:h?h.duration:0,R=this.bwEstimator.getEstimateTTFB()/1e3,_=[];for(let l=r;l>=t;l--){var O,I;const t=p[l],h=l>d;if(!t)continue;if(y.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const r=navigator.mediaCapabilities;"function"==typeof(null==r?void 0:r.decodingInfo)&&Ue(t,x,T,w,e,A)?(t.supportedPromise=Be(t,x,r,this.supportedCache),t.supportedPromise.then(e=>{if(!this.hls)return;t.supportedResult=e;const r=this.hls.levels,n=r.indexOf(t);e.error?this.warn(`MediaCapabilities decodingInfo error: "${e.error}" for level ${n} ${Ye(e)}`):e.supported?e.decodingInfoResults.some(e=>!1===e.smooth||!1===e.powerEfficient)&&this.log(`MediaCapabilities decodingInfo for level ${n} not smooth or powerEfficient: ${Ye(e)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${n} ${Ye(e)}`),n>-1&&r.length>1&&(this.log(`Removing unsupported level ${n}`),this.hls.removeLevel(n),-1===this.hls.loadLevel&&(this.hls.nextLoadLevel=0)))})):t.supportedResult=Ne}if((S&&t.codecSet!==S||T&&t.videoRange!==T||h&&w>t.frameRate||!h&&w>0&&w<t.frameRate||null!=(O=t.supportedResult)&&null!=(I=O.decodingInfoResults)&&I.some(e=>!1===e.smooth))&&(!E||l!==L)){_.push(l);continue}const g=t.details,v=(f?null==g?void 0:g.partTarget:null==g?void 0:g.averagetargetduration)||P;let k;k=h?o*e:s*e;const C=P&&i>=2*P&&0===a?t.averageBitrate:t.maxBitrate,D=this.getTimeToLoadFrag(R,k,C*v,void 0===g);if(k>=C&&(l===c||0===t.loadError&&0===t.fragmentError)&&(D<=R||!n(D)||b&&!this.bitrateTestDelay||D<u)){const e=this.forcedAutoLevel;return l===m||-1!==e&&e===m||(_.length&&this.trace(`Skipped level(s) ${_.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${p[_[0]].codecs}" ${p[_[0]].videoRange}; not compatible with "${S}" ${T}`),this.info(`switch candidate:${d}->${l} adjustedbw(${Math.round(k)})-bitrate=${Math.round(k-C)} ttfb:${R.toFixed(1)} avgDuration:${v.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${D.toFixed(1)} firstSelection:${E} codecSet:${t.codecSet} videoRange:${t.videoRange} hls.loadLevel:${m}`)),E&&(this.firstSelection=l),l}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),t)}},bufferController:class extends T{constructor(e,t){var r;super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=e=>{var t;this.hls&&"open"===(null==(t=this.mediaSource)?void 0:t.readyState)&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=e=>{const{media:t,mediaSource:r}=this;e&&this.log("Media source opened"),t&&r&&(r.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(l.MEDIA_ATTACHED,{media:t,mediaSource:r}),null!==this.mediaSource&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&this.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=(r=R(e.config.preferManagedMediaSource),"undefined"!=typeof self&&r===self.ManagedMediaSource),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.MANIFEST_PARSED,this.onManifestParsed,this),e.on(l.BUFFER_RESET,this.onBufferReset,this),e.on(l.BUFFER_APPENDING,this.onBufferAppending,this),e.on(l.BUFFER_CODECS,this.onBufferCodecs,this),e.on(l.BUFFER_EOS,this.onBufferEos,this),e.on(l.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(l.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(l.FRAG_PARSED,this.onFragParsed,this),e.on(l.FRAG_CHANGED,this.onFragChanged,this),e.on(l.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.MANIFEST_PARSED,this.onManifestParsed,this),e.off(l.BUFFER_RESET,this.onBufferReset,this),e.off(l.BUFFER_APPENDING,this.onBufferAppending,this),e.off(l.BUFFER_CODECS,this.onBufferCodecs,this),e.off(l.BUFFER_EOS,this.onBufferEos,this),e.off(l.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(l.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(l.FRAG_PARSED,this.onFragParsed,this),e.off(l.FRAG_CHANGED,this.onFragChanged,this),e.off(l.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const r={};if(this.operationQueue){const e=this.isUpdating();e||this.operationQueue.removeBlockers();const t=this.isQueued();(e||t)&&this.warn(`Transfering MediaSource with${t?" operations in queue":""}${e?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const n=this.transferData;return!this.sourceBufferCount&&n&&n.mediaSource===t?b(r,n.tracks):this.sourceBuffers.forEach(e=>{const[t]=e;t&&(r[t]=b({},this.tracks[t]),this.removeBuffer(t)),e[0]=e[1]=null}),{media:e,mediaSource:t,tracks:r}}initTracks(){this.sourceBuffers=[[null,null],[null,null]],this.tracks={},this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var r;let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsTotal=n,this.log(`${n} bufferCodec event(s) expected.`),null!=(r=this.transferData)&&r.mediaSource&&this.sourceBufferCount&&n&&this.bufferCreated()}onMediaAttaching(e,t){const r=this.media=t.media,n=R(this.appendSource);if(this.transferData=this.overrides=void 0,r&&n){const e=!!t.mediaSource;(e||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const i=this.mediaSource=t.mediaSource||new n;if(this.assignMediaSource(i),e)this._objectUrl=r.src,this.attachTransferred();else{const e=this._objectUrl=self.URL.createObjectURL(i);if(this.appendSource)try{r.removeAttribute("src");const t=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||t&&i instanceof t,Ui(r),function(e,t){const r=self.document.createElement("source");r.type="video/mp4",r.src=t,e.appendChild(r)}(r,e),r.load()}catch(t){r.src=e}else r.src=e}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,r;this.log(`${(null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${null==(r=e.constructor)?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const r=this.tracks,n=t.tracks,i=n?Object.keys(n):null,a=i?i.length:0,s=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(n&&i&&a){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})\nrequired tracks: ${Ye(r,(e,t)=>"initSegment"===e?void 0:t)};\ntransfer tracks: ${Ye(n,(e,t)=>"initSegment"===e?void 0:t)}}`),!_(n,r)){t.mediaSource=null,t.tracks=void 0;const i=e.currentTime,a=this.details,s=Math.max(i,(null==a?void 0:a.fragments[0].start)||0);return s-i>1?void this.log(`attachTransferred: waiting for playback to reach new tracks start time ${i} -> ${s}`):(this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(n)}"->"${Object.keys(r)}") start time: ${s} currentTime: ${i}`),this.onMediaDetaching(l.MEDIA_DETACHING,{}),this.onMediaAttaching(l.MEDIA_ATTACHING,t),void(e.currentTime=s))}this.transferData=void 0,i.forEach(e=>{const t=e,r=n[t];if(r){const e=r.buffer;if(e){const n=this.fragmentTracker,i=r.id;if(n.hasFragments(i)||n.hasParts(i)){const r=Dt.getBuffered(e);n.detectEvictedFragments(t,r,i,null,!0)}const a=Bi(t),s=[t,e];this.sourceBuffers[a]=s,e.updating&&this.operationQueue&&this.operationQueue.prependBlocker(t),this.trackSourceBuffer(t,r)}}}),s(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),s()}get mediaSourceOpenOrEnded(){var e;const t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}onMediaDetaching(e,t){const r=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:n,mediaSource:i,_objectUrl:a}=this;if(i){if(this.log("media source "+(r?"transferring":"detaching")),r)this.sourceBuffers.forEach(([e])=>{e&&this.removeBuffer(e)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const e="open"===i.readyState;try{const t=i.sourceBuffers;for(let r=t.length;r--;)e&&t[r].abort(),i.removeSourceBuffer(t[r]);e&&i.endOfStream()}catch(e){this.warn(`onMediaDetaching: ${e.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}n&&(n.removeEventListener("emptied",this._onMediaEmptied),r||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(n.removeAttribute("src"),this.appendSource&&Ui(n),n.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(l.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const r=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),r)try{var n;null!=(n=this.mediaSource)&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(t){this.warn(`onBufferReset ${e}`,t)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Bi(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new Di(this.tracks)}onBufferCodecs(e,t){const r=this.tracks,n=Object.keys(t);this.log(`BUFFER_CODECS: "${n}" (current SB count ${this.sourceBufferCount})`);const i="audiovideo"in t&&(r.audio||r.video)||r.audiovideo&&("audio"in t||"video"in t),a=!i&&this.sourceBufferCount&&this.media&&n.some(e=>!r[e]);i||a?this.warn(`Unsupported transition between "${Object.keys(r)}" and "${n}" SourceBuffers`):(n.forEach(e=>{var n,i,a;const s=t[e],{id:o,codec:l,levelCodec:u,container:c,metadata:d,supplemental:h}=s;let f=r[e];const p=null==(n=this.transferData)||null==(i=n.tracks)?void 0:i[e],g=null!=p&&p.buffer?p:f,m=(null==g?void 0:g.pendingCodec)||(null==g?void 0:g.codec),y=null==g?void 0:g.levelCodec;f||(f=r[e]={buffer:void 0,listeners:[],codec:l,supplemental:h,container:c,levelCodec:u,metadata:d,id:o});const v=Oe(m,y),b=null==v?void 0:v.replace(Mi,"$1");let E=Oe(l,u);const S=null==(a=E)?void 0:a.replace(Mi,"$1");E&&v&&b!==S&&("audio"===e.slice(0,5)&&(E=_e(E,this.appendSource)),this.log(`switching codec ${m} to ${E}`),E!==(f.pendingCodec||f.codec)&&(f.pendingCodec=E),f.container=c,this.appendChangeType(e,c,E))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const r=this.tracks[t];return e[t]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,t,r){const n=`${t};codecs=${r}`,i={label:`change-type=${n}`,execute:()=>{const i=this.tracks[e];if(i){const a=i.buffer;null!=a&&a.changeType&&(this.log(`changing ${e} sourceBuffer type to ${n}`),a.changeType(n),i.codec=r,i.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const r=e.start,n=r+.05*e.duration;if(!0===(null==(t=this.fragmentTracker.getAppendedFrag(r,f))?void 0:t.gap))return;const i={label:"block-audio",execute:()=>{var e;const t=this.tracks.video;(this.lastVideoAppendEnd>n||null!=t&&t.buffer&&Dt.isBuffered(t.buffer,n)||!0===(null==(e=this.fragmentTracker.getAppendedFrag(n,f))?void 0:e.gap))&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:i,frag:e},this.append(i,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:r}=this,{data:i,type:a,parent:u,frag:c,part:d,chunkMeta:h,offset:f}=t,p=h.buffering[a],{sn:g,cc:m}=c,y=self.performance.now();p.start=y;const v=c.stats.buffering,b=d?d.stats.buffering:null;0===v.start&&(v.start=y),b&&0===b.start&&(b.start=y);const E=r.audio;let S=!1;"audio"===a&&"audio/mpeg"===(null==E?void 0:E.container)&&(S=!this.lastMpegAudioChunk||1===h.id||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);const T=r.video,w=null==T?void 0:T.buffer;if(w&&"initSegment"!==g){const e=d||c,t=this.blockedAudioAppend;if("audio"!==a||"main"===u||this.blockedAudioAppend){if("video"===a){const r=e.end;if(t){const e=t.frag.start;(r>e||r<this.lastVideoAppendEnd||Dt.isBuffered(w,e))&&this.unblockAudio()}this.lastVideoAppendEnd=r}}else{const t=e.start+.05*e.duration,r=w.buffered,n=this.currentOp("video");r.length||n?!n&&!Dt.isBuffered(w,t)&&this.lastVideoAppendEnd<t&&this.blockAudio(e):this.blockAudio(e)}}const A=(d||c).start,k={label:`append-${a}`,execute:()=>{var e;p.executeStart=self.performance.now();const t=null==(e=this.tracks[a])?void 0:e.buffer;t&&(S?this.updateTimestampOffset(t,A,.1,a,g,m):void 0!==f&&n(f)&&this.updateTimestampOffset(t,f,1e-6,a,g,m)),this.appendExecutor(i,a)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();p.executeEnd=p.end=e,0===v.first&&(v.first=e),b&&0===b.first&&(b.first=e);const t={};this.sourceBuffers.forEach(([e,r])=>{e&&(t[e]=Dt.getBuffered(r))}),this.appendErrors[a]=0,"audio"===a||"video"===a?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(l.BUFFER_APPENDED,{type:a,frag:c,part:d,chunkMeta:h,parent:c.type,timeRanges:t})},onError:e=>{var t;const r={type:s.MEDIA_ERROR,parent:c.type,details:o.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:c,part:d,chunkMeta:h,error:e,err:e,fatal:!1},n=null==(t=this.media)?void 0:t.error;if(e.code===DOMException.QUOTA_EXCEEDED_ERR||"QuotaExceededError"==e.name||"quota"in e)r.details=o.BUFFER_FULL_ERROR;else if(e.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!n)r.errorAction=ft(!0);else if(e.name===Ni&&0===this.sourceBufferCount)r.errorAction=ft(!0);else{const e=++this.appendErrors[a];this.warn(`Failed ${e}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${n||"no media error"})`),(e>=this.hls.config.appendErrorMaxRetry||n)&&(r.fatal=!0)}this.hls.trigger(l.ERROR,r)}};this.append(k,a,this.isPending(this.tracks[a]))}getFlushOp(e,t,r){return this.log(`queuing "${e}" remove ${t}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(l.BUFFER_FLUSHED,{type:e})},onError:n=>{this.warn(`Failed to remove ${t}-${r} from "${e}" SourceBuffer`,n)}}}onBufferFlushing(e,t){const{type:r,startOffset:n,endOffset:i}=t;r?this.append(this.getFlushOp(r,n,i),r):this.sourceBuffers.forEach(([e])=>{e&&this.append(this.getFlushOp(e,n,i),e)})}onFragParsed(e,t){const{frag:r,part:n}=t,i=[],a=n?n.elementaryStreams:r.elementaryStreams;a[V]?i.push("audiovideo"):(a[H]&&i.push("audio"),a[K]&&i.push("video")),0===i.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(()=>{const e=self.performance.now();r.stats.buffering.end=e,n&&(n.stats.buffering.end=e);const t=n?n.stats:r.stats;this.hls.trigger(l.FRAG_BUFFERED,{frag:r,part:n,stats:t,id:r.type})},i).catch(e=>{this.warn(`Fragment buffered callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t,r;return e&&(!(null!=(t=this.tracks[e])&&t.ended)||(null==(r=this.tracks[e])?void 0:r.ending))})}onBufferEos(e,t){var r;this.sourceBuffers.forEach(([e])=>{if(e){const r=this.tracks[e];t.type&&t.type!==e||(r.ending=!0,r.ended||(r.ended=!0,this.log(`${e} buffer reached EOS`)))}});const n=!1!==(null==(r=this.overrides)?void 0:r.endOfStream);this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t;return e&&!(null!=(t=this.tracks[e])&&t.ended)})&&(n?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream(),this.hls.trigger(l.BUFFERED_TO_END,void 0)):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})):(this.tracksEnded(),this.hls.trigger(l.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(null!==e){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===o.BUFFER_APPEND_ERROR&&t.frag){var r;const e=null==(r=t.errorAction)?void 0:r.nextAutoLevel;n(e)&&e!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:r}=this;if(!r||null===t)return;if(!this.sourceBufferCount)return;const i=e.config,a=r.currentTime,s=t.levelTargetDuration,o=t.live&&null!==i.liveBackBufferLength?i.liveBackBufferLength:i.backBufferLength;if(n(o)&&o>=0){const e=Math.max(o,s),t=Math.floor(a/s)*s-e;this.flushBackBuffer(a,s,t)}if(n(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){const e=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),t=Math.max(e,s),r=Math.floor(a/s)*s+t;this.flushFrontBuffer(a,s,r)}}flushBackBuffer(e,t,r){this.sourceBuffers.forEach(([e,t])=>{if(t){const i=Dt.getBuffered(t);if(i.length>0&&r>i.start(0)){var n;this.hls.trigger(l.BACK_BUFFER_REACHED,{bufferEnd:r});const t=this.tracks[e];if(null!=(n=this.details)&&n.live)this.hls.trigger(l.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(null!=t&&t.ended)return void this.log(`Cannot flush ${e} back buffer while SourceBuffer is in ended state`);this.hls.trigger(l.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:e})}}})}flushFrontBuffer(e,t,r){this.sourceBuffers.forEach(([t,n])=>{if(n){const i=Dt.getBuffered(n),a=i.length;if(a<2)return;const s=i.start(a-1),o=i.end(a-1);if(r>s||e>=s&&e<=o)return;this.hls.trigger(l.BUFFER_FLUSHING,{startOffset:s,endOffset:1/0,type:t})}})}getDurationAndRange(){var e;const{details:t,mediaSource:r}=this;if(!t||!this.media||"open"!==(null==r?void 0:r.readyState))return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&t.live&&r.setLiveSeekableRange){const e=Math.max(0,t.fragmentStart);return{duration:1/0,start:e,end:Math.max(e,i)}}return{duration:1/0}}const a=null==(e=this.overrides)?void 0:e.duration;if(a)return n(a)?{duration:a}:null;const s=this.media.duration;return i>(n(r.duration)?r.duration:0)&&i>s||!n(s)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:r}){const i=this.mediaSource;this.media&&i&&"open"===i.readyState&&(i.duration!==e&&(n(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),void 0!==t&&void 0!==r&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${r}.`),i.setLiveSeekableRange(t,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Ye(r)}`),this.tracksReady){var n;const e=null==(n=this.transferData)?void 0:n.tracks;e&&Object.keys(e).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,r])=>{if(t){const n=this.tracks[t];e[t]={buffer:r,container:n.container,codec:n.codec,supplemental:n.supplemental,levelCodec:n.levelCodec,id:n.id,metadata:n.metadata}}}),this.hls.trigger(l.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([e])=>{this.executeNext(e)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const i in e){const a=i,u=e[a];if(this.isPending(u)){const e=this.getTrackCodec(u,a),i=`${u.container};codecs=${e}`;u.codec=e,this.log(`creating sourceBuffer(${i})${this.currentOp(a)?" Queued":""} ${Ye(u)}`);try{const e=r.addSourceBuffer(i),n=Bi(a),s=[a,e];t[n]=s,u.buffer=e}catch(e){var n;return this.error(`error while trying to add sourceBuffer: ${e.message}`),this.shiftAndExecuteNext(a),null==(n=this.operationQueue)||n.removeBlockers(),delete this.tracks[a],void this.hls.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:a,mimeType:i,parent:u.id})}this.trackSourceBuffer(a,u)}}this.bufferCreated()}getTrackCodec(e,t){const r=e.supplemental;let n=e.codec;r&&("video"===t||"audiovideo"===t)&&we(r,"video")&&(n=function(e,t){const r=[];if(e){const t=e.split(",");for(let e=0;e<t.length;e++)Te(t[e],"video")||r.push(t[e])}return t&&r.push(t),r.join(",")}(n,r));const i=Oe(n,e.levelCodec);return i?"audio"===t.slice(0,5)?_e(i,this.appendSource):i:""}trackSourceBuffer(e,t){const r=t.buffer;if(!r)return;const n=this.getTrackCodec(t,e);this.tracks[e]={buffer:r,codec:n,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(e,t)=>{const r=t.removedRanges;null!=r&&r.length&&this.hls.trigger(l.BUFFER_FLUSHED,{type:e})})}get mediaSrc(){var e,t;const r=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==r?void 0:r.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var r;const n=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(r=this.mediaSource)?void 0:r.readyState}`);this.error(`${n}`,t),this.hls.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:n,fatal:!1});const i=this.currentOp(e);i&&i.onError(n)}updateTimestampOffset(e,t,r,n,i,a){const s=t-e.timestampOffset;Math.abs(s)>=r&&(this.log(`Updating ${n} SourceBuffer timestampOffset to ${t} (sn: ${i} cc: ${a})`),e.timestampOffset=t)}removeExecutor(e,t,r){const{media:i,mediaSource:a}=this,s=this.tracks[e],o=null==s?void 0:s.buffer;if(!i||!a||!o)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void this.shiftAndExecuteNext(e);const l=n(i.duration)?i.duration:1/0,u=n(a.duration)?a.duration:1/0,c=Math.max(0,t),d=Math.min(r,l,u);d>c&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${c},${d}] from the ${e} SourceBuffer`),o.remove(c,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const r=this.tracks[t],n=null==r?void 0:r.buffer;if(!n)throw new Fi(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,n.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(e=>{this.warn(`SourceBuffer blocked callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(e){this.warn(`Callback run without blocking ${this.operationQueue} ${e}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,n=t.map(e=>this.appendBlocker(e));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(n).then(t=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(e=>{var t;const r=null==(t=this.tracks[e])?void 0:t.buffer;r&&!r.updating&&this.shiftAndExecuteNext(e)})}append(e,t,r){this.operationQueue&&this.operationQueue.append(e,t,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,r){const n=this.tracks[e];if(!n)return;const i=n.buffer;if(!i)return;const a=r.bind(this,e);n.listeners.push({event:t,listener:a}),i.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const r=t.buffer;r&&(t.listeners.forEach(e=>{r.removeEventListener(e.event,e.listener)}),t.listeners.length=0)}},capLevelController:$i,errorController:class extends T{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(l.ERROR,this.onError,this),e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(l.ERROR,this.onError,this),e.off(l.ERROR,this.onErrorOut,this),e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===f?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var r;if(t.fatal)return;const n=this.hls,i=t.context;switch(t.details){case o.FRAG_LOAD_ERROR:case o.FRAG_LOAD_TIMEOUT:case o.KEY_LOAD_ERROR:case o.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case o.FRAG_PARSING_ERROR:if(null!=(r=t.frag)&&r.gap)return void(t.errorAction=ft());case o.FRAG_GAP:case o.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case o.LEVEL_EMPTY_ERROR:case o.LEVEL_PARSING_ERROR:{var a,l;const e=t.parent===f?t.level:n.loadLevel;t.details===o.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(l=a.levelDetails)&&l.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case o.LEVEL_LOAD_ERROR:case o.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==i?void 0:i.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level)));case o.AUDIO_TRACK_LOAD_ERROR:case o.AUDIO_TRACK_LOAD_TIMEOUT:case o.SUBTITLE_LOAD_ERROR:case o.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const e=n.loadLevelObj;if(e&&(i.type===d&&e.hasAudioGroup(i.groupId)||i.type===h&&e.hasSubtitleGroup(i.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)}return;case o.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=n.loadLevelObj,r=null==e?void 0:e.attrs["HDCP-LEVEL"];r?t.errorAction={action:2,flags:2,hdcpLevel:r}:this.keySystemError(t)}return;case o.BUFFER_ADD_CODEC_ERROR:case o.REMUX_ALLOC_ERROR:case o.BUFFER_APPEND_ERROR:var u;return void(t.errorAction||(t.errorAction=this.getLevelSwitchAction(t,null!=(u=t.level)?u:n.loadLevel)));case o.INTERNAL_EXCEPTION:case o.BUFFER_APPENDING_ERROR:case o.BUFFER_FULL_ERROR:case o.LEVEL_SWITCH_ERROR:case o.BUFFER_STALLED_ERROR:case o.BUFFER_SEEK_OVER_HOLE:case o.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=ft())}t.type===s.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const r=ut(this.hls.config.playlistLoadPolicy,e),n=this.playlistError++;if(ht(r,n,lt(e),e.response))return{action:5,flags:0,retryConfig:r,retryCount:n};const i=this.getLevelSwitchAction(e,t);return r&&(i.retryConfig=r,i.retryCount=n),i}getFragRetryOrSwitchAction(e){const t=this.hls,r=this.getVariantLevelIndex(e.frag),n=t.levels[r],{fragLoadPolicy:i,keyLoadPolicy:a}=t.config,s=ut(e.details.startsWith("key")?a:i,e),l=t.levels.reduce((e,t)=>e+t.fragmentError,0);if(n&&(e.details!==o.FRAG_GAP&&n.fragmentError++,ht(s,l,lt(e),e.response)))return{action:5,flags:0,retryConfig:s,retryCount:l};const u=this.getLevelSwitchAction(e,r);return s&&(u.retryConfig=s,u.retryCount=l),u}getLevelSwitchAction(e,t){const r=this.hls;null==t&&(t=r.loadLevel);const n=this.hls.levels[t];if(n){var i,a;const t=e.details;n.loadError++,t===o.BUFFER_APPEND_ERROR&&n.fragmentError++;let u=-1;const{levels:c,loadLevel:m,minAutoLevel:y,maxAutoLevel:v}=r;r.autoLevelEnabled||r.config.preserveManualLevelOnError||(r.loadLevel=-1);const b=null==(i=e.frag)?void 0:i.type,E=(b===p&&t===o.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===o.BUFFER_ADD_CODEC_ERROR||t===o.BUFFER_APPEND_ERROR))&&c.some(({audioCodec:e})=>n.audioCodec!==e),S="video"===e.sourceBufferName&&(t===o.BUFFER_ADD_CODEC_ERROR||t===o.BUFFER_APPEND_ERROR)&&c.some(({codecSet:e,audioCodec:t})=>n.codecSet!==e&&n.audioCodec===t),{type:T,groupId:w}=null!=(a=e.context)?a:{};for(let r=c.length;r--;){const i=(r+m)%c.length;if(i!==m&&i>=y&&i<=v&&0===c[i].loadError){var s,l;const r=c[i];if(t===o.FRAG_GAP&&b===f&&e.frag){const t=c[i].details;if(t){const r=it(e.frag,t.fragments,e.frag.start);if(null!=r&&r.gap)continue}}else{if(T===d&&r.hasAudioGroup(w)||T===h&&r.hasSubtitleGroup(w))continue;if(b===p&&null!=(s=n.audioGroups)&&s.some(e=>r.hasAudioGroup(e))||b===g&&null!=(l=n.subtitleGroups)&&l.some(e=>r.hasSubtitleGroup(e))||E&&n.audioCodec===r.audioCodec||!E&&n.audioCodec!==r.audioCodec||S&&n.codecSet===r.codecSet)continue}u=i;break}}if(u>-1&&r.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:2,flags:0,nextAutoLevel:u}}return{action:2,flags:1}}onErrorOut(e,t){var r;switch(null==(r=t.errorAction)?void 0:r.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===o.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,r=e.errorAction;if(!r)return;const{flags:n,hdcpLevel:i,nextAutoLevel:a}=r;switch(n){case 0:this.switchLevel(e,a);break;case 2:i&&(t.maxHdcpLevel=ze[ze.indexOf(i)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}r.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===o.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName)){const t=Me(e.mimeType),r=this.hls.levels;for(let n=r.length;n--;)r[n][`${e.sourceBufferName}Codec`]===t&&this.hls.removeLevel(n)}}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(l.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(l.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(l.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(l.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const r=this.hls.config;if(r.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,r){const n=performance.now();if(t){if(this.lastTime){const e=n-this.lastTime,i=r-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*i/e,o=this.hls;if(o.trigger(l.FPS_DROP,{currentDropped:i,currentDecoded:a,totalDroppedFrames:r}),s>0&&i>o.config.fpsDroppedMonitoringThreshold*a){let e=o.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(l.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:sr,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:Fs,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends en{constructor(e,t,r){super(e,t,r,"subtitle-stream-controller",g),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(l.LEVEL_LOADED,this.onLevelLoaded,this),e.on(l.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(l.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(l.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(l.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(l.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(l.LEVEL_LOADED,this.onLevelLoaded,this),e.off(l.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(l.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(l.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(l.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(l.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Gr,this.setInterval(500),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:r,success:n}=t;if(this.fragContextChanged(r)||(Y(r)&&(this.fragPrevious=r),this.state=Gr),!n)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let a;const s=r.start;for(let e=0;e<i.length;e++)if(s>=i[e].start&&s<=i[e].end){a=i[e];break}const o=r.start+r.duration;a?a.end=o:(a={start:s,end:o},i.push(a)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:r,endOffset:n}=t;if(0===r&&n!==Number.POSITIVE_INFINITY){const e=n-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach(t=>{for(let r=0;r<t.length;)if(t[r].end<=e)t.shift();else{if(!(t[r].start<e))break;t[r].start=e,r++}}),this.fragmentTracker.removeFragmentsInRange(r,e,g)}}onError(e,t){const r=t.frag;(null==r?void 0:r.type)===g&&(t.details===o.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==zr&&(this.state=Gr))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&Oi(this.levels,t)?this.levels=t.map(e=>new Ve(e)):(this.tracksBuffered=[],this.levels=t.map(e=>{const t=new Ve(e);return this.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,g),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var r;if(this.currentTrackId=t.id,null==(r=this.levels)||!r.length||-1===this.currentTrackId)return void this.clearInterval();const n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.state!==zr&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var r;const{currentTrackId:n,levels:i}=this,{details:a,id:s}=t;if(!i)return void this.warn(`Subtitle tracks were reset while loading level ${s}`);const o=i[s];if(s>=i.length||!o)return;this.log(`Subtitle track ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(a.live||null!=(r=o.details)&&r.live){if(a.deltaUpdateFailed)return;const e=this.mainDetails;if(!e)return void(this.startFragRequested=!1);const t=e.fragments[0];var c;o.details?(u=this.alignPlaylists(a,o.details,null==(c=this.levelLastLoaded)?void 0:c.details),0===u&&t&&(u=t.start,Or(a,u))):a.hasProgramDateTime&&e.hasProgramDateTime?(jr(a,e),u=a.fragmentStart):t&&(u=t.start,Or(a,u)),e&&!this.startFragRequested&&this.setStartPosition(e,u)}o.details=a,this.levelLastLoaded=o,s===n&&(this.hls.trigger(l.SUBTITLE_TRACK_UPDATED,{details:a,id:s,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Gr)&&(it(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0))}_handleFragmentLoadComplete(e){const{frag:t,payload:r}=e,n=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&null!=n&&n.key&&n.iv&&Wt(n.method)){const e=performance.now();this.decrypter.decrypt(new Uint8Array(r),n.key.buffer,n.iv.buffer,Yt(n.method)).catch(e=>{throw i.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e}).then(r=>{const n=performance.now();i.trigger(l.FRAG_DECRYPTED,{frag:t,payload:r,stats:{tstart:e,tdecrypt:n}})}).catch(e=>{this.warn(`${e.name}: ${e.message}`),this.state=Gr})}}doTick(){if(this.media){if(this.state===Gr){const{currentTrackId:e,levels:t}=this,r=null==t?void 0:t[e];if(!r||!t.length||!r.details)return;if(this.waitForLive(r))return;const{config:n}=this,i=this.getLoadPosition(),a=Dt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,n.maxBufferHole),{end:s,len:o}=a,l=r.details;if(o>this.hls.maxBufferLength+l.levelTargetDuration)return;const u=l.fragments,c=u.length,d=l.edge;let h=null;const f=this.fragPrevious;if(s<d){const e=n.maxFragLookUpTolerance,t=s>d-e?0:e;h=it(f,u,Math.max(u[0].start,s),t),!h&&f&&f.start<u[0].start&&(h=u[0])}else h=u[c-1];if(h=this.filterReplacedPrimary(h,r.details),!h)return;const p=u[h.sn-l.startSN-1];if(p&&p.cc===h.cc&&this.fragmentTracker.getState(p)===pt&&(h=p),this.fragmentTracker.getState(h)===pt){const e=this.mapToInitFragWhenRequired(h);e&&this.loadFragment(e,r,s)}}}else this.state=Gr}loadFragment(e,t,r){Y(e)?super.loadFragment(e,t,r):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new za(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends _i{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=La(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)e=t[r];else if("showing"===t[r].mode){e=t[r];break}const r=this.findTrackForTextTrack(e);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.MANIFEST_PARSED,this.onManifestParsed,this),e.on(l.LEVEL_LOADING,this.onLevelLoading,this),e.on(l.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(l.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(l.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.MANIFEST_PARSED,this.onManifestParsed,this),e.off(l.LEVEL_LOADING,this.onLevelLoading,this),e.off(l.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(l.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(l.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const r=this.media;if(!r)return;const n=!!t.transferMedia;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,n||La(r.textTracks).forEach(e=>{ka(e)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:r,groupId:n,details:i}=t,a=this.tracksInGroup[r];if(!a||a.groupId!==n)return void this.warn(`Subtitle track with id:${r} and group:${n} not found in active group ${null==a?void 0:a.groupId}`);const s=a.details;a.details=t.details,this.log(`Subtitle track ${r} "${a.name}" lang:${a.lang} group:${n} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.subtitleGroups||null,n=this.groupIds;let i=this.currentTrack;if(!r||(null==n?void 0:n.length)!==(null==r?void 0:r.length)||null!=r&&r.some(e=>-1===(null==n?void 0:n.indexOf(e)))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!r||-1!==r.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const r=Ze(t,e);if(r>-1)i=e[r];else{const e=Ze(t,this.tracks);i=this.tracks[e]}}let n=this.findTrackId(i);-1===n&&i&&(n=this.findTrackId(null));const a={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==r?void 0:r.join(",")}" group-id`),this.hls.trigger(l.SUBTITLE_TRACKS_UPDATED,a),-1!==n&&-1===this.trackId&&this.setSubtitleTrack(n)}}findTrackId(e){const t=this.tracksInGroup,r=this.selectDefaultTrack;for(let n=0;n<t.length;n++){const i=t[n];if((!r||i.default)&&(r||e)&&(!e||Je(i,e)))return n}if(e){for(let r=0;r<t.length;r++){const n=t[r];if(Ii(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const n=t[r];if(Ii(e.attrs,n.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++)if(Ci(t[r],e))return r}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==h||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const r=this.currentTrack;if(r&&Je(e,r))return r;const n=Ze(e,this.tracksInGroup);if(n>-1){const e=this.tracksInGroup[n];return this.setSubtitleTrack(n),e}if(r)return null;{const r=Ze(e,t);if(r>-1)return t[r]}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,n=e.groupId,i=this.getUrlWithDirectives(e.url,t),a=e.details,s=null==a?void 0:a.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${n}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${s&&a.live?" age "+s.toFixed(1)+(a.type?" "+a.type||0:""):""} ${i}`),this.hls.trigger(l.SUBTITLE_TRACK_LOADING,{url:i,id:r,groupId:n,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=La(e.textTracks),r=this.currentTrack;let n;if(r&&(n=t.filter(e=>Ci(r,e))[0],n||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(t).forEach(e=>{"disabled"!==e.mode&&e!==n&&(e.mode="disabled")}),n){const e=this.subtitleDisplay?"showing":"hidden";n.mode!==e&&(n.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!n(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i)return void this.hls.trigger(l.SUBTITLE_TRACK_SWITCH,{id:e});const a=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&a)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:o="",name:u,type:c,url:d}=i;this.hls.trigger(l.SUBTITLE_TRACK_SWITCH,{id:s,groupId:o,name:u,type:c,url:d});const h=this.switchParams(i.url,null==r?void 0:r.details,i.details);this.loadPlaylist(h)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(l.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(l.FRAG_LOADING,this.onFragLoading,this),e.on(l.FRAG_LOADED,this.onFragLoaded,this),e.on(l.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(l.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(l.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(l.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(l.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(l.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(l.FRAG_LOADING,this.onFragLoading,this),e.off(l.FRAG_LOADED,this.onFragLoaded,this),e.off(l.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(l.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(l.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(l.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(l.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Is(this,"textTrack1"),t=new Is(this,"textTrack2"),r=new Is(this,"textTrack3"),n=new Is(this,"textTrack4");this.cea608Parser1=new as(1,e,t),this.cea608Parser2=new as(3,r,n)}addCues(e,t,r,n,i){let a=!1;for(let e=i.length;e--;){const n=i[e],s=Ms(n[0],n[1],t,r);if(s>=0&&(n[0]=Math.min(n[0],t),n[1]=Math.max(n[1],r),a=!0,s/(r-t)>.5))return}if(a||i.push([t,r]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,r,n)}else{const i=this.Cues.newCue(null,t,r,n);this.hls.trigger(l.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,{frag:t,id:r,initPTS:n,timescale:i}){const{unparsedVttFrags:a}=this;r===f&&(this.initPTS[t.cc]={baseTime:n,timescale:i}),a.length&&(this.unparsedVttFrags=[],a.forEach(e=>{this.initPTS[e.frag.cc]?this.onFragLoaded(l.FRAG_LOADED,e):this.hls.trigger(l.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:r}=this;if(r)for(let n=0;n<r.textTracks.length;n++){const i=r.textTracks[n];if(Ds(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:r,media:n}=this,{label:i,languageCode:a}=t[e],s=this.getExistingTrack(i,a);if(s)r[e]=s,ka(r[e]),wa(r[e],n);else{const t=this.createTextTrack("captions",i,a);t&&(t[e]=!0,r[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(l.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,r){const n=this.media;if(n)return n.addTextTrack(e,t,r)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const r=!!t.transferMedia;if(this.media=null,r)return;const{captionsTracks:n}=this;Object.keys(n).forEach(e=>{ka(n[e]),delete n[e]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let e=0;e<t.length;e++)ka(t[e])}onSubtitleTracksUpdated(e,t){const r=t.subtitleTracks||[],n=r.some(e=>e.textCodec===Ss);if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(Oi(this.tracks,r))return void(this.tracks=r);if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const e=this.media,t=e?La(e.textTracks):null;if(this.tracks.forEach((e,r)=>{let n;if(t){let r=null;for(let n=0;n<t.length;n++)if(t[n]&&Ds(t[n],e)){r=t[n],t[n]=null;break}r&&(n=r)}if(n)ka(n);else{const t=Cs(e);n=this.createTextTrack(t,e.name,e.lang),n&&(n.mode="disabled")}n&&this.textTracks.push(n)}),null!=t&&t.length){const e=t.filter(e=>null!==e).map(e=>e.label);e.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map(e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}));this.hls.trigger(l.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const r=`textTrack${t[1]}`,n=this.captionsProperties[r];n&&(n.label=e.name,e.lang&&(n.languageCode=e.lang),n.media=e)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===f){var r,n;const{cea608Parser1:e,cea608Parser2:i,lastSn:a}=this,{cc:s,sn:o}=t.frag,l=null!=(r=null==(n=t.part)?void 0:n.index)?r:-1;e&&i&&(o!==a+1||o===a&&l!==this.lastPartIndex+1||s!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=s,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:r,payload:n}=t;if(r.type===g)if(n.byteLength){const e=r.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[r.level],i=this.vttCCs;i[r.cc]||(i[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),e&&e.textCodec===Ss?this._parseIMSC1(r,n):this._parseVTTs(t)}}else this.hls.trigger(l.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const r=this.hls;ks(t,this.initPTS[e.cc],t=>{this._appendCues(t,e.level),r.trigger(l.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},t=>{r.logger.log(`Failed to parse IMSC1: ${t}`),r.trigger(l.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})}_parseVTTs(e){var t;const{frag:r,payload:i}=e,{initPTS:a,unparsedVttFrags:s}=this,o=a.length-1;if(!a[r.cc]&&-1===o)return void s.push(e);const u=this.hls;!function(e,t,r,i,a,s,o){const l=new ys,u=O(new Uint8Array(e)).trim().replace(vs,"\n").split("\n"),c=[],d=t?function(e,t=1){return ci(e,9e4,1/t)}(t.baseTime,t.timescale):0;let h,f="00:00.000",p=0,g=0,m=!0;l.oncue=function(e){const n=r[i];let s=r.ccOffset;const o=(p-d)/9e4;if(null!=n&&n.new&&(void 0!==g?s=r.ccOffset=n.start:function(e,t,r){let n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;null!=(a=i)&&a.new;){var a;e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC]}e.presentationOffset=r}(r,i,o)),o){if(!t)return void(h=new Error("Missing initPTS for VTT MPEGTS"));s=o-r.presentationOffset}const l=e.endTime-e.startTime,u=yi(9e4*(e.startTime+s-g),9e4*a)/9e4;e.startTime=Math.max(u,0),e.endTime=Math.max(u+l,0);const f=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(f)),e.id||(e.id=Es(e.startTime,e.endTime,f)),e.endTime>0&&c.push(e)},l.onparsingerror=function(e){h=e},l.onflush=function(){h?o(h):s(c)},u.forEach(e=>{if(m){if(bs(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach(e=>{bs(e,"LOCAL:")?f=e.slice(6):bs(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))});try{g=function(e){let t=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(n(t)&&n(r)&&n(i)&&n(a)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*r,t+=6e4*i,t+=36e5*a,t}(f)/1e3}catch(e){h=e}return}""===e&&(m=!1)}l.parse(e+"\n")}),l.flush()}(null!=(t=r.initSegment)&&t.data?pe(r.initSegment.data,new Uint8Array(i)).buffer:i,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,e=>{this._appendCues(e,r.level),u.trigger(l.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},t=>{const n="Missing initPTS for VTT MPEGTS"===t.message;n?s.push(e):this._fallbackToIMSC1(r,i),u.logger.log(`Failed to parse VTT cue: ${t}`),n&&o>r.cc||u.trigger(l.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:t})})}_fallbackToIMSC1(e,t){const r=this.tracks[e.level];r.textCodec||ks(t,this.initPTS[e.cc],()=>{r.textCodec=Ss,this._parseIMSC1(e,t)},()=>{r.textCodec="wvtt"})}_appendCues(e,t){const r=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||"disabled"===r.mode)return;e.forEach(e=>Aa(r,e))}else{const n=this.tracks[t];if(!n)return;const i=n.default?"default":"subtitles"+t;r.trigger(l.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:r}=t;r.type===g&&this.onFragLoaded(l.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:n}=t;if(r.type!==f||"NONE"!==this.closedCaptionsForLevel(r))for(let e=0;e<n.length;e++){const t=n[e].bytes;if(t){this.cea608Parser1||this.initCea608Parsers();const r=this.extractCea608Data(t);this.cea608Parser1.addData(n[e].pts,r[0]),this.cea608Parser2.addData(n[e].pts,r[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:r,endOffsetSubtitles:n,type:i}){const{media:a}=this;if(a&&!(a.currentTime<r)){if(!i||"video"===i){const{captionsTracks:e}=this;Object.keys(e).forEach(n=>xa(e[n],t,r))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==n){const{textTracks:e}=this;Object.keys(e).forEach(r=>xa(e[r],t,n))}}}extractCea608Data(e){const t=[[],[]],r=31&e[0];let n=2;for(let i=0;i<r;i++){const r=e[n++],i=127&e[n++],a=127&e[n++];if((0!==i||0!==a)&&4&r){const e=3&r;0!==e&&1!==e||(t[e].push(i),t[e].push(a))}}return t}},audioStreamController:class extends en{constructor(e,t,r){super(e,t,r,"audio-stream-controller",p),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(l.LEVEL_LOADED,this.onLevelLoaded,this),e.on(l.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(l.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(l.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(l.BUFFER_RESET,this.onBufferReset,this),e.on(l.BUFFER_CREATED,this.onBufferCreated,this),e.on(l.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(l.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(l.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(l.FRAG_LOADING,this.onFragLoading,this),e.on(l.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(l.LEVEL_LOADED,this.onLevelLoaded,this),e.off(l.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(l.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(l.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(l.BUFFER_RESET,this.onBufferReset,this),e.off(l.BUFFER_CREATED,this.onBufferCreated,this),e.off(l.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(l.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(l.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(l.FRAG_LOADING,this.onFragLoading,this),e.off(l.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:r,initPTS:n,timescale:i}){if(r===f){const e=t.cc,r=this.fragCurrent;if(this.initPTS[e]={baseTime:n,timescale:i},this.log(`InitPTS for cc: ${e} found from main: ${n}/${i}`),this.mainAnchor=t,this.state===Zr){const r=this.waitingData;(!r&&!this.loadingParts||r&&r.frag.cc!==e)&&this.syncWithAnchor(t,null==r?void 0:r.frag)}else!this.hls.hasEnoughToStart&&r&&r.cc!==e?(r.abortRequests(),this.syncWithAnchor(t,r)):this.state===Gr&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var r;const n=(null==(r=this.mainFragLoading)?void 0:r.frag)||null;if(t&&(null==n?void 0:n.cc)===t.cc)return;const i=(n||e).cc,a=ot(this.getLevelDetails(),i,this.getLoadPosition());a&&(this.log(`Syncing with main frag at ${a.start} cc ${a.cc}`),this.startFragRequested=!1,this.nextLoadPosition=a.start,this.resetLoadingState(),this.state===Gr&&this.doTickIdle())}startLoad(e,t){if(!this.levels)return this.startPosition=e,void(this.state=zr);const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),r>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=Gr):this.state=Wr,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Gr:this.doTickIdle();break;case Wr:{const{levels:e,trackId:t}=this,r=null==e?void 0:e[t],n=null==r?void 0:r.details;if(n&&!this.waitForLive(r)){if(this.waitForCdnTuneIn(n))break;this.state=Zr}break}case Vr:{var e;const t=performance.now(),r=this.retryDate;if(!r||t>=r||null!=(e=this.media)&&e.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=Gr}break}case Zr:{const e=this.waitingData;if(e){const{frag:t,part:r,cache:n,complete:i}=e,a=this.mainAnchor;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.state=Kr;const e={frag:t,part:r,payload:n.flush().buffer,networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=Gr}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:r,media:n,trackId:i}=this,a=t.config;if(!this.buffering||!n&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||null==r||!r[i])return;const s=r[i],o=s.details;if(!o||this.waitForLive(s)||this.waitForCdnTuneIn(o))return this.state=Wr,void(this.startFragRequested=!1);const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,H,p));const c=this.getFwdBufferInfo(u,p);if(null===c)return;if(!this.switchingTrack&&this._streamEnded(c,o))return t.trigger(l.BUFFER_EOS,{type:"audio"}),void(this.state=Xr);const d=c.len,h=t.maxBufferLength,g=o.fragments,m=g[0].start,y=this.getLoadPosition(),v=this.flushing?y:c.end;if(this.switchingTrack&&n){const e=y;o.PTSKnown&&e<m&&(c.end>m||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=m+.05)}if(d>=h&&!this.switchingTrack&&v<g[g.length-1].start)return;let b=this.getNextFragment(v,o);if(b&&this.isLoopLoading(b,v)&&(b=this.getNextFragmentLoopLoading(b,o,c,f,h)),!b)return void(this.bufferFlushed=!0);let E=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&E&&Y(b)&&!b.endList&&(!o.live||!this.loadingParts&&v<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(E)===yt&&(this.mainFragLoading=E=null),E&&Y(E))){if(b.start>E.end){const e=this.fragmentTracker.getFragAtPos(v,f);e&&e.end>E.end&&(E=e,this.mainFragLoading={frag:e,targetBufferTime:null})}if(b.start>E.end)return}this.loadFragment(b,s,v)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(e=>new Ve(e))}onAudioTrackSwitching(e,t){const r=!!t.url;this.trackId=t.id;const{fragCurrent:n}=this;n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),r?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==zr&&(this.setInterval(100),this.state=Gr,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(l.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,t){var r;const{levels:n}=this,{details:i,id:a,groupId:s,track:o}=t;if(!n)return void this.warn(`Audio tracks reset while loading track ${a} "${o.name}" of "${s}"`);const u=this.mainDetails;if(!u||i.endCC>u.endCC||u.expired)return this.cachedTrackLoadedData=t,void(this.state!==zr&&(this.state=Wr));this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${o.name}" of "${s}" loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const c=n[a];let d=0;if(i.live||null!=(r=c.details)&&r.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;var h;c.details&&(d=this.alignPlaylists(i,c.details,null==(h=this.levelLastLoaded)?void 0:h.details)),i.alignedSliding||($r(i,u),i.alignedSliding||jr(i,u),d=i.fragmentStart)}c.details=i,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(u,d),this.hls.trigger(l.AUDIO_TRACK_UPDATED,{details:i,id:a,groupId:t.groupId}),this.state!==Wr||this.waitForCdnTuneIn(i)||(this.state=Gr),this.tick()}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:n,payload:i}=e,{config:a,trackId:s,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);const l=o[s];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const u=l.details;if(!u)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);const c=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let d=this.transmuxer;d||(d=this.transmuxer=new Ri(this.hls,p,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[r.cc],f=null==(t=r.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=n?n.index:-1,a=-1!==t,s=new It(r.level,r.sn,r.stats.chunkCount,i.byteLength,t,a);d.push(i,f,c,"",r,n,u.totalduration,e,s,h)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${u.startSN} ,${u.endSN}],track ${s}`);const{cache:e}=this.waitingData=this.waitingData||{frag:r,part:n,cache:new rn,complete:!1};e.push(new Uint8Array(i)),this.state!==zr&&(this.state=Zr)}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===f&&Y(t.frag)&&(this.mainFragLoading=t,this.state===Gr&&this.tick())}onFragBuffered(e,t){const{frag:r,part:n}=t;if(r.type===p)if(this.fragContextChanged(r))this.warn(`Fragment ${r.sn}${n?" p: "+n.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if(Y(r)){this.fragPrevious=r;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(l.AUDIO_TRACK_SWITCHED,S({},e)))}this.fragBufferedComplete(r,n),this.media&&this.tick()}else this.audioOnly||r.type!==f||r.elementaryStreams.video||r.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)}onError(e,t){var r;if(t.fatal)this.state=Qr;else switch(t.details){case o.FRAG_GAP:case o.FRAG_PARSING_ERROR:case o.FRAG_DECRYPT_ERROR:case o.FRAG_LOAD_ERROR:case o.FRAG_LOAD_TIMEOUT:case o.KEY_LOAD_ERROR:case o.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(p,t);break;case o.AUDIO_TRACK_LOAD_ERROR:case o.AUDIO_TRACK_LOAD_TIMEOUT:case o.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Wr||(null==(r=t.context)?void 0:r.type)!==d||(this.state=Gr);break;case o.BUFFER_ADD_CODEC_ERROR:case o.BUFFER_APPEND_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case o.BUFFER_FULL_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case o.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,{type:t}){t!==K&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==K){this.flushing=!1,this.bufferFlushed=!0,this.state===Xr&&(this.state=Gr);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,p),this.tick())}}_handleTransmuxComplete(e){var t;const r="audio",{hls:n}=this,{remuxResult:i,chunkMeta:a}=e,s=this.getCurrentContext(a);if(!s)return void this.resetWhenMissingContext(a);const{frag:o,part:u,level:c}=s,{details:d}=c,{audio:h,text:f,id3:p,initSegment:g}=i;if(!this.fragContextChanged(o)&&d){if(this.state=Yr,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),null!=g&&g.tracks){const e=o.initSegment||o;this._bufferInitSegment(c,g.tracks,e,a),n.trigger(l.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:r,tracks:g.tracks})}if(h){const{startPTS:e,endPTS:t,startDTS:r,endDTS:n}=h;u&&(u.elementaryStreams[H]={startPTS:e,endPTS:t,startDTS:r,endDTS:n}),o.setElementaryStreamInfo(H,e,t,r,n),this.bufferFragmentData(h,o,u,a)}if(null!=p&&null!=(t=p.samples)&&t.length){const e=b({id:r,frag:o,details:d},p);n.trigger(l.FRAG_PARSING_METADATA,e)}if(f){const e=b({id:r,frag:o,details:d},f);n.trigger(l.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,r,n){if(this.state!==Yr)return;if(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio)return;const i=t.audio;i.id=p;const a=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${a}/${i.codec}]`),a&&1===a.split(",").length&&(i.levelCodec=a),this.hls.trigger(l.BUFFER_CODECS,t);const s=i.initSegment;if(null!=s&&s.byteLength){const e={type:"audio",frag:r,part:null,chunkMeta:n,parent:r.type,data:s};this.hls.trigger(l.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,r){const n=this.fragmentTracker.getState(e);var i;if(this.switchingTrack||n===pt||n===mt)if(Y(e))if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Zr;const r=this.mainDetails;r&&r.fragmentStart!==t.details.fragmentStart&&jr(t.details,r)}else super.loadFragment(e,t,r);else this._loadInitSegment(e,t);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:r,assocLang:n,characteristics:i,audioCodec:a,channels:s}=this.bufferedTrack;Je({name:t,lang:r,assocLang:n,characteristics:i,audioCodec:a,channels:s},e,et)||(rt(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(l.AUDIO_TRACK_SWITCHED,S({},e))}},audioTrackController:class extends _i{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.MANIFEST_PARSED,this.onManifestParsed,this),e.on(l.LEVEL_LOADING,this.onLevelLoading,this),e.on(l.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(l.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(l.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.MANIFEST_PARSED,this.onManifestParsed,this),e.off(l.LEVEL_LOADING,this.onLevelLoading,this),e.off(l.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(l.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(l.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:r,groupId:n,details:i}=t,a=this.tracksInGroup[r];if(!a||a.groupId!==n)return void this.warn(`Audio track with id:${r} and group:${n} not found in active group ${null==a?void 0:a.groupId}`);const s=a.details;a.details=t.details,this.log(`Audio track ${r} "${a.name}" lang:${a.lang} group:${n} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.audioGroups||null,n=this.groupIds;let i=this.currentTrack;if(!r||(null==n?void 0:n.length)!==(null==r?void 0:r.length)||null!=r&&r.some(e=>-1===(null==n?void 0:n.indexOf(e)))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!r||-1!==r.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const r=Ze(t,e,et);if(r>-1)i=e[r];else{const e=Ze(t,this.tracks);i=this.tracks[e]}}let n=this.findTrackId(i);-1===n&&i&&(n=this.findTrackId(null));const u={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==r?void 0:r.join(",")}`),this.hls.trigger(l.AUDIO_TRACKS_UPDATED,u);const c=this.trackId;if(-1!==n&&-1===c)this.setAudioTrack(n);else if(e.length&&-1===c){var a;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(a=this.groupIds)?void 0:a.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}}onError(e,t){!t.fatal&&t.context&&(t.context.type!==d||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const n=this.currentTrack;if(n&&Je(e,n,et))return n;const i=Ze(e,this.tracksInGroup,et);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(n){let n=t.loadLevel;-1===n&&(n=t.firstAutoLevel);const i=function(e,t,r,n,i){const a=t[n],s=t.reduce((e,t,r)=>{const n=t.uri;return(e[n]||(e[n]=[])).push(r),e},{})[a.uri];s.length>1&&(n=Math.max.apply(Math,s));const o=a.videoRange,l=a.frameRate,u=a.codecSet.substring(0,4),c=tt(t,n,t=>{if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==u)return!1;const n=t.audioGroups,a=r.filter(e=>!n||-1!==n.indexOf(e.groupId));return Ze(e,a,i)>-1});return c>-1?c:tt(t,n,t=>{const n=t.audioGroups,a=r.filter(e=>!n||-1!==n.indexOf(e.groupId));return Ze(e,a,i)>-1})}(e,t.levels,r,n,et);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=Ze(e,r);if(t>-1)return r[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.selectDefaultTrack=!1;const r=this.currentTrack,n=t[e],i=n.details&&!n.details.live;if(e===this.trackId&&n===r&&i)return;if(this.log(`Switching to audio-track ${e} "${n.name}" lang:${n.lang} group:${n.groupId} channels:${n.channels}`),this.trackId=e,this.currentTrack=n,this.hls.trigger(l.AUDIO_TRACK_SWITCHING,S({},n)),i)return;const a=this.switchParams(n.url,null==r?void 0:r.details,n.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const n=t[r];if((!this.selectDefaultTrack||n.default)&&(!e||Je(e,n,et)))return r}if(e){const{name:r,lang:n,assocLang:i,characteristics:a,audioCodec:s,channels:o}=e;for(let e=0;e<t.length;e++)if(Je({name:r,lang:n,assocLang:i,characteristics:a,audioCodec:s,channels:o},t[e],et))return e;for(let r=0;r<t.length;r++){const n=t[r];if(Ii(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const n=t[r];if(Ii(e.attrs,n.attrs,["LANGUAGE"]))return r}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&rt(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,n=e.groupId,i=this.getUrlWithDirectives(e.url,t),a=e.details,s=null==a?void 0:a.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${n}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${s&&a.live?" age "+s.toFixed(1)+(a.type?" "+a.type||0:""):""} ${i}`),this.hls.trigger(l.AUDIO_TRACK_LOADING,{url:i,id:r,groupId:n,deliveryDirectives:t||null,track:e})}},emeController:Sa,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:ji,su:!this.initialized})}catch(e){this.hls.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=e=>{try{const{frag:t,part:r}=e,n=this.hls.levels[t.level],i=this.getObjectType(t),a={d:1e3*(r||t).duration,ot:i};i!==Gi&&i!==zi&&i!=Hi||(a.br=n.bitrate/1e3,a.tb=this.getTopBandwidth(i)/1e3,a.bl=this.getBufferLength(i));const s=r?this.getNextPart(r):this.getNextFrag(t);null!=s&&s.url&&s.url!==t.url&&(a.nor=s.url),this.apply(e,a)}catch(e){this.hls.logger.warn("Could not generate segment CMCD data.",e)}},this.hls=e;const t=this.config=e.config,{cmcd:r}=t;null!=r&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=!0===r.useHeaders,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.MEDIA_DETACHED,this.onMediaDetached,this),e.on(l.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.MEDIA_DETACHED,this.onMediaDetached,this),e.off(l.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var r,n;this.audioBuffer=null==(r=t.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(n=t.tracks.video)?void 0:n.buffer}createData(){var e;return{v:1,sf:Wi,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){b(t,this.createData());const r=t.ot===Ki||t.ot===Gi||t.ot===Hi;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:n}=this;n&&(t=Object.keys(t).reduce((e,r)=>(n.includes(r)&&(e[r]=t[r]),e),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),function(e,t,r){b(e,function(e,t={}){const r={};if(!e)return r;const n=Object.entries(e),i=Object.entries(Zi).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),a=n.reduce((e,t)=>{var r,n;const[a,s]=t,o=(null===(r=i.find(e=>e[1].includes(a)))||void 0===r?void 0:r[0])||qi;return null!==(n=e[o])&&void 0!==n||(e[o]={}),e[o][a]=s,e},{});return Object.entries(a).reduce((e,[r,n])=>(e[r]=ga(n,t),e),r)}(t,r))}(e.headers,t,i)):e.url=function(e,t,r){const n=function(e,t={}){if(!e)return"";const r=ga(e,t);return`CMCD=${encodeURIComponent(r)}`}(t,r);if(!n)return e;if(ma.test(e))return e.replace(ma,n);const i=e.includes("?")?"&":"?";return`${e}${i}${n}`}(e.url,t,i)}getNextFrag(e){var t;const r=null==(t=this.hls.levels[e.level])?void 0:t.details;if(r){const t=e.sn-r.startSN;return r.fragments[t+1]}}getNextPart(e){var t,r;const{index:n,fragment:i}=e,a=null==(t=this.hls.levels[i.level])||null==(r=t.details)?void 0:r.partList;if(a){const{sn:e}=i;for(let t=a.length-1;t>=0;t--){const r=a[t];if(r.index===n&&r.fragment.sn===e)return a[t+1]}}}getObjectType(e){const{type:t}=e;return"subtitle"===t?Vi:"initSegment"===e.sn?Ki:"audio"===t?zi:"main"===t?this.hls.audioTracks.length?Gi:Hi:void 0}getTopBandwidth(e){let t,r=0;const n=this.hls;if(e===zi)t=n.audioTracks;else{const e=n.maxAutoLevel,r=e>-1?e+1:n.levels.length;t=n.levels.slice(0,r)}return t.forEach(e=>{e.bitrate>r&&(r=e.bitrate)}),r>0?r:NaN}getBufferLength(e){const t=this.media,r=e===zi?this.audioBuffer:this.videoBuffer;return r&&t?1e3*Dt.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len:NaN}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new r(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,r,n){t(e),this.loader.load(e,r,n)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,r=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new r(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,r,n){t(e),this.loader.load(e,r,n)}}}},contentSteeringController:class extends T{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(l.MANIFEST_PARSED,this.onManifestParsed,this),e.on(l.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(l.MANIFEST_PARSED,this.onManifestParsed,this),e.off(l.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(t=>t!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:r}=t;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:r}=t;if(2===(null==r?void 0:r.action)&&1===r.flags){const e=this.levels;let n=this._pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:r,pathwayId:n,type:a}=t.context;r&&e?i=this.getPathwayForGroupId(r,a,i):n&&(i=n)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!n&&e&&(n=this.pathways()),n&&n.length>1&&(this.updatePathwayPriority(n),r.resolved=this.pathwayId!==i),t.details!==o.BUFFER_APPEND_ERROR||t.fatal?r.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${i} levels: ${e?e.length:e} priorities: ${Ye(n)} penalized: ${Ye(this.penalizedPathways)}`):r.resolved=!0}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){let t;this._pathwayPriority=e;const r=this.penalizedPathways,n=performance.now();Object.keys(r).forEach(e=>{n-r[e]>3e5&&delete r[e]});for(let n=0;n<e.length;n++){const i=e[n];if(i in r)continue;if(i===this.pathwayId)return;const a=this.hls.nextLoadLevel,s=this.hls.levels[a];if(t=this.getLevelsForPathway(i),t.length>0){this.log(`Setting Pathway to "${i}"`),this.pathwayId=i,Nr(t),this.hls.trigger(l.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[a];s&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==s.bitrate&&this.log(`Unstable Pathways change from bitrate ${s.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,t,r){const n=this.getLevelsForPathway(r).concat(this.levels||[]);for(let r=0;r<n.length;r++)if(t===d&&n[r].hasAudioGroup(e)||t===h&&n[r].hasSubtitleGroup(e))return n[r].pathwayId;return r}clonePathways(e){const t=this.levels;if(!t)return;const r={},n={};e.forEach(e=>{const{ID:i,"BASE-ID":a,"URI-REPLACEMENT":s}=e;if(t.some(e=>e.pathwayId===i))return;const o=this.getLevelsForPathway(a).map(e=>{const t=new zt(e.attrs);t["PATHWAY-ID"]=i;const a=t.AUDIO&&`${t.AUDIO}_clone_${i}`,o=t.SUBTITLES&&`${t.SUBTITLES}_clone_${i}`;a&&(r[t.AUDIO]=a,t.AUDIO=a),o&&(n[t.SUBTITLES]=o,t.SUBTITLES=o);const l=va(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",s),u=new Ve({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let t=1;t<e.audioGroups.length;t++)u.addGroupId("audio",`${e.audioGroups[t]}_clone_${i}`);if(e.subtitleGroups)for(let t=1;t<e.subtitleGroups.length;t++)u.addGroupId("text",`${e.subtitleGroups[t]}_clone_${i}`);return u});t.push(...o),ya(this.audioTracks,r,s,i),ya(this.subtitleTracks,n,s,i)})}loadSteeringManifest(e){const t=this.hls.config,r=t.loader;let n;this.loader&&this.loader.destroy(),this.loader=new r(t);try{n=new self.URL(e)}catch(t){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==n.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);n.searchParams.set("_HLS_pathway",this.pathwayId),n.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:n.href},a=t.steeringManifestLoadPolicy.default,s=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},u={onSuccess:(e,t,r,i)=>{this.log(`Loaded steering manifest: "${n}"`);const a=e.data;if(1!==(null==a?void 0:a.VERSION))return void this.log(`Steering VERSION ${a.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=a.TTL;const{"RELOAD-URI":s,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":u}=a;if(s)try{this.uri=new self.URL(s,n).href}catch(e){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${s}`)}this.scheduleRefresh(this.uri||r.url),o&&this.clonePathways(o);const c={steeringManifest:a,url:n.toString()};this.hls.trigger(l.STEERING_MANIFEST_LOADED,c),u&&this.updatePathwayPriority(u)},onError:(e,t,r,n)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let i=1e3*this.timeToLoad;if(429===e.code){const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}return void this.log(`Steering manifest ${t.url} rate limited`)}this.scheduleRefresh(this.uri||t.url,i)},onTimeout:(e,t,r)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${n}`),this.loader.load(i,o,u)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var t;const r=null==(t=this.hls)?void 0:t.media;!r||r.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)},t)}},interstitialsController:class extends T{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;const t=e-this.timelinePos;if(Math.abs(t)<1/7056e5)return;const r=t<=-.01;this.timelinePos=e,this.bufferedPos=e;const n=this.playingItem;if(!n)return void this.checkBuffer();if(r&&this.schedule.resetErrorsInRange(e,e-t)&&this.updateSchedule(),this.checkBuffer(),r&&e<n.start||e>=n.end){var i;const e=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(n)&&null!=(i=this.media)&&i.paused&&(this.shouldPlay=!1),!r){const t=this.findItemIndex(n);if(e>t){const r=this.schedule.findJumpRestrictedIndex(t+1,e);if(r>t)return void this.setSchedulePosition(r)}}return void this.setSchedulePosition(e)}const a=this.playingAsset;if(!a){if(this.playingLastItem&&this.isInterstitial(n)){const t=n.event.assetList[0];t&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(e,t))}return}const s=a.timelineStart,o=a.duration||0;(r&&e<s||e>=s+o)&&this.setScheduleToAssetAtTime(e,a)},this.onTimeupdate=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;if(!(e>this.timelinePos))return;this.timelinePos=e,e>this.bufferedPos&&this.checkBuffer();const t=this.playingItem;if(!t||this.playingLastItem)return;if(e>=t.end){this.timelinePos=t.end;const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}const r=this.playingAsset;r&&e>=r.timelineStart+(r.duration||0)&&this.setScheduleToAssetAtTime(e,r)},this.onScheduleUpdate=(e,t)=>{const r=this.schedule,n=this.playingItem,i=r.events||[],a=r.items||[],s=r.durations,o=e.map(e=>e.identifier),u=!(!i.length&&!o.length);(u||t)&&this.log(`INTERSTITIALS_UPDATED (${i.length}): ${i}\nSchedule: ${a.map(e=>Ba(e))} pos: ${this.timelinePos}`),o.length&&this.log(`Removed events ${o}`),this.playerQueue.forEach(e=>{if(e.interstitial.appendInPlace){const t=e.assetItem.timelineStart,r=e.timelineOffset-t;if(r)try{e.timelineOffset=t}catch(n){Math.abs(r)>Ra&&this.warn(`${n} ("${e.assetId}" ${e.timelineOffset}->${t})`)}}});let c=null;if(n){const e=this.updateItem(n,this.timelinePos);this.itemsMatch(n,e)&&(this.playingItem=e,this.waitingItem=this.endedItem=null,c=()=>this.trimInPlace(e,n))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const d=this.bufferingItem;if(d){const e=this.updateItem(d,this.bufferedPos);this.itemsMatch(d,e)?(this.bufferingItem=e,c||(c=()=>this.trimInPlace(e,d))):d.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(d.event,null))}if(e.forEach(e=>{e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,null)})}),u||t){if(this.hls.trigger(l.INTERSTITIALS_UPDATED,{events:i.slice(0),schedule:a.slice(0),durations:s,removedIds:o}),this.isInterstitial(n)&&o.includes(n.event.identifier))return this.warn(`Interstitial "${n.event.identifier}" removed while playing`),void this.primaryFallback(n.event);c&&c(),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new $a(e),this.schedule=new Ua(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(l.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(l.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(l.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(l.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(l.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(l.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(l.BUFFER_APPENDED,this.onBufferAppended,this),e.on(l.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(l.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(l.MEDIA_ENDED,this.onMediaEnded,this),e.on(l.ERROR,this.onError,this),e.on(l.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(l.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(l.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(l.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(l.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(l.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(l.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(l.BUFFER_CODECS,this.onBufferCodecs,this),e.off(l.BUFFER_APPENDED,this.onBufferAppended,this),e.off(l.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(l.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(l.MEDIA_ENDED,this.onMediaEnded,this),e.off(l.ERROR,this.onError,this),e.off(l.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Ea(e,"play",this.onPlay),Ea(e,"pause",this.onPause),Ea(e,"seeking",this.onSeeking),Ea(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const r=this.media=t.media;ba(r,"seeking",this.onSeeking),ba(r,"timeupdate",this.onTimeupdate),ba(r,"play",this.onPlay),ba(r,"pause",this.onPause)}onMediaAttached(e,t){const r=this.effectivePlayingItem,n=this.detachedData;if(this.detachedData=null,null===r)this.checkStart();else if(!n){this.clearScheduleState();const e=this.findItemIndex(r);this.setSchedulePosition(e)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const r=!!t.transferMedia,n=this.media;if(this.media=null,!r&&(n&&this.removeMediaListeners(n),this.detachedData)){const e=this.getBufferingPlayer();e&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,e.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,t=()=>e.bufferingItem||e.waitingItem,r=t=>t?e.getAssetPlayer(t.identifier):t,n=(t,n,i,s,o)=>{if(t){let l=t[n].start;const u=t.event;if(u){if("playout"===n||u.timelineOccupancy!==_a.Point){const e=r(i);(null==e?void 0:e.interstitial)===u&&(l+=e.assetItem.startOffset+e[o])}}else l+=("bufferedPos"===s?a():e[s])-t.start;return l}return 0},i=(t,r)=>{if(0!==t&&"primary"!==r&&e.schedule.length){var n;const i=e.schedule.findItemIndexAtTime(t),a=null==(n=e.schedule.items)?void 0:n[i];if(a)return t+(a[r].start-a.start)}return t},a=()=>{const t=e.bufferedPos;return t===Number.MAX_VALUE?s("primary"):Math.max(t,0)},s=t=>{var r;return null!=(r=e.primaryDetails)&&r.live?e.primaryDetails.edge:e.schedule.durations[t]},o=(t,i)=>{var a,s;const o=e.effectivePlayingItem;if(null!=o&&null!=(a=o.event)&&a.restrictions.skip)return;e.log(`seek to ${t} "${i}"`);const l=e.effectivePlayingItem,u=e.schedule.findItemIndexAtTime(t,i),c=null==(s=e.schedule.items)?void 0:s[u],d=e.getBufferingPlayer(),h=null==d?void 0:d.interstitial,f=null==h?void 0:h.appendInPlace,p=l&&e.itemsMatch(l,c);if(l&&(f||p)){const a=r(e.playingAsset),s=(null==a?void 0:a.media)||e.primaryMedia;if(s){const r="primary"===i?s.currentTime:n(l,i,e.playingAsset,"timelinePos","currentTime"),o=t-r,u=(f?r:s.currentTime)+o;if(u>=0&&(!a||f||u<=a.duration))return void(s.currentTime=u)}}if(c){let r=t;if("primary"!==i){const e=t-c[i].start;r=c.start+e}const n=!e.isInterstitial(c);if(e.isInterstitial(l)&&!l.event.appendInPlace||!n&&!c.event.appendInPlace){if(l){const a=e.findItemIndex(l);if(u>a){const t=e.schedule.findJumpRestrictedIndex(a+1,u);if(t>a)return void e.setSchedulePosition(t)}let s=0;if(n)e.timelinePos=r,e.checkBuffer();else{var g;const e=null==c||null==(g=c.event)?void 0:g.assetList;if(e){const r=t-(c[i]||c).start;for(let t=e.length;t--;){const n=e[t];if(n.duration&&r>=n.startOffset&&r<n.startOffset+n.duration){s=t;break}}}}e.setSchedulePosition(u,s)}}else{const t=e.media||(f?null==d?void 0:d.media:null);t&&(t.currentTime=r)}}},l=()=>{const r=e.effectivePlayingItem;if(e.isInterstitial(r))return r;const n=t();return e.isInterstitial(n)?n:null},u={get currentTime(){const t=l(),r=e.effectivePlayingItem;return r&&r===t?n(r,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-r.playout.start:0},set currentTime(t){const r=l(),n=e.effectivePlayingItem;n&&n===r&&o(t+n.playout.start,"playout")},get duration(){const e=l();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t;const r=null==(t=l())?void 0:t.event.assetList;return r?r.map(t=>e.getAssetPlayer(t.identifier)):[]},get playingIndex(){var t;const r=null==(t=l())?void 0:t.event;return r&&e.effectivePlayingAsset?r.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return l()}};this.manager={get events(){var t,r;return(null==(t=e.schedule)||null==(r=t.events)?void 0:r.slice(0))||[]},get schedule(){var t,r;return(null==(t=e.schedule)||null==(r=t.items)?void 0:r.slice(0))||[]},get interstitialPlayer(){return l()?u:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const r=t();return e.findItemIndex(r)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return a()},get currentTime(){const t=e.timelinePos;return t>0?t:0},set currentTime(e){o(e,"primary")},get duration(){return s("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return n(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return n(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){o(e,"integrated")},get duration(){return s("integrated")},get seekableStart(){var t;return i((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:()=>{const t=e.effectivePlayingItem,r=null==t?void 0:t.event;if(r&&!r.restrictions.skip){const n=e.findItemIndex(t);if(r.appendInPlace){const e=t.playout.start+t.event.duration;o(e+.001,"playout")}else e.advanceAfterAssetEnded(r,n,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,r=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&r)&&this.findItemIndex(t)===r.length-1}get playbackStarted(){return null!==this.effectivePlayingItem}get currentTime(){var e,t,r;if(null===this.mediaSelection)return;const i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let a=this.media;!a&&null!=(e=this.bufferingItem)&&null!=(t=e.event)&&t.appendInPlace&&(a=this.primaryMedia);const s=null==(r=a)?void 0:r.currentTime;return void 0!==s&&n(s)?s:void 0}get primaryMedia(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}isInterstitial(e){return!(null==e||!e.event)}retreiveMediaSource(e,t){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,t)}transferMediaFromPlayer(e,t){const r=e.interstitial.appendInPlace,n=e.media;if(r&&n===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&n)return void(this.detachedData={media:n});const r=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Ye(r)}`),this.detachedData=r}else t&&n&&(this.shouldPlay||(this.shouldPlay=!n.paused))}transferMediaTo(e,t){var r,n;if(e.media===t)return;let i=null;const a=this.hls,s=e!==a,o=s&&e.interstitial.appendInPlace,l=null==(r=this.detachedData)?void 0:r.mediaSource;let u;if(a.media)o&&(i=a.transferMedia(),this.detachedData=i),u="Primary";else if(l){const e=this.getBufferingPlayer();e?(i=e.transferMedia(),u=`${e}`):u="detached MediaSource"}else u="detached media";if(!i)if(l)i=this.detachedData,this.log(`using detachedData: MediaSource ${Ye(i)}`);else if(!this.detachedData||a.media===t){const e=this.playerQueue;e.length>1&&e.forEach(e=>{if(s&&e.interstitial.appendInPlace!==o){const t=e.interstitial;this.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${t}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}const c=i&&"mediaSource"in i&&"closed"!==(null==(n=i.mediaSource)?void 0:n.readyState),d=c&&i?i:t;if(this.log(`${c?"transfering MediaSource":"attaching media"} to ${s?e:"Primary"} from ${u}`),d===i){const t=s&&e.assetId===this.schedule.assetIdAtEnd;d.overrides={duration:this.schedule.duration,endOfStream:!s||t,cueRemoval:!s}}e.attachMedia(d)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e.events;if(!t||this.playbackDisabled||!this.media)return;-1===this.bufferedPos&&(this.bufferedPos=0);const r=this.timelinePos,n=this.effectivePlayingItem;if(-1===r){const r=this.hls.startPosition;if(this.timelinePos=r,t.length&&t[0].cue.pre){const r=e.findEventIndex(t[0].identifier);this.setSchedulePosition(r)}else if(r>=0||!this.primaryLive){const t=this.timelinePos=r>0?r:0,n=e.findItemIndexAtTime(t);this.setSchedulePosition(n)}}else if(n&&!this.playingItem){const t=e.findItemIndex(n);this.setSchedulePosition(t)}}advanceAfterAssetEnded(e,t,r){const n=Ma(e,r);if(e.isAssetPastPlayoutLimit(n)){const r=this.schedule.items;if(r){const n=t+1;if(n>=r.length)return void this.setSchedulePosition(-1);const i=e.resumeTime;this.timelinePos<i&&(this.timelinePos=i,this.checkBuffer()),this.setSchedulePosition(n)}}else this.setSchedulePosition(t,n)}setScheduleToAssetAtTime(e,t){const r=this.schedule,n=t.parentIdentifier,i=r.getEvent(n);if(i){const t=r.findEventIndex(n),a=r.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,t,a-1)}}setSchedulePosition(e,t){const r=this.schedule.items;if(!r||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${t}`);const n=e>=0?r[e]:null,i=this.playingItem,a=this.playingLastItem;if(this.isInterstitial(i)){var s;const u=i.event,c=this.playingAsset,d=null==c?void 0:c.identifier,h=d?this.getAssetPlayer(d):null;if(h&&d&&(!this.eventItemsMatch(i,n)||void 0!==t&&d!==(null==(s=u.assetList)?void 0:s[t].identifier))){var o;const t=u.findAssetIndex(c);if(this.log(`INTERSTITIAL_ASSET_ENDED ${t+1}/${u.assetList.length} ${Na(c)}`),this.endedAsset=c,this.playingAsset=null,this.hls.trigger(l.INTERSTITIAL_ASSET_ENDED,{asset:c,assetListIndex:t,event:u,schedule:r.slice(0),scheduleIndex:e,player:h}),i!==this.playingItem)return void(this.itemsMatch(i,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(u,this.findItemIndex(this.playingItem),t));this.retreiveMediaSource(d,n),!h.media||null!=(o=this.detachedData)&&o.mediaSource||h.detachMedia()}if(!this.eventItemsMatch(i,n)&&(this.endedItem=i,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${u} ${Ba(i)}`),u.hasPlayed=!0,this.hls.trigger(l.INTERSTITIAL_ENDED,{event:u,schedule:r.slice(0),scheduleIndex:e}),u.cue.once)){this.updateSchedule();const e=this.schedule.items;if(n&&e){const r=this.findItemIndex(n);this.advanceSchedule(r,e,t,i,a)}return}}this.advanceSchedule(e,r,t,i,a)}advanceSchedule(e,t,r,n,i){const a=e>=0?t[e]:null,s=this.primaryMedia,o=this.playerQueue;if(o.length&&o.forEach(t=>{const r=t.interstitial,n=this.schedule.findEventIndex(r.identifier);(n<e||n>e+1)&&this.clearInterstitial(r,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const i=a.event;if(void 0===r){const t=Ma(i,(r=this.schedule.findAssetIndex(i,this.timelinePos))-1);if(i.isAssetPastPlayoutLimit(t))return void this.advanceAfterAssetEnded(i,e,r);r=t}const o=this.waitingItem;this.assetsBuffered(a,s)||this.setBufferingItem(a);let u=this.preloadAssets(i,r);if(this.eventItemsMatch(a,o||n)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${Ba(a)} ${i.appendInPlace?"append in place":""}`),this.hls.trigger(l.INTERSTITIAL_STARTED,{event:i,schedule:t.slice(0),scheduleIndex:e})),!i.assetListLoaded)return void this.log(`Waiting for ASSET-LIST to complete loading ${i}`);if(i.assetListLoader&&(i.assetListLoader.destroy(),i.assetListLoader=void 0),!s)return void this.log(`Waiting for attachMedia to start Interstitial ${i}`);this.waitingItem=this.endedItem=null,this.playingItem=a;const c=i.assetList[r];if(!c){const n=t[e+1],a=this.media;return n&&a&&!this.isInterstitial(n)&&a.currentTime<n.start&&(a.currentTime=this.timelinePos=n.start),void this.advanceAfterAssetEnded(i,e,r||0)}if(u||(u=this.getAssetPlayer(c.identifier)),null===u||u.destroyed){const e=i.assetList.length;this.warn(`asset ${r+1}/${e} player destroyed ${i}`),u=this.createAssetPlayer(i,c,r)}if(!this.eventItemsMatch(a,this.bufferingItem)&&i.appendInPlace&&this.isAssetBuffered(c))return;this.startAssetPlayer(u,r,t,e,s),this.shouldPlay&&ja(u.media)}else null!==a?(this.resumePrimary(a,e,n),this.shouldPlay&&ja(this.hls.media)):i&&this.isInterstitial(n)&&(this.endedItem=null,this.playingItem=n,n.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return!1===this.hls.config.enableInterstitialPlayback}get primaryDetails(){var e,t;return null==(e=this.mediaSelection)||null==(t=e.main)?void 0:t.details}get primaryLive(){var e;return!(null==(e=this.primaryDetails)||!e.live)}resumePrimary(e,t,r){var n;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Ba(e)}`),null==(n=this.detachedData)||!n.mediaSource){let r=this.timelinePos;(r<e.start||r>=e.end)&&(r=this.getPrimaryResumption(e,t),this.timelinePos=r),this.attachPrimary(r,e)}if(!r)return;const i=this.schedule.items;i&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Ba(e)}`),this.hls.trigger(l.INTERSTITIALS_PRIMARY_RESUMED,{schedule:i.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const r=e.start;if(this.primaryLive){const e=this.primaryDetails;if(0===t)return this.hls.startPosition;if(e&&(r<e.fragmentStart||r>e.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return null!=t&&t.hls?t.hls.bufferedToEnd:Dt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,r){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const n=this.primaryMedia;if(!n)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,n),r&&this.startLoadingPrimaryAt(e,r)),r||(this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,t){var r;const n=this.hls;!n.loadingEnabled||!n.media||Math.abs(((null==(r=n.mainForwardBufferInfo)?void 0:r.start)||n.media.currentTime)-e)>.5?n.startLoad(e,t):n.bufferingEnabled||n.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(l.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(l.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(-1===t.level)return;const r=this.hls.levels[t.level],n=S(S({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=n,this.schedule.parseInterstitialDateRanges(n,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const r=this.hls.audioTracks[t.id],n=this.mediaSelection;if(!n)return void(this.altSelection=S(S({},this.altSelection),{},{audio:r}));const i=S(S({},n),{},{audio:r});this.mediaSelection=i}onSubtitleTrackUpdated(e,t){const r=this.hls.subtitleTracks[t.id],n=this.mediaSelection;if(!n)return void(this.altSelection=S(S({},this.altSelection),{},{subtitles:r}));const i=S(S({},n),{},{subtitles:r});this.mediaSelection=i}onAudioTrackSwitching(e,t){const r=Qe(t);this.playerQueue.forEach(e=>e.hls.setAudioOption(t)||e.hls.setAudioOption(r))}onSubtitleTrackSwitch(e,t){const r=Qe(t);this.playerQueue.forEach(e=>e.hls.setSubtitleOption(t)||-1!==t.id&&e.hls.setSubtitleOption(r))}onBufferCodecs(e,t){const r=t.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const e=this.timelinePos;this.bufferedPos=e,this.checkBuffer()}}onBufferedToEnd(e){const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let e=0;e<t.length;e++){const n=t[e];if(n.cue.post){var r;const e=this.schedule.findEventIndex(n.identifier),t=null==(r=this.schedule.items)?void 0:r[e];this.isInterstitial(t)&&this.eventItemsMatch(t,this.bufferingItem)&&this.bufferedToItem(t,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}else this.shouldPlay=!1}updateItem(e,t){const r=this.schedule.items;return e&&r&&r[this.findItemIndex(e,t)]||null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((t,r)=>{e.event.isAssetPastPlayoutLimit(r)&&this.clearAssetPlayer(t.identifier,null)});const t=e.end+.25,r=Dt.bufferInfo(this.primaryMedia,t,0);(r.end>t||(r.nextStart||0)>t)&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var r;return!!t&&(e===t||e.event.identifier===(null==(r=t.event)?void 0:r.identifier))}findItemIndex(e,t){return e?this.schedule.findItemIndex(e,t):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const t=this.schedule.items;if(!t)return;const r=Dt.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,t,e)}updateBufferedPos(e,t,r){const n=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e)return;if(1===t.length&&this.itemsMatch(t[0],i))return void(this.bufferedPos=e);const a=this.playingItem,s=this.findItemIndex(a);let o=n.findItemIndexAtTime(e);if(this.bufferedPos<e){var l,u;const r=this.findItemIndex(i),n=Math.min(r+1,t.length-1),a=t[n];if((-1===o&&i&&e>=i.end||null!=(l=a.event)&&l.appendInPlace&&e+.01>=a.start)&&(o=n),n-s>1&&!1===(null==i||null==(u=i.event)?void 0:u.appendInPlace))return;if(this.bufferedPos=e,o>r&&o>s)this.bufferedToItem(a);else{const t=this.primaryDetails;this.primaryLive&&t&&e>t.edge-t.targetduration&&a.start<t.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(a)&&this.preloadAssets(a.event,0)}}else r&&a&&!this.itemsMatch(a,i)&&(o===s?this.bufferedToItem(a):o===s+1&&this.bufferedToItem(t[o]))}assetsBuffered(e,t){return 0!==e.event.assetList.length&&!e.event.assetList.some(e=>{const r=this.getAssetPlayer(e.identifier);return!(null!=r&&r.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,r=this.schedule;if(this.itemsMatch(e,t))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:n,events:i}=r;if(!n||!i)return t;const a=this.isInterstitial(e),s=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const o=s?s.remaining:t?t.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Ba(e)}`+(t?` (${o.toFixed(2)} remaining)`:"")),this.playbackDisabled||(a?e.event.assetList.forEach(e=>{const t=this.getAssetPlayer(e.identifier);t&&t.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(e=>e.pauseBuffering()))),this.hls.trigger(l.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:n.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return t}bufferedToItem(e,t=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==r){this.bufferingAsset=null;const t=this.detachedData;if(t)if(t.mediaSource){const t=!0;this.attachPrimary(e.start,e,t)}else this.preloadPrimary(e);else this.preloadPrimary(e)}}preloadPrimary(e){const t=this.findItemIndex(e),r=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,t){const r=e.event,n=0===r.assetList.length&&!r.assetListLoader,i=r.cue.once;if(n||!i){const e=this.preloadAssets(r,t);if(null!=e&&e.interstitial.appendInPlace){const n=r.assetList[t],i=this.primaryMedia;n&&i&&this.bufferAssetPlayer(e,i)}}}preloadAssets(e,t){const r=e.assetUrl,n=e.assetList.length,i=0===n&&!e.assetListLoader,a=e.cue.once;if(i){const i=e.timelineStart;if(e.appendInPlace){var s;const t=this.playingItem;this.isInterstitial(t)||(null==t||null==(s=t.nextEvent)?void 0:s.identifier)!==e.identifier||this.flushFrontBuffer(i+.25)}let a,o=0;if(!this.playingItem&&this.primaryLive&&(o=this.hls.startPosition,-1===o&&(o=this.hls.liveSyncPosition||0)),o&&!e.cue.pre&&!e.cue.post){const e=o-i;e>0&&(a=Math.round(1e3*e)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${r?1:n} ${e}${a?` live-start: ${o} start-offset: ${a}`:""}`),r)return this.createAsset(e,0,0,i,e.duration,r);const l=this.assetListLoader.loadAssetList(e,a);l&&(e.assetListLoader=l)}else if(!a&&n){for(let r=t;r<n;r++){const t=e.assetList[r],n=this.getAssetPlayerQueueIndex(t.identifier);-1!==n&&!this.playerQueue[n].destroyed||t.error||this.createAssetPlayer(e,t,r)}return this.getAssetPlayer(e.assetList[t].identifier)}return null}flushFrontBuffer(e){const t=this.requiredTracks;t&&(this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(t=>{this.hls.trigger(l.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:t})}))}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let r=0;r<t.length;r++)if(e===t[r].assetId)return r;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t)for(let r=0;r<e.length;r++)if(e[r].media===t)return e[r];return null}createAsset(e,t,r,n,i,a){const s={parentIdentifier:e.identifier,identifier:Oa(e,a,t),duration:i,startOffset:r,timelineStart:n,uri:a};return this.createAssetPlayer(e,s,t)}createAssetPlayer(e,t,r){const n=this.hls,i=n.userConfig;let a=i.videoPreference;const u=n.loadLevelObj||n.levels[n.currentLevel];(a||u)&&(a=b({},a),u.videoCodec&&(a.videoCodec=u.videoCodec),u.videoRange&&(a.allowedVideoRanges=[u.videoRange]));const c=n.audioTracks[n.audioTrack],d=n.subtitleTracks[n.subtitleTrack];let h=0;if(this.primaryLive||e.appendInPlace){const e=this.timelinePos-t.timelineStart;if(e>1){const r=t.duration;r&&e<r&&(h=e)}}const f=t.identifier,p=S(S({},i),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:n.sessionId,assetPlayerId:f,abrEwmaDefaultEstimate:n.bandwidthEstimate,interstitialsController:void 0,startPosition:h,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:c||i.audioPreference,subtitlePreference:d||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(p.timelineOffset=t.timelineStart));const g=p.cmcd;null!=g&&g.sessionId&&g.contentId&&(p.cmcd=b({},g,{contentId:Pa(t.uri)})),this.getAssetPlayer(f)&&this.warn(`Duplicate date range identifier ${e} and asset ${f}`);const m=new Fa(this.HlsPlayerClass,p,e,t);this.playerQueue.push(m),e.assetList[r]=t;const y=n=>{if(n.live){const t=new Error(`Interstitials MUST be VOD assets ${e}`),n={fatal:!0,type:s.OTHER_ERROR,details:o.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};return void this.handleAssetItemError(n,e,this.schedule.findEventIndex(e.identifier),r,t.message)}const i=n.edge-n.fragmentStart,a=t.duration;(null===a||i>a)&&(this.log(`Interstitial asset "${f}" duration change ${a} > ${i}`),t.duration=i,this.updateSchedule())};m.on(l.LEVEL_UPDATED,(e,{details:t})=>y(t)),m.on(l.LEVEL_PTS_UPDATED,(e,{details:t})=>y(t));const v=(e,t)=>{const r=this.getAssetPlayer(f);if(r&&t.tracks){r.off(l.BUFFER_CODECS,v),r.tracks=t.tracks;const e=this.primaryMedia;this.bufferingAsset===r.assetItem&&e&&!r.media&&this.bufferAssetPlayer(r,e)}};m.on(l.BUFFER_CODECS,v);const E=()=>{var r;const n=this.getAssetPlayer(f);if(this.log(`buffered to end of asset ${n}`),!n)return;const i=this.schedule.findEventIndex(e.identifier),a=null==(r=this.schedule.items)?void 0:r[i];if(this.isInterstitial(a)){const r=e.findAssetIndex(t),n=Ma(e,r);if(e.isAssetPastPlayoutLimit(n)){var s;const e=null==(s=this.schedule.items)?void 0:s[i+1];e&&this.bufferedToItem(e)}else this.bufferedToItem(a,n)}};m.on(l.BUFFERED_TO_END,E);const T=t=>()=>{if(!this.getAssetPlayer(f))return;this.shouldPlay=!0;const r=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,r,t)};return m.once(l.MEDIA_ENDED,T(r)),m.once(l.PLAYOUT_LIMIT_REACHED,T(1/0)),m.on(l.ERROR,(t,n)=>{const i=this.getAssetPlayer(f);if(n.details!==o.BUFFER_STALLED_ERROR)this.handleAssetItemError(n,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${n.error} ${e}`);else if(null!=i&&i.media){const t=i.currentTime,r=i.duration-t;t&&e.appendInPlace&&r/i.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${f} ${e} at ${i.media.currentTime}`),E()):(this.warn(`Stalled at ${t} of ${t+r} in asset ${f} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}}),m.on(l.DESTROYING,()=>{if(!this.getAssetPlayer(f))return;const t=new Error(`Asset player destroyed unexpectedly ${f}`),n={fatal:!0,type:s.OTHER_ERROR,details:o.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};this.handleAssetItemError(n,e,this.schedule.findEventIndex(e.identifier),r,t.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Na(t)}`),this.hls.trigger(l.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:r,event:e,player:m}),m}clearInterstitial(e,t){e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(-1!==t){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[t];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,t){const r=this.getAssetPlayerQueueIndex(e);if(-1!==r){this.log(`clear asset player "${e}" toSegment: ${t?Ba(t):t}`);const n=this.playerQueue[r];this.transferMediaFromPlayer(n,t),this.playerQueue.splice(r,1),n.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,r,n,i){const{interstitial:a,assetItem:s,assetId:o}=e,u=a.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=s,c&&c.identifier===o||(c&&(this.clearAssetPlayer(c.identifier,r[n]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${u} ${Na(s)}`),this.hls.trigger(l.INTERSTITIAL_ASSET_STARTED,{asset:s,assetListIndex:t,event:a,schedule:r.slice(0),scheduleIndex:n,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,t){var r,n;const{interstitial:i,assetItem:a}=e,l=this.schedule.findEventIndex(i.identifier),u=null==(r=this.schedule.items)?void 0:r[l];if(!u)return;this.setBufferingItem(u),this.bufferingAsset=a;const c=this.getBufferingPlayer();if(c===e)return;const d=i.appendInPlace;if(d&&!1===(null==c?void 0:c.interstitial.appendInPlace))return;const h=(null==c?void 0:c.tracks)||(null==(n=this.detachedData)?void 0:n.tracks)||this.requiredTracks;if(d&&a!==this.playingAsset){if(!e.tracks)return;if(h&&!_(h,e.tracks)){const t=new Error(`Asset ${Na(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),r={fatal:!0,type:s.OTHER_ERROR,details:o.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},n=i.findAssetIndex(a);return void this.handleAssetItemError(r,i,l,n,t.message)}}this.transferMediaTo(e,t)}handleAssetItemError(e,t,r,n,i){if(e.details===o.BUFFER_STALLED_ERROR)return;const a=t.assetList[n];this.warn(`INTERSTITIAL_ASSET_ERROR ${a?Na(a):a} ${e.error}`);const s=null==a?void 0:a.identifier,u=this.getAssetPlayerQueueIndex(s),c=this.playerQueue[u]||null,d=this.schedule.items,h=b({},e,{fatal:!1,errorAction:ft(!0),asset:a,assetListIndex:n,event:t,schedule:d,scheduleIndex:r,player:c});if(this.hls.trigger(l.INTERSTITIAL_ASSET_ERROR,h),!e.fatal)return;const f=this.playingAsset,p=new Error(i);if(a&&(this.clearAssetPlayer(s,null),a.error=p),t.assetList.some(e=>!e.error)){for(let e=n;e<t.assetList.length;e++)this.resetAssetPlayer(t.assetList[e].identifier);this.updateSchedule()}else t.error=p;t.error?this.primaryFallback(t):f&&f.identifier===s&&this.advanceAfterAssetEnded(t,r,n)}primaryFallback(e){const t=e.timelineStart,r=this.effectivePlayingItem;if(this.updateSchedule(),r){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${r?Ba(r):"<none>"} error: ${e.error}`);let n=this.timelinePos;-1===n&&(n=this.hls.startPosition);const i=this.updateItem(r,n);this.itemsMatch(r,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t));const a=this.schedule.findItemIndexAtTime(n);this.setSchedulePosition(a)}else this.checkStart()}onAssetListLoaded(e,t){var r;const n=t.event,i=n.identifier,a=t.assetListResponse.ASSETS;if(!this.schedule.hasEvent(i))return;const s=n.timelineStart,o=n.duration;let l=0;a.forEach((e,t)=>{const r=parseFloat(e.DURATION);this.createAsset(n,t,l,s+l,r,e.URI),l+=r}),n.duration=l,this.log(`Loaded asset-list with duration: ${l} (was: ${o}) ${n}`);const u=this.waitingItem,c=(null==u?void 0:u.event.identifier)===i;this.updateSchedule();const d=null==(r=this.bufferingItem)?void 0:r.event;if(c){var h;const e=this.schedule.findEventIndex(i),t=null==(h=this.schedule.items)?void 0:h[e];if(t){if(!this.playingItem&&this.timelinePos>t.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==e)return n.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${n}`),void this.primaryFallback(n);this.setBufferingItem(t)}this.setSchedulePosition(e)}else if((null==d?void 0:d.identifier)===i&&d.appendInPlace){const e=n.assetList[0],t=this.getAssetPlayer(e.identifier),r=this.primaryMedia;e&&t&&r&&this.bufferAssetPlayer(t,r)}}onError(e,t){switch(t.details){case o.ASSET_LIST_PARSING_ERROR:case o.ASSET_LIST_LOAD_ERROR:case o.ASSET_LIST_LOAD_TIMEOUT:{const e=t.interstitial;e&&this.primaryFallback(e);break}case o.BUFFER_STALLED_ERROR:this.onTimeupdate(),this.checkBuffer(!0)}}}});function Ks(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(Ks):Object.keys(e).reduce((t,r)=>(t[r]=Ks(e[r]),t),{}):e}class Vs extends Ot{constructor(e,t){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var e;null!=(e=this.media)&&e.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{var e;this.hls&&(this.ended=(null==(e=this.media)?void 0:e.currentTime)||1,this.hls.trigger(l.MEDIA_ENDED,{stalled:!1}))},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(100),this.mediaSource=t.mediaSource;const r=this.media=t.media;ba(r,"playing",this.onMediaPlaying),ba(r,"waiting",this.onMediaWaiting),ba(r,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:r}=this;r&&(Ea(r,"playing",this.onMediaPlaying),Ea(r,"waiting",this.onMediaWaiting),Ea(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(null==(e=this.media)||!e.readyState||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var r,n;const i=null==(r=this.hls)?void 0:r.config;if(!i)return;const a=this.media;if(!a)return;const{seeking:s}=a,o=this.seeking&&!s,u=!this.seeking&&s,c=a.paused&&!s||a.ended||0===a.playbackRate;if(this.seeking=s,e!==t)return t&&(this.ended=0),this.moved=!0,s||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!c&&e>t&&this.nudgeOnVideoHole(e,t)),void(0===this.waiting&&this.stallResolved(e));if(u||o)return void(o&&this.stallResolved(e));if(c)return this.nudgeRetry=0,this.stallResolved(e),void(!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(l.MEDIA_ENDED,{stalled:!1})));if(!Dt.getBuffered(a).length)return void(this.nudgeRetry=0);const d=Dt.bufferInfo(a,e,0),h=d.nextStart||0,f=this.fragmentTracker;if(s&&f&&this.hls){const t=Ws(this.hls.inFlightFragments,e),r=d.len>2,n=!h||t||h-e>2&&!f.getPartialFragment(e);if(r||n)return;this.moved=!1}const p=null==(n=this.hls)?void 0:n.latestLevelDetails;if(!this.moved&&null!==this.stalled&&f){if(!(d.len>0||h))return;const t=Math.max(h,d.start||0)-e,r=null!=p&&p.live?2*p.targetduration:2,n=f.getPartialFragment(e);if(t>0&&(t<=r||n))return void(a.paused||this._trySkipBufferHole(n))}const g=i.detectStallWithCurrentTimeMs,m=self.performance.now(),y=this.waiting;let v=this.stalled;if(null===v){if(!(y>0&&m-y<g))return void(this.stalled=m);v=this.stalled=y}const b=m-v;if(!s&&(b>=g||y)&&this.hls){var E;if("ended"===(null==(E=this.mediaSource)?void 0:E.readyState)&&(null==p||!p.live)&&Math.abs(e-((null==p?void 0:p.edge)||0))<1){if(this.ended)return;return this.ended=e||1,void this.hls.trigger(l.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(d),!this.media||!this.hls)return}const S=Dt.bufferInfo(a,e,i.maxBufferHole);this._tryFixBufferStall(S,b,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(l.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var r;const n=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&null!=(r=this.buffered.audio)&&r.length&&n&&n.length>1&&e>n.end(0)){const r=Dt.bufferedInfo(Dt.timeRangesToArray(this.buffered.audio),e,0);if(r.len>1&&t>=r.start){const r=Dt.timeRangesToArray(n),i=Dt.bufferedInfo(r,t,0).bufferedIndex;if(i>-1&&i<r.length-1){const t=Dt.bufferedInfo(r,e,0).bufferedIndex,n=r[i].end,a=r[i+1].start;if((-1===t||t>i)&&a-n<1&&e-n<2){const r=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${n} -> ${a} buffered index: ${t}`);this.warn(r.message),this.media.currentTime+=1e-6;const i=this.fragmentTracker.getPartialFragment(e)||void 0,u=Dt.bufferInfo(this.media,e,0);this.hls.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:r,reason:r.message,frag:i,buffer:u.len,bufferInfo:u})}}}}}_tryFixBufferStall(e,t,r){var n,i;const{fragmentTracker:a,media:s}=this,o=null==(n=this.hls)?void 0:n.config;if(!s||!a||!o)return;const l=null==(i=this.hls)?void 0:i.latestLevelDetails,u=a.getPartialFragment(r);if((u||null!=l&&l.live&&r<l.fragmentStart)&&(this._trySkipBufferHole(u)||!this.media))return;const c=e.buffered,d=this.adjacentTraversal(e,r);(c&&c.length>1&&e.len>o.maxBufferHole||e.nextStart&&(e.nextStart-r<o.maxBufferHole||d))&&(t>1e3*o.highBufferWatchdogPeriod||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const r=this.fragmentTracker,n=e.nextStart;if(r&&n){const e=r.getFragAtPos(t,f),i=r.getFragAtPos(n,f);if(e&&i)return i.sn-e.sn<2}return!1}_reportStall(e){const{hls:t,media:r,stallReported:n,stalled:i}=this;if(!n&&null!==i&&r&&t){this.stallReported=!0;const n=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${Ye(e)})`);this.warn(n.message),t.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.BUFFER_STALLED_ERROR,fatal:!1,error:n,buffer:e.len,bufferInfo:e,stalled:{start:i}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:r,media:n}=this,i=null==(t=this.hls)?void 0:t.config;if(!n||!r||!i)return 0;const a=n.currentTime,u=Dt.bufferInfo(n,a,0),c=a<u.start?u.start:u.nextStart;if(c&&this.hls){const t=u.len<=i.maxBufferHole,h=u.len>0&&u.len<1&&n.readyState<3,p=c-a;if(p>0&&(t||h)){if(p>i.maxBufferHole){let t=!1;if(0===a){const e=r.getAppendedFrag(0,f);e&&c<e.end&&(t=!0)}if(!t){const t=e||r.getAppendedFrag(a,f);if(t){var d;if(null==(d=this.hls.loadLevelObj)||!d.details)return 0;if(Ws(this.hls.inFlightFragments,c))return 0;let e=!1,n=t.end;for(;n<c;){const t=r.getAppendedFrag(n,f)||r.getPartialFragment(n);if(!t){e=!0;break}n+=t.duration}if(e)return 0}}}const t=Math.max(c+.05,a+.1);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${t}`),this.moved=!0,n.currentTime=t,null==e||!e.gap){const r=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${t}`);this.hls.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:r,reason:r.message,frag:e||void 0,buffer:u.len,bufferInfo:u})}return t}}return 0}_tryNudgeBuffer(e){const{hls:t,media:r,nudgeRetry:n}=this,i=null==t?void 0:t.config;if(!r||!i)return 0;const a=r.currentTime;if(this.nudgeRetry++,n<i.nudgeMaxRetry){const u=a+(n+1)*i.nudgeOffset,c=new Error(`Nudging 'currentTime' from ${a} to ${u}`);this.warn(c.message),r.currentTime=u,t.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.BUFFER_NUDGE_ON_STALL,error:c,fatal:!1,buffer:e.len,bufferInfo:e})}else{const r=new Error(`Playhead still not moving while enough data buffered @${a} after ${i.nudgeMaxRetry} nudges`);this.error(r.message),t.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.BUFFER_STALLED_ERROR,error:r,fatal:!0,buffer:e.len,bufferInfo:e})}}}function Ws(e,t){const r=Ys(e.main);if(r&&r.start<=t)return r;const n=Ys(e.audio);return n&&n.start<=t?n:null}function Ys(e){if(!e)return null;switch(e.state){case Gr:case zr:case Xr:case Qr:return null}return e.frag}function qs(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function Xs(e,t,r,n,i){let a=new e(t,r,"");try{a.value=n,i&&(a.type=i)}catch(s){a=new e(t,r,Ye(i?S({type:i},n):n))}return a}const Qs=(()=>{const e=qs();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class Zs{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(l.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(l.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(l.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(l.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(l.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(l.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(l.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(l.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,t){var r;this.media=t.media,!1===(null==(r=t.overrides)?void 0:r.cueRemoval)&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,t){this.media=null,t.transferMedia||(this.id3Track&&(this.removeCues&&ka(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const r=e[t];if("metadata"===r.kind&&"id3"===r.label)return wa(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:n}}}=this;if(!r&&!n)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=qs();if(a)for(let e=0;e<i.length;e++){const t=i[e].type;if(t===_n.emsg&&!r||!n)continue;const s=xn(i[e].data);if(s){const r=i[e].pts;let n=r+i[e].duration;n>Qs&&(n=Qs),n-r<=0&&(n=r+.25);for(let e=0;e<s.length;e++){const i=s[e];if(!Ln(i)){this.updateId3CueEnds(r,t);const e=Xs(a,r,n,i,t);e&&this.id3Track.addCue(e)}}}}}updateId3CueEnds(e,t){var r;const n=null==(r=this.id3Track)?void 0:r.cues;if(n)for(let r=n.length;r--;){const i=n[r];i.type===t&&i.startTime<e&&i.endTime===Qs&&(i.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:r,type:n}){const{id3Track:i,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:o}}=a;if(i&&(s||o)){let e;e="audio"===n?e=>e.type===_n.audioId3&&o:"video"===n?e=>e.type===_n.emsg&&s:e=>e.type===_n.audioId3&&o||e.type===_n.emsg&&s,xa(i,t,r,e)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:r}=this,{dateRanges:i}=e,a=Object.keys(i);let s=this.dateRangeCuesAppended;var o;if(r&&t)if(null!=(o=r.cues)&&o.length){const e=Object.keys(s).filter(e=>!a.includes(e));for(let t=e.length;t--;){const n=e[t],i=s[n].cues;delete s[n],Object.keys(i).forEach(e=>{try{const t=i[e];t.removeEventListener("enter",this.onEventCueEnter),r.removeCue(t)}catch(e){}})}}else s=this.dateRangeCuesAppended={};const l=e.fragments[e.fragments.length-1];if(0===a.length||!n(null==l?void 0:l.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const u=qs();for(let e=0;e<a.length;e++){const t=a[e],r=i[t],n=r.startTime,o=s[t],l=(null==o?void 0:o.cues)||{};let c=(null==o?void 0:o.durationKnown)||!1,d=Qs;const{duration:h,endDate:f}=r;if(f&&null!==h)d=n+h,c=!0;else if(r.endOnNext&&!c){const e=a.reduce((e,t)=>{if(t!==r.id){const n=i[t];if(n.class===r.class&&n.startDate>r.startDate&&(!e||r.startDate<e.startDate))return n}return e},null);e&&(d=e.startTime,c=!0)}const p=Object.keys(r.attr);for(let e=0;e<p.length;e++){const i=p[e];if(!Gt(i))continue;const a=l[i];if(a)c&&!o.durationKnown?a.endTime=d:Math.abs(a.startTime-n)>.01&&(a.startTime=n,a.endTime=d);else if(u){let e=r.attr[i];Ht(i)&&(e=C(e));const a=Xs(u,n,d,{key:i,data:e},_n.dateRange);a&&(a.id=t,this.id3Track.addCue(a),l[i]=a,this.hls.config.interstitialsController&&("X-ASSET-LIST"!==i&&"X-ASSET-URL"!==i||a.addEventListener("enter",this.onEventCueEnter)))}}s[t]={cues:l,dateRange:r,durationKnown:c}}}}class Js{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:e}=this,t=this.levelDetails;if(!e||!t)return;this.currentTime=e.currentTime;const r=this.computeLatency();if(null===r)return;this._latency=r;const{lowLatencyMode:n,maxLiveSyncPlaybackRate:i}=this.config;if(!n||1===i||!t.live)return;const a=this.targetLatency;if(null===a)return;const s=r-a;if(s<Math.min(this.maxLatency,a+t.targetduration)&&s>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),r=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20,n=Math.min(t,Math.max(1,r));this.changeMediaPlaybackRate(e,n)}else 1!==e.playbackRate&&0!==e.playbackRate&&this.changeMediaPlaybackRate(e,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return(null==(e=this.hls)?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(void 0!==e.liveMaxLatencyDuration)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(null===e||null===this.hls)return null;const{holdBack:t,partHoldBack:r,targetduration:n}=e,{liveSyncDuration:i,liveSyncDurationCount:a,lowLatencyMode:s}=this.config,o=this.hls.userConfig;let l=s&&r||t;(this._targetLatencyUpdated||o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==i?i:a*n);const u=n;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,u)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(null===e||null===t)return null;const r=this.levelDetails;if(null===r)return null;const n=r.edge,i=e-t-this.edgeStalled,a=n-r.totalduration,s=n-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(a,i),s)}get drift(){const e=this.levelDetails;return null===e?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(l.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(l.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(l.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var r;t.details===o.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&null!=(r=this.levelDetails)&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var r,n;e.playbackRate!==t&&(null==(r=this.hls)||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${null==(n=this.targetLatency)?void 0:n.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}class eo extends _i{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(l.LEVEL_LOADED,this.onLevelLoaded,this),e.on(l.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(l.FRAG_BUFFERED,this.onFragBuffered,this),e.on(l.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(l.LEVEL_LOADED,this.onLevelLoaded,this),e.off(l.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(l.FRAG_BUFFERED,this.onFragBuffered,this),e.off(l.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const r=this.hls.config.preferManagedMediaSource,n=[],i={},a={};let s=!1,o=!1,l=!1;t.levels.forEach(e=>{const t=e.attrs;let{audioCodec:u,videoCodec:c}=e;u&&(e.audioCodec=u=_e(u,r)||void 0),c&&(c=e.videoCodec=function(e){const t=e.split(",");for(let e=0;e<t.length;e++){const r=t[e].split(".");r.length>2&&"avc1"===r[0]&&(t[e]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return t.join(",")}(c));const{width:d,height:h,unknownCodecs:f}=e;let p=f?f.length:0;if(f)for(let t=p;t--;){const r=f[t];this.isAudioSupported(r)?(e.audioCodec=u=u?`${u},${r}`:r,p--,Se.audio[u.substring(0,4)]=2):this.isVideoSupported(r)&&(e.videoCodec=c=c?`${c},${r}`:r,p--,Se.video[c.substring(0,4)]=2)}if(s||(s=!(!d||!h)),o||(o=!!c),l||(l=!!u),p||u&&!this.isAudioSupported(u)||c&&!this.isVideoSupported(c))return void this.log(`Some or all CODECS not supported "${t.CODECS}"`);const{CODECS:g,"FRAME-RATE":m,"HDCP-LEVEL":y,"PATHWAY-ID":v,RESOLUTION:b,"VIDEO-RANGE":E}=t,S=`${v||"."}-${e.bitrate}-${b}-${m}-${g}-${E}-${y}`;if(i[S])if(i[S].uri===e.url||e.attrs["PATHWAY-ID"])i[S].addGroupId("audio",t.AUDIO),i[S].addGroupId("text",t.SUBTITLES);else{const t=a[S]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const r=this.createLevel(e);i[S]=r,n.push(r)}else{const t=this.createLevel(e);i[S]=t,a[S]=1,n.push(t)}}),this.filterAndSortMediaOptions(n,t,s,o,l)}createLevel(e){const t=new Ve(e),r=e.supplemental;if(null!=r&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const e=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(e.message),t.supportedResult=Fe(e,[])}return t}isAudioSupported(e){return we(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return we(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,r,n,i){let a=[],u=[],c=e;if((r||n)&&i&&(c=c.filter(({videoCodec:e,videoRange:t,width:r,height:n})=>{return(!!e||!(!r||!n))&&!!(i=t)&&Ge.indexOf(i)>-1;var i})),0===c.length)return void Promise.resolve().then(()=>{if(this.hls){let e="no level with compatible codecs found in manifest",r=e;t.levels.length&&(r=`one or more CODECS in variant not supported: ${Ye(t.levels.map(e=>e.attrs.CODECS).filter((e,t,r)=>r.indexOf(e)===t))}`,this.warn(r),e+=` (${r})`);const n=new Error(e);this.hls.trigger(l.ERROR,{type:s.MEDIA_ERROR,details:o.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:n,reason:r})}});t.audioTracks&&(a=t.audioTracks.filter(e=>!e.audioCodec||this.isAudioSupported(e.audioCodec)),to(a)),t.subtitles&&(u=t.subtitles,to(u));const d=c.slice(0);c.sort((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return Ge.indexOf(e.videoRange)-Ge.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const r=xe(e.videoCodec),n=xe(t.videoCodec);if(r!==n)return n-r}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const r=Le(e.codecSet),n=Le(t.codecSet);if(r!==n)return n-r}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});let h=d[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==d.length))for(let e=0;e<d.length;e++)if(d[e].pathwayId===c[0].pathwayId){h=d[e];break}this._levels=c;for(let e=0;e<c.length;e++)if(c[e]===h){var f;this._firstLevel=e;const t=h.bitrate,r=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${t}`),void 0===(null==(f=this.hls.userConfig)?void 0:f.abrEwmaDefaultEstimate)){const e=Math.min(t,this.hls.config.abrEwmaDefaultEstimateMax);e>r&&r===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=e)}break}const p=i&&!n,g=this.hls.config,m=!(!g.audioStreamController||!g.audioTrackController),y={levels:c,audioTracks:a,subtitleTracks:u,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:n,altAudio:m&&!p&&a.some(e=>!!e.url)};this.hls.trigger(l.MANIFEST_PARSED,y)}get levels(){return 0===this._levels.length?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const r=new Error("invalid level idx"),n=e<0;if(this.hls.trigger(l.ERROR,{type:s.OTHER_ERROR,details:o.LEVEL_SWITCH_ERROR,level:e,fatal:n,error:r,reason:r.message}),n)return;e=Math.min(e,t.length-1)}const r=this.currentLevelIndex,n=this.currentLevel,i=n?n.attrs["PATHWAY-ID"]:void 0,a=t[e],u=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,r===e&&n&&i===u)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${u?" with Pathway "+u:""} from level ${r}${i?" with Pathway "+i:""}`);const c={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(l.LEVEL_SWITCHING,c);const d=a.details;if(!d||d.live){const e=this.switchParams(a.uri,null==n?void 0:n.details,d);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),r=e.filter(e=>-1!==t.indexOf(e));if(e.length<1)return void this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);this.steering.pathwayPriority=r}}onError(e,t){!t.fatal&&t.context&&t.context.type===c&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===f){const e=t.elementaryStreams;if(!Object.keys(e).some(t=>!!e[t]))return;const r=this._levels[t.level];null!=r&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var r;const{level:n,details:i}=t,a=t.levelInfo;var s;if(!a)return this.warn(`Invalid level index ${n}`),void(null!=(s=t.deliveryDirectives)&&s.skip&&(i.deltaUpdateFailed=!0));if(a===this.currentLevel||t.withoutMultiVariant){0===a.fragmentError&&(a.loadError=0);let e=a.details;e===t.details&&e.advanced&&(e=void 0),this.playlistLoaded(n,t,e)}else null!=(r=t.deliveryDirectives)&&r.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=this.getUrlWithDirectives(e.uri,t),n=this.currentLevelIndex,i=e.attrs["PATHWAY-ID"],a=e.details,s=null==a?void 0:a.age;this.log(`Loading level index ${n}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${i?" Pathway "+i:""}${s&&a.live?" age "+s.toFixed(1)+(a.type?" "+a.type||0:""):""} ${r}`),this.hls.trigger(l.LEVEL_LOADING,{url:r,level:n,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(1===this._levels.length)return;const r=this._levels.filter((t,r)=>r!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach(e=>e.level=-1)),!1));Nr(r),this._levels=r,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const n=r.length-1;this._firstLevel=Math.min(this._firstLevel,n),this._startLevel&&(this._startLevel=Math.min(this._startLevel,n)),this.hls.trigger(l.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(l.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function to(e){const t={};e.forEach(e=>{const r=e.groupId||"";e.id=t[r]=t[r]||0,t[r]++})}function ro(){return self.SourceBuffer||self.WebKitSourceBuffer}function no(){if(!R())return!1;const e=ro();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}class io extends en{constructor(e,t,r){super(e,t,r,"stream-controller",f),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const e=this.media,t=e?e.currentTime:null;if(null===t||!n(t))return;if(this.log(`Media seeked to ${t.toFixed(3)}`),!this.getBufferedFrag(t))return;const r=this.getFwdBufferInfoAtPos(e,t,f,0);null!==r&&0!==r.len?this.tick():this.warn(`Main forward buffer length at ${t} on "seeked" event ${r?r.len:"empty"})`)},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(l.MANIFEST_PARSED,this.onManifestParsed,this),e.on(l.LEVEL_LOADING,this.onLevelLoading,this),e.on(l.LEVEL_LOADED,this.onLevelLoaded,this),e.on(l.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(l.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(l.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(l.BUFFER_CREATED,this.onBufferCreated,this),e.on(l.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(l.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(l.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(l.MANIFEST_PARSED,this.onManifestParsed,this),e.off(l.LEVEL_LOADED,this.onLevelLoaded,this),e.off(l.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(l.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(l.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(l.BUFFER_CREATED,this.onBufferCreated,this),e.off(l.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(l.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(l.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:r,hls:n}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=n.startLevel;-1===e&&(n.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=n.firstAutoLevel),n.nextLoadLevel=e,this.level=n.loadLevel,this._hasEnoughToStart=!!t}r>0&&-1===e&&!t&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=Gr,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=zr}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Jr:{const{levels:e,level:t}=this,r=null==e?void 0:e[t],n=null==r?void 0:r.details;if(n&&(!n.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(n))break;this.state=Gr;break}if(this.hls.nextLoadLevel!==this.level){this.state=Gr;break}break}case Vr:{var e;const t=self.performance.now(),r=this.retryDate;if(!r||t>=r||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,r=null==e?void 0:e[t];this.resetStartWhenNotLoaded(r||null),this.state=Gr}}}this.state===Gr&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),null!=(e=this.media)&&e.readyState&&!1===this.media.seeking&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:r,media:n}=this;if(null===t||!n&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==r||!r[i])return;const a=r[i],s=this.getMainFwdBufferInfo();if(null===s)return;const o=this.getLevelDetails();if(o&&this._streamEnded(s,o)){const e={};return 2===this.altAudio&&(e.type="video"),this.hls.trigger(l.BUFFER_EOS,e),void(this.state=Xr)}if(!this.buffering)return;e.loadLevel!==i&&-1===e.manualLevel&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const u=a.details;if(!u||this.state===Jr||this.waitForLive(a))return this.level=i,this.state=Jr,void(this.startFragRequested=!1);const c=s.len,d=this.getMaxBufferLength(a.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>s.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:s.end;let p=this.getNextFragment(h,u);if(this.couldBacktrack&&!this.fragPrevious&&p&&Y(p)&&this.fragmentTracker.getState(p)!==yt){var g;const e=(null!=(g=this.backtrackFragment)?g:p).sn-u.startSN,t=u.fragments[e-1];t&&p.cc===t.cc&&(p=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&s.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,h)){if(!p.gap){const e=this.audioOnly&&!this.altAudio?H:K,t=(e===K?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,f)}p=this.getNextFragmentLoopLoading(p,u,s,f,d)}p&&(!p.initSegment||p.initSegment.data||this.bitrateTest||(p=p.initSegment),this.loadFragment(p,a,h))}loadFragment(e,t,r){const n=this.fragmentTracker.getState(e);n===pt||n===mt?Y(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,r):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,f)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let r;const n=this.getAppendedFrag(t.currentTime);n&&n.start>1&&this.flushMainBuffer(0,n.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],n=this.fragLastKbps;r=n&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*n)+1:0}else r=0;const a=this.getBufferedFrag(t.currentTime+r);if(a){const e=this.followingBufferedFrag(a);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,r=e.duration,n=Math.max(a.end,t+Math.min(Math.max(r-this.config.maxFragLookUpTolerance,r*(this.couldBacktrack?.5:.125)),r*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(n,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Hr:case Kr:case Vr:case Yr:case qr:this.state=Gr}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,2===this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const r=t.media;ba(r,"playing",this.onMediaPlaying),ba(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:r}=this;r&&(Ea(r,"playing",this.onMediaPlaying),Ea(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),t.transferMedia||(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(l.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let r=!1,n=!1;t.levels.forEach(e=>{const t=e.audioCodec;t&&(r=r||-1!==t.indexOf("mp4a.40.2"),n=n||-1!==t.indexOf("mp4a.40.5"))}),this.audioCodecSwitch=r&&n&&!function(){var e;const t=ro();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:r}=this;if(!r||this.state!==Gr)return;const n=t.levelInfo;(!n.details||n.details.live&&(this.levelLastLoaded!==n||n.details.expired)||this.waitForCdnTuneIn(n.details))&&(this.state=Jr)}onLevelLoaded(e,t){var r;const{levels:n,startFragRequested:i}=this,a=t.level,s=t.details,o=s.totalduration;if(!n)return void this.warn(`Levels were reset while loading level ${a}`);this.log(`Level ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""}, cc [${s.startCC}, ${s.endCC}] duration:${o}`);const u=t.levelInfo,c=this.fragCurrent;!c||this.state!==Kr&&this.state!==Vr||c.level!==t.level&&c.loader&&this.abortCurrentFrag();let d=0;if(s.live||null!=(r=u.details)&&r.live){var h;if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;d=this.alignPlaylists(s,u.details,null==(h=this.levelLastLoaded)?void 0:h.details)}if(u.details=s,this.levelLastLoaded=u,i||this.setStartPosition(s,d),this.hls.trigger(l.LEVEL_UPDATED,{details:s,level:a}),this.state===Jr){if(this.waitForCdnTuneIn(s))return;this.state=Gr}i&&s.live&&this.synchronizeToLiveEdge(s),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:r}=this;if(!r)return;const n=this.hls.liveSyncPosition,i=this.getLoadPosition(),a=e.fragmentStart,s=e.edge,o=i>=a-t.maxFragLookUpTolerance&&i<=s;if(null!==n&&r.duration>n&&(i<n||!o)){const a=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!o&&r.readyState<4||i<s-a)&&(this._hasEnoughToStart||(this.nextLoadPosition=n),r.readyState))if(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${s}, reset currentTime to : ${n.toFixed(3)}`),"buffered"===this.config.liveSyncMode){var l;const e=Dt.bufferInfo(r,n,0);if(null==e||null==(l=e.buffered)||!l.length)return void(r.currentTime=n);if(e.start<=i)return void(r.currentTime=n);const{nextStart:t}=Dt.bufferedInfo(e.buffered,i,0);t&&(r.currentTime=t)}else r.currentTime=n}}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:n,payload:i}=e,{levels:a}=this;if(!a)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);const s=a[r.level];if(!s)return void this.warn(`Level ${r.level} not found on progress`);const o=s.details;if(!o)return this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),void this.fragmentTracker.removeFragment(r);const l=s.videoCodec,u=o.PTSKnown||!o.live,c=null==(t=r.initSegment)?void 0:t.data,d=this._getAudioCodec(s),h=this.transmuxer=this.transmuxer||new Ri(this.hls,f,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=n?n.index:-1,g=-1!==p,m=new It(r.level,r.sn,r.stats.chunkCount,i.byteLength,p,g),y=this.initPTS[r.cc];h.push(i,c,d,l,r,n,o.totalduration,u,m,y)}onAudioTrackSwitching(e,t){const r=this.hls,n=2===this.altAudio;if(rt(t.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(n)return this.fragmentTracker.removeAllFragments(),r.once(l.BUFFER_FLUSHED,()=>{var e;null==(e=this.hls)||e.trigger(l.AUDIO_TRACK_SWITCHED,t)}),void r.trigger(l.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});r.trigger(l.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const r=rt(t.url,this.hls);if(r){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,t){const r=t.tracks;let n,i,a=!1;for(const e in r){const t=r[e];if("main"===t.id){if(i=e,n=t,"video"===e){const t=r[e];t&&(this.videoBuffer=t.buffer)}}else a=!0}a&&n?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:r,part:n}=t,i=r.type===f;if(i){if(this.fragContextChanged(r))return this.warn(`Fragment ${r.sn}${n?" p: "+n.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===qr&&(this.state=Gr));const e=n?n.stats:r.stats;this.fragLastKbps=Math.round(8*e.total/(e.buffering.end-e.loading.first)),Y(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,n)}const a=this.media;a&&(!this._hasEnoughToStart&&Dt.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var r;if(t.fatal)this.state=Qr;else switch(t.details){case o.FRAG_GAP:case o.FRAG_PARSING_ERROR:case o.FRAG_DECRYPT_ERROR:case o.FRAG_LOAD_ERROR:case o.FRAG_LOAD_TIMEOUT:case o.KEY_LOAD_ERROR:case o.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(f,t);break;case o.LEVEL_LOAD_ERROR:case o.LEVEL_LOAD_TIMEOUT:case o.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Jr||(null==(r=t.context)?void 0:r.type)!==c||(this.state=Gr);break;case o.BUFFER_ADD_CODEC_ERROR:case o.BUFFER_APPEND_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case o.BUFFER_FULL_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case o.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onFragLoadEmergencyAborted(){this.state=Gr,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==H||!this.altAudio){const e=(t===K?this.videoBuffer:this.mediaBuffer)||this.media;e&&(this.afterBufferFlushed(e,t,f),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,-1===this.level&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let r=this.startPosition;if(r>=0&&t<r){if(e.seeking)return void this.log(`could not seek to ${r}, already seeking at ${t}`);const n=this.timelineOffset;n&&r&&(r+=n);const i=this.getLevelDetails(),a=Dt.getBuffered(e),s=a.length?a.start(0):0,o=s-r,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||o>0&&(o<l||this.loadingParts&&o<2*((null==i?void 0:i.partTarget)||0)))&&(this.log(`adjusting start position by ${o} to match buffer start`),r+=o,this.startPosition=r),t<r&&(this.log(`seek to target start position ${r} from current time ${t} buffer start ${s}`),e.currentTime=r)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(e=>{const{hls:r}=this,n=null==e?void 0:e.frag;if(!n||this.fragContextChanged(n))return;t.fragmentError=0,this.state=Gr,this.startFragRequested=!1,this.bitrateTest=!1;const i=n.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),r.trigger(l.FRAG_LOADED,e),n.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const r=this.playlistType,{hls:i}=this,{remuxResult:a,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o)return void this.resetWhenMissingContext(s);const{frag:u,part:c,level:d}=o,{video:h,text:f,id3:p,initSegment:g}=a,{details:m}=d,y=this.altAudio?void 0:a.audio;if(this.fragContextChanged(u))this.fragmentTracker.removeFragment(u);else{if(this.state=Yr,g){if(null!=g&&g.tracks){const e=u.initSegment||u;this._bufferInitSegment(d,g.tracks,e,s),i.trigger(l.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:r,tracks:g.tracks})}const e=g.initPTS,t=g.timescale,a=this.initPTS[u.cc];!n(e)||a&&a.baseTime===e&&a.timescale===t||(this.initPTS[u.cc]={baseTime:e,timescale:t},i.trigger(l.INIT_PTS_FOUND,{frag:u,id:r,initPTS:e,timescale:t}))}if(h&&m){y&&"audiovideo"===h.type&&this.logMuxedErr(u);const e=m.fragments[u.sn-1-m.startSN],t=u.sn===m.startSN,r=!e||u.cc>e.cc;if(!1!==a.independent){const{startPTS:e,endPTS:n,startDTS:i,endDTS:a}=h;if(c)c.elementaryStreams[h.type]={startPTS:e,endPTS:n,startDTS:i,endDTS:a};else if(h.firstKeyFrame&&h.independent&&1===s.id&&!r&&(this.couldBacktrack=!0),h.dropped&&h.independent){const i=this.getMainFwdBufferInfo(),s=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,o=h.firstKeyFramePTS?h.firstKeyFramePTS:e;if(!t&&s<o-this.config.maxBufferHole&&!r)return void this.backtrack(u);r&&(u.gap=!0),u.setElementaryStreamInfo(h.type,u.start,n,u.start,a,!0)}else t&&e-(m.appliedTimelineOffset||0)>2&&(u.gap=!0);u.setElementaryStreamInfo(h.type,e,n,i,a),this.backtrackFragment&&(this.backtrackFragment=u),this.bufferFragmentData(h,u,c,s,t||r)}else{if(!t&&!r)return void this.backtrack(u);u.gap=!0}}if(y){const{startPTS:e,endPTS:t,startDTS:r,endDTS:n}=y;c&&(c.elementaryStreams[H]={startPTS:e,endPTS:t,startDTS:r,endDTS:n}),u.setElementaryStreamInfo(H,e,t,r,n),this.bufferFragmentData(y,u,c,s)}if(m&&null!=p&&null!=(t=p.samples)&&t.length){const e={id:r,frag:u,details:m,samples:p.samples};i.trigger(l.FRAG_PARSING_METADATA,e)}if(m&&f){const e={id:r,frag:u,details:m,samples:f.samples};i.trigger(l.FRAG_PARSING_USERDATA,e)}}}logMuxedErr(e){this.warn(`${Y(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,r,n){if(this.state!==Yr)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(r));const{audio:i,video:a,audiovideo:s}=t;if(i){const r=e.audioCodec;let n=Oe(i.codec,r);"mp4a"===n&&(n="mp4a.40.5");const a=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){n&&(n=-1!==n.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===a.indexOf("firefox")&&(n="mp4a.40.5")}n&&-1!==n.indexOf("mp4a.40.5")&&-1!==a.indexOf("android")&&"audio/mpeg"!==i.container&&(n="mp4a.40.2",this.log(`Android: force audio codec to ${n}`)),r&&r!==n&&this.log(`Swapping manifest audio codec "${r}" for "${n}"`),i.levelCodec=n,i.id=f,this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${n||""}/${r||""}/${i.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=f;const r=a.codec;if(4===(null==r?void 0:r.length))switch(r){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e"}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${r}]${a.codec!==r?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}s&&(this.log(`Init audiovideo buffer, container:${s.container}, codecs[level/parsed]=[${e.codecs}/${s.codec}]`),delete t.video,delete t.audio);const o=Object.keys(t);if(o.length){if(this.hls.trigger(l.BUFFER_CODECS,t),!this.hls)return;o.forEach(e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger(l.BUFFER_APPENDING,{type:e,data:i,frag:r,part:null,chunkMeta:n,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&2===this.altAudio?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,f)}get maxBufferLength(){const{levels:e,level:t}=this,r=null==e?void 0:e[t];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Gr}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const r=e.currentTime;if(Dt.isBuffered(e,r)?t=this.getAppendedFrag(r):Dt.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,r=t.level;e&&t.sn===e.sn&&e.level===r||(this.fragPlaying=t,this.hls.trigger(l.FRAG_CHANGED,{frag:t}),e&&e.level===r||this.hls.trigger(l.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return n(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(n(t)){const e=this.getLevelDetails(),r=this.currentFrag||(e?it(null,e.fragments,t):null);if(r){const e=r.programDateTime;if(null!==e){const n=e+1e3*(t-r.start);return new Date(n)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class ao{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[r].loader;if(n){var t;if(e&&e!==(null==(t=n.context)?void 0:t.frag.type))return;n.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=o.KEY_LOAD_ERROR,r,n,i){return new _t({type:s.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:r,networkDetails:n})}loadClear(e,t,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let n=0,i=t.length;n<i;n++){const a=t[n];if(e.cc<=a.cc&&(!Y(e)||!Y(a)||e.sn<a.sn)||!r&&n==i-1)return this.emeController.selectKeySystemFormat(a).then(e=>{if(!this.emeController)return;a.setKeyFormat(e);const t=nr(e);return t?this.emeController.getKeySystemAccess([t]):void 0})}if(this.config.requireKeySystemAccessOnStart){const e=ar(this.config);if(e.length)return this.emeController.getKeySystemAccess(e)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var r,n;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const r=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,o.KEY_LOAD_ERROR,r))}const a=i.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,o.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let s=this.keyUriToKeyInfo[a];if(null!=(r=s)&&r.decryptdata.key)return i.key=s.decryptdata.key,Promise.resolve({frag:e,keyInfo:s});var l;if(null!=(n=s)&&n.keyLoadPromise)switch(null==(l=s.mediaKeySessionContext)?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return s.keyLoadPromise.then(t=>(i.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:s}))}switch(s=this.keyUriToKeyInfo[a]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(s,e):this.loadKeyEME(s,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(s,e);default:return Promise.reject(this.createKeyLoadError(e,o.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(r);if(t)return(e.keyLoadPromise=t.then(t=>(e.mediaKeySessionContext=t,r))).catch(t=>{throw e.keyLoadPromise=null,t})}return Promise.resolve(r)}loadKeyHTTP(e,t){const r=this.config,n=new(0,r.loader)(r);return t.keyLoader=e.loader=n,e.keyLoadPromise=new Promise((i,a)=>{const s={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},l=r.keyLoadPolicy.default,u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,r,n)=>{const{frag:s,keyInfo:l,url:u}=r;if(!s.decryptdata||l!==this.keyUriToKeyInfo[u])return a(this.createKeyLoadError(s,o.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),n));l.decryptdata.key=s.decryptdata.key=new Uint8Array(e.data),s.keyLoader=null,l.loader=null,i({frag:s,keyInfo:l})},onError:(e,r,n,i)=>{this.resetLoader(r),a(this.createKeyLoadError(t,o.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),n,S({url:s.url,data:void 0},e)))},onTimeout:(e,r,n)=>{this.resetLoader(r),a(this.createKeyLoadError(t,o.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),n))},onAbort:(e,r,n)=>{this.resetLoader(r),a(this.createKeyLoadError(t,o.INTERNAL_ABORTED,new Error("key loading aborted"),n))}};n.load(s,u,c)})}resetLoader(e){const{frag:t,keyInfo:r,url:n}=e,i=r.loader;t.keyLoader===i&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[n],i&&i.destroy()}}function so(e){const{type:t}=e;switch(t){case d:return p;case h:return g;default:return f}}function oo(e,t){let r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r}class lo{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(l.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.LEVEL_LOADING,this.onLevelLoading,this),e.on(l.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(l.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(l.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(l.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.LEVEL_LOADING,this.onLevelLoading,this),e.off(l.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(l.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(l.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:u,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:r,level:n,pathwayId:i,url:a,deliveryDirectives:s,levelInfo:o}=t;this.load({id:r,level:n,pathwayId:i,responseType:"text",type:c,url:a,deliveryDirectives:s,levelOrTrack:o})}onAudioTrackLoading(e,t){const{id:r,groupId:n,url:i,deliveryDirectives:a,track:s}=t;this.load({id:r,groupId:n,level:null,responseType:"text",type:d,url:i,deliveryDirectives:a,levelOrTrack:s})}onSubtitleTrackLoading(e,t){const{id:r,groupId:n,url:i,deliveryDirectives:a,track:s}=t;this.load({id:r,groupId:n,level:null,responseType:"text",type:h,url:i,deliveryDirectives:a,levelOrTrack:s})}onLevelsUpdated(e,t){const r=this.loaders[c];if(r){const e=r.context;e&&!t.levels.some(t=>t===e.levelOrTrack)&&(r.abort(),delete this.loaders[c])}}load(e){var t;const r=this.hls.config;let i,a=this.getInternalLoader(e);if(a){const t=this.hls.logger,r=a.context;if(r&&r.levelOrTrack===e.levelOrTrack&&(r.url===e.url||r.deliveryDirectives&&!e.deliveryDirectives))return void(r.url===e.url?t.log(`[playlist-loader]: ignore ${e.url} ongoing request`):t.log(`[playlist-loader]: ignore ${e.url} in favor of ${r.url}`));t.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),a.abort()}if(i=e.type===u?r.manifestLoadPolicy.default:b({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),a=this.createInternalLoader(e),n(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===c&&null!==e.level?t=this.hls.levels[e.level].details:e.type===d&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===h&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,r=t.targetduration;if(e&&r){const t=1e3*Math.max(3*e,.8*r);i=b({},i,{maxTimeToFirstByteMs:Math.min(t,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,i.maxTimeToFirstByteMs)})}}}const s=i.errorRetry||i.timeoutRetry||{},o={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},l={onSuccess:(e,t,r,n)=>{const i=this.getInternalLoader(r);this.resetInternalLoader(r.type);const a=e.data;0===a.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),gr.isMediaPlaylist(a)||r.type!==u?this.handleTrackOrLevelPlaylist(e,t,r,n||null,i):this.handleMasterPlaylist(e,t,r,n)):this.handleManifestParsingError(e,r,new Error("no EXTM3U delimiter"),n||null,t)},onError:(e,t,r,n)=>{this.handleNetworkError(t,r,!1,e,n)},onTimeout:(e,t,r)=>{this.handleNetworkError(t,r,!0,void 0,e)}};a.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,r,n){const i=this.hls,a=e.data,s=oo(e,r),o=gr.parseMasterPlaylist(a,s);if(o.playlistParsingError)return void this.handleManifestParsingError(e,r,o.playlistParsingError,n,t);const{contentSteering:u,levels:c,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p}=o;this.variableList=p;const{AUDIO:g=[],SUBTITLES:m,"CLOSED-CAPTIONS":y}=gr.parseMasterPlaylistMedia(a,s,o);g.length&&(g.some(e=>!e.url)||!c[0].audioCodec||c[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new zt({}),bitrate:0,url:""}))),i.trigger(l.MANIFEST_LOADED,{levels:c,audioTracks:g,subtitles:m,captions:y,contentSteering:u,url:s,stats:t,networkDetails:n,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p})}handleTrackOrLevelPlaylist(e,t,r,i,a){const s=this.hls,{id:o,level:c,type:d}=r,h=oo(e,r),f=n(c)?c:n(o)?o:0,p=so(r),g=gr.parseLevelPlaylist(e.data,h,f,p,0,this.variableList);if(d===u){const e={attrs:new zt({}),bitrate:0,details:g,name:"",url:h};g.requestScheduled=t.loading.start+Ir(g,0),s.trigger(l.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:h,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=g,this.handlePlaylistLoaded(g,e,t,r,i,a)}handleManifestParsingError(e,t,r,n,i){this.hls.trigger(l.ERROR,{type:s.NETWORK_ERROR,details:o.MANIFEST_PARSING_ERROR,fatal:t.type===u,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:n,stats:i})}handleNetworkError(e,t,r=!1,n,i){let a=`A network ${r?"timeout":"error"+(n?" (status "+n.code+")":"")} occurred while loading ${e.type}`;e.type===c?a+=`: ${e.level} id: ${e.id}`:e.type!==d&&e.type!==h||(a+=` id: ${e.id} group-id: "${e.groupId}"`);const f=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let p=o.UNKNOWN,g=!1;const m=this.getInternalLoader(e);switch(e.type){case u:p=r?o.MANIFEST_LOAD_TIMEOUT:o.MANIFEST_LOAD_ERROR,g=!0;break;case c:p=r?o.LEVEL_LOAD_TIMEOUT:o.LEVEL_LOAD_ERROR,g=!1;break;case d:p=r?o.AUDIO_TRACK_LOAD_TIMEOUT:o.AUDIO_TRACK_LOAD_ERROR,g=!1;break;case h:p=r?o.SUBTITLE_TRACK_LOAD_TIMEOUT:o.SUBTITLE_LOAD_ERROR,g=!1}m&&this.resetInternalLoader(e.type);const y={type:s.NETWORK_ERROR,details:p,fatal:g,url:e.url,loader:m,context:e,error:f,networkDetails:t,stats:i};if(n){const r=(null==t?void 0:t.url)||e.url;y.response=S({url:r,data:void 0},n)}this.hls.trigger(l.ERROR,y)}handlePlaylistLoaded(e,t,r,n,i,a){const p=this.hls,{type:g,level:m,id:y,groupId:v,deliveryDirectives:b}=n,E=oo(t,n),S=so(n),T="number"==typeof n.level&&S===f?m:void 0;if(!e.fragments.length){const a=e.playlistParsingError=new Error("No Segments found in Playlist");return void p.trigger(l.ERROR,{type:s.NETWORK_ERROR,details:o.LEVEL_EMPTY_ERROR,fatal:!1,url:E,error:a,reason:a.message,response:t,context:n,level:T,parent:S,networkDetails:i,stats:r})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const w=e.playlistParsingError;if(w){if(this.hls.logger.warn(w),!p.config.ignorePlaylistParsingErrors)return void p.trigger(l.ERROR,{type:s.NETWORK_ERROR,details:o.LEVEL_PARSING_ERROR,fatal:!1,url:E,error:w,reason:w.message,response:t,context:n,level:T,parent:S,networkDetails:i,stats:r});e.playlistParsingError=null}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),g){case u:case c:p.trigger(l.LEVEL_LOADED,{details:e,levelInfo:n.levelOrTrack||p.levels[0],level:T||0,id:y||0,stats:r,networkDetails:i,deliveryDirectives:b,withoutMultiVariant:g===u});break;case d:p.trigger(l.AUDIO_TRACK_LOADED,{details:e,track:n.levelOrTrack,id:y||0,groupId:v||"",stats:r,networkDetails:i,deliveryDirectives:b});break;case h:p.trigger(l.SUBTITLE_TRACK_LOADED,{details:e,track:n.levelOrTrack,id:y||0,groupId:v||"",stats:r,networkDetails:i,deliveryDirectives:b})}}}class uo{static get version(){return ln}static isMSESupported(){return no()}static isSupported(){return function(){if(!no())return!1;const e=R();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>e.isTypeSupported(ke(t,"video")))||["mp4a.40.2","fLaC"].some(t=>e.isTypeSupported(ke(t,"audio"))))}()}static getMediaSource(){return R()}static get Events(){return l}static get MetadataSchema(){return _n}static get ErrorTypes(){return s}static get ErrorDetails(){return o}static get DefaultConfig(){return uo.defaultConfig?uo.defaultConfig:Hs}static set DefaultConfig(e){uo.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new on,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=function(e,t,r){const n=k();if("object"==typeof console&&!0===e||"object"==typeof e){const t=["debug","log","info","warn","error"];t.forEach(t=>{n[t]=x(t,e,r)});try{n.log('Debug logs enabled for "Hls instance" in hls.js version 1.6.7')}catch(e){return k()}t.forEach(t=>{L[t]=x(t,e)})}else b(L,n);return n}(e.debug||!1,0,e.assetPlayerId),r=this.config=function(e,t,r){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=Ks(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(e=>{const a=`${"level"===e?"playlist":e}LoadPolicy`,s=void 0===t[a],o=[];i.forEach(r=>{const i=`${e}Loading${r}`,l=t[i];if(void 0!==l&&s){o.push(i);const e=n[a].default;switch(t[a]={default:e},r){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}}),o.length&&r.warn(`hls.js config: "${o.join('", "')}" setting(s) are deprecated, use "${a}": ${Ye(t[a])}`)}),S(S({},n),t)}(uo.DefaultConfig,e,t);this.userConfig=e,r.progressive&&function(e,t){const r=e.loader;r!==Bs&&r!==Gs?(t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=Bs,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}(r,t);const{abrController:n,bufferController:i,capLevelController:a,errorController:s,fpsController:o}=r,u=new s(this),c=this.abrController=new n(this),d=new vt(this),h=r.interstitialsController,f=h?this.interstitialsController=new h(this,uo):null,p=this.bufferController=new i(this,d),g=this.capLevelController=new a(this),m=new o(this),y=new lo(this),v=r.contentSteeringController,E=v?new v(this):null,T=this.levelController=new eo(this,E),w=new Zs(this),A=new ao(this.config),P=this.streamController=new io(this,d,A),R=this.gapController=new Vs(this,d);g.setStreamController(P),m.setStreamController(P);const _=[y,T,P];f&&_.splice(1,0,f),E&&_.splice(1,0,E),this.networkControllers=_;const O=[c,p,R,g,m,w,d];this.audioTrackController=this.createController(r.audioTrackController,_);const I=r.audioStreamController;I&&_.push(this.audioStreamController=new I(this,d,A)),this.subtitleTrackController=this.createController(r.subtitleTrackController,_);const C=r.subtitleStreamController;C&&_.push(this.subtititleStreamController=new C(this,d,A)),this.createController(r.timelineController,O),A.emeController=this.emeController=this.createController(r.emeController,O),this.cmcdController=this.createController(r.cmcdController,O),this.latencyController=this.createController(Js,O),this.coreComponents=O,_.push(u);const D=u.onErrorOut;"function"==typeof D&&this.on(l.ERROR,D,u),this.on(l.MANIFEST_LOADED,y.onManifestLoaded,y)}createController(e,t){if(e){const r=new e(this);return t&&t.push(r),r}return null}on(e,t,r=this){this._emitter.on(e,t,r)}once(e,t,r=this){this._emitter.once(e,t,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,r=this,n){this._emitter.off(e,t,r,n)}listeners(e){return this._emitter.listeners(e)}emit(e,t,r){return this._emitter.emit(e,t,r)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;const r=e===l.ERROR;this.trigger(l.ERROR,{type:s.OTHER_ERROR,details:o.INTERNAL_EXCEPTION,fatal:r,event:e,error:t}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(l.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(e=>e.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(e=>e.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const t=new Error(`attachMedia failed: invalid argument (${e})`);return void this.trigger(l.ERROR,{type:s.OTHER_ERROR,details:o.ATTACH_MEDIA_ERROR,fatal:!0,error:t})}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,r=t?e.media:e,n=t?e:{media:r};this._media=r,this.trigger(l.MEDIA_ATTACHING,n)}detachMedia(){this.logger.log("detachMedia"),this.trigger(l.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(l.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,r=this._url,n=this._url=z.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${n}`),t&&r&&(r!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(l.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,t),this.started&&this.networkControllers);r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[f]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[p]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[g]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=null==e?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=function(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)})}}}()),e}get levels(){return this.levelController.levels||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return ze.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const r=e.length;for(let n=0;n<r;n++)if(e[n].maxBitrate>=t)return n;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:r}=this;let n;if(n=-1===t&&null!=e&&e.length?e.length-1:t,r)for(let t=n;t--;){const n=e[t].attrs["HDCP-LEVEL"];if(n&&n<=r)return t}return n}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return(null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return(null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!(null==(e=this.bufferController)||!e.bufferedToEnd)}get interstitialsManager(){var e;return(null==(e=this.interstitialsController)?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){return Be(e,Xe(t),navigator.mediaCapabilities)}}uo.defaultConfig=void 0},5012:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(316),i=r(4569);t.range=function(e,t,r){r&&"number"!=typeof r&&n.isIterateeCall(e,t,r)&&(t=r=void 0),e=i.toFinite(e),void 0===t?(t=e,e=0):t=i.toFinite(t),r=void 0===r?e<t?1:-1:i.toFinite(r);const a=Math.max(Math.ceil((t-e)/(r||1)),0),s=new Array(a);for(let t=0;t<a;t++)s[t]=e,e+=r;return s}},5056:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},5072:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var a={},s=[],o=0;o<e.length;o++){var l=e[o],u=n.base?l[0]+n.base:l[0],c=a[u]||0,d="".concat(u," ").concat(c);a[u]=c+1;var h=r(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(f);else{var p=i(f,n);n.byIndex=o,t.splice(o,0,{identifier:d,updater:p,references:1})}s.push(d)}return s}function i(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,i){var a=n(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var o=r(a[s]);t[o].references--}for(var l=n(e,i),u=0;u<a.length;u++){var c=r(a[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=l}}},5112:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},5160:(e,t,r)=>{"use strict";var n=r(6540);"function"==typeof Object.is&&Object.is,n.useSyncExternalStore,n.useRef,n.useEffect,n.useMemo,n.useDebugValue},5180:(e,t,r)=>{"use strict";r.d(t,{A$:()=>i,HK:()=>s,Lp:()=>n,et:()=>a});var n=e=>e.layout.width,i=e=>e.layout.height,a=e=>e.layout.scale,s=e=>e.layout.margin},5259:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8);t.throttle=function(e,t=0,r={}){const{leading:i=!0,trailing:a=!0}=r;return n.debounce(e,t,{leading:i,maxWait:t,trailing:a})}},5307:(e,t,r)=>{"use strict";r.d(t,{U1:()=>m,VP:()=>u,Nc:()=>te,Z0:()=>w});var n=r(4644);function i(e){return({dispatch:t,getState:r})=>n=>i=>"function"==typeof i?i(t,r,e):n(i)}var a=i(),s=i,o=r(1932),l="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?n.Zz:n.Zz.apply(null,arguments)};function u(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(re(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>(0,n.ve)(t)&&t.type===e,r}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var c=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function d(e){return(0,o.a6)(e)?(0,o.jM)(e,()=>{}):e}function h(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var f=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{};let o=new c;return t&&("boolean"==typeof t?o.push(a):o.push(s(t.extraArgument))),o},p=e=>t=>{setTimeout(t,e)},g=e=>function(t){const{autoBatch:r=!0}=t??{};let n=new c(e);return r&&n.push(((e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,s=!1;const o=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:p(10):"callback"===e.type?e.queueNotification:p(e.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>i&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{return i=!e?.meta?.RTK_autoBatch,a=!i,a&&(s||(s=!0,l(u))),n.dispatch(e)}finally{i=!0}}})})("object"==typeof r?r:void 0)),n};function m(e){const t=f(),{reducer:r,middleware:i,devTools:a=!0,duplicateMiddlewareCheck:s=!0,preloadedState:o,enhancers:u}=e||{};let c,d;if("function"==typeof r)c=r;else{if(!(0,n.Qd)(r))throw new Error(re(1));c=(0,n.HY)(r)}d="function"==typeof i?i(t):t();let h=n.Zz;a&&(h=l({trace:!1,..."object"==typeof a&&a}));const p=(0,n.Tw)(...d),m=g(p),y=h(..."function"==typeof u?u(m):m());return(0,n.y$)(c,o,y)}function y(e){const t={},r=[];let n;const i={addCase(e,r){const n="string"==typeof e?e:e.type;if(!n)throw new Error(re(28));if(n in t)throw new Error(re(29));return t[n]=r,i},addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(n=e,i)};return e(i),[t,r,n]}var v=(e=21)=>{let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},b=Symbol.for("rtk-slice-createasyncthunk");function E(e,t){return`${e}/${t}`}function S({creators:e}={}){const t=e?.asyncThunk?.[b];return function(e){const{name:r,reducerPath:n=r}=e;if(!r)throw new Error(re(11));const i=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},a=Object.keys(i),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(e,t){const r="string"==typeof e?e:e.type;if(!r)throw new Error(re(12));if(r in s.sliceCaseReducersByType)throw new Error(re(13));return s.sliceCaseReducersByType[r]=t,l},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),l),exposeAction:(e,t)=>(s.actionCreators[e]=t,l),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,l)};function c(){const[t={},r=[],n]="function"==typeof e.extraReducers?y(e.extraReducers):[e.extraReducers],i={...t,...s.sliceCaseReducersByType};return function(e){let t,[a,l,u]=y(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)});if("function"==typeof e)t=()=>d(e());else{const r=d(e);t=()=>r}function c(e=t(),r){let n=[a[r.type],...l.filter(({matcher:e})=>e(r)).map(({reducer:e})=>e)];return 0===n.filter(e=>!!e).length&&(n=[u]),n.reduce((e,t)=>{if(t){if((0,o.Qx)(e)){const n=t(e,r);return void 0===n?e:n}if((0,o.a6)(e))return(0,o.jM)(e,e=>t(e,r));{const n=t(e,r);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return c.getInitialState=t,c}(e.initialState)}a.forEach(n=>{const a=i[n],s={reducerName:n,type:E(r,n),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(a)?function({type:e,reducerName:t,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(n))throw new Error(re(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,s?u(e,s):u(e))}(s,a,l):function({type:e,reducerName:t},r,n,i){if(!i)throw new Error(re(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:l,settled:u,options:c}=r,d=i(e,a,c);n.exposeAction(t,d),s&&n.addCase(d.fulfilled,s),o&&n.addCase(d.pending,o),l&&n.addCase(d.rejected,l),u&&n.addMatcher(d.settled,u),n.exposeCaseReducer(t,{fulfilled:s||A,pending:o||A,rejected:l||A,settled:u||A})}(s,a,l,t)});const f=e=>e,p=new Map,g=new WeakMap;let m;function v(e,t){return m||(m=c()),m(e,t)}function b(){return m||(m=c()),m.getInitialState()}function S(t,r=!1){function n(e){let i=e[t];return void 0===i&&r&&(i=h(g,n,b)),i}function i(t=f){const n=h(p,r,()=>new WeakMap);return h(n,t,()=>{const n={};for(const[i,a]of Object.entries(e.selectors??{}))n[i]=T(a,t,()=>h(g,t,b),r);return n})}return{reducerPath:t,getSelectors:i,get selectors(){return i(n)},selectSlice:n}}const w={name:r,reducer:v,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:b,...S(n),injectInto(e,{reducerPath:t,...r}={}){const i=t??n;return e.inject({reducerPath:i,reducer:v},r),{...w,...S(i,!0)}}};return w}}function T(e,t,r,n){function i(i,...a){let s=t(i);return void 0===s&&n&&(s=r()),e(s,...a)}return i.unwrapped=e,i}var w=S();function A(){}var k="listener",x="completed",L="cancelled",P=`task-${L}`,R=`task-${x}`,_=`${k}-${L}`,O=`${k}-${x}`,I=class{constructor(e){this.code=e,this.message=`task ${L} (reason: ${e})`}name="TaskAbortError";message},C=(e,t)=>{if("function"!=typeof e)throw new TypeError(re(32))},D=()=>{},M=(e,t=D)=>(e.catch(t),e),N=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),F=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},U=e=>{if(e.aborted){const{reason:t}=e;throw new I(t)}};function B(e,t){let r=D;return new Promise((n,i)=>{const a=()=>i(new I(e.reason));e.aborted?a():(r=N(e,a),t.finally(()=>r()).then(n,i))}).finally(()=>{r=D})}var $=e=>t=>M(B(e,t).then(t=>(U(e),t))),j=e=>{const t=$(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:z}=Object,G={},H="listenerMiddleware",K=(e,t)=>(r,n)=>{C(r);const i=new AbortController;var a;a=i,N(e,()=>F(a,e.reason));const s=(async()=>{try{return await Promise.resolve(),{status:"ok",value:await(async()=>{U(e),U(i.signal);const t=await r({pause:$(i.signal),delay:j(i.signal),signal:i.signal});return U(i.signal),t})()}}catch(e){return{status:e instanceof I?"cancelled":"rejected",error:e}}finally{F(i,R)}})();return n?.autoJoin&&t.push(s.catch(D)),{result:$(e)(s),cancel(){F(i,P)}}},V=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=u(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(re(21));return C(a),{predicate:i,type:t,effect:a}},W=z(e=>{const{type:t,predicate:r,effect:n}=V(e);return{id:v(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(re(22))}}},{withTypes:()=>W}),Y=(e,t)=>{const{type:r,effect:n,predicate:i}=V(t);return Array.from(e.values()).find(e=>("string"==typeof r?e.type===r:e.predicate===i)&&e.effect===n)},q=e=>{e.pending.forEach(e=>{F(e,_)})},X=(e,t,r)=>{try{e(t,r)}catch(e){setTimeout(()=>{throw e},0)}},Q=z(u(`${H}/add`),{withTypes:()=>Q}),Z=u(`${H}/removeAll`),J=z(u(`${H}/remove`),{withTypes:()=>J}),ee=(...e)=>{console.error(`${H}/error`,...e)},te=(e={})=>{const t=new Map,{extra:r,onError:i=ee}=e;C(i);const a=e=>{return(r=Y(t,e)??W(e)).unsubscribe=()=>t.delete(r.id),t.set(r.id,r),e=>{r.unsubscribe(),e?.cancelActive&&q(r)};var r};z(a,{withTypes:()=>a});const s=e=>{const r=Y(t,e);return r&&(r.unsubscribe(),e.cancelActive&&q(r)),!!r};z(s,{withTypes:()=>s});const o=async(e,n,s,o)=>{const l=new AbortController,u=((e,t)=>(r,n)=>M((async(r,n)=>{U(t);let i=()=>{};const a=[new Promise((t,n)=>{let a=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});i=()=>{a(),n()}})];null!=n&&a.push(new Promise(e=>setTimeout(e,n,null)));try{const e=await B(t,Promise.race(a));return U(t),e}finally{i()}})(r,n)))(a,l.signal),c=[];try{e.pending.add(l),await Promise.resolve(e.effect(n,z({},s,{getOriginalState:o,condition:(e,t)=>u(e,t).then(Boolean),take:u,delay:j(l.signal),pause:$(l.signal),extra:r,signal:l.signal,fork:K(l.signal,c),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==l&&(F(e,_),r.delete(e))})},cancel:()=>{F(l,_),e.pending.delete(l)},throwIfCancelled:()=>{U(l.signal)}})))}catch(e){e instanceof I||X(i,e,{raisedBy:"effect"})}finally{await Promise.all(c),F(l,O),e.pending.delete(l)}},l=(e=>()=>{e.forEach(q),e.clear()})(t);return{middleware:e=>r=>u=>{if(!(0,n.ve)(u))return r(u);if(Q.match(u))return a(u.payload);if(Z.match(u))return void l();if(J.match(u))return s(u.payload);let c=e.getState();const d=()=>{if(c===G)throw new Error(re(23));return c};let h;try{if(h=r(u),t.size>0){const r=e.getState(),n=Array.from(t.values());for(const t of n){let n=!1;try{n=t.predicate(u,r,c)}catch(e){n=!1,X(i,e,{raisedBy:"predicate"})}n&&o(t,u,e,d)}}}finally{c=G}return h},startListening:a,stopListening:s,clearListeners:l}};function re(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original")},5338:(e,t,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(1247)},5403:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var n=r(9744),i=(e,t)=>{var r,i=Number(t);if(!(0,n.M8)(i)&&null!=t)return i>=0?null==e||null===(r=e[i])||void 0===r?void 0:r.value:void 0}},5448:(e,t,r)=>{"use strict";r.d(t,{R:()=>i,u:()=>a});var n=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function i(e){return"string"==typeof e&&n.includes(e)}function a(e){var t=Object.entries(e).filter(e=>{var[t]=e;return i(t)});return Object.fromEntries(t)}},5508:(e,t,r)=>{"use strict";r.d(t,{Mz:()=>l});var n=e=>Array.isArray(e)?e:[e];Symbol(),Object.getPrototypeOf({});var i="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function a(){return{s:0,v:void 0,o:null,p:null}}function s(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let s,o=0;function l(){let t=r;const{length:l}=arguments;for(let e=0,r=l;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t=a(),e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t=a(),e.set(r,t)):t=n}}const u=t;let c;if(1===t.s)c=t.v;else if(c=e.apply(null,arguments),o++,n){const e=s?.deref?.()??s;null!=e&&n(e,c)&&(c=e,0!==o&&o--),s="object"==typeof c&&null!==c||"function"==typeof c?new i(c):c}return u.s=1,u.v=c,c}return l.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},l.resetResultsCount()},l.resultsCount=()=>o,l.resetResultsCount=()=>{o=0},l}function o(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,i=(...e)=>{let t,i=0,a=0,o={},l=e.pop();"object"==typeof l&&(o=l,l=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const u={...r,...o},{memoize:c,memoizeOptions:d=[],argsMemoize:h=s,argsMemoizeOptions:f=[],devModeChecks:p={}}=u,g=n(d),m=n(f),y=function(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const r=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}(e),v=c(function(){return i++,l.apply(null,arguments)},...g),b=h(function(){a++;const e=function(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}(y,arguments);return t=v.apply(null,e),t},...m);return Object.assign(b,{resultFunc:l,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>t,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:c,argsMemoize:h})};return Object.assign(i,{withTypes:()=>i}),i}var l=o(s),u=Object.assign((e,t=l)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map(t=>e[t]),(...e)=>e.reduce((e,t,n)=>(e[r[n]]=t,e),{}))},{withTypes:()=>u})},5711:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e,t=1){const r=[],n=Math.floor(t),i=(e,t)=>{for(let a=0;a<e.length;a++){const s=e[a];Array.isArray(s)&&t<n?i(s,t+1):r.push(s)}};return i(e,0),r}},5846:(e,t,r)=>{"use strict";r.d(t,{M:()=>a,t:()=>i});var n=r(6540),i=(0,n.createContext)(null),a=()=>(0,n.useContext)(i)},5869:(e,t,r)=>{"use strict";r.d(t,{h:()=>b});var n=r(6540),i=r(4164),a=r(8026),s=r(4115),o=r(9082),l=r(6118),u=r(6189),c=r(2070),d=r(1706),h=["dangerouslySetInnerHTML","ticks"];function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(null,arguments)}function g(e){var t=(0,o.j)();return(0,n.useEffect)(()=>(t((0,s.cU)(e)),()=>{t((0,s.fR)(e))}),[e,t]),null}var m=e=>{var t,{yAxisId:r,className:f,width:g,label:m}=e,y=(0,n.useRef)(null),v=(0,n.useRef)(null),b=(0,o.G)(u.c2),E=(0,c.r)(),S=(0,o.j)(),T="yAxis",w=(0,o.G)(e=>(0,l.iV)(e,T,r,E)),A=(0,o.G)(e=>(0,l.wP)(e,r)),k=(0,o.G)(e=>(0,l.KR)(e,r)),x=(0,o.G)(e=>(0,l.Zi)(e,T,r,E));if((0,n.useLayoutEffect)(()=>{var e;if("auto"===g&&A&&!(0,d.Z)(m)&&!(0,n.isValidElement)(m)){var t=y.current,i=null==t||null===(e=t.tickRefs)||void 0===e?void 0:e.current,{tickSize:a,tickMargin:o}=t.props,l=(e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,s=0;if(t){t.forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>s&&(s=t.width)}});var o=r?r.getBoundingClientRect().width:0,l=s+(i+a)+o+(r?n:0);return Math.round(l)}return 0})({ticks:i,label:v.current,labelGapWithTick:5,tickSize:a,tickMargin:o});Math.round(A.width)!==Math.round(l)&&S((0,s.QG)({id:r,width:l}))}},[y,null==y||null===(t=y.current)||void 0===t||null===(t=t.tickRefs)||void 0===t?void 0:t.current,null==A?void 0:A.width,A,S,m,r,g]),null==A||null==k)return null;var{dangerouslySetInnerHTML:L,ticks:P}=e,R=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,h);return n.createElement(a.u,p({},R,{ref:y,labelRef:v,scale:w,x:k.x,y:k.y,width:A.width,height:A.height,className:(0,i.$)("recharts-".concat(T," ").concat(T),f),viewBox:b,ticks:x}))},y=e=>{var t,r,i,a,s;return n.createElement(n.Fragment,null,n.createElement(g,{interval:null!==(t=e.interval)&&void 0!==t?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:null!==(r=e.includeHidden)&&void 0!==r&&r,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(i=e.angle)&&void 0!==i?i:0,minTickGap:null!==(a=e.minTickGap)&&void 0!==a?a:5,tick:null===(s=e.tick)||void 0===s||s,tickFormatter:e.tickFormatter}),n.createElement(m,e))},v={allowDataOverflow:l.cd.allowDataOverflow,allowDecimals:l.cd.allowDecimals,allowDuplicatedCategory:l.cd.allowDuplicatedCategory,hide:!1,mirror:l.cd.mirror,orientation:l.cd.orientation,padding:l.cd.padding,reversed:l.cd.reversed,scale:l.cd.scale,tickCount:l.cd.tickCount,type:l.cd.type,width:l.cd.width,yAxisId:0};class b extends n.Component{render(){return n.createElement(y,this.props)}}f(b,"displayName","YAxis"),f(b,"defaultProps",v)},5917:(e,t,r)=>{"use strict";function n(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}r.d(t,{A:()=>n}),Array.prototype.slice},5978:(e,t,r)=>{"use strict";r.d(t,{$g:()=>s,Hw:()=>a,Td:()=>l,au:()=>o,xH:()=>i});var n=r(9082),i=e=>e.options.defaultTooltipEventType,a=e=>e.options.validateTooltipEventTypes;function s(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function o(e,t){return s(t,i(e),a(e))}function l(e){return(0,n.G)(t=>o(t,e))}},6012:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6069:(e,t,r)=>{"use strict";r.d(t,{W:()=>l});var n=r(6540),i=r(4164),a=r(4501),s=["children","className"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(null,arguments)}var l=n.forwardRef((e,t)=>{var{children:r,className:l}=e,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,s),c=(0,i.$)("recharts-layer",l);return n.createElement("g",o({className:c},(0,a.J9)(u,!0),{ref:t}),r)})},6118:(e,t,r)=>{"use strict";r.d(t,{kz:()=>Ra,fb:()=>ba,q:()=>Va,tP:()=>ts,g1:()=>ls,iv:()=>Cs,Nk:()=>ya,pM:()=>La,Oz:()=>Ha,tF:()=>Os,rj:()=>ga,ec:()=>ca,bb:()=>Ya,xp:()=>ss,wL:()=>Za,sr:()=>ns,Qn:()=>as,MK:()=>ka,IO:()=>fa,P9:()=>Ua,S5:()=>Ma,PU:()=>Zi,cd:()=>ea,eo:()=>oa,yi:()=>Na,CH:()=>_a,ZB:()=>Ms,D5:()=>ms,iV:()=>vs,Hd:()=>aa,Gx:()=>Us,_y:()=>$s,um:()=>sa,gT:()=>$a,Kr:()=>Fa,$X:()=>za,Zi:()=>Ns,CR:()=>Fs,ld:()=>la,L$:()=>Ps,Rl:()=>Ji,Lw:()=>ks,KR:()=>Rs,sf:()=>ta,wP:()=>_s});var n={};r.r(n),r.d(n,{scaleBand:()=>p,scaleDiverging:()=>ni,scaleDivergingLog:()=>ii,scaleDivergingPow:()=>si,scaleDivergingSqrt:()=>oi,scaleDivergingSymlog:()=>ai,scaleIdentity:()=>Je,scaleImplicit:()=>h,scaleLinear:()=>Ze,scaleLog:()=>lt,scaleOrdinal:()=>f,scalePoint:()=>m,scalePow:()=>yt,scaleQuantile:()=>Lt,scaleQuantize:()=>Pt,scaleRadial:()=>Et,scaleSequential:()=>Xn,scaleSequentialLog:()=>Qn,scaleSequentialPow:()=>Jn,scaleSequentialQuantile:()=>ti,scaleSequentialSqrt:()=>ei,scaleSequentialSymlog:()=>Zn,scaleSqrt:()=>vt,scaleSymlog:()=>ht,scaleThreshold:()=>Rt,scaleTime:()=>Vn,scaleUtc:()=>Wn,tickFormat:()=>Xe});var i=r(5508),a=r(3412),s=r.n(a);function o(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function l(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}class u extends Map{constructor(e,t=d){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,r]of e)this.set(t,r)}get(e){return super.get(c(this,e))}has(e){return super.has(c(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}(this,e))}}function c({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function d(e){return null!==e&&"object"==typeof e?e.valueOf():e}Set;const h=Symbol("implicit");function f(){var e=new u,t=[],r=[],n=h;function i(i){let a=e.get(i);if(void 0===a){if(n!==h)return n;e.set(i,a=t.push(i)-1)}return r[a%r.length]}return i.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new u;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return f(t,r).unknown(n)},o.apply(i,arguments),i}function p(){var e,t,r=f().unknown(void 0),n=r.domain,i=r.range,a=0,s=1,l=!1,u=0,c=0,d=.5;function h(){var r=n().length,o=s<a,h=o?s:a,f=o?a:s;e=(f-h)/Math.max(1,r-u+2*c),l&&(e=Math.floor(e)),h+=(f-h-e*(r-u))*d,t=e*(1-u),l&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),a=new Array(i);++n<i;)a[n]=e+n*r;return a}(r).map(function(t){return h+e*t});return i(o?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),h()):n()},r.range=function(e){return arguments.length?([a,s]=e,a=+a,s=+s,h()):[a,s]},r.rangeRound=function(e){return[a,s]=e,a=+a,s=+s,l=!0,h()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(l=!!e,h()):l},r.padding=function(e){return arguments.length?(u=Math.min(1,c=+e),h()):u},r.paddingInner=function(e){return arguments.length?(u=Math.min(1,e),h()):u},r.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),h()):d},r.copy=function(){return p(n(),[a,s]).round(l).paddingInner(u).paddingOuter(c).align(d)},o.apply(h(),arguments)}function g(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return g(t())},e}function m(){return g(p.apply(null,arguments).paddingInner(1))}const y=Math.sqrt(50),v=Math.sqrt(10),b=Math.sqrt(2);function E(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=y?10:a>=v?5:a>=b?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?E(e,t,2*r):[o,l,u]}function S(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[i,a,s]=n?E(t,e,r):E(e,t,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let e=0;e<o;++e)l[e]=(a-e)/-s;else for(let e=0;e<o;++e)l[e]=(a-e)*s;else if(s<0)for(let e=0;e<o;++e)l[e]=(i+e)/-s;else for(let e=0;e<o;++e)l[e]=(i+e)*s;return l}function T(e,t,r){return E(e=+e,t=+t,r=+r)[2]}function w(e,t,r){r=+r;const n=(t=+t)<(e=+e),i=n?T(t,e,r):T(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function A(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function k(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x(e){let t,r,n;function i(e,n,i=0,a=e.length){if(i<a){if(0!==t(n,n))return a;do{const t=i+a>>>1;r(e[t],n)<0?i=t+1:a=t}while(i<a)}return i}return 2!==e.length?(t=A,r=(t,r)=>A(e(t),r),n=(t,r)=>e(t)-r):(t=e===A||e===k?e:L,r=e,n=e),{left:i,center:function(e,t,r=0,a=e.length){const s=i(e,t,r,a-1);return s>r&&n(e[s-1],t)>-n(e[s],t)?s-1:s},right:function(e,n,i=0,a=e.length){if(i<a){if(0!==t(n,n))return a;do{const t=i+a>>>1;r(e[t],n)<=0?i=t+1:a=t}while(i<a)}return i}}}function L(){return 0}function P(e){return null===e?NaN:+e}const R=x(A),_=R.right,O=(R.left,x(P).center,_);function I(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function C(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function D(){}var M=.7,N=1/M,F="\\s*([+-]?\\d+)\\s*",U="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",B="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$=/^#([0-9a-f]{3,8})$/,j=new RegExp(`^rgb\\(${F},${F},${F}\\)$`),z=new RegExp(`^rgb\\(${B},${B},${B}\\)$`),G=new RegExp(`^rgba\\(${F},${F},${F},${U}\\)$`),H=new RegExp(`^rgba\\(${B},${B},${B},${U}\\)$`),K=new RegExp(`^hsl\\(${U},${B},${B}\\)$`),V=new RegExp(`^hsla\\(${U},${B},${B},${U}\\)$`),W={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Y(){return this.rgb().formatHex()}function q(){return this.rgb().formatRgb()}function X(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=$.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?Q(t):3===r?new ee(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?Z(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?Z(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=j.exec(e))?new ee(t[1],t[2],t[3],1):(t=z.exec(e))?new ee(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=G.exec(e))?Z(t[1],t[2],t[3],t[4]):(t=H.exec(e))?Z(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=K.exec(e))?se(t[1],t[2]/100,t[3]/100,1):(t=V.exec(e))?se(t[1],t[2]/100,t[3]/100,t[4]):W.hasOwnProperty(e)?Q(W[e]):"transparent"===e?new ee(NaN,NaN,NaN,0):null}function Q(e){return new ee(e>>16&255,e>>8&255,255&e,1)}function Z(e,t,r,n){return n<=0&&(e=t=r=NaN),new ee(e,t,r,n)}function J(e,t,r,n){return 1===arguments.length?((i=e)instanceof D||(i=X(i)),i?new ee((i=i.rgb()).r,i.g,i.b,i.opacity):new ee):new ee(e,t,r,null==n?1:n);var i}function ee(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function te(){return`#${ae(this.r)}${ae(this.g)}${ae(this.b)}`}function re(){const e=ne(this.opacity);return`${1===e?"rgb(":"rgba("}${ie(this.r)}, ${ie(this.g)}, ${ie(this.b)}${1===e?")":`, ${e})`}`}function ne(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ie(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ae(e){return((e=ie(e))<16?"0":"")+e.toString(16)}function se(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new le(e,t,r,n)}function oe(e){if(e instanceof le)return new le(e.h,e.s,e.l,e.opacity);if(e instanceof D||(e=X(e)),!e)return new le;if(e instanceof le)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(s=t===a?(r-n)/o+6*(r<n):r===a?(n-t)/o+2:(t-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new le(s,o,l,e.opacity)}function le(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function ue(e){return(e=(e||0)%360)<0?e+360:e}function ce(e){return Math.max(0,Math.min(1,e||0))}function de(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function he(e,t,r,n,i){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*r+(1+3*e+3*a-3*s)*n+s*i)/6}I(D,X,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Y,formatHex:Y,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return oe(this).formatHsl()},formatRgb:q,toString:q}),I(ee,J,C(D,{brighter(e){return e=null==e?N:Math.pow(N,e),new ee(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?M:Math.pow(M,e),new ee(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ee(ie(this.r),ie(this.g),ie(this.b),ne(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:te,formatHex:te,formatHex8:function(){return`#${ae(this.r)}${ae(this.g)}${ae(this.b)}${ae(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:re,toString:re})),I(le,function(e,t,r,n){return 1===arguments.length?oe(e):new le(e,t,r,null==n?1:n)},C(D,{brighter(e){return e=null==e?N:Math.pow(N,e),new le(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?M:Math.pow(M,e),new le(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new ee(de(e>=240?e-240:e+120,i,n),de(e,i,n),de(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new le(ue(this.h),ce(this.s),ce(this.l),ne(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ne(this.opacity);return`${1===e?"hsl(":"hsla("}${ue(this.h)}, ${100*ce(this.s)}%, ${100*ce(this.l)}%${1===e?")":`, ${e})`}`}}));const fe=e=>()=>e;function pe(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):fe(isNaN(e)?t:e)}const ge=function e(t){var r=function(e){return 1===(e=+e)?pe:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):fe(isNaN(t)?r:t)}}(t);function n(e,t){var n=r((e=J(e)).r,(t=J(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),s=pe(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=s(t),e+""}}return n.gamma=e,n}(1);function me(e){return function(t){var r,n,i=t.length,a=new Array(i),s=new Array(i),o=new Array(i);for(r=0;r<i;++r)n=J(t[r]),a[r]=n.r||0,s[r]=n.g||0,o[r]=n.b||0;return a=e(a),s=e(s),o=e(o),n.opacity=1,function(e){return n.r=a(e),n.g=s(e),n.b=o(e),n+""}}}function ye(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),s=new Array(n);for(r=0;r<i;++r)a[r]=ke(e[r],t[r]);for(;r<n;++r)s[r]=t[r];return function(e){for(r=0;r<i;++r)s[r]=a[r](e);return s}}function ve(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function be(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Ee(e,t){var r,n={},i={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=ke(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}me(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],a=e[n+1],s=n>0?e[n-1]:2*i-a,o=n<t-1?e[n+2]:2*a-i;return he((r-n/t)*t,s,i,a,o)}}),me(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),i=e[(n+t-1)%t],a=e[n%t],s=e[(n+1)%t],o=e[(n+2)%t];return he((r-n/t)*t,i,a,s,o)}});var Se=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Te=new RegExp(Se.source,"g");function we(e,t){var r,n,i,a=Se.lastIndex=Te.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(r=Se.exec(e))&&(n=Te.exec(t));)(i=n.index)>a&&(i=t.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(r=r[0])===(n=n[0])?o[s]?o[s]+=n:o[++s]=n:(o[++s]=null,l.push({i:s,x:be(r,n)})),a=Te.lastIndex;return a<t.length&&(i=t.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function Ae(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function ke(e,t){var r,n,i=typeof t;return null==t||"boolean"===i?fe(t):("number"===i?be:"string"===i?(r=X(t))?(t=r,ge):we:t instanceof X?ge:t instanceof Date?ve:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?ye:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Ee:be:Ae))(e,t)}function xe(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Le(e){return+e}var Pe=[0,1];function Re(e){return e}function _e(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function Oe(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=_e(i,n),a=r(s,a)):(n=_e(n,i),a=r(a,s)),function(e){return a(n(e))}}function Ie(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=_e(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(t){var r=O(e,t,1,n)-1;return a[r](i[r](t))}}function Ce(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function De(){var e,t,r,n,i,a,s=Pe,o=Pe,l=ke,u=Re;function c(){var e,t,r,l=Math.min(s.length,o.length);return u!==Re&&(e=s[0],t=s[l-1],e>t&&(r=e,e=t,t=r),u=function(r){return Math.max(e,Math.min(t,r))}),n=l>2?Ie:Oe,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?r:(i||(i=n(s.map(e),o,l)))(e(u(t)))}return d.invert=function(r){return u(t((a||(a=n(o,s.map(e),be)))(r)))},d.domain=function(e){return arguments.length?(s=Array.from(e,Le),c()):s.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),c()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=xe,c()},d.clamp=function(e){return arguments.length?(u=!!e||Re,c()):u!==Re},d.interpolate=function(e){return arguments.length?(l=e,c()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,c()}}function Me(){return De()(Re,Re)}var Ne,Fe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ue(e){if(!(t=Fe.exec(e)))throw new Error("invalid format: "+e);var t;return new Be({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Be(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function $e(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function je(e){return(e=$e(Math.abs(e)))?e[1]:NaN}function ze(e,t){var r=$e(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}Ue.prototype=Be.prototype,Be.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ge={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ze(100*e,t),r:ze,s:function(e,t){var r=$e(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(Ne=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+$e(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function He(e){return e}var Ke,Ve,We,Ye=Array.prototype.map,qe=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Xe(e,t,r,n){var i,a=w(e,t,r);switch((n=Ue(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(je(t)/3)))-je(Math.abs(e)))}(a,s))||(n.precision=i),We(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,je(t)-je(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=function(e){return Math.max(0,-je(Math.abs(e)))}(a))||(n.precision=i-2*("%"===n.type))}return Ve(n)}function Qe(e){var t=e.domain;return e.ticks=function(e){var r=t();return S(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return Xe(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,i,a=t(),s=0,o=a.length-1,l=a[s],u=a[o],c=10;for(u<l&&(i=l,l=u,u=i,i=s,s=o,o=i);c-- >0;){if((i=T(l,u,r))===n)return a[s]=l,a[o]=u,t(a);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}n=i}return e},e}function Ze(){var e=Me();return e.copy=function(){return Ce(e,Ze())},o.apply(e,arguments),Qe(e)}function Je(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,Le),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return Je(e).unknown(t)},e=arguments.length?Array.from(e,Le):[0,1],Qe(r)}function et(e,t){var r,n=0,i=(e=e.slice()).length-1,a=e[n],s=e[i];return s<a&&(r=n,n=i,i=r,r=a,a=s,s=r),e[n]=t.floor(a),e[i]=t.ceil(s),e}function tt(e){return Math.log(e)}function rt(e){return Math.exp(e)}function nt(e){return-Math.log(-e)}function it(e){return-Math.exp(-e)}function at(e){return isFinite(e)?+("1e"+e):e<0?0:e}function st(e){return(t,r)=>-e(-t,r)}function ot(e){const t=e(tt,rt),r=t.domain;let n,i,a=10;function s(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(a),i=function(e){return 10===e?at:e===Math.E?Math.exp:t=>Math.pow(e,t)}(a),r()[0]<0?(n=st(n),i=st(i),e(nt,it)):e(tt,rt),t}return t.base=function(e){return arguments.length?(a=+e,s()):a},t.domain=function(e){return arguments.length?(r(e),s()):r()},t.ticks=e=>{const t=r();let s=t[0],o=t[t.length-1];const l=o<s;l&&([s,o]=[o,s]);let u,c,d=n(s),h=n(o);const f=null==e?10:+e;let p=[];if(!(a%1)&&h-d<f){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(u=1;u<a;++u)if(c=d<0?u/i(-d):u*i(d),!(c<s)){if(c>o)break;p.push(c)}}else for(;d<=h;++d)for(u=a-1;u>=1;--u)if(c=d>0?u/i(-d):u*i(d),!(c<s)){if(c>o)break;p.push(c)}2*p.length<f&&(p=S(s,o,f))}else p=S(d,h,Math.min(h-d,f)).map(i);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===a?"s":","),"function"!=typeof r&&(a%1||null!=(r=Ue(r)).precision||(r.trim=!0),r=Ve(r)),e===1/0)return r;const s=Math.max(1,a*e/t.ticks().length);return e=>{let t=e/i(Math.round(n(e)));return t*a<a-.5&&(t*=a),t<=s?r(e):""}},t.nice=()=>r(et(r(),{floor:e=>i(Math.floor(n(e))),ceil:e=>i(Math.ceil(n(e)))})),t}function lt(){const e=ot(De()).domain([1,10]);return e.copy=()=>Ce(e,lt()).base(e.base()),o.apply(e,arguments),e}function ut(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ct(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function dt(e){var t=1,r=e(ut(t),ct(t));return r.constant=function(r){return arguments.length?e(ut(t=+r),ct(t)):t},Qe(r)}function ht(){var e=dt(De());return e.copy=function(){return Ce(e,ht()).constant(e.constant())},o.apply(e,arguments)}function ft(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function pt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function gt(e){return e<0?-e*e:e*e}function mt(e){var t=e(Re,Re),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(Re,Re):.5===r?e(pt,gt):e(ft(r),ft(1/r)):r},Qe(t)}function yt(){var e=mt(De());return e.copy=function(){return Ce(e,yt()).exponent(e.exponent())},o.apply(e,arguments),e}function vt(){return yt.apply(null,arguments).exponent(.5)}function bt(e){return Math.sign(e)*e*e}function Et(){var e,t=Me(),r=[0,1],n=!1;function i(r){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(i)?e:n?Math.round(i):i}return i.invert=function(e){return t.invert(bt(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((r=Array.from(e,Le)).map(bt)),i):r.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(n=!!e,i):n},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Et(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},o.apply(i,arguments),Qe(i)}function St(e,t){let r;if(void 0===t)for(const t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}function Tt(e,t){let r;if(void 0===t)for(const t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}function wt(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function At(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=void 0===i?wt:function(e=A){if(e===A)return wt;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(i);n>r;){if(n-r>600){const a=n-r+1,s=t-r+1,o=Math.log(a),l=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*l*(a-l)/a)*(s-a/2<0?-1:1);At(e,t,Math.max(r,Math.floor(t-s*l/a+u)),Math.min(n,Math.floor(t+(a-s)*l/a+u)),i)}const a=e[t];let s=r,o=n;for(kt(e,r,t),i(e[n],a)>0&&kt(e,r,n);s<o;){for(kt(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}0===i(e[r],a)?kt(e,r,o):(++o,kt(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function kt(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function xt(e,t,r=P){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e);return s+(+r(e[a+1],a+1,e)-s)*(i-a)}}function Lt(){var e,t=[],r=[],n=[];function i(){var e=0,i=Math.max(1,r.length);for(n=new Array(i-1);++e<i;)n[e-1]=xt(t,e/i);return a}function a(t){return null==t||isNaN(t=+t)?e:r[O(n,t)]}return a.invertExtent=function(e){var i=r.indexOf(e);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(A),i()},a.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return n.slice()},a.copy=function(){return Lt().domain(t).range(r).unknown(e)},o.apply(a,arguments)}function Pt(){var e,t=0,r=1,n=1,i=[.5],a=[0,1];function s(t){return null!=t&&t<=t?a[O(i,t,0,n)]:e}function l(){var e=-1;for(i=new Array(n);++e<n;)i[e]=((e+1)*r-(e-n)*t)/(n+1);return s}return s.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,l()):[t,r]},s.range=function(e){return arguments.length?(n=(a=Array.from(e)).length-1,l()):a.slice()},s.invertExtent=function(e){var s=a.indexOf(e);return s<0?[NaN,NaN]:s<1?[t,i[0]]:s>=n?[i[n-1],r]:[i[s-1],i[s]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return Pt().domain([t,r]).range(a).unknown(e)},o.apply(Qe(s),arguments)}function Rt(){var e,t=[.5],r=[0,1],n=1;function i(i){return null!=i&&i<=i?r[O(t,i,0,n)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Rt().domain(t).range(r).unknown(e)},o.apply(i,arguments)}Ke=function(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?He:(t=Ye.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var i=e.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(e.substring(i-=o,i+o)),!((l+=o+1)>n));)o=t[s=(s+1)%t.length];return a.reverse().join(r)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?He:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Ye.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"−":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Ue(e)).fill,r=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,g=e.comma,m=e.precision,y=e.trim,v=e.type;"n"===v?(g=!0,v="g"):Ge[v]||(void 0===m&&(m=12),y=!0,v="g"),(f||"0"===t&&"="===r)&&(f=!0,t="0",r="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",E="$"===h?a:/[%p]/.test(v)?l:"",S=Ge[v],T=/[defgprs%]/.test(v);function w(e){var i,a,l,h=b,w=E;if("c"===v)w=S(e)+w,e="";else{var A=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:S(Math.abs(e),m),y&&(e=function(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),A&&0===+e&&"+"!==d&&(A=!1),h=(A?"("===d?d:u:"-"===d||"("===d?"":d)+h,w=("s"===v?qe[8+Ne/3]:"")+w+(A&&"("===d?")":""),T)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){w=(46===l?s+e.slice(i+1):e.slice(i))+w,e=e.slice(0,i);break}}g&&!f&&(e=n(e,1/0));var k=h.length+e.length+w.length,x=k<p?new Array(p-k+1).join(t):"";switch(g&&f&&(e=n(x+e,x.length?p-w.length:1/0),x=""),r){case"<":e=h+e+w+x;break;case"=":e=h+x+e+w;break;case"^":e=x.slice(0,k=x.length>>1)+h+e+w+x.slice(k);break;default:e=x+h+e+w}return o(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),w.toString=function(){return e+""},w}return{format:d,formatPrefix:function(e,t){var r=d(((e=Ue(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(je(t)/3))),i=Math.pow(10,-n),a=qe[8+n/3];return function(e){return r(i*e)+a}}}}({thousands:",",grouping:[3],currency:["$",""]}),Ve=Ke.format,We=Ke.formatPrefix;const _t=1e3,Ot=6e4,It=36e5,Ct=864e5,Dt=6048e5,Mt=31536e6,Nt=new Date,Ft=new Date;function Ut(e,t,r,n){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=e=>{const t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),i.range=(r,n,a)=>{const s=[];if(r=i.ceil(r),a=null==a?1:Math.floor(a),!(r<n&&a>0))return s;let o;do{s.push(o=new Date(+r)),t(r,a),e(r)}while(o<r&&r<n);return s},i.filter=r=>Ut(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(i.count=(t,n)=>(Nt.setTime(+t),Ft.setTime(+n),e(Nt),e(Ft),Math.floor(r(Nt,Ft))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(n?t=>n(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const Bt=Ut(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Bt.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Ut(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Bt:null),Bt.range;const $t=Ut(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_t)},(e,t)=>(t-e)/_t,e=>e.getUTCSeconds()),jt=($t.range,Ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_t)},(e,t)=>{e.setTime(+e+t*Ot)},(e,t)=>(t-e)/Ot,e=>e.getMinutes())),zt=(jt.range,Ut(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ot)},(e,t)=>(t-e)/Ot,e=>e.getUTCMinutes())),Gt=(zt.range,Ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_t-e.getMinutes()*Ot)},(e,t)=>{e.setTime(+e+t*It)},(e,t)=>(t-e)/It,e=>e.getHours())),Ht=(Gt.range,Ut(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*It)},(e,t)=>(t-e)/It,e=>e.getUTCHours())),Kt=(Ht.range,Ut(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ot)/Ct,e=>e.getDate()-1)),Vt=(Kt.range,Ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ct,e=>e.getUTCDate()-1)),Wt=(Vt.range,Ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ct,e=>Math.floor(e/Ct)));function Yt(e){return Ut(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ot)/Dt)}Wt.range;const qt=Yt(0),Xt=Yt(1),Qt=Yt(2),Zt=Yt(3),Jt=Yt(4),er=Yt(5),tr=Yt(6);function rr(e){return Ut(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/Dt)}qt.range,Xt.range,Qt.range,Zt.range,Jt.range,er.range,tr.range;const nr=rr(0),ir=rr(1),ar=rr(2),sr=rr(3),or=rr(4),lr=rr(5),ur=rr(6),cr=(nr.range,ir.range,ar.range,sr.range,or.range,lr.range,ur.range,Ut(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),dr=(cr.range,Ut(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),hr=(dr.range,Ut(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));hr.every=e=>isFinite(e=Math.floor(e))&&e>0?Ut(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,hr.range;const fr=Ut(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function pr(e,t,r,n,i,a){const s=[[$t,1,_t],[$t,5,5e3],[$t,15,15e3],[$t,30,3e4],[a,1,Ot],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,It],[i,3,108e5],[i,6,216e5],[i,12,432e5],[n,1,Ct],[n,2,1728e5],[r,1,Dt],[t,1,2592e6],[t,3,7776e6],[e,1,Mt]];function o(t,r,n){const i=Math.abs(r-t)/n,a=x(([,,e])=>e).right(s,i);if(a===s.length)return e.every(w(t/Mt,r/Mt,n));if(0===a)return Bt.every(Math.max(w(t,r,n),1));const[o,l]=s[i/s[a-1][2]<s[a][2]/i?a-1:a];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const i=r&&"function"==typeof r.range?r:o(e,t,r),a=i?i.range(e,+t+1):[];return n?a.reverse():a},o]}fr.every=e=>isFinite(e=Math.floor(e))&&e>0?Ut(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,fr.range;const[gr,mr]=pr(fr,dr,nr,Wt,Ht,zt),[yr,vr]=pr(hr,cr,qt,Kt,Gt,jt);function br(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Er(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sr(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var Tr,wr,Ar,kr={"-":"",_:" ",0:"0"},xr=/^\s*\d+/,Lr=/^%/,Pr=/[\\^$*+?|[\]().{}]/g;function Rr(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function _r(e){return e.replace(Pr,"\\$&")}function Or(e){return new RegExp("^(?:"+e.map(_r).join("|")+")","i")}function Ir(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function Cr(e,t,r){var n=xr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Dr(e,t,r){var n=xr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Mr(e,t,r){var n=xr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Nr(e,t,r){var n=xr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Fr(e,t,r){var n=xr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Ur(e,t,r){var n=xr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Br(e,t,r){var n=xr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function $r(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function jr(e,t,r){var n=xr.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function zr(e,t,r){var n=xr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Gr(e,t,r){var n=xr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Hr(e,t,r){var n=xr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Kr(e,t,r){var n=xr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Vr(e,t,r){var n=xr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Wr(e,t,r){var n=xr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Yr(e,t,r){var n=xr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function qr(e,t,r){var n=xr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Xr(e,t,r){var n=Lr.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Qr(e,t,r){var n=xr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Zr(e,t,r){var n=xr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Jr(e,t){return Rr(e.getDate(),t,2)}function en(e,t){return Rr(e.getHours(),t,2)}function tn(e,t){return Rr(e.getHours()%12||12,t,2)}function rn(e,t){return Rr(1+Kt.count(hr(e),e),t,3)}function nn(e,t){return Rr(e.getMilliseconds(),t,3)}function an(e,t){return nn(e,t)+"000"}function sn(e,t){return Rr(e.getMonth()+1,t,2)}function on(e,t){return Rr(e.getMinutes(),t,2)}function ln(e,t){return Rr(e.getSeconds(),t,2)}function un(e){var t=e.getDay();return 0===t?7:t}function cn(e,t){return Rr(qt.count(hr(e)-1,e),t,2)}function dn(e){var t=e.getDay();return t>=4||0===t?Jt(e):Jt.ceil(e)}function hn(e,t){return e=dn(e),Rr(Jt.count(hr(e),e)+(4===hr(e).getDay()),t,2)}function fn(e){return e.getDay()}function pn(e,t){return Rr(Xt.count(hr(e)-1,e),t,2)}function gn(e,t){return Rr(e.getFullYear()%100,t,2)}function mn(e,t){return Rr((e=dn(e)).getFullYear()%100,t,2)}function yn(e,t){return Rr(e.getFullYear()%1e4,t,4)}function vn(e,t){var r=e.getDay();return Rr((e=r>=4||0===r?Jt(e):Jt.ceil(e)).getFullYear()%1e4,t,4)}function bn(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Rr(t/60|0,"0",2)+Rr(t%60,"0",2)}function En(e,t){return Rr(e.getUTCDate(),t,2)}function Sn(e,t){return Rr(e.getUTCHours(),t,2)}function Tn(e,t){return Rr(e.getUTCHours()%12||12,t,2)}function wn(e,t){return Rr(1+Vt.count(fr(e),e),t,3)}function An(e,t){return Rr(e.getUTCMilliseconds(),t,3)}function kn(e,t){return An(e,t)+"000"}function xn(e,t){return Rr(e.getUTCMonth()+1,t,2)}function Ln(e,t){return Rr(e.getUTCMinutes(),t,2)}function Pn(e,t){return Rr(e.getUTCSeconds(),t,2)}function Rn(e){var t=e.getUTCDay();return 0===t?7:t}function _n(e,t){return Rr(nr.count(fr(e)-1,e),t,2)}function On(e){var t=e.getUTCDay();return t>=4||0===t?or(e):or.ceil(e)}function In(e,t){return e=On(e),Rr(or.count(fr(e),e)+(4===fr(e).getUTCDay()),t,2)}function Cn(e){return e.getUTCDay()}function Dn(e,t){return Rr(ir.count(fr(e)-1,e),t,2)}function Mn(e,t){return Rr(e.getUTCFullYear()%100,t,2)}function Nn(e,t){return Rr((e=On(e)).getUTCFullYear()%100,t,2)}function Fn(e,t){return Rr(e.getUTCFullYear()%1e4,t,4)}function Un(e,t){var r=e.getUTCDay();return Rr((e=r>=4||0===r?or(e):or.ceil(e)).getUTCFullYear()%1e4,t,4)}function Bn(){return"+0000"}function $n(){return"%"}function jn(e){return+e}function zn(e){return Math.floor(+e/1e3)}function Gn(e){return new Date(e)}function Hn(e){return e instanceof Date?+e:+new Date(+e)}function Kn(e,t,r,n,i,a,s,o,l,u){var c=Me(),d=c.invert,h=c.domain,f=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),E=u("%Y");function S(e){return(l(e)<e?f:o(e)<e?p:s(e)<e?g:a(e)<e?m:n(e)<e?i(e)<e?y:v:r(e)<e?b:E)(e)}return c.invert=function(e){return new Date(d(e))},c.domain=function(e){return arguments.length?h(Array.from(e,Hn)):h().map(Gn)},c.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?S:u(t)},c.nice=function(e){var r=h();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(et(r,e)):c},c.copy=function(){return Ce(c,Kn(e,t,r,n,i,a,s,o,l,u))},c}function Vn(){return o.apply(Kn(yr,vr,hr,cr,qt,Kt,Gt,jt,$t,wr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Wn(){return o.apply(Kn(gr,mr,fr,dr,nr,Vt,Ht,zt,$t,Ar).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yn(){var e,t,r,n,i,a=0,s=1,o=Re,l=!1;function u(t){return null==t||isNaN(t=+t)?i:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),u):[o(0),o(1)]}}return u.domain=function(i){return arguments.length?([a,s]=i,e=n(a=+a),t=n(s=+s),r=e===t?0:1/(t-e),u):[a,s]},u.clamp=function(e){return arguments.length?(l=!!e,u):l},u.interpolator=function(e){return arguments.length?(o=e,u):o},u.range=c(ke),u.rangeRound=c(xe),u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return n=i,e=i(a),t=i(s),r=e===t?0:1/(t-e),u}}function qn(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Xn(){var e=Qe(Yn()(Re));return e.copy=function(){return qn(e,Xn())},l.apply(e,arguments)}function Qn(){var e=ot(Yn()).domain([1,10]);return e.copy=function(){return qn(e,Qn()).base(e.base())},l.apply(e,arguments)}function Zn(){var e=dt(Yn());return e.copy=function(){return qn(e,Zn()).constant(e.constant())},l.apply(e,arguments)}function Jn(){var e=mt(Yn());return e.copy=function(){return qn(e,Jn()).exponent(e.exponent())},l.apply(e,arguments)}function ei(){return Jn.apply(null,arguments).exponent(.5)}function ti(){var e=[],t=Re;function r(r){if(null!=r&&!isNaN(r=+r))return t((O(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(A),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>function(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return Tt(e);if(t>=1)return St(e);var n,i=(n-1)*t,a=Math.floor(i),s=St(At(e,a).subarray(0,a+1));return s+(Tt(e.subarray(a+1))-s)*(i-a)}}(e,n/t))},r.copy=function(){return ti(t).domain(e)},l.apply(r,arguments)}function ri(){var e,t,r,n,i,a,s,o=0,l=.5,u=1,c=1,d=Re,h=!1;function f(e){return isNaN(e=+e)?s:(e=.5+((e=+a(e))-t)*(c*e<c*t?n:i),d(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,i;return arguments.length?([r,n,i]=t,d=function(e,t){void 0===t&&(t=e,e=ke);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return a[t](e-t)}}(e,[r,n,i]),f):[d(0),d(.5),d(1)]}}return f.domain=function(s){return arguments.length?([o,l,u]=s,e=a(o=+o),t=a(l=+l),r=a(u=+u),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),c=t<e?-1:1,f):[o,l,u]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(d=e,f):d},f.range=p(ke),f.rangeRound=p(xe),f.unknown=function(e){return arguments.length?(s=e,f):s},function(s){return a=s,e=s(o),t=s(l),r=s(u),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),c=t<e?-1:1,f}}function ni(){var e=Qe(ri()(Re));return e.copy=function(){return qn(e,ni())},l.apply(e,arguments)}function ii(){var e=ot(ri()).domain([.1,1,10]);return e.copy=function(){return qn(e,ii()).base(e.base())},l.apply(e,arguments)}function ai(){var e=dt(ri());return e.copy=function(){return qn(e,ai()).constant(e.constant())},l.apply(e,arguments)}function si(){var e=mt(ri());return e.copy=function(){return qn(e,si()).exponent(e.exponent())},l.apply(e,arguments)}function oi(){return si.apply(null,arguments).exponent(.5)}Tr=function(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,u=Or(i),c=Ir(i),d=Or(a),h=Ir(a),f=Or(s),p=Ir(s),g=Or(o),m=Ir(o),y=Or(l),v=Ir(l),b={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Jr,e:Jr,f:an,g:mn,G:vn,H:en,I:tn,j:rn,L:nn,m:sn,M:on,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:jn,s:zn,S:ln,u:un,U:cn,V:hn,w:fn,W:pn,x:null,X:null,y:gn,Y:yn,Z:bn,"%":$n},E={a:function(e){return s[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:En,e:En,f:kn,g:Nn,G:Un,H:Sn,I:Tn,j:wn,L:An,m:xn,M:Ln,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:jn,s:zn,S:Pn,u:Rn,U:_n,V:In,w:Cn,W:Dn,x:null,X:null,y:Mn,Y:Fn,Z:Bn,"%":$n},S={a:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=y.exec(t.slice(r));return n?(e.m=v.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=m.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return A(e,t,r,n)},d:Gr,e:Gr,f:qr,g:Br,G:Ur,H:Kr,I:Kr,j:Hr,L:Yr,m:zr,M:Vr,p:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.p=c.get(n[0].toLowerCase()),r+n[0].length):-1},q:jr,Q:Qr,s:Zr,S:Wr,u:Dr,U:Mr,V:Nr,w:Cr,W:Fr,x:function(e,t,n){return A(e,r,t,n)},X:function(e,t,r){return A(e,n,t,r)},y:Br,Y:Ur,Z:$r,"%":Xr};function T(e,t){return function(r){var n,i,a,s=[],o=-1,l=0,u=e.length;for(r instanceof Date||(r=new Date(+r));++o<u;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(i=kr[n=e.charAt(++o)])?n=e.charAt(++o):i="e"===n?" ":"0",(a=t[n])&&(n=a(r,i)),s.push(n),l=o+1);return s.push(e.slice(l,o)),s.join("")}}function w(e,t){return function(r){var n,i,a=Sr(1900,void 0,1);if(A(a,e,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(n=Er(Sr(a.y,0,1))).getUTCDay(),n=i>4||0===i?ir.ceil(n):ir(n),n=Vt.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(i=(n=br(Sr(a.y,0,1))).getDay(),n=i>4||0===i?Xt.ceil(n):Xt(n),n=Kt.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Er(Sr(a.y,0,1)).getUTCDay():br(Sr(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Er(a)):br(a)}}function A(e,t,r,n){for(var i,a,s=0,o=t.length,l=r.length;s<o;){if(n>=l)return-1;if(37===(i=t.charCodeAt(s++))){if(i=t.charAt(s++),!(a=S[i in kr?t.charAt(s++):i])||(n=a(e,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return b.x=T(r,b),b.X=T(n,b),b.c=T(t,b),E.x=T(r,E),E.X=T(n,E),E.c=T(t,E),{format:function(e){var t=T(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=T(e+="",E);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),wr=Tr.format,Tr.parse,Ar=Tr.utcFormat,Tr.utcParse;var li=r(9287),ui=r(6470),ci=r(8453),di=r(9744),hi=r(8813);function fi(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if((0,hi.H)(t)&&(0,hi.H)(r))return!0}return!1}function pi(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}var gi=r(8351),mi=r.n(gi),yi=e=>e,vi={"@@functional/placeholder":!0},bi=e=>e===vi,Ei=e=>function t(){return 0===arguments.length||1===arguments.length&&bi(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Si=(e,t)=>1===e?t:Ei(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(e=>e!==vi).length;return a>=e?t(...n):Si(e-a,Ei(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var a=n.map(e=>bi(e)?r.shift():e);return t(...a,...r)}))}),Ti=e=>Si(e.length,e),wi=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Ai=Ti((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)),ki=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),xi=e=>{var t=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t&&i.every((e,r)=>{var n;return e===(null===(n=t)||void 0===n?void 0:n[r])})?r:(t=i,r=e(...i))}};function Li(e){return 0===e?1:Math.floor(new(mi())(e).abs().log(10).toNumber())+1}function Pi(e,t,r){for(var n=new(mi())(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}Ti((e,t,r)=>{var n=+e;return n+r*(+t-n)}),Ti((e,t,r)=>{var n=t-+e;return(r-e)/(n||1/0)}),Ti((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Ri=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},_i=(e,t,r)=>{if(e.lte(0))return new(mi())(0);var n=Li(e.toNumber()),i=new(mi())(10).pow(n),a=e.div(i),s=1!==n?.05:.1,o=new(mi())(Math.ceil(a.div(s).toNumber())).add(r).mul(s).mul(i);return t?new(mi())(o.toNumber()):new(mi())(Math.ceil(o.toNumber()))},Oi=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(mi())(0),tickMin:new(mi())(0),tickMax:new(mi())(0)};var a,s=_i(new(mi())(t).sub(e).div(r-1),n,i);a=e<=0&&t>=0?new(mi())(0):(a=new(mi())(e).add(t).div(2)).sub(new(mi())(a).mod(s));var o=Math.ceil(a.sub(e).div(s).toNumber()),l=Math.ceil(new(mi())(t).sub(a).div(s).toNumber()),u=o+l+1;return u>r?Oi(e,t,r,n,i+1):(u<r&&(l=t>0?l+(r-u):l,o=t>0?o:o+(r-u)),{step:s,tickMin:a.sub(new(mi())(o).mul(s)),tickMax:a.add(new(mi())(l).mul(s))})},Ii=xi(function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(n,2),[s,o]=Ri([t,r]);if(s===-1/0||o===1/0){var l=o===1/0?[s,...wi(0,n-1).map(()=>1/0)]:[...wi(0,n-1).map(()=>-1/0),o];return t>r?ki(l):l}if(s===o)return((e,t,r)=>{var n=new(mi())(1),i=new(mi())(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new(mi())(10).pow(Li(e)-1),i=new(mi())(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new(mi())(Math.floor(e)))}else 0===e?i=new(mi())(Math.floor((t-1)/2)):r||(i=new(mi())(Math.floor(e)));var s=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return yi;var n=t.reverse(),i=n[0],a=n.slice(1);return function(){return a.reduce((e,t)=>t(e),i(...arguments))}}(Ai(e=>i.add(new(mi())(e-s).mul(n)).toNumber()),wi)(0,t)})(s,n,i);var{step:u,tickMin:c,tickMax:d}=Oi(s,o,a,i,0),h=Pi(c,d.add(new(mi())(.1).mul(u)),u);return t>r?ki(h):h}),Ci=xi(function(e,t){var[r,n]=e,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[a,s]=Ri([r,n]);if(a===-1/0||s===1/0)return[r,n];if(a===s)return[a];var o=Math.max(t,2),l=_i(new(mi())(s).sub(a).div(o-1),i,0),u=[...Pi(new(mi())(a),new(mi())(s),l),s];return!1===i&&(u=u.map(e=>Math.round(e))),r>n?ki(u):u}),Di=r(5180),Mi=r(8861),Ni=r(6189),Fi=r(6461),Ui=r(2695),Bi=r(9538),$i=(e,t)=>t,ji=(e,t,r)=>r,zi=r(9495),Gi=r(4364),Hi=r(2925),Ki=r(7617),Vi=r(6907),Wi=r(9531);function Yi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(r),!0).forEach(function(t){Xi(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Xi(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qi=[0,"auto"],Zi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Ji=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return null==r?Zi:r},ea={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Qi,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gi.tQ},ta=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return null==r?ea:r},ra={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},na=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?ra:r},ia=(e,t,r)=>{switch(t){case"xAxis":return Ji(e,r);case"yAxis":return ta(e,r);case"zAxis":return na(e,r);case"angleAxis":return(0,Bi.Be)(e,r);case"radiusAxis":return(0,Bi.Gl)(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},aa=(e,t,r)=>{switch(t){case"xAxis":return Ji(e,r);case"yAxis":return ta(e,r);case"angleAxis":return(0,Bi.Be)(e,r);case"radiusAxis":return(0,Bi.Gl)(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},sa=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function oa(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var la=e=>e.graphicalItems.cartesianItems,ua=(0,i.Mz)([$i,ji],oa),ca=(e,t,r)=>e.filter(r).filter(e=>!0===(null==t?void 0:t.includeHidden)||!e.hide),da=(0,i.Mz)([la,ia,ua],ca),ha=(0,i.Mz)([da],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(Wi.g)),fa=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),pa=(0,i.Mz)([da],fa),ga=e=>e.map(e=>e.data).filter(Boolean).flat(1),ma=(0,i.Mz)([da],ga),ya=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},va=(0,i.Mz)([ma,ci.HS],ya),ba=(e,t,r)=>null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:(0,ui.kr)(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:(0,ui.kr)(e,t)}))):e.map(e=>({value:e})),Ea=(0,i.Mz)([va,ia,da],ba);function Sa(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function Ta(e){return e.filter(e=>(0,di.vh)(e)||e instanceof Date).map(Number).filter(e=>!1===(0,di.M8)(e))}function wa(e,t,r){return!r||"number"!=typeof t||(0,di.M8)(t)?[]:r.length?Ta(r.flatMap(r=>{var n,i,a=(0,ui.kr)(e,r.dataKey);if(Array.isArray(a)?[n,i]=a:n=i=a,(0,hi.H)(n)&&(0,hi.H)(i))return[t-n,t+i]})):[]}var Aa=(0,i.Mz)([ha,ci.HS,Ki.D],Vi.A),ka=(e,t,r)=>{var n=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(n).map(t=>{var[n,i]=t,a=i.map(Hi.x);return[n,{stackedData:(0,ui.yy)(e,a,r),graphicalItems:i}]}))},xa=(0,i.Mz)([Aa,ha,Ui.eC],ka),La=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:i}=t;if("zAxis"!==r){var a=(0,ui.Mk)(e,n,i);if(null==a||0!==a[0]||0!==a[1])return a}},Pa=(0,i.Mz)([xa,ci.LF,$i],La),Ra=(e,t,r,n,i)=>r.length>0?e.flatMap(e=>r.flatMap(r=>{var a,s,o=null===(a=n[r.id])||void 0===a?void 0:a.filter(e=>Sa(i,e)),l=(0,ui.kr)(e,null!==(s=t.dataKey)&&void 0!==s?s:r.dataKey);return{value:l,errorDomain:wa(e,l,o)}})).filter(Boolean):null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:(0,ui.kr)(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})),_a=e=>e.errorBars,Oa=(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>Sa(r,e)),Ia=((0,i.Mz)([pa,_a,$i],Oa),(0,i.Mz)([va,ia,pa,_a,$i],Ra));function Ca(e){var{value:t}=e;if((0,di.vh)(t)||t instanceof Date)return t}var Da=e=>{var t=Ta(e.flatMap(e=>[e.value,e.errorDomain]).flat(1));if(0!==t.length)return[Math.min(...t),Math.max(...t)]},Ma=e=>{var t;if(null==e||!("domain"in e))return Qi;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=Ta(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:Qi},Na=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var i=n.flat();return[Math.min(...i),Math.max(...i)]}},Fa=e=>e.referenceElements.dots,Ua=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),Ba=(0,i.Mz)([Fa,$i,ji],Ua),$a=e=>e.referenceElements.areas,ja=(0,i.Mz)([$a,$i,ji],Ua),za=e=>e.referenceElements.lines,Ga=(0,i.Mz)([za,$i,ji],Ua),Ha=(e,t)=>{var r=Ta(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},Ka=(0,i.Mz)(Ba,$i,Ha),Va=(e,t)=>{var r=Ta(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},Wa=(0,i.Mz)([ja,$i],Va),Ya=(e,t)=>{var r=Ta(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},qa=(0,i.Mz)(Ga,$i,Ya),Xa=(0,i.Mz)(Ka,qa,Wa,(e,t,r)=>Na(e,r,t)),Qa=(0,i.Mz)([ia],Ma),Za=(e,t,r,n,i,a,s)=>{var o=function(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var r,n,[i,a]=e;if((0,hi.H)(i))r=i;else if("function"==typeof i)return;if((0,hi.H)(a))n=a;else if("function"==typeof a)return;var s=[r,n];if(fi(s))return s}}(t,e.allowDataOverflow);return null!=o?o:function(e,t,r){if(r||null!=t){if("function"==typeof e&&null!=t)try{var n=e(t,r);if(fi(n))return pi(n,t,r)}catch(e){}if(Array.isArray(e)&&2===e.length){var i,a,[s,o]=e;if("auto"===s)null!=t&&(i=Math.min(...t));else if((0,di.Et)(s))i=s;else if("function"==typeof s)try{null!=t&&(i=s(null==t?void 0:t[0]))}catch(e){}else if("string"==typeof s&&ui.IH.test(s)){var l=ui.IH.exec(s);if(null==l||null==t)i=void 0;else{var u=+l[1];i=t[0]-u}}else i=null==t?void 0:t[0];if("auto"===o)null!=t&&(a=Math.max(...t));else if((0,di.Et)(o))a=o;else if("function"==typeof o)try{null!=t&&(a=o(null==t?void 0:t[1]))}catch(e){}else if("string"==typeof o&&ui.qx.test(o)){var c=ui.qx.exec(o);if(null==c||null==t)a=void 0;else{var d=+c[1];a=t[1]+d}}else a=null==t?void 0:t[1];var h=[i,a];if(fi(h))return null==t?h:pi(h,t,r)}}}(t,"vertical"===a&&"xAxis"===s||"horizontal"===a&&"yAxis"===s?Na(r,i,Da(n)):Na(i,Da(n)),e.allowDataOverflow)},Ja=(0,i.Mz)([ia,Qa,Pa,Ia,Xa,li.fz,$i],Za),es=[0,1],ts=(e,t,r,n,i,a,o)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==o){var{dataKey:l,type:u}=e,c=(0,ui._L)(t,a);return c&&null==l?s()(0,r.length):"category"===u?((e,t,r)=>{var n=e.map(Ca).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&(0,di.CG)(n))?s()(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))})(n,e,c):"expand"===i?es:o}},rs=(0,i.Mz)([ia,li.fz,va,Ea,Ui.eC,$i,Ja],ts),ns=(e,t,r,i,a)=>{if(null!=e){var{scale:s,type:o}=e;if("auto"===s)return"radial"===t&&"radiusAxis"===a?"band":"radial"===t&&"angleAxis"===a?"linear":"category"===o&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!r)?"point":"category"===o?"band":"linear";if("string"==typeof s){var l="scale".concat((0,di.Zb)(s));return l in n?l:"point"}}},is=(0,i.Mz)([ia,li.fz,sa,Ui.iO,$i],ns);function as(e,t,r,i){if(null!=r&&null!=i){if("function"==typeof e.scale)return e.scale.copy().domain(r).range(i);var a=function(e){if(null!=e){if(e in n)return n[e]();var t="scale".concat((0,di.Zb)(e));return t in n?n[t]():void 0}}(t);if(null!=a){var s=a.domain(r).range(i);return(0,ui.YB)(s),s}}}var ss=(e,t,r)=>{var n=Ma(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&fi(e)?Ii(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&fi(e)?Ci(e,t.tickCount,t.allowDecimals):void 0},os=(0,i.Mz)([rs,aa,is],ss),ls=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null==e?void 0:e.type)&&fi(t)&&Array.isArray(r)&&r.length>0){var i=t[0],a=r[0],s=t[1],o=r[r.length-1];return[Math.min(i,a),Math.max(s,o)]}return t},us=(0,i.Mz)([ia,rs,os,$i],ls),cs=(0,i.Mz)(Ea,ia,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(Ta(e.map(e=>e.value))).sort((e,t)=>e-t);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(0===i)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];r=Math.min(r,s)}return r/i}}),ds=(0,i.Mz)(cs,li.fz,Ui.gY,Ni.HZ,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!(0,hi.H)(e))return 0;var a="vertical"===t?n.height:n.width;if("gap"===i)return e*a/2;if("no-gap"===i){var s=(0,di.F4)(r,e*a),o=e*a/2;return o-s-(o-s)/a*s}return 0}),hs=(0,i.Mz)(Ji,(e,t)=>{var r=Ji(e,t);return null==r||"string"!=typeof r.padding?0:ds(e,"xAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:i}=e;return"string"==typeof i?{left:t,right:t}:{left:(null!==(r=i.left)&&void 0!==r?r:0)+t,right:(null!==(n=i.right)&&void 0!==n?n:0)+t}}),fs=(0,i.Mz)(ta,(e,t)=>{var r=ta(e,t);return null==r||"string"!=typeof r.padding?0:ds(e,"yAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:i}=e;return"string"==typeof i?{top:t,bottom:t}:{top:(null!==(r=i.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=i.bottom)&&void 0!==n?n:0)+t}}),ps=(0,i.Mz)([Ni.HZ,hs,Fi.U,Fi.C,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),gs=(0,i.Mz)([Ni.HZ,li.fz,fs,Fi.U,Fi.C,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),ms=(e,t,r,n)=>{var i;switch(t){case"xAxis":return ps(e,r,n);case"yAxis":return gs(e,r,n);case"zAxis":return null===(i=na(e,r))||void 0===i?void 0:i.range;case"angleAxis":return(0,Bi.Cv)(e);case"radiusAxis":return(0,Bi.Dc)(e,r);default:return}},ys=(0,i.Mz)([ia,ms],zi.I),vs=(0,i.Mz)([ia,is,us,ys],as);function bs(e,t){return e.id<t.id?-1:e.id>t.id?1:0}(0,i.Mz)([da,_a,$i],Oa);var Es=(e,t)=>t,Ss=(e,t,r)=>r,Ts=(0,i.Mz)(Mi.h,Es,Ss,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(bs)),ws=(0,i.Mz)(Mi.W,Es,Ss,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(bs)),As=(e,t)=>({width:e.width,height:t.height}),ks=(0,i.Mz)(Ni.HZ,Ji,As),xs=(0,i.Mz)(Di.A$,Ni.HZ,Ts,Es,Ss,(e,t,r,n,i)=>{var a,s={};return r.forEach(r=>{var o=As(t,r);null==a&&(a=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!i||"bottom"===n&&i;s[r.id]=a-Number(l)*o.height,a+=(l?-1:1)*o.height}),s}),Ls=(0,i.Mz)(Di.Lp,Ni.HZ,ws,Es,Ss,(e,t,r,n,i)=>{var a,s={};return r.forEach(r=>{var o=((e,t)=>({width:"number"==typeof t.width?t.width:Gi.tQ,height:e.height}))(t,r);null==a&&(a=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!i||"right"===n&&i;s[r.id]=a-Number(l)*o.width,a+=(l?-1:1)*o.width}),s}),Ps=(e,t)=>{var r=(0,Ni.HZ)(e),n=Ji(e,t);if(null!=n){var i=xs(e,n.orientation,n.mirror)[t];return null==i?{x:r.left,y:0}:{x:r.left,y:i}}},Rs=(e,t)=>{var r=(0,Ni.HZ)(e),n=ta(e,t);if(null!=n){var i=Ls(e,n.orientation,n.mirror)[t];return null==i?{x:0,y:r.top}:{x:i,y:r.top}}},_s=(0,i.Mz)(Ni.HZ,ta,(e,t)=>({width:"number"==typeof t.width?t.width:Gi.tQ,height:e.height})),Os=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=(0,ui._L)(e,n),l=t.map(e=>e.value);return s&&o&&"category"===a&&i&&(0,di.CG)(l)?l:void 0}},Is=(0,i.Mz)([li.fz,Ea,ia,$i],Os),Cs=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:i,scale:a}=r;return!(0,ui._L)(e,n)||"number"!==i&&"auto"===a?void 0:t.map(e=>e.value)}},Ds=(0,i.Mz)([li.fz,Ea,aa,$i],Cs),Ms=(0,i.Mz)([li.fz,(e,t,r)=>{switch(t){case"xAxis":return Ji(e,r);case"yAxis":return ta(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},is,vs,Is,Ds,ms,os,$i],(e,t,r,n,i,a,s,o,l)=>{if(null==t)return null;var u=(0,ui._L)(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:r,scale:n}}),Ns=(0,i.Mz)([li.fz,aa,is,vs,os,ms,Is,Ds,$i],(e,t,r,n,i,a,s,o,l)=>{if(null!=t&&null!=n){var u=(0,ui._L)(e,l),{type:c,ticks:d,tickCount:h}=t,f="scaleBand"===r&&"function"==typeof n.bandwidth?n.bandwidth()/2:2,p="category"===c&&n.bandwidth?n.bandwidth()/f:0;p="angleAxis"===l&&null!=a&&a.length>=2?2*(0,di.sA)(a[0]-a[1])*p:p;var g=d||i;return g?g.map((e,t)=>{var r=s?s.indexOf(e):e;return{index:t,coordinate:n(r)+p,value:e,offset:p}}).filter(e=>!(0,di.M8)(e.coordinate)):u&&o?o.map((e,t)=>({coordinate:n(e)+p,value:e,index:t,offset:p})):n.ticks?n.ticks(h).map(e=>({coordinate:n(e)+p,value:e,offset:p})):n.domain().map((e,t)=>({coordinate:n(e)+p,value:s?s[e]:e,index:t,offset:p}))}}),Fs=(0,i.Mz)([li.fz,aa,vs,ms,Is,Ds,$i],(e,t,r,n,i,a,s)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var o=(0,ui._L)(e,s),{tickCount:l}=t,u=0;return u="angleAxis"===s&&(null==n?void 0:n.length)>=2?2*(0,di.sA)(n[0]-n[1])*u:u,o&&a?a.map((e,t)=>({coordinate:r(e)+u,value:e,index:t,offset:u})):r.ticks?r.ticks(l).map(e=>({coordinate:r(e)+u,value:e,offset:u})):r.domain().map((e,t)=>({coordinate:r(e)+u,value:i?i[e]:e,index:t,offset:u}))}}),Us=(0,i.Mz)(ia,vs,(e,t)=>{if(null!=e&&null!=t)return qi(qi({},e),{},{scale:t})}),Bs=(0,i.Mz)([ia,is,rs,ys],as),$s=((0,i.Mz)((e,t,r)=>na(e,r),Bs,(e,t)=>{if(null!=e&&null!=t)return qi(qi({},e),{},{scale:t})}),(0,i.Mz)([li.fz,Mi.h,Mi.W],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}))},6189:(e,t,r)=>{"use strict";r.d(t,{Ds:()=>g,HZ:()=>p,c2:()=>m});var n=r(5508),i=r(305),a=r.n(i),s=r(7962),o=r(6470),l=r(5180),u=r(8861),c=r(4364);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=(0,n.Mz)([l.Lp,l.A$,l.HK,e=>e.brush.height,u.h,u.W,s.ff,s.dc],(e,t,r,n,i,s,l,u)=>{var d=s.reduce((e,t)=>{var{orientation:r}=t;if(!t.mirror&&!t.hide){var n="number"==typeof t.width?t.width:c.tQ;return h(h({},e),{},{[r]:e[r]+n})}return e},{left:r.left||0,right:r.right||0}),f=i.reduce((e,t)=>{var{orientation:r}=t;return t.mirror||t.hide?e:h(h({},e),{},{[r]:a()(e,"".concat(r))+t.height})},{top:r.top||0,bottom:r.bottom||0}),p=h(h({},f),d),g=p.bottom;p.bottom+=n;var m=e-(p=(0,o.s0)(p,l,u)).left-p.right,y=t-p.top-p.bottom;return h(h({brushBottom:g},p),{},{width:Math.max(m,0),height:Math.max(y,0)})}),g=(0,n.Mz)(p,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),m=(0,n.Mz)(l.Lp,l.A$,(e,t)=>({x:0,y:0,width:e,height:t}))},6221:(e,t,r)=>{"use strict";var n=r(6540);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal"),l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=l.T,r=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=r,s.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var r=t.as,n=u(r,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?s.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:i,fetchPriority:a}):"script"===r&&s.d.X(e,{crossOrigin:n,integrity:i,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=u(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var r=t.as,n=u(r,t.crossOrigin);s.d.L(e,r,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e)if(t){var r=u(t.as,t.crossOrigin);s.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},6270:(e,t,r)=>{"use strict";r.d(t,{EI:()=>d,oM:()=>c});var n=r(9082),i=r(3032),a=r(5508),s=r(6189),o=(0,a.Mz)([s.HZ],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),l=r(5180),u=(0,a.Mz)([o,l.Lp,l.A$],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),c=()=>(0,n.G)(u),d=()=>(0,n.G)(i.JG)},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r}).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);n&&s[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},6440:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},6446:(e,t,r)=>{"use strict";r.d(t,{LV:()=>o,M:()=>a,hq:()=>i});var n=(0,r(5307).Z0)({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:i,setDataStartEndIndexes:a,setComputedData:s}=n.actions,o=n.reducer},6461:(e,t,r)=>{"use strict";r.d(t,{C:()=>o,U:()=>l});var n=r(5508),i=r(6189),a=r(5180),s=r(9744),o=e=>e.brush,l=(0,n.Mz)([o,i.HZ,a.HK],(e,t,r)=>({height:e.height,x:(0,s.Et)(e.x)?e.x:t.left,y:(0,s.Et)(e.y)?e.y:t.top+t.height+t.brushBottom-((null==r?void 0:r.bottom)||0),width:(0,s.Et)(e.width)?e.width:t.width}))},6470:(e,t,r)=>{"use strict";r.d(t,{qx:()=>I,IH:()=>O,s0:()=>S,gH:()=>E,SW:()=>U,YB:()=>x,bk:()=>F,Hj:()=>C,nb:()=>R,PW:()=>w,Mk:()=>_,yy:()=>P,Rh:()=>A,GF:()=>D,uM:()=>M,kr:()=>b,r4:()=>N,_L:()=>T});var n=r(184),i=r.n(n),a=r(305),s=r.n(a);function o(e,t){if((i=e.length)>1)for(var r,n,i,a=1,s=e[t[0]],o=s.length;a<i;++a)for(n=s,s=e[t[a]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}var l=r(5917),u=r(8946);function c(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function d(e,t){return e[t]}function h(e){const t=[];return t.key=e,t}var f=r(9744),p=r(4040),g=r(9195);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t,r){return(0,f.uy)(e)||(0,f.uy)(t)?r:(0,f.vh)(t)?s()(e,t,r):"function"==typeof t?t(e):r}var E=(e,t,r,n,i)=>{var a,s=-1,o=null!==(a=null==t?void 0:t.length)&&void 0!==a?a:0;if(o<=1||null==e)return 0;if("angleAxis"===n&&null!=i&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,c=r[l].coordinate,d=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if((0,f.sA)(c-u)!==(0,f.sA)(d-c)){var p=[];if((0,f.sA)(d-c)===(0,f.sA)(i[1]-i[0])){h=d;var g=c+i[1]-i[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var m=d+i[1]-i[0];p[0]=Math.min(c,(m+c)/2),p[1]=Math.max(c,(m+c)/2)}var y=[Math.min(c,(h+c)/2),Math.max(c,(h+c)/2)];if(e>y[0]&&e<=y[1]||e>=p[0]&&e<=p[1]){({index:s}=r[l]);break}}else{var v=Math.min(u,d),b=Math.max(u,d);if(e>(v+c)/2&&e<=(b+c)/2){({index:s}=r[l]);break}}}else if(t)for(var E=0;E<o;E++)if(0===E&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<o-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===o-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:s}=t[E]);break}return s},S=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===s)&&"center"!==a&&(0,f.Et)(e[a]))return y(y({},e),{},{[a]:e[a]+(n||0)});if(("horizontal"===o||"vertical"===o&&"center"===a)&&"middle"!==s&&(0,f.Et)(e[s]))return y(y({},e),{},{[s]:e[s]+(i||0)})}return e},T=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,w=(e,t,r,n)=>{if(n)return e.map(e=>e.coordinate);var i,a,s=e.map(e=>(e.coordinate===t&&(i=!0),e.coordinate===r&&(a=!0),e.coordinate));return i||s.push(t),a||s.push(r),s},A=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:c,ticks:d,niceTicks:h,axisType:p}=e;if(!s)return null;var g="scaleBand"===o&&s.bandwidth?s.bandwidth()/2:2,m=(t||r)&&"category"===i&&s.bandwidth?s.bandwidth()/g:0;return m="angleAxis"===p&&a&&a.length>=2?2*(0,f.sA)(a[0]-a[1])*m:m,t&&(d||h)?(d||h||[]).map((e,t)=>{var r=n?n.indexOf(e):e;return{coordinate:s(r)+m,value:e,offset:m,index:t}}).filter(e=>!(0,f.M8)(e.coordinate)):l&&u?u.map((e,t)=>({coordinate:s(e)+m,value:e,index:t,offset:m})):s.ticks&&!r&&null!=c?s.ticks(c).map((e,t)=>({coordinate:s(e)+m,value:e,offset:m,index:t})):s.domain().map((e,t)=>({coordinate:s(e)+m,value:n?n[e]:e,index:t,offset:m}))},k=1e-4,x=e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-k,a=Math.max(n[0],n[1])+k,s=e(t[0]),o=e(t[r-1]);(s<i||s>a||o<i||o>a)&&e.domain([t[0],t[r-1]])}},L={sign:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0,s=0;s<t;++s){var o=(0,f.M8)(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,i,a=0,s=e[0].length;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}o(e,t)}},none:o,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,i=e[t[0]],a=i.length;n<a;++n){for(var s=0,l=0;s<r;++s)l+=e[s][n][1]||0;i[n][1]+=i[n][0]=-l/2}o(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,i,a=0,s=1;s<n;++s){for(var l=0,u=0,c=0;l<i;++l){for(var d=e[t[l]],h=d[s][1]||0,f=(h-(d[s-1][1]||0))/2,p=0;p<l;++p){var g=e[t[p]];f+=(g[s][1]||0)-(g[s-1][1]||0)}u+=h,c+=f*h}r[s-1][1]+=r[s-1][0]=a,u&&(a-=c/u)}r[s-1][1]+=r[s-1][0]=a,o(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0;a<t;++a){var s=(0,f.M8)(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=i,e[a][r][1]=i+s,i=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}}},P=(e,t,r)=>{var n=L[r],i=function(){var e=(0,u.A)([]),t=c,r=o,n=d;function i(i){var a,s,o=Array.from(e.apply(this,arguments),h),u=o.length,c=-1;for(const e of i)for(a=0,++c;a<u;++a)(o[a][c]=[0,+n(e,o[a].key,c,i)]).data=e;for(a=0,s=(0,l.A)(t(o));a<u;++a)o[s[a]].index=a;return r(o,s),o}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:(0,u.A)(Array.from(t)),i):e},i.value=function(e){return arguments.length?(n="function"==typeof e?e:(0,u.A)(+e),i):n},i.order=function(e){return arguments.length?(t=null==e?c:"function"==typeof e?e:(0,u.A)(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(r=null==e?o:e,i):r},i}().keys(t).value((e,t)=>+b(e,t,0)).order(c).offset(n);return i(e)};function R(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:a,dataKey:s}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!(0,f.uy)(i[t.dataKey])){var o=(0,f.eP)(r,"value",i[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=b(i,(0,f.uy)(s)?t.dataKey:s);return(0,f.uy)(l)?null:t.scale(l)}var _=(e,t,r)=>{var n;if(null!=e)return[(n=Object.keys(e).reduce((n,i)=>{var a=e[i],{stackedData:s}=a,o=s.reduce((e,n)=>{var i,a=(i=(0,g.v)(n,t,r).flat(2).filter(f.Et),[Math.min(...i),Math.max(...i)]);return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]},O=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,I=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,C=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=i()(t,e=>e.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],c=a[o-1];s=Math.min((u.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function D(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return y(y({},t),{},{dataKey:r,payload:n,value:i,name:a})}function M(e,t){return e?String(e):"string"==typeof t?t:void 0}function N(e,t,r,n,i){return"horizontal"===r||"vertical"===r?e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height?{x:e,y:t}:null:n?(0,p.yy)({x:e,y:t},n):null}var F=(e,t,r,n)=>{var i=t.find(e=>e&&e.index===r);if(i){if("horizontal"===e)return{x:i.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:i.coordinate};if("centric"===e){var a=i.coordinate,{radius:s}=n;return y(y(y({},n),(0,p.IZ)(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:l}=n;return y(y(y({},n),(0,p.IZ)(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},U=(e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius},6502:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.noop=function(){}},6540:(e,t,r)=>{"use strict";e.exports=r(9869)},6583:(e,t,r)=>{"use strict";r.d(t,{V:()=>a});var n=r(6540),i=1;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,r]=(0,n.useState)({height:0,left:0,top:0,width:0}),a=(0,n.useCallback)(e=>{if(null!=e){var n=e.getBoundingClientRect(),a={height:n.height,left:n.left,top:n.top,width:n.width};(Math.abs(a.height-t.height)>i||Math.abs(a.left-t.left)>i||Math.abs(a.top-t.top)>i||Math.abs(a.width-t.width)>i)&&r({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}},6634:(e,t,r)=>{"use strict";r.d(t,{R:()=>n});var n=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]}},6680:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});var n=e=>e.tooltip.settings.axisId},6761:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}},6773:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t,{signal:r,edges:n}={}){let i,a=null;const s=null!=n&&n.includes("leading"),o=null==n||n.includes("trailing"),l=()=>{null!==a&&(e.apply(i,a),i=void 0,a=null)};let u=null;const c=()=>{null!=u&&clearTimeout(u),u=setTimeout(()=>{u=null,o&&l(),d()},t)},d=()=>{null!==u&&(clearTimeout(u),u=null),i=void 0,a=null},h=function(...e){if(r?.aborted)return;i=this,a=e;const t=null==u;c(),s&&t&&l()};return h.schedule=c,h.cancel=d,h.flush=()=>{l()},r?.addEventListener("abort",d,{once:!0}),h}},6907:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2925),i=r(6470);function a(e,t,r){var{chartData:a=[]}=t,s=null==r?void 0:r.dataKey,o=new Map;return e.forEach(e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:a;if(null!=r&&0!==r.length){var l=(0,n.x)(e);r.forEach((t,r)=>{var n,a=null==s?r:String((0,i.kr)(t,s,null)),u=(0,i.kr)(t,e.dataKey,0);n=o.has(a)?o.get(a):{},Object.assign(n,{[l]:u}),o.set(a,n)})}}),Array.from(o.values())}},6960:(e,t,r)=>{"use strict";r.d(t,{dl:()=>l,lJ:()=>o,uN:()=>a});var n=r(5307),i=r(9744);function a(e,t){if(t){var r=Number.parseInt(t,10);if(!(0,i.M8)(r))return null==e?void 0:e[r]}}var s=(0,n.Z0)({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),o=s.reducer,{createEventEmitter:l}=s.actions},7074:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}},7324:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5112),i=r(8509),a=r(2984),s=r(3025);t.has=function(e,t){let r;if(r=Array.isArray(t)?t:"string"==typeof t&&n.isDeepKey(t)&&null==e?.[t]?s.toPath(t):[t],0===r.length)return!1;let o=e;for(let e=0;e<r.length;e++){const t=r[e];if(!(null!=o&&Object.hasOwn(o,t)||(Array.isArray(o)||a.isArguments(o))&&i.isIndex(t)&&t<o.length))return!1;o=o[t]}return!0}},7404:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),a=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==a[t]&&(e[t]=a[t]),e),r)}r.d(t,{e:()=>a})},7541:(e,t,r)=>{e.exports=r(9341).isEqual},7617:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var n=r(6118),i=r(3569),a=r(6680),s=e=>{var t=(0,i.R)(e),r=(0,a.M)(e);return(0,n.Hd)(e,t,r)}},7659:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},7861:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(717),i=r(3844);t.matches=function(e){return e=i.cloneDeep(e),t=>n.isMatch(t,e)}},7962:(e,t,r)=>{"use strict";r.d(t,{dc:()=>o,ff:()=>s,g0:()=>l});var n=r(5508),i=r(184),a=r.n(i),s=e=>e.legend.settings,o=e=>e.legend.size,l=(0,n.Mz)([e=>e.legend.payload,s],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?a()(n,r):n})},7984:(e,t,r)=>{"use strict";r.d(t,{W:()=>b});var n=r(6540),i=r(4164),a=r(8026),s=r(9082),o=r(4115),l=r(6118),u=r(6189),c=r(2070),d=["children"],h=["dangerouslySetInnerHTML","ticks"];function f(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(null,arguments)}function g(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function m(e){var t=(0,s.j)(),r=(0,n.useMemo)(()=>{var{children:t}=e;return g(e,d)},[e]),i=(0,s.G)(e=>(0,l.Rl)(e,r.id)),a=r===i;return(0,n.useEffect)(()=>(t((0,o.Vi)(r)),()=>{t((0,o.MC)(r))}),[r,t]),a?e.children:null}var y=e=>{var{xAxisId:t,className:r}=e,o=(0,s.G)(u.c2),d=(0,c.r)(),f="xAxis",m=(0,s.G)(e=>(0,l.iV)(e,f,t,d)),y=(0,s.G)(e=>(0,l.Zi)(e,f,t,d)),v=(0,s.G)(e=>(0,l.Lw)(e,t)),b=(0,s.G)(e=>(0,l.L$)(e,t));if(null==v||null==b)return null;var{dangerouslySetInnerHTML:E,ticks:S}=e,T=g(e,h);return n.createElement(a.u,p({},T,{scale:m,x:b.x,y:b.y,width:v.width,height:v.height,className:(0,i.$)("recharts-".concat(f," ").concat(f),r),viewBox:o,ticks:y}))},v=e=>{var t,r,i,a,s;return n.createElement(m,{interval:null!==(t=e.interval)&&void 0!==t?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:null!==(r=e.includeHidden)&&void 0!==r&&r,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(i=e.angle)&&void 0!==i?i:0,minTickGap:null!==(a=e.minTickGap)&&void 0!==a?a:5,tick:null===(s=e.tick)||void 0===s||s,tickFormatter:e.tickFormatter},n.createElement(y,e))};class b extends n.Component{render(){return n.createElement(v,this.props)}}f(b,"displayName","XAxis"),f(b,"defaultProps",{allowDataOverflow:l.PU.allowDataOverflow,allowDecimals:l.PU.allowDecimals,allowDuplicatedCategory:l.PU.allowDuplicatedCategory,height:l.PU.height,hide:!1,mirror:l.PU.mirror,orientation:l.PU.orientation,padding:l.PU.padding,reversed:l.PU.reversed,scale:l.PU.scale,tickCount:l.PU.tickCount,type:l.PU.type,xAxisId:0})},7997:(e,t,r)=>{"use strict";r.d(t,{BZ:()=>D,aX:()=>F,dS:()=>C,dp:()=>_,fW:()=>w,pg:()=>I,r1:()=>L,u9:()=>M,yn:()=>N});var n=r(5508),i=r(184),a=r.n(i),s=r(9082),o=r(6470),l=r(8453),u=r(3032),c=r(2695),d=r(9287),h=r(6189),f=r(5180),p=r(5403),g=r(9809),m=r(4544),y=r(4217),v=r(523),b=r(732),E=r(3571),S=r(9596),T=r(7617),w=()=>(0,s.G)(c.iO),A=(e,t)=>t,k=(e,t,r)=>r,x=(e,t,r,n)=>n,L=(0,n.Mz)(u.R4,e=>a()(e,e=>e.coordinate)),P=(0,n.Mz)([E.J,A,k,x],g.i),R=(0,n.Mz)([P,u.n4],m.P),_=(e,t,r)=>{if(null!=t){var n=(0,E.J)(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},O=(0,n.Mz)([E.J,A,k,x],v.q),I=(0,n.Mz)([f.Lp,f.A$,d.fz,h.HZ,u.R4,x,O,b.x],y.o),C=(0,n.Mz)([P,I],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),D=(0,n.Mz)(u.R4,R,p.E),M=(0,n.Mz)([O,R,l.LF,T.D,D,b.x,A],S.N),N=(0,n.Mz)([P],e=>({isActive:e.active,activeIndex:e.index})),F=(e,t,r,n,i,a,s,l)=>{if(e&&t&&n&&i&&a){var u=(0,o.r4)(e.chartX,e.chartY,t,r,l);if(u){var c=(0,o.SW)(u,t),d=(0,o.gH)(c,s,a,n,i),h=(0,o.bk)(t,a,d,u);return{activeIndex:String(d),activeCoordinate:h}}}}},8026:(e,t,r)=>{"use strict";r.d(t,{u:()=>w});var n=r(6540),i=r(305),a=r.n(i),s=r(4164);function o(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}var l=r(6069),u=r(1174),c=r(1706),d=r(9744),h=r(8940),f=r(4501),p=r(3462),g=r(5448),m=["viewBox"],y=["viewBox"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(null,arguments)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){T(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function T(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class w extends n.Component{constructor(e){super(e),this.tickRefs=n.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,t){var{viewBox:r}=e,n=S(e,m),i=this.props,{viewBox:a}=i,s=S(i,y);return!o(r,a)||!o(n,s)||!o(t,this.state)}getTickLineCoord(e){var t,r,n,i,a,s,{x:o,y:l,width:u,height:c,orientation:h,tickSize:f,mirror:p,tickMargin:g}=this.props,m=p?-1:1,y=e.tickSize||f,v=(0,d.Et)(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=r=e.coordinate,s=(n=(i=l+ +!p*c)-m*y)-m*g,a=v;break;case"left":n=i=e.coordinate,a=(t=(r=o+ +!p*u)-m*y)-m*g,s=v;break;case"right":n=i=e.coordinate,a=(t=(r=o+ +p*u)+m*y)+m*g,s=v;break;default:t=r=e.coordinate,s=(n=(i=l+ +p*c)+m*y)+m*g,a=v}return{line:{x1:t,y1:n,x2:r,y2:i},tick:{x:a,y:s}}}getTickTextAnchor(){var e,{orientation:t,mirror:r}=this.props;switch(t){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}getTickVerticalAnchor(){var{orientation:e,mirror:t}=this.props;switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}renderAxisLine(){var{x:e,y:t,width:r,height:i,orientation:o,mirror:l,axisLine:u}=this.props,c=E(E(E({},(0,f.J9)(this.props,!1)),(0,f.J9)(u,!1)),{},{fill:"none"});if("top"===o||"bottom"===o){var d=+("top"===o&&!l||"bottom"===o&&l);c=E(E({},c),{},{x1:e,y1:t+d*i,x2:e+r,y2:t+d*i})}else{var h=+("left"===o&&!l||"right"===o&&l);c=E(E({},c),{},{x1:e+h*r,y1:t,x2:e+h*r,y2:t+i})}return n.createElement("line",v({},c,{className:(0,s.$)("recharts-cartesian-axis-line",a()(u,"className"))}))}static renderTickItem(e,t,r){var i,a=(0,s.$)(t.className,"recharts-cartesian-axis-tick-value");if(n.isValidElement(e))i=n.cloneElement(e,E(E({},t),{},{className:a}));else if("function"==typeof e)i=e(E(E({},t),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";"boolean"!=typeof e&&(o=(0,s.$)(o,e.className)),i=n.createElement(u.E,v({},t,{className:o}),r)}return i}renderTicks(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],{tickLine:i,stroke:o,tick:u,tickFormatter:c,unit:d,padding:m}=this.props,y=(0,p.f)(E(E({},this.props),{},{ticks:r}),e,t),b=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),T=(0,g.u)(this.props),A=(0,f.J9)(u,!1),k=E(E({},T),{},{fill:"none"},(0,f.J9)(i,!1)),x=y.map((e,t)=>{var{line:r,tick:f}=this.getTickLineCoord(e),p=E(E(E(E({textAnchor:b,verticalAnchor:S},T),{},{stroke:"none",fill:o},A),f),{},{index:t,payload:e,visibleTicksCount:y.length,tickFormatter:c,padding:m});return n.createElement(l.W,v({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},(0,h.XC)(this.props,e,t)),i&&n.createElement("line",v({},k,r,{className:(0,s.$)("recharts-cartesian-axis-tick-line",a()(i,"className"))})),u&&w.renderTickItem(u,p,"".concat("function"==typeof c?c(e.value,t):e.value).concat(d||"")))});return x.length>0?n.createElement("g",{className:"recharts-cartesian-axis-ticks"},x):null}render(){var{axisLine:e,width:t,height:r,className:i,hide:a}=this.props;if(a)return null;var{ticks:o}=this.props;return null!=t&&t<=0||null!=r&&r<=0?null:n.createElement(l.W,{className:(0,s.$)("recharts-cartesian-axis",i),ref:e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(t);var r=t[0];if(r){var n=window.getComputedStyle(r).fontSize,i=window.getComputedStyle(r).letterSpacing;n===this.state.fontSize&&i===this.state.letterSpacing||this.setState({fontSize:window.getComputedStyle(r).fontSize,letterSpacing:window.getComputedStyle(r).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),c.J.renderCallByParent(this.props))}}T(w,"displayName","CartesianAxis"),T(w,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"})},8129:(e,t,r)=>{"use strict";r.d(t,{q:()=>i});var n=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function i(e){return"string"==typeof e&&n.includes(e)}},8161:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(58),i=r(1846);t.isArrayLikeObject=function(e){return i.isObjectLike(e)&&n.isArrayLike(e)}},8193:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},8202:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6440),i=r(3403),a=r(7861),s=r(3036);t.iteratee=function(e){if(null==e)return n.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?s.matchesProperty(e[0],e[1]):a.matches(e);case"string":case"symbol":case"number":return i.property(e)}}},8273:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(717),i=r(4905),a=r(2520),s=r(6761);function o(e,t,r,n){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,n){if(null==t)return!0;if(Array.isArray(t))return l(e,t,r,n);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[i,a]of t.entries())if(!1===r(e.get(i),a,i,e,t,n))return!1;return!0}(e,t,r,n);if(t instanceof Set)return u(e,t,r,n);const i=Object.keys(t);if(null==e)return 0===i.length;if(0===i.length)return!0;if(n&&n.has(t))return n.get(t)===e;n&&n.set(t,e);try{for(let s=0;s<i.length;s++){const o=i[s];if(!a.isPrimitive(e)&&!(o in e))return!1;if(void 0===t[o]&&void 0!==e[o])return!1;if(null===t[o]&&null!==e[o])return!1;if(!r(e[o],t[o],o,e,t,n))return!1}return!0}finally{n&&n.delete(t)}}(e,t,r,n);case"function":return Object.keys(t).length>0?o(e,{...t},r,n):s.eq(e,t);default:return i.isObject(e)?"string"!=typeof t||""===t:s.eq(e,t)}}function l(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const i=new Set;for(let a=0;a<t.length;a++){const s=t[a];let o=!1;for(let l=0;l<e.length;l++){if(i.has(l))continue;let u=!1;if(r(e[l],s,a,e,t,n)&&(u=!0),u){i.add(l),o=!0;break}}if(!o)return!1}return!0}function u(e,t,r,n){return 0===t.size||e instanceof Set&&l([...e],[...t],r,n)}t.isMatchWith=function(e,t,r){return"function"!=typeof r?n.isMatch(e,t):o(e,t,function e(t,n,i,a,s,l){const u=r(t,n,i,a,s,l);return void 0!==u?Boolean(u):o(t,n,e,l)},new Map)},t.isSetMatch=u},8351:function(e,t,r){var n;!function(){"use strict";var i,a=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",u=l+"Invalid argument: ",c=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,g=d(1286742750677284.5),m={};function y(e,t){var r,n,i,a,s,l,u,c,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),o?L(t,h):t;if(u=e.d,c=t.d,s=e.e,i=t.e,u=u.slice(),a=s-i){for(a<0?(n=u,a=-a,l=c.length):(n=c,i=s,l=u.length),a>(l=(s=Math.ceil(h/7))>l?s+1:l+1)&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for((l=u.length)-(a=c.length)<0&&(a=l,n=c,c=u,u=n),r=0;a;)r=(u[--a]=u[a]+c[a]+r)/p|0,u[a]%=p;for(r&&(u.unshift(r),++i),l=u.length;0==u[--l];)u.pop();return t.d=u,t.e=i,o?L(t,h):t}function v(e,t,r){if(e!==~~e||e<t||e>r)throw Error(u+e)}function b(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)(r=7-(n=e[t]+"").length)&&(a+=A(r)),a+=n;(r=7-(n=(s=e[t])+"").length)&&(a+=A(r))}else if(0===s)return"0";for(;s%10==0;)s/=10;return a+s}m.absoluteValue=m.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},m.comparedTo=m.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(t=0,r=(n=a.d.length)<(i=e.d.length)?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1},m.decimalPlaces=m.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},m.dividedBy=m.div=function(e){return E(this,new this.constructor(e))},m.dividedToIntegerBy=m.idiv=function(e){var t=this.constructor;return L(E(this,new t(e),0,1),t.precision)},m.equals=m.eq=function(e){return!this.cmp(e)},m.exponent=function(){return T(this)},m.greaterThan=m.gt=function(e){return this.cmp(e)>0},m.greaterThanOrEqualTo=m.gte=function(e){return this.cmp(e)>=0},m.isInteger=m.isint=function(){return this.e>this.d.length-2},m.isNegative=m.isneg=function(){return this.s<0},m.isPositive=m.ispos=function(){return this.s>0},m.isZero=function(){return 0===this.s},m.lessThan=m.lt=function(e){return this.cmp(e)<0},m.lessThanOrEqualTo=m.lte=function(e){return this.cmp(e)<1},m.logarithm=m.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(i))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(i)?new n(0):(o=!1,t=E(k(r,s),k(e,s),s),o=!0,L(t,a))},m.minus=m.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?P(t,e):y(t,(e.s=-e.s,e))},m.modulo=m.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(o=!1,t=E(r,e,0,1).times(e),o=!0,r.minus(t)):L(new n(r),i)},m.naturalExponential=m.exp=function(){return S(this)},m.naturalLogarithm=m.ln=function(){return k(this)},m.negated=m.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},m.plus=m.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?y(t,e):P(t,(e.s=-e.s,e))},m.precision=m.sd=function(e){var t,r,n,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(u+e);if(t=T(i)+1,r=7*(n=i.d.length-1)+1,n=i.d[n]){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},m.squareRoot=m.sqrt=function(){var e,t,r,n,i,a,s,u=this,c=u.constructor;if(u.s<1){if(!u.s)return new c(0);throw Error(l+"NaN")}for(e=T(u),o=!1,0==(i=Math.sqrt(+u))||i==1/0?(((t=b(u.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),n=new c(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new c(i.toString()),i=s=(r=c.precision)+3;;)if(n=(a=n).plus(E(u,a,s+2)).times(.5),b(a.d).slice(0,s)===(t=b(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&"4999"==t){if(L(a,r+1,0),a.times(a).eq(u)){n=a;break}}else if("9999"!=t)break;s+=4}return o=!0,L(n,r)},m.times=m.mul=function(e){var t,r,n,i,a,s,l,u,c,d=this,h=d.constructor,f=d.d,g=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,r=d.e+e.e,(u=f.length)<(c=g.length)&&(a=f,f=g,g=a,s=u,u=c,c=s),a=[],n=s=u+c;n--;)a.push(0);for(n=c;--n>=0;){for(t=0,i=u+n;i>n;)l=a[i]+g[n]*f[i-n-1]+t,a[i--]=l%p|0,t=l/p|0;a[i]=(a[i]+t)%p|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,o?L(e,h.precision):e},m.toDecimalPlaces=m.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(v(e,0,a),void 0===t?t=n.rounding:v(t,0,8),L(r,e+T(r)+1,t))},m.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=R(n,!0):(v(e,0,a),void 0===t?t=i.rounding:v(t,0,8),r=R(n=L(new i(n),e+1,t),!0,e+1)),r},m.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?R(i):(v(e,0,a),void 0===t?t=s.rounding:v(t,0,8),r=R((n=L(new s(i),e+T(i)+1,t)).abs(),!1,e+T(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)},m.toInteger=m.toint=function(){var e=this,t=e.constructor;return L(new t(e),T(e)+1,t.rounding)},m.toNumber=function(){return+this},m.toPower=m.pow=function(e){var t,r,n,a,s,u,c=this,h=c.constructor,f=+(e=new h(e));if(!e.s)return new h(i);if(!(c=new h(c)).s){if(e.s<1)throw Error(l+"Infinity");return c}if(c.eq(i))return c;if(n=h.precision,e.eq(i))return L(c,n);if(u=(t=e.e)>=(r=e.d.length-1),s=c.s,u){if((r=f<0?-f:f)<=9007199254740991){for(a=new h(i),t=Math.ceil(n/7+4),o=!1;r%2&&_((a=a.times(c)).d,t),0!==(r=d(r/2));)_((c=c.times(c)).d,t);return o=!0,e.s<0?new h(i).div(a):L(a,n)}}else if(s<0)throw Error(l+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,c.s=1,o=!1,a=e.times(k(c,n+12)),o=!0,(a=S(a)).s=s,a},m.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?n=R(i,(r=T(i))<=s.toExpNeg||r>=s.toExpPos):(v(e,1,a),void 0===t?t=s.rounding:v(t,0,8),n=R(i=L(new s(i),e,t),e<=(r=T(i))||r<=s.toExpNeg,e)),n},m.toSignificantDigits=m.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(v(e,1,a),void 0===t?t=r.rounding:v(t,0,8)),L(new r(this),e,t)},m.toString=m.valueOf=m.val=m.toJSON=function(){var e=this,t=T(e),r=e.constructor;return R(e,t<=r.toExpNeg||t>=r.toExpPos)};var E=function(){function e(e,t){var r,n=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+n,e[i]=r%p|0,n=r/p|0;return n&&e.unshift(n),e}function t(e,t,r,n){var i,a;if(r!=n)a=r>n?1:-1;else for(i=a=0;i<r;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*p+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,a,s){var o,u,c,d,h,f,g,m,y,v,b,E,S,w,A,k,x,P,R=n.constructor,_=n.s==i.s?1:-1,O=n.d,I=i.d;if(!n.s)return new R(n);if(!i.s)throw Error(l+"Division by zero");for(u=n.e-i.e,x=I.length,A=O.length,m=(g=new R(_)).d=[],c=0;I[c]==(O[c]||0);)++c;if(I[c]>(O[c]||0)&&--u,(E=null==a?a=R.precision:s?a+(T(n)-T(i))+1:a)<0)return new R(0);if(E=E/7+2|0,c=0,1==x)for(d=0,I=I[0],E++;(c<A||d)&&E--;c++)S=d*p+(O[c]||0),m[c]=S/I|0,d=S%I|0;else{for((d=p/(I[0]+1)|0)>1&&(I=e(I,d),O=e(O,d),x=I.length,A=O.length),w=x,v=(y=O.slice(0,x)).length;v<x;)y[v++]=0;(P=I.slice()).unshift(0),k=I[0],I[1]>=p/2&&++k;do{d=0,(o=t(I,y,x,v))<0?(b=y[0],x!=v&&(b=b*p+(y[1]||0)),(d=b/k|0)>1?(d>=p&&(d=p-1),1==(o=t(h=e(I,d),y,f=h.length,v=y.length))&&(d--,r(h,x<f?P:I,f))):(0==d&&(o=d=1),h=I.slice()),(f=h.length)<v&&h.unshift(0),r(y,h,v),-1==o&&(o=t(I,y,x,v=y.length))<1&&(d++,r(y,x<v?P:I,v)),v=y.length):0===o&&(d++,y=[0]),m[c++]=d,o&&y[0]?y[v++]=O[w]||0:(y=[O[w]],v=1)}while((w++<A||void 0!==y[0])&&E--)}return m[0]||m.shift(),g.e=u,L(g,s?a+T(g)+1:a)}}();function S(e,t){var r,n,a,s,l,u=0,d=0,f=e.constructor,p=f.precision;if(T(e)>16)throw Error(c+T(e));if(!e.s)return new f(i);for(null==t?(o=!1,l=p):l=t,s=new f(.03125);e.abs().gte(.1);)e=e.times(s),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,r=n=a=new f(i),f.precision=l;;){if(n=L(n.times(e),l),r=r.times(++u),b((s=a.plus(E(n,r,l))).d).slice(0,l)===b(a.d).slice(0,l)){for(;d--;)a=L(a.times(a),l);return f.precision=p,null==t?(o=!0,L(a,p)):a}a=s}}function T(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function w(e,t,r){if(t>e.LN10.sd())throw o=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return L(new e(e.LN10),t)}function A(e){for(var t="";e--;)t+="0";return t}function k(e,t){var r,n,a,s,u,c,d,h,f,p=1,g=e,m=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(l+(g.s?"NaN":"-Infinity"));if(g.eq(i))return new y(0);if(null==t?(o=!1,h=v):h=t,g.eq(10))return null==t&&(o=!0),w(y,h);if(h+=10,y.precision=h,n=(r=b(m)).charAt(0),s=T(g),!(Math.abs(s)<15e14))return d=w(y,h+2,v).times(s+""),g=k(new y(n+"."+r.slice(1)),h-10).plus(d),y.precision=v,null==t?(o=!0,L(g,v)):g;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=b((g=g.times(e)).d)).charAt(0),p++;for(s=T(g),n>1?(g=new y("0."+r),s++):g=new y(n+"."+r.slice(1)),c=u=g=E(g.minus(i),g.plus(i),h),f=L(g.times(g),h),a=3;;){if(u=L(u.times(f),h),b((d=c.plus(E(u,new y(a),h))).d).slice(0,h)===b(c.d).slice(0,h))return c=c.times(2),0!==s&&(c=c.plus(w(y,h+2,v).times(s+""))),c=E(c,new y(p),h),y.precision=v,null==t?(o=!0,L(c,v)):c;c=d,a+=2}}function x(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(n,i)){if(i-=n,r=r-n-1,e.e=d(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=7;n<i;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(c+r)}else e.s=0,e.e=0,e.d=[0];return e}function L(e,t,r){var n,i,a,s,l,u,f,m,y=e.d;for(s=1,a=y[0];a>=10;a/=10)s++;if((n=t-s)<0)n+=7,i=t,f=y[m=0];else{if((m=Math.ceil((n+1)/7))>=(a=y.length))return e;for(f=a=y[m],s=1;a>=10;a/=10)s++;i=(n%=7)-7+s}if(void 0!==r&&(l=f/(a=h(10,s-i-1))%10|0,u=t<0||void 0!==y[m+1]||f%a,u=r<4?(l||u)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||u||6==r&&(n>0?i>0?f/h(10,s-i):0:y[m-1])%10&1||r==(e.s<0?8:7))),t<1||!y[0])return u?(a=T(e),y.length=1,t=t-a-1,y[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==n?(y.length=m,a=1,m--):(y.length=m+1,a=h(10,7-n),y[m]=i>0?(f/h(10,s-i)%h(10,i)|0)*a:0),u)for(;;){if(0==m){(y[0]+=a)==p&&(y[0]=1,++e.e);break}if(y[m]+=a,y[m]!=p)break;y[m--]=0,a=1}for(n=y.length;0===y[--n];)y.pop();if(o&&(e.e>g||e.e<-g))throw Error(c+T(e));return e}function P(e,t){var r,n,i,a,s,l,u,c,d,h,f=e.constructor,g=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),o?L(t,g):t;if(u=e.d,h=t.d,n=t.e,c=e.e,u=u.slice(),s=c-n){for((d=s<0)?(r=u,s=-s,l=h.length):(r=h,n=c,l=u.length),s>(i=Math.max(Math.ceil(g/7),l)+2)&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for((d=(i=u.length)<(l=h.length))&&(l=i),i=0;i<l;i++)if(u[i]!=h[i]){d=u[i]<h[i];break}s=0}for(d&&(r=u,u=h,h=r,t.s=-t.s),l=u.length,i=h.length-l;i>0;--i)u[l++]=0;for(i=h.length;i>s;){if(u[--i]<h[i]){for(a=i;a&&0===u[--a];)u[a]=p-1;--u[a],u[i]+=p}u[i]-=h[i]}for(;0===u[--l];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(t.d=u,t.e=n,o?L(t,g):t):new f(0)}function R(e,t,r){var n,i=T(e),a=b(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+A(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+A(-i-1)+a,r&&(n=r-s)>0&&(a+=A(n))):i>=s?(a+=A(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+A(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=A(n))),e.s<0?"-"+a:a}function _(e,t){if(e.length>t)return e.length=t,!0}function O(e){if(!e||"object"!=typeof e)throw Error(l+"Object expected");var t,r,n,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(n=e[r=i[t]])){if(!(d(n)===n&&n>=i[t+1]&&n<=i[t+2]))throw Error(u+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(u+r+": "+n);this[r]=new this(n)}return this}(s=function e(t){var r,n,i;function a(e){var t=this;if(!(t instanceof a))return new a(e);if(t.constructor=a,e instanceof a)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(u+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):x(t,e.toString())}if("string"!=typeof e)throw Error(u+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!f.test(e))throw Error(u+e);x(t,e)}if(a.prototype=m,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e,a.config=a.set=O,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return a.config(t),a}(s)).default=s.Decimal=s,i=new s(1),void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},8418:(e,t,r)=>{"use strict";r(5160)},8453:(e,t,r)=>{"use strict";r.d(t,{HS:()=>s,LF:()=>i});var n=r(5508),i=e=>e.chartData,a=(0,n.Mz)([i],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),s=(e,t,r,n)=>n?a(e):i(e)},8493:(e,t,r)=>{"use strict";var n=r(6540),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),i=n[0].inst,c=n[1];return o(function(){i.value=r,i.getSnapshot=t,u(i)&&c({inst:i})},[e,r,t]),s(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},8509:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e,t=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return r.test(e)}}},8805:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const i=e[n],a=t(i);r.has(a)||r.set(a,i)}return Array.from(r.values())}},8813:(e,t,r)=>{"use strict";function n(e){return Number.isFinite(e)}function i(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}r.d(t,{F:()=>i,H:()=>n})},8825:(e,t,r)=>{"use strict";r.d(t,{N:()=>je,l:()=>$e});var n=r(6540),i=r.t(n,2),a=r(4164),s=r(9705),o=r(8940),l=r(5448);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(null,arguments)}var c=e=>{var{cx:t,cy:r,r:i,className:s}=e,c=(0,a.$)("recharts-dot",s);return t===+t&&r===+r&&i===+i?n.createElement("circle",u({},(0,l.u)(e),(0,o._U)(e),{className:c,cx:t,cy:r,r:i})):null},d=r(6069),h=r(25),f=r.n(h),p=r(1706),g=r(4501),m=r(6470),y=r(9744),v=["valueAccessor"],b=["data","dataKey","clockWise","id","textBreakAll"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(null,arguments)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){w(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var k=e=>Array.isArray(e.value)?f()(e.value):e.value;function x(e){var{valueAccessor:t=k}=e,r=A(e,v),{data:i,dataKey:a,clockWise:s,id:o,textBreakAll:l}=r,u=A(r,b);return i&&i.length?n.createElement(d.W,{className:"recharts-label-list"},i.map((e,r)=>{var i=(0,y.uy)(a)?t(e,r):(0,m.kr)(e&&e.payload,a),c=(0,y.uy)(o)?{}:{id:"".concat(o,"-").concat(r)};return n.createElement(p.J,E({},(0,g.J9)(e,!0),u,c,{parentViewBox:e.parentViewBox,value:i,textBreakAll:l,viewBox:p.J.parseViewBox((0,y.uy)(s)?e:T(T({},e),{},{clockWise:s})),key:"label-".concat(r),index:r}))})):null}x.displayName="LabelList",x.renderCallByParent=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var{children:i}=e,a=(0,g.aS)(i,x).map((e,r)=>(0,n.cloneElement)(e,{data:t,key:"labelList-".concat(r)}));return r?[function(e,t){return e?!0===e?n.createElement(x,{key:"labelList-implicit",data:t}):n.isValidElement(e)||(0,p.Z)(e)?n.createElement(x,{key:"labelList-implicit",data:t,content:e}):"object"==typeof e?n.createElement(x,E({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t),...a]:a};var L=r(9938),P=r(9082),R=r(3032),_=r(6270);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){C(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var{points:t,mainColor:r,activeDot:i,itemDataKey:a}=e,s=(0,P.G)(R.A2),l=(0,_.EI)();if(null==t||null==l)return null;var u=t.find(e=>l.includes(e.payload));return(0,y.uy)(u)?null:(e=>{var{point:t,childIndex:r,mainColor:i,activeDot:a,dataKey:s}=e;if(!1===a||null==t.x||null==t.y)return null;var l,u=I(I({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:null!=i?i:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},(0,g.J9)(a,!1)),(0,o._U)(a));return l=(0,n.isValidElement)(a)?(0,n.cloneElement)(a,u):"function"==typeof a?a(u):n.createElement(c,u),n.createElement(d.W,{className:"recharts-active-dot"},l)})({point:u,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:i})}var M=r(4531),N=r(2070);function F(e){var{fn:t,args:r}=e,i=(0,P.j)(),a=(0,N.r)();return(0,n.useEffect)(()=>{if(!a){var e=t(r);return i((0,M.Ix)(e)),()=>{i((0,M.XB)(e))}}},[t,r,i,a]),null}var U=["children"],B={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},$=(0,n.createContext)(B);function j(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,U);return n.createElement($.Provider,{value:r},t)}var z=r(6118);function G(e,t){var r,n,i=(0,P.G)(t=>(0,z.Rl)(t,e)),a=(0,P.G)(e=>(0,z.sf)(e,t)),s=null!==(r=null==i?void 0:i.allowDataOverflow)&&void 0!==r?r:z.PU.allowDataOverflow,o=null!==(n=null==a?void 0:a.allowDataOverflow)&&void 0!==n?n:z.cd.allowDataOverflow;return{needClip:s||o,needClipX:s,needClipY:o}}function H(e){var{xAxisId:t,yAxisId:r,clipPathId:i}=e,a=(0,_.oM)(),{needClipX:s,needClipY:o,needClip:l}=G(t,r);if(!l)return null;var{x:u,y:c,width:d,height:h}=a;return n.createElement("clipPath",{id:"clipPath-".concat(i)},n.createElement("rect",{x:s?u:u-d/2,y:o?c:c-h/2,width:s?d:2*d,height:o?h:2*h}))}var K=r(9287),V=r(5508),W=r(8453),Y=(e,t,r,n)=>(0,z.Gx)(e,"xAxis",t,n),q=(e,t,r,n)=>(0,z.CR)(e,"xAxis",t,n),X=(e,t,r,n)=>(0,z.Gx)(e,"yAxis",r,n),Q=(e,t,r,n)=>(0,z.CR)(e,"yAxis",r,n),Z=(0,V.Mz)([K.fz,Y,X,q,Q],(e,t,r,n,i)=>(0,m._L)(e,"xAxis")?(0,m.Hj)(t,n,!1):(0,m.Hj)(r,i,!1));function J(e){return"line"===e.type}var ee=(0,V.Mz)([z.ld,(e,t,r,n,i)=>i],(e,t)=>e.filter(J).find(e=>e.id===t)),te=(0,V.Mz)([K.fz,Y,X,q,Q,ee,Z,W.HS],(e,t,r,n,i,a,s,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:c}=o;if(null!=a&&null!=t&&null!=r&&null!=n&&null!=i&&0!==n.length&&0!==i.length&&null!=s){var d,{dataKey:h,data:f}=a;if(null!=(d=null!=f&&f.length>0?f:null==l?void 0:l.slice(u,c+1)))return $e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:h,bandSize:s,displayedData:d})}}),re=r(1283),ne=()=>{};function ie(e){var{legendPayload:t}=e,r=(0,P.j)(),i=(0,N.r)();return(0,n.useEffect)(()=>i?ne:(r((0,re.Lx)(t)),()=>{r((0,re.u3)(t))}),[r,i,t]),null}var ae,se=r(7404),oe=null!==(ae=i["useId".toString()])&&void 0!==ae?ae:()=>{var[e]=n.useState(()=>(0,y.NF)("uid-"));return e},le=(0,n.createContext)(void 0),ue=e=>{var t,r,i,{id:a,type:s,children:o}=e,l=(t="recharts-".concat(s),r=a,i=oe(),r||(t?"".concat(t,"-").concat(i):i));return n.createElement(le.Provider,{value:l},o(l))},ce=r(2617);function de(e){var t=(0,P.j)(),r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{null===r.current?t((0,ce.g5)(e)):r.current!==e&&t((0,ce.ZF)({prev:r.current,next:e})),r.current=e},[t,e]),(0,n.useEffect)(()=>()=>{r.current&&(t((0,ce.Vi)(r.current)),r.current=null)},[t]),null}function he(){}var fe=r(830),pe=r(1056),ge=r(3014),me={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},ye={t:0},ve={t:1};function be(e){var t=(0,se.e)(e,me),{isActive:r,canBegin:i,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:u,children:c}=t,d=(0,ge.L)("JavascriptAnimate",t.animationManager),[h,f]=(0,n.useState)(r?ye:ve),p=(0,n.useRef)(null);return(0,n.useEffect)(()=>{r||f(ve)},[r]),(0,n.useEffect)(()=>{if(!r||!i)return he;var e=(0,fe.A)(ye,ve,(0,pe.yl)(s),a,f,d.getTimeoutController());return d.start([u,o,()=>{p.current=e()},a,l]),()=>{d.stop(),p.current&&p.current(),l()}},[r,i,a,s,o,u,l,d]),c(h.t)}var Ee=["id"],Se=["type","layout","connectNulls","needClip"],Te=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach(function(t){ke(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ke(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Le.apply(null,arguments)}var Pe=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:(0,m.uM)(r,t),payload:e}]};function Re(e){var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:(0,m.uM)(s,t),hide:o,type:e.tooltipType,color:e.stroke,unit:l}}}var _e=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Oe(e,t){for(var r=e.length%2!=0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}function Ie(e){var{clipPathId:t,points:r,props:i}=e,{dot:s,dataKey:o,needClip:u}=i;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(r,s))return null;var{id:h}=i,f=xe(i,Ee),p=(0,g.y$)(s),m=(0,l.u)(f),y=(0,g.J9)(s,!0),v=r.map((e,t)=>{var i=Ae(Ae(Ae({key:"dot-".concat(t),r:3},m),y),{},{index:t,cx:e.x,cy:e.y,dataKey:o,value:e.value,payload:e.payload,points:r});return function(e,t){var r;if(n.isValidElement(e))r=n.cloneElement(e,t);else if("function"==typeof e)r=e(t);else{var i=(0,a.$)("recharts-line-dot","boolean"!=typeof e?e.className:"");r=n.createElement(c,Le({},t,{className:i}))}return r}(s,i)}),b={clipPath:u?"url(#clipPath-".concat(p?"":"dots-").concat(t,")"):void 0};return n.createElement(d.W,Le({className:"recharts-line-dots",key:"dots"},b),v)}function Ce(e){var{clipPathId:t,pathRef:r,points:i,strokeDasharray:a,props:o,showLabels:l}=e,{type:u,layout:c,connectNulls:d,needClip:h}=o,f=xe(o,Se),p=Ae(Ae({},(0,g.J9)(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:i,type:u,layout:c,connectNulls:d,strokeDasharray:null!=a?a:o.strokeDasharray});return n.createElement(n.Fragment,null,(null==i?void 0:i.length)>1&&n.createElement(s.I,Le({},p,{pathRef:r})),n.createElement(Ie,{points:i,clipPathId:t,props:o}),l&&x.renderCallByParent(o,i))}function De(e){var{clipPathId:t,props:r,pathRef:i,previousPointsRef:a,longestAnimatedLengthRef:s}=e,{points:o,strokeDasharray:l,isAnimationActive:u,animationBegin:c,animationDuration:d,animationEasing:h,animateNewValues:f,width:p,height:g,onAnimationEnd:m,onAnimationStart:v}=r,b=a.current,E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",r=(0,n.useRef)((0,y.NF)(t)),i=(0,n.useRef)(e);return i.current!==e&&(r.current=(0,y.NF)(t),i.current=e),r.current}(r,"recharts-line-"),[S,T]=(0,n.useState)(!1),w=(0,n.useCallback)(()=>{"function"==typeof m&&m(),T(!1)},[m]),A=(0,n.useCallback)(()=>{"function"==typeof v&&v(),T(!0)},[v]),k=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}(i.current),x=s.current;return n.createElement(be,{begin:c,duration:d,isActive:u,easing:h,onAnimationEnd:w,onAnimationStart:A,key:E},e=>{var u,c=(0,y.GW)(x,k+x,e),d=Math.min(c,k);if(l){var h="".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e));u=((e,t,r)=>{var n=r.reduce((e,t)=>e+t);if(!n)return _e(t,e);for(var i=Math.floor(e/n),a=e%n,s=t-e,o=[],l=0,u=0;l<r.length;u+=r[l],++l)if(u+r[l]>a){o=[...r.slice(0,l),a-u];break}var c=o.length%2==0?[0,s]:[s];return[...Oe(r,i),...o,...c].map(e=>"".concat(e,"px")).join(", ")})(d,k,h)}else u=_e(k,d);if(b){var m=b.length/o.length,v=1===e?o:o.map((t,r)=>{var n=Math.floor(r*m);if(b[n]){var i=b[n];return Ae(Ae({},t),{},{x:(0,y.GW)(i.x,t.x,e),y:(0,y.GW)(i.y,t.y,e)})}return Ae(Ae({},t),{},f?{x:(0,y.GW)(2*p,t.x,e),y:(0,y.GW)(g/2,t.y,e)}:{x:t.x,y:t.y})});return a.current=v,n.createElement(Ce,{props:r,points:v,clipPathId:t,pathRef:i,showLabels:!S,strokeDasharray:u})}return e>0&&k>0&&(a.current=o,s.current=d),n.createElement(Ce,{props:r,points:o,clipPathId:t,pathRef:i,showLabels:!S,strokeDasharray:u})})}function Me(e){var{clipPathId:t,props:r}=e,{points:i,isAnimationActive:a}=r,s=(0,n.useRef)(null),o=(0,n.useRef)(0),l=(0,n.useRef)(null),u=s.current;return a&&i&&i.length&&u!==i?n.createElement(De,{props:r,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:o,pathRef:l}):n.createElement(Ce,{props:r,points:i,clipPathId:t,pathRef:l,showLabels:!0})}var Ne=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:(0,m.kr)(e.payload,t)});class Fe extends n.Component{render(){var e,{hide:t,dot:r,points:i,className:s,xAxisId:o,yAxisId:l,top:u,left:c,width:h,height:f,id:p,needClip:m}=this.props;if(t)return null;var y=(0,a.$)("recharts-line",s),v=p,{r:b=3,strokeWidth:E=2}=null!==(e=(0,g.J9)(r,!1))&&void 0!==e?e:{r:3,strokeWidth:2},S=(0,g.y$)(r),T=2*b+E;return n.createElement(n.Fragment,null,n.createElement(d.W,{className:y},m&&n.createElement("defs",null,n.createElement(H,{clipPathId:v,xAxisId:o,yAxisId:l}),!S&&n.createElement("clipPath",{id:"clipPath-dots-".concat(v)},n.createElement("rect",{x:c-T/2,y:u-T/2,width:h+T,height:f+T}))),n.createElement(Me,{props:this.props,clipPathId:v}),n.createElement(j,{xAxisId:o,yAxisId:l,data:i,dataPointFormatter:Ne,errorBarOffset:0},this.props.children)),n.createElement(D,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Ue={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!L.m.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Be(e){var t=(0,se.e)(e,Ue),{activeDot:r,animateNewValues:i,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:u,hide:c,isAnimationActive:d,label:h,legendType:f,xAxisId:p,yAxisId:g,id:m}=t,y=xe(t,Te),{needClip:v}=G(p,g),b=(0,_.oM)(),E=(0,K.WX)(),S=(0,N.r)(),T=(0,P.G)(e=>te(e,p,g,S,m));if("horizontal"!==E&&"vertical"!==E||null==T||null==b)return null;var{height:w,width:A,x:k,y:x}=b;return n.createElement(Fe,Le({},y,{id:m,connectNulls:l,dot:u,activeDot:r,animateNewValues:i,animationBegin:a,animationDuration:s,animationEasing:o,isAnimationActive:d,hide:c,label:h,legendType:f,xAxisId:p,yAxisId:g,points:T,layout:E,height:w,width:A,left:k,top:x,needClip:v}))}function $e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:l}=e;return l.map((e,l)=>{var u=(0,m.kr)(e,s);if("horizontal"===t)return{x:(0,m.nb)({axis:r,ticks:i,bandSize:o,entry:e,index:l}),y:(0,y.uy)(u)?null:n.scale(u),value:u,payload:e};var c=(0,y.uy)(u)?null:r.scale(u),d=(0,m.nb)({axis:n,ticks:a,bandSize:o,entry:e,index:l});return null==c||null==d?null:{x:c,y:d,value:u,payload:e}}).filter(Boolean)}function je(e){var t=(0,se.e)(e,Ue),r=(0,N.r)();return n.createElement(ue,{id:t.id,type:"line"},e=>n.createElement(n.Fragment,null,n.createElement(ie,{legendPayload:Pe(t)}),n.createElement(F,{fn:Re,args:t}),n.createElement(de,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),n.createElement(Be,Le({},t,{id:e}))))}je.displayName="Line"},8861:(e,t,r)=>{"use strict";r.d(t,{W:()=>a,h:()=>i});var n=r(5508),i=(0,n.Mz)(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),a=(0,n.Mz)(e=>e.cartesianAxis.yAxis,e=>Object.values(e))},8919:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1366);t.toNumber=function(e){return n.isSymbol(e)?NaN:Number(e)}},8940:(e,t,r)=>{"use strict";r.d(t,{VU:()=>s,XC:()=>l,_U:()=>o});var n=r(6540),i=r(8129),a=["points","pathLength"],s={svg:["viewBox","children"],polygon:a,polyline:a},o=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if((0,n.isValidElement)(e)&&(r=e.props),"object"!=typeof r&&"function"!=typeof r)return null;var a={};return Object.keys(r).forEach(e=>{(0,i.q)(e)&&(a[e]=t||(t=>r[e](r,t)))}),a},l=(e,t,r)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];(0,i.q)(a)&&"function"==typeof s&&(n||(n={}),n[a]=((e,t,r)=>n=>(e(t,r,n),null))(s,t,r))}),n}},8946:(e,t,r)=>{"use strict";function n(e){return function(){return e}}r.d(t,{A:()=>n})},9082:(e,t,r)=>{"use strict";r.d(t,{G:()=>d,j:()=>o});var n=r(9242),i=r(6540),a=r(2649),s=e=>e,o=()=>{var e=(0,i.useContext)(a.E);return e?e.store.dispatch:s},l=()=>{},u=()=>l,c=(e,t)=>e===t;function d(e){var t=(0,i.useContext)(a.E);return(0,n.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:u,t?t.store.getState:l,t?t.store.getState:l,t?e:l,c)}},9107:(e,t,r)=>{"use strict";r.d(t,{d:()=>C});var n=r(6540),i=r(6634),a=r(9744),s=r(6470),o=r(3462),l=r(8026),u=r(9287),c=r(6118),d=r(9082),h=r(2070),f=r(7404),p=r(5448),g=["x1","y1","x2","y2","key"],m=["offset"],y=["xAxisId","yAxisId"],v=["xAxisId","yAxisId"];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T.apply(null,arguments)}function w(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var A=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:r,x:i,y:a,width:s,height:o,ry:l}=e;return n.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function k(e,t){var r;if(n.isValidElement(e))r=n.cloneElement(e,t);else if("function"==typeof e)r=e(t);else{var{x1:i,y1:a,x2:s,y2:o,key:l}=t,u=w(t,g),c=(0,p.u)(u),{offset:d}=c,h=w(c,m);r=n.createElement("line",T({},h,{x1:i,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function x(e){var{x:t,width:r,horizontal:i=!0,horizontalPoints:a}=e;if(!i||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=w(e,y),u=a.map((e,n)=>{var a=E(E({},l),{},{x1:t,y1:e,x2:t+r,y2:e,key:"line-".concat(n),index:n});return k(i,a)});return n.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function L(e){var{y:t,height:r,vertical:i=!0,verticalPoints:a}=e;if(!i||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=e,l=w(e,v),u=a.map((e,n)=>{var a=E(E({},l),{},{x1:e,y1:t,x2:e,y2:t+r,key:"line-".concat(n),index:n});return k(i,a)});return n.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function P(e){var{horizontalFill:t,fillOpacity:r,x:i,y:a,width:s,height:o,horizontalPoints:l,horizontal:u=!0}=e;if(!u||!t||!t.length)return null;var c=l.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var d=c.map((e,l)=>{var u=c[l+1]?c[l+1]-e:a+o-e;if(u<=0)return null;var d=l%t.length;return n.createElement("rect",{key:"react-".concat(l),y:e,x:i,height:u,width:s,stroke:"none",fill:t[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return n.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function R(e){var{vertical:t=!0,verticalFill:r,fillOpacity:i,x:a,y:s,width:o,height:l,verticalPoints:u}=e;if(!t||!r||!r.length)return null;var c=u.map(e=>Math.round(e+a-a)).sort((e,t)=>e-t);a!==c[0]&&c.unshift(0);var d=c.map((e,t)=>{var u=c[t+1]?c[t+1]-e:a+o-e;if(u<=0)return null;var d=t%r.length;return n.createElement("rect",{key:"react-".concat(t),x:e,y:s,width:u,height:l,stroke:"none",fill:r[d],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return n.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var _=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return(0,s.PW)((0,o.f)(E(E(E({},l.u.defaultProps),r),{},{ticks:(0,s.Rh)(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},O=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return(0,s.PW)((0,o.f)(E(E(E({},l.u.defaultProps),r),{},{ticks:(0,s.Rh)(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},I={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function C(e){var t=(0,u.yi)(),r=(0,u.rY)(),s=(0,u.W7)(),o=E(E({},(0,f.e)(e,I)),{},{x:(0,a.Et)(e.x)?e.x:s.left,y:(0,a.Et)(e.y)?e.y:s.top,width:(0,a.Et)(e.width)?e.width:s.width,height:(0,a.Et)(e.height)?e.height:s.height}),{xAxisId:l,yAxisId:p,x:g,y:m,width:y,height:v,syncWithTicks:b,horizontalValues:S,verticalValues:w}=o,k=(0,h.r)(),C=(0,d.G)(e=>(0,c.ZB)(e,"xAxis",l,k)),D=(0,d.G)(e=>(0,c.ZB)(e,"yAxis",p,k));if(!(0,a.Et)(y)||y<=0||!(0,a.Et)(v)||v<=0||!(0,a.Et)(g)||g!==+g||!(0,a.Et)(m)||m!==+m)return null;var M=o.verticalCoordinatesGenerator||_,N=o.horizontalCoordinatesGenerator||O,{horizontalPoints:F,verticalPoints:U}=o;if(!(F&&F.length||"function"!=typeof N)){var B=S&&S.length,$=N({yAxis:D?E(E({},D),{},{ticks:B?S:D.ticks}):void 0,width:t,height:r,offset:s},!!B||b);(0,i.R)(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(F=$)}if(!(U&&U.length||"function"!=typeof M)){var j=w&&w.length,z=M({xAxis:C?E(E({},C),{},{ticks:j?w:C.ticks}):void 0,width:t,height:r,offset:s},!!j||b);(0,i.R)(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(U=z)}return n.createElement("g",{className:"recharts-cartesian-grid"},n.createElement(A,{fill:o.fill,fillOpacity:o.fillOpacity,x:o.x,y:o.y,width:o.width,height:o.height,ry:o.ry}),n.createElement(P,T({},o,{horizontalPoints:F})),n.createElement(R,T({},o,{verticalPoints:U})),n.createElement(x,T({},o,{offset:s,horizontalPoints:F,xAxis:C,yAxis:D})),n.createElement(L,T({},o,{offset:s,verticalPoints:U,xAxis:C,yAxis:D})))}C.displayName="CartesianGrid"},9181:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},9184:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},9195:(e,t,r)=>{"use strict";function n(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}r.d(t,{v:()=>n})},9242:(e,t,r)=>{"use strict";e.exports=r(2162)},9287:(e,t,r)=>{"use strict";r.d(t,{Kp:()=>p,W7:()=>c,WX:()=>m,fz:()=>g,rY:()=>h,sk:()=>l,yi:()=>d}),r(6540);var n=r(9082),i=r(6189),a=r(5180),s=r(2070),o=r(6461),l=()=>{var e,t=(0,s.r)(),r=(0,n.G)(i.Ds),a=(0,n.G)(o.U),l=null===(e=(0,n.G)(o.C))||void 0===e?void 0:e.padding;return t&&a&&l?{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}:r},u={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},c=()=>{var e;return null!==(e=(0,n.G)(i.HZ))&&void 0!==e?e:u},d=()=>(0,n.G)(a.Lp),h=()=>(0,n.G)(a.A$),f={top:0,right:0,bottom:0,left:0},p=()=>{var e;return null!==(e=(0,n.G)(e=>e.layout.margin))&&void 0!==e?e:f},g=e=>e.layout.layoutType,m=()=>(0,n.G)(g)},9303:(e,t,r)=>{"use strict";r.d(t,{u:()=>l});var n=r(6540),i=r(4164),a=r(4501),s=["children","width","height","viewBox","className","style","title","desc"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(null,arguments)}var l=(0,n.forwardRef)((e,t)=>{var{children:r,width:l,height:u,viewBox:c,className:d,style:h,title:f,desc:p}=e,g=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,s),m=c||{width:l,height:u,x:0,y:0},y=(0,i.$)("recharts-surface",d);return n.createElement("svg",o({},(0,a.J9)(g,!0,"svg"),{className:y,width:l,height:u,style:h,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),n.createElement("title",null,f),n.createElement("desc",null,p),r)})},9341:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(993),i=r(6502);t.isEqual=function(e,t){return n.isEqualWith(e,t,i.noop)}},9467:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3964),i=r(9184);t.cloneDeepWith=function(e,t){return n.cloneDeepWith(e,(r,a,s,o)=>{const l=t?.(r,a,s,o);if(void 0!==l)return l;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case i.numberTag:case i.stringTag:case i.booleanTag:{const t=new e.constructor(e?.valueOf());return n.copyProperties(t,e),t}case i.argumentsTag:{const t={};return n.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},9495:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var n=(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t}},9531:(e,t,r)=>{"use strict";function n(e){return null!=e.stackId&&null!=e.dataKey}r.d(t,{g:()=>n})},9538:(e,t,r)=>{"use strict";r.d(t,{Be:()=>E,Cv:()=>x,D0:()=>P,Gl:()=>S,Dc:()=>L});var n=r(5508),i=r(5180),a=r(6189),s=r(4040),o=r(9744),l="auto",u=!0,c=!1,d=!0,h="auto",f=!0,p=r(9495),g=r(9287),m={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:l,tick:u,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},y={allowDataOverflow:c,allowDecimals:!1,allowDuplicatedCategory:d,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:h,tick:f,tickCount:5,ticks:void 0,type:"number",unit:void 0},v={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:l,tick:u,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},b={allowDataOverflow:c,allowDecimals:!1,allowDuplicatedCategory:d,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:h,tick:f,tickCount:5,ticks:void 0,type:"category",unit:void 0},E=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?v:m,S=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?b:y,T=e=>e.polarOptions,w=(0,n.Mz)([i.Lp,i.A$,a.HZ],s.lY),A=(0,n.Mz)([T,w],(e,t)=>{if(null!=e)return(0,o.F4)(e.innerRadius,t,0)}),k=(0,n.Mz)([T,w],(e,t)=>{if(null!=e)return(0,o.F4)(e.outerRadius,t,.8*t)}),x=(0,n.Mz)([T],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]}),L=((0,n.Mz)([E,x],p.I),(0,n.Mz)([w,A,k],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]})),P=((0,n.Mz)([S,L],p.I),(0,n.Mz)([g.fz,T,A,k,i.Lp,i.A$],(e,t,r,n,i,a)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:s,cy:l,startAngle:u,endAngle:c}=t;return{cx:(0,o.F4)(s,i,i/2),cy:(0,o.F4)(l,a,a/2),innerRadius:r,outerRadius:n,startAngle:u,endAngle:c,clockWise:!1}}}))},9596:(e,t,r)=>{"use strict";r.d(t,{N:()=>u});var n=r(9744),i=r(6470),a=r(9195);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=(e,t,r,s,l,u,c)=>{if(null!=t&&null!=u){var{chartData:d,computedData:h,dataStartIndex:f,dataEndIndex:p}=r;return e.reduce((e,r)=>{var g,m,y,{dataDefinedOnItem:v,settings:b}=r,E=function(e,t){return null!=e?e:t}(v,d),S=Array.isArray(E)?(0,a.v)(E,f,p):E,T=null!==(g=null==b?void 0:b.dataKey)&&void 0!==g?g:null==s?void 0:s.dataKey,w=null==b?void 0:b.nameKey;return m=null!=s&&s.dataKey&&Array.isArray(S)&&!Array.isArray(S[0])&&"axis"===c?(0,n.eP)(S,s.dataKey,l):u(S,t,h,w),Array.isArray(m)?m.forEach(t=>{var r=o(o({},b),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push((0,i.GF)({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:(0,i.kr)(t.payload,t.dataKey),name:t.name}))}):e.push((0,i.GF)({tooltipEntrySettings:b,dataKey:T,payload:m,value:(0,i.kr)(m,T),name:null!==(y=(0,i.kr)(m,w))&&void 0!==y?y:null==b?void 0:b.name})),e},[])}}},9705:(e,t,r)=>{"use strict";r.d(t,{I:()=>G});var n=r(6540);function i(){}function a(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function s(e){this._context=e}function o(e){this._context=e}function l(e){this._context=e}s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:a(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:a(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},o.prototype={areaStart:i,areaEnd:i,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:a(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:a(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class u{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function c(e){this._context=e}function d(e){this._context=e}function h(e){return new d(e)}function f(e){return e<0?-1:1}function p(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(f(a)+f(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function g(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function m(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function y(e){this._context=e}function v(e){this._context=new b(e)}function b(e){this._context=e}function E(e){this._context=e}function S(e){var t,r,n=e.length-1,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function T(e,t){this._context=e,this._t=t}c.prototype={areaStart:i,areaEnd:i,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:m(this,this._t0,g(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,m(this,g(this,r=p(this,e,t)),r);break;default:m(this,this._t0,r=p(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(v.prototype=Object.create(y.prototype)).point=function(e,t){y.prototype.point.call(this,t,e)},b.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}},E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=S(e),i=S(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var w=r(5917),A=r(8946),k=r(1509);function x(e){return e[0]}function L(e){return e[1]}function P(e,t){var r=(0,A.A)(!0),n=null,i=h,a=null,s=(0,k.i)(o);function o(o){var l,u,c,d=(o=(0,w.A)(o)).length,h=!1;for(null==n&&(a=i(c=s())),l=0;l<=d;++l)!(l<d&&r(u=o[l],l,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(u,l,o),+t(u,l,o));if(c)return a=null,c+""||null}return e="function"==typeof e?e:void 0===e?x:(0,A.A)(e),t="function"==typeof t?t:void 0===t?L:(0,A.A)(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,A.A)(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:(0,A.A)(+e),o):t},o.defined=function(e){return arguments.length?(r="function"==typeof e?e:(0,A.A)(!!e),o):r},o.curve=function(e){return arguments.length?(i=e,null!=n&&(a=i(n)),o):i},o.context=function(e){return arguments.length?(null==e?n=a=null:a=i(n=e),o):n},o}function R(e,t,r){var n=null,i=(0,A.A)(!0),a=null,s=h,o=null,l=(0,k.i)(u);function u(u){var c,d,h,f,p,g=(u=(0,w.A)(u)).length,m=!1,y=new Array(g),v=new Array(g);for(null==a&&(o=s(p=l())),c=0;c<=g;++c){if(!(c<g&&i(f=u[c],c,u))===m)if(m=!m)d=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=c-1;h>=d;--h)o.point(y[h],v[h]);o.lineEnd(),o.areaEnd()}m&&(y[c]=+e(f,c,u),v[c]=+t(f,c,u),o.point(n?+n(f,c,u):y[c],r?+r(f,c,u):v[c]))}if(p)return o=null,p+""||null}function c(){return P().defined(i).curve(s).context(a)}return e="function"==typeof e?e:void 0===e?x:(0,A.A)(+e),t="function"==typeof t?t:void 0===t?(0,A.A)(0):(0,A.A)(+t),r="function"==typeof r?r:void 0===r?L:(0,A.A)(+r),u.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,A.A)(+t),n=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:(0,A.A)(+t),u):e},u.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:(0,A.A)(+e),u):n},u.y=function(e){return arguments.length?(t="function"==typeof e?e:(0,A.A)(+e),r=null,u):t},u.y0=function(e){return arguments.length?(t="function"==typeof e?e:(0,A.A)(+e),u):t},u.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:(0,A.A)(+e),u):r},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(r)},u.lineX1=function(){return c().x(n).y(t)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:(0,A.A)(!!e),u):i},u.curve=function(e){return arguments.length?(s=e,null!=a&&(o=s(a)),u):s},u.context=function(e){return arguments.length?(null==e?a=o=null:o=s(a=e),u):a},u}var _=r(4164),O=r(8940),I=r(9744),C=r(8813),D=r(5448);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(null,arguments)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){U(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function U(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B={curveBasisClosed:function(e){return new o(e)},curveBasisOpen:function(e){return new l(e)},curveBasis:function(e){return new s(e)},curveBumpX:function(e){return new u(e,!0)},curveBumpY:function(e){return new u(e,!1)},curveLinearClosed:function(e){return new c(e)},curveLinear:h,curveMonotoneX:function(e){return new y(e)},curveMonotoneY:function(e){return new v(e)},curveNatural:function(e){return new E(e)},curveStep:function(e){return new T(e,.5)},curveStepAfter:function(e){return new T(e,1)},curveStepBefore:function(e){return new T(e,0)}},$=e=>(0,C.H)(e.x)&&(0,C.H)(e.y),j=e=>e.x,z=e=>e.y,G=e=>{var{className:t,points:r,path:i,pathRef:a}=e;if(!(r&&r.length||i))return null;var s=r&&r.length?(e=>{var t,{type:r="linear",points:n=[],baseLine:i,layout:a,connectNulls:s=!1}=e,o=((e,t)=>{if("function"==typeof e)return e;var r="curve".concat((0,I.Zb)(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?B[r]||h:B["".concat(r).concat("vertical"===t?"Y":"X")]})(r,a),l=s?n.filter($):n;if(Array.isArray(i)){var u=s?i.filter(e=>$(e)):i,c=l.map((e,t)=>F(F({},e),{},{base:u[t]}));return(t="vertical"===a?R().y(z).x1(j).x0(e=>e.base.x):R().x(j).y1(z).y0(e=>e.base.y)).defined($).curve(o),t(c)}return(t="vertical"===a&&(0,I.Et)(i)?R().y(z).x1(j).x0(i):(0,I.Et)(i)?R().x(j).y1(z).y0(i):P().x(j).y(z)).defined($).curve(o),t(l)})(e):i;return n.createElement("path",M({},(0,D.u)(e),(0,O._U)(e),{className:(0,_.$)("recharts-curve",t),d:null===s?void 0:s,ref:a}))}},9744:(e,t,r)=>{"use strict";r.d(t,{CG:()=>f,Et:()=>l,F4:()=>h,GW:()=>p,M8:()=>s,NF:()=>d,Zb:()=>y,_3:()=>o,eP:()=>g,sA:()=>a,uy:()=>m,vh:()=>u});var n=r(305),i=r.n(n),a=e=>0===e?0:e>0?1:-1,s=e=>"number"==typeof e&&e!=+e,o=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,l=e=>("number"==typeof e||e instanceof Number)&&!s(e),u=e=>l(e)||"string"==typeof e,c=0,d=e=>{var t=++c;return"".concat(e||"").concat(t)},h=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!l(e)&&"string"!=typeof e)return n;if(o(e)){if(null==t)return n;var a=e.indexOf("%");r=t*parseFloat(e.slice(0,a))/100}else r=+e;return s(r)&&(r=n),i&&null!=t&&r>t&&(r=t),r},f=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1};function p(e,t,r){return l(e)&&l(t)?e+r*(t-e):t}function g(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"==typeof t?t(e):i()(e,t))===r)}var m=e=>null==e,y=e=>m(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))},9799:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(1081),i=r.n(n);function a(e,t,r){return!0===t?i()(e,r):"function"==typeof t?i()(e,t):e}},9809:(e,t,r)=>{"use strict";r.d(t,{i:()=>o});var n=r(4531);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=(e,t,r,i)=>{if(null==t)return n.k_;var s=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==s)return n.k_;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var o=!0===e.settings.active;if(null!=s.index){if(o)return a(a({},s),{},{active:!0})}else if(null!=i)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return a(a({},n.k_),{},{coordinate:s.coordinate})}},9869:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}function v(){}function b(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var E=b.prototype=new v;E.constructor=b,g(E,y.prototype),E.isPureReactComponent=!0;var S=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function A(e,t,n,i,a,s){return n=s.ref,{$$typeof:r,type:e,key:t,ref:void 0!==n?n:null,props:s}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var x=/\/+/g;function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36);var r,n}function P(){}function R(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(o){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0;break;case h:return R((c=e._init)(e._payload),t,i,a,s)}}if(c)return s=s(e),c=""===a?"."+L(e,0):a,S(s)?(i="",null!=c&&(i=c.replace(x,"$&/")+"/"),R(s,t,i,"",function(e){return e})):null!=s&&(k(s)&&(l=s,u=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(x,"$&/")+"/")+c,s=A(l.type,u,void 0,0,0,l.props)),t.push(s)),1;c=0;var d,p=""===a?".":a+":";if(S(e))for(var g=0;g<e.length;g++)c+=R(a=e[g],t,i,o=p+L(a,g),s);else if("function"==typeof(g=null===(d=e)||"object"!=typeof d?null:"function"==typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(a=e.next()).done;)c+=R(a=a.value,t,i,o=p+L(a,g++),s);else if("object"===o){if("function"==typeof e.then)return R(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(P,P):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function _(e,t,r){if(null==e)return e;var n=[],i=0;return R(e,n,"","",function(e){return t.call(r,e,i++)}),n}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function C(){}t.Children={map:_,forEach:function(e,t,r){_(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return T.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,r){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var n=g({},e.props),i=e.key;if(null!=t)for(a in t.ref,void 0!==t.key&&(i=""+t.key),t)!w.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(n[a]=t[a]);var a=arguments.length-2;if(1===a)n.children=r;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];n.children=s}return A(e.type,i,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,r){var n,i={},a=null;if(null!=t)for(n in void 0!==t.key&&(a=""+t.key),t)w.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(i[n]=t[n]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===i[n]&&(i[n]=s[n]);return A(e,a,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.T,r={};T.T=r;try{var n=e(),i=T.S;null!==i&&i(r,n),"object"==typeof n&&null!==n&&"function"==typeof n.then&&n.then(C,I)}catch(e){I(e)}finally{T.T=t}},t.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},t.use=function(e){return T.H.use(e)},t.useActionState=function(e,t,r){return T.H.useActionState(e,t,r)},t.useCallback=function(e,t){return T.H.useCallback(e,t)},t.useContext=function(e){return T.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return T.H.useDeferredValue(e,t)},t.useEffect=function(e,t,r){var n=T.H;if("function"==typeof r)throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)},t.useId=function(){return T.H.useId()},t.useImperativeHandle=function(e,t,r){return T.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return T.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.H.useMemo(e,t)},t.useOptimistic=function(e,t){return T.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return T.H.useReducer(e,t,r)},t.useRef=function(e){return T.H.useRef(e)},t.useState=function(e){return T.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return T.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return T.H.useTransition()},t.version="19.1.0"},9888:(e,t,r)=>{"use strict";e.exports=r(8493)},9938:(e,t,r)=>{"use strict";r.d(t,{m:()=>n});var n={isSsr:!("undefined"!=typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout)}},9982:(e,t,r)=>{"use strict";e.exports=r(4477)}}]);